function checkEnterKey(a){var b;return a.which?b=a.which:b=a.keyCode,b===13?!0:!1}function cookieEnabled(){var a;if(typeof navigator.cookieEnabled=="boolean"&&navigator.cookieEnabled)return navigator.cookieEnabled;a=0;while(document.cookie.indexOf("cookieEnabled-"+a)!==-1)a+=1;return document.cookie="cookieEnabled-"+a,document.cookie.indexOf("cookieEnabled-"+a)!==-1?!0:!1}function evilEval(content){return eval(content)}function eyeParam(a,b,c){return a=a+"",b=b+"",c||(a=htmlspecialchars(a),b=htmlspecialchars(b)),"<"+a+">"+b+"</"+a+">"}function fixPNG(a,b){IEversion&&IEversion<7&&(a.src||(a=xGetElementById(a)),a.src.substr(a.src.length-4).toLowerCase()===".png"&&a.src.substr(a.src.length-24).toLowerCase()!=="apps/eyex/gfx/spacer.gif"&&(b||(b="scale"),a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"', sizingMethod='"+b+"')",a.src="index.php?extern=apps/eyeX/gfx/spacer.gif"))}function getArrayArg(a){var b,c,d,e,f,g=a.split('""');for(b=0;b<g.length;b+=1){e=g[b].replace(/\\\"/,'"'),e=e.replace(/\\\'/,"'"),c=g[b];while(e!==c)c=e,e=e.replace(/\\\"/,'"'),e=e.replace(/\\\'/,"'");g[b]=e}d=[],b=0;for(f in g)g.hasOwnProperty(f)&&(d[b]=g[f],b+=1);return d}function printToTty(a,b){var c=document.getElementById(a+"_tty");if(!c)return!1;c.tagName==="DIV"?(c.appendChild(document.createTextNode(b)),c.appendChild(document.createElement("br"))):c.tagName==="INPUT"&&(c.value+=b,c.value+="\n")}function raiseZIndex(a){return zindex+=a,zindex}function setWallpaper(a,b,c,d){var e=document.getElementById("eyeWallpaper");e.style.backgroundImage="url('"+a+"')",b?e.style.backgroundRepeat="repeat":e.style.backgroundRepeat="no-repeat",c?e.style.backgroundPosition="center":e.style.backgroundPosition="left top",d?e.style.backgroundColor=d:e.style.backgroundColor="transparent"}function updateOpacity(a,b,c,d,e){var f,g;d=Math.round(d/100),f=0;if(b>c){for(g=b;g>=c;g-=1)setTimeout("updateOpacityOnce("+g+", '"+a+"');",f*d),f+=1;e&&setTimeout(e,f*d)}else if(b<c){for(g=b;g<=c;g+=1)setTimeout("updateOpacityOnce("+g+", '"+a+"');",f*d),f+=1;e&&setTimeout(e,f*d)}}function updateOpacityOnce(a,b){var c=xGetElementById(b);c.style.opacity=a/100,c.style.filter="alpha(opacity="+a+")",a?c.style.display==="none"&&(c.style.display="block"):c.style.display="none"}function addClickHandler(a,b){EventHandler.Add("click",a,b)}function addFriendClick(a,b){EventHandler.AddFriend("click",a,b)}function delClickHandler(a){EventHandler.Remove("click",a)}function noviewLoading(){return loadingRequests<=0&&(loadingRequests=0,navigator.appVersion.indexOf("Mac")!==-1?oCursor.style.display="none":oApps.style.cursor="auto"),!0}function notifyEndOfLoadingRequest(){return!ios&&!android&&!windows_phone&&(loadingRequests-=1,noviewLoading()),!0}function viewLoading(){return navigator.appVersion.indexOf("Mac")!==-1?(oCursor.style.top=mouseY-14+"px",oCursor.style.left=mouseX+10+"px",oCursor.style.display="block"):oApps.style.cursor="url(index.php?theme="+USERTHEME+"&extern=images/desktop/loadingcursor/loading.cur), wait",!0}function notifyLoadingRequest(){var a;return!ios&&!android&&!windows_phone?(loadingRequests+=1,a=setTimeout(viewLoading,TimeViewClock),a):!0}function resetLoadingRequests(){return!ios&&!android&&!windows_phone&&(loadingRequests=0,viewLoading()),!0}function dhtmlLoadCSS(a,b){var c=document.createElement("link");c.setAttribute("href",a),c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("id",b),document.getElementsByTagName("head")[0].appendChild(c)}function dhtmlLoadScript(a){var b=document.createElement("script");b.src=a,b.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(b)}function dhtmlRemoveCSS(a){var b=document.getElementById(a);b&&document.getElementsByTagName("head")[0].removeChild(b)}function getNodeValue(a){return a?typeof a.textContent!="undefined"?a.textContent:a.firstChild.nodeValue:""}function updateCss(a,b,c){document.getElementById(a).style[b]=c}function createLayer(a,b,c){var d,e=document.createElement("div");e.setAttribute("id",a),e.className=c,e.style.display="none",d=document.getElementById(b),d.appendChild(e)}function fadeInLayer(a,b,c,d){var e,f=document.getElementById(a);f&&(e='hideLayer("'+a+'");',updateOpacity(a,b,c,d,e))}function fadeOutLayer(a,b,c,d){var e=document.getElementById(a);e&&(updateOpacityOnce(0,a),e.style.display="block",xZIndex(e,zLayers),zLayers+=1,updateOpacity(a,b,c,d,""))}function hideLayer(a){var b=document.getElementById(a);b&&(b.style.display="none",xZIndex(b,1))}function removeLayer(a){var b=document.getElementById("eyeScreen"),c=document.getElementById(a);b&&c&&b.removeChild(c)}function showLayer(a){var b=document.getElementById(a);b&&(b.style.display="block",xZIndex(b,zLayers),zLayers+=1)}function eyeMessageBoxHid(a){!IEversion&&document.getElementById("eyeMessageBox_"+a).style.opacity?updateOpacity("eyeMessageBox_"+a,100,0,1e3,function(){document.getElementById("eyeScreen").removeChild(document.getElementById("eyeMessageBox_"+a))}):document.getElementById("eyeScreen").removeChild(document.getElementById("eyeMessageBox_"+a))}function eyeMessageBoxShow(a){var b,c,d,e;if(a){c=0;while(document.getElementById("eyeMessageBox_"+c))c+=1;b=document.createElement("div"),b.setAttribute("id","eyeMessageBox_"+c),b.className="eyeMessageBox",c>0&&(d=document.getElementById("eyeMessageBox_"+(c-1)),messageBoxDirection?b.style.top=xTop(d)+xHeight(d)+20+"px":b.style.top=xTop(d)-xHeight(d)+20+"px"),e=document.createElement("div"),e.setAttribute("id","eyeMessageBoxText_"+c),e.className="eyeMessageBoxText",e.innerHTML=a,b.appendChild(e),document.getElementById("eyeScreen").appendChild(b),IEversion?document.getElementById("eyeMessageBox_"+c).style.visibility="visible":updateOpacity("eyeMessageBox_"+c,0,100,1e3),setTimeout("eyeMessageBoxHid("+c+")",2e3)}}function getParentWidgetType(a,b){var c;if(!a.parentNode)return!1;c=a.parentNode;for(;;){if(c.widgetType===b)return c;if(!c.parentNode)return!1;c=c.parentNode}}function makeDrag(a,b,c,d,e,f){function j(a,b,c){g=b,h=c}function k(b,f,i){var j;c&&(j="",e&&(j=",'"+e+"'"),evilEval(c+"('"+a+"',"+g+","+h+","+f+","+i+",'"+d+"'"+j+");"))}var g,h,i=xGetElementById(a);if(!i)return!1;f||(i.onmousedown=function(){xZIndex(i,zindex),raiseZIndex(1)}),g=0,h=0,xEnableDrag2(a,j,null,k,b),xShow(i)}function removeWidget(a){var b=xGetElementById(a);b&&b.parentNode.removeChild(b)}function setWidgetPos(a,b,c,d,e,f,g){a=xGetElementById(a),b=xGetElementById(b);if(!a||!b)return!1;g=parseInt(g,10);if(g===1||g===2)e=parseInt(e,10)+(xWidth(b)-xWidth(a))/2;else if(g===4||g===5)e=parseInt(e,10)+xWidth(b)/2;c=parseInt(c,10),!isNaN(e)&&e>=0&&(c===1?a.style.right=parseInt(e,10)+""+"px":a.style.left=parseInt(e,10)+""+"px");if(g===1||g===3)f=parseInt(f,10)+(xHeight(b)-xHeight(a))/2;else if(g===4||g===6)f=parseInt(f,10)+xHeight(b)/2;return d=parseInt(d,10),!isNaN(f)&&f>=0&&(d===1?a.style.bottom=parseInt(f,10)+""+"px":a.style.top=parseInt(f,10)+""+"px"),a}function createWidget(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p;if(document.getElementById(a)){try{console.log(a+" already exists.")}catch(q){}return!1}o=document.getElementById(b);if(!o){try{console.log(b+" does not exist.")}catch(r){}return!1}return l||(l="px"),p=document.createElement("div"),p.setAttribute("id",a),o.appendChild(p),c&&p.appendChild(c),j&&(p.className=j),m===0?p.style.display="none":p.style.display="block",parseInt(i,10)>0&&(p.style.height=parseInt(i,10)+""+l),parseInt(h,10)>0&&(p.style.width=parseInt(h,10)+""+l),p.style.position="absolute",p.widgetType=n,setWidgetPos(p,o,d,e,f,g,k)}function sendMsg(a,b,c){var d,e,f;if(sendMsg_active===!0)return sendMsg_list.push([a,b,c]),!0;sendMsg_active=!0,e=!1,f="index.php";if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject&&ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(g){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(h){}}if(!e)return alert("Sorry, but oneye only works with AJAX capable browsers!"),!1;b!=="ping"&&(d=notifyLoadingRequest()),e.onreadystatechange=function(){var a,b,c;if(e.readyState===4){try{c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(e.responseText)}catch(f){b=new DOMParser,b.async="false",c=b.parseFromString(e.responseText,"text/xml")}e.responseText!=="<eyeMessage><action><task>pong</task></action></eyeMessage>"&&(clearTimeout(d),localEngine(c)),sendMsg_active=!1;for(a in sendMsg_list)if(sendMsg_list.hasOwnProperty(a)){sendMsg.apply(this,sendMsg_list[a]),delete sendMsg_list[a];return}}},e.open("POST",f+"?checknum="+a+"&msg="+b,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),e.send("params="+encodeURIComponent(c))}function localEngine(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;notifyEndOfLoadingRequest();if(a.hasChildNodes()){b=a.getElementsByTagName("action"),b||(b=a.firstChild.childNodes),w=b.length;for(i=0;i<w;i+=1)try{E=getNodeValue(b[i].getElementsByTagName("task")[0]);if(E==="createWidget"){A=b[i].getElementsByTagName("position")[0],M=getNodeValue(A.getElementsByTagName("x")[0]),N=getNodeValue(A.getElementsByTagName("y")[0]),o=getNodeValue(A.getElementsByTagName("horiz")[0]),J=getNodeValue(A.getElementsByTagName("vert")[0]),x=getNodeValue(b[i].getElementsByTagName("name")[0]),f=getNodeValue(b[i].getElementsByTagName("checknum")[0]),m=getNodeValue(b[i].getElementsByTagName("father")[0]),L=getNodeValue(b[i].getElementsByTagName("widgetname")[0]),d=getNodeValue(b[i].getElementsByTagName("cent")[0]),z=getNodeValue(b[i].getElementsByTagName("params")[0]);try{evilEval(L+"_show("+z+",'"+x+"','"+m+"','"+M+"','"+N+"','"+o+"','"+J+"','"+f+"','"+d+"');")}catch(O){try{console.log("widget error: "+O)}catch(P){}}}else if(E==="messageBox")h=getNodeValue(b[i].getElementsByTagName("content")[0]),h=tinyMCE.entityDecode(h),G=parseInt(getNodeValue(b[i].getElementsByTagName("type")[0]),10),!G||G===1?eyeMessageBoxShow(h):G===2&&alert(h);else if(E==="setValue")h=getNodeValue(b[i].getElementsByTagName("content")[0]),K=getNodeValue(b[i].getElementsByTagName("widget")[0]),document.getElementById(K)&&(document.getElementById(K).value=h);else if(E==="setValueB64")h=getNodeValue(b[i].getElementsByTagName("content")[0]),K=getNodeValue(b[i].getElementsByTagName("widget")[0]),document.getElementById(K)&&(document.getElementById(K).value=Base64.decode(h));else if(E==="concatValue")h=getNodeValue(b[i].getElementsByTagName("content")[0]),K=getNodeValue(b[i].getElementsByTagName("widget")[0]),document.getElementById(K)&&(document.getElementById(K).value=document.getElementById(K).value+h);else if(E==="concatValueB64")h=getNodeValue(b[i].getElementsByTagName("content")[0]),K=getNodeValue(b[i].getElementsByTagName("widget")[0]),document.getElementById(K)&&(document.getElementById(K).value=document.getElementById(K).value+Base64.decode(h));else if(E==="concatDiv")h=getNodeValue(b[i].getElementsByTagName("content")[0]),K=getNodeValue(b[i].getElementsByTagName("widget")[0]),document.getElementById(K)&&(document.getElementById(K).innerHTML=document.getElementById(K).innerHTML+h);else if(E==="rawjs")q=getNodeValue(b[i].getElementsByTagName("js")[0]),q=q.replace(/\n/,""),q=q.replace(/\r/,""),evilEval(q);else if(E==="setDiv")h=getNodeValue(b[i].getElementsByTagName("content")[0]),x=getNodeValue(b[i].getElementsByTagName("name")[0]),document.getElementById(x).innerHTML=h;else if(E==="loadScript")H=getNodeValue(b[i].getElementsByTagName("url")[0]),dhtmlLoadScript(H);else if(E==="loadCSS")H=getNodeValue(b[i].getElementsByTagName("url")[0]),p=getNodeValue(b[i].getElementsByTagName("id")[0]),dhtmlLoadCSS(H,p);else if(E==="removeCSS")p=getNodeValue(b[i].getElementsByTagName("id")[0]),dhtmlRemoveCSS(p);else if(E==="removeWidget")x=getNodeValue(b[i].getElementsByTagName("name")[0]),removeWidget(x);else if(E==="createDiv")x=getNodeValue(b[i].getElementsByTagName("name")[0]),s=getNodeValue(b[i].getElementsByTagName("class")[0]),m=getNodeValue(b[i].getElementsByTagName("father")[0]),t=document.createElement("div"),t.setAttribute("id",x),t.className=s,j=document.getElementById(m),j.appendChild(t);else if(E==="setWallpaper")H=getNodeValue(b[i].getElementsByTagName("url")[0]),C=getNodeValue(b[i].getElementsByTagName("repeat")[0]),e=getNodeValue(b[i].getElementsByTagName("center")[0]),g=getNodeValue(b[i].getElementsByTagName("color")[0]),setWallpaper(H,C,e,g);else if(E==="updateCss")x=getNodeValue(b[i].getElementsByTagName("name")[0]),B=getNodeValue(b[i].getElementsByTagName("property")[0]),I=getNodeValue(b[i].getElementsByTagName("value")[0]),updateCss(x,B,I);else if(E==="makeDrag"){x=getNodeValue(b[i].getElementsByTagName("name")[0]),m=getNodeValue(b[i].getElementsByTagName("father")[0]);try{y=getNodeValue(b[i].getElementsByTagName("noIndex")[0]),makeDrag(x,m,"","","",y)}catch(Q){makeDrag(x,m,"","","","")}}else if(E==="rawSendMessage")u=getNodeValue(b[i].getElementsByTagName("msg")[0]),b[i].getElementsByTagName("par")[0].firstChild?v=getNodeValue(b[i].getElementsByTagName("par")[0]):v="",r=getNodeValue(b[i].getElementsByTagName("checknum")[0]),sendMsg(r,u,v);else if(E==="addEvent"){x=getNodeValue(b[i].getElementsByTagName("name")[0]),l=getNodeValue(b[i].getElementsByTagName("event")[0]),n=getNodeValue(b[i].getElementsByTagName("func")[0]),c=getNodeValue(b[i].getElementsByTagName("args")[0]);if(!c||c==="0")c="";evilEval('document.getElementById("'+x+'").'+l+" = function ("+c+") {"+n+"};")}else E==="createLayer"?(x=getNodeValue(b[i].getElementsByTagName("name")[0]),s=getNodeValue(b[i].getElementsByTagName("class")[0]),m=getNodeValue(b[i].getElementsByTagName("father")[0]),createLayer(x,m,s)):E==="removeLayer"?(x=getNodeValue(b[i].getElementsByTagName("name")[0]),removeLayer(x)):E==="showLayer"?(x=getNodeValue(b[i].getElementsByTagName("name")[0]),showLayer(x)):E==="hideLayer"?(x=getNodeValue(b[i].getElementsByTagName("name")[0]),hideLayer(x)):E==="fadeOutLayer"?(x=getNodeValue(b[i].getElementsByTagName("name")[0]),F=getNodeValue(b[i].getElementsByTagName("time")[0]),D=getNodeValue(b[i].getElementsByTagName("startAlpha")[0]),k=getNodeValue(b[i].getElementsByTagName("endAlpha")[0]),fadeOutLayer(x,D,k,F)):E==="fadeInLayer"&&(x=getNodeValue(b[i].getElementsByTagName("name")[0]),F=getNodeValue(b[i].getElementsByTagName("time")[0]),D=getNodeValue(b[i].getElementsByTagName("startAlpha")[0]),k=getNodeValue(b[i].getElementsByTagName("endAlpha")[0]),fadeInLayer(x,D,k,F))}catch(R){try{console.log("Response error: "+R)}catch(S){}}}}var touchscreen,android,ios,windows_phone,OggVorbisAudioSupported,EventHandler,eyeKeyDown=0,IEversion=0,isEyeCursorActivated=!1,loadingRequests=0,messageBoxDirection=0,mouseX=0,mouseY=0,sendMsg_active=!1,sendMsg_list=[],TimeViewClock=2e3,zindex=100,zLayers=11;navigator.appVersion.indexOf("MSIE")!==-1&&(IEversion=parseFloat(navigator.appVersion.split("MSIE")[1])),touchscreen=typeof window.ontouchstart!="undefined",android=0,ios=0,windows_phone=0,navigator.userAgent.match(/Android/i)?android=1:navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?ios=1:navigator.userAgent.match(/Windows Phone/i)&&(windows_phone=1),OggVorbisAudioSupported=function(){var a=document.createElement("audio");return typeof a.canPlayType=="function"&&a.canPlayType('audio/ogg; codecs="vorbis"')!==""?!0:!1}(),document.oncontextmenu=function(a){return IEversion||(a.preventDefault(),a.cancelBubble=!0),!1},document.onkeydown=function(a){a=new xEvent(a),a.which?eyeKeyDown=a.which:eyeKeyDown=a.keyCode},document.onkeyup=function(){eyeKeyDown=0},navigator.appVersion.indexOf("Mac")!==-1&&(document.onmousemove=function(a){IEversion&&IEversion<8?(mouseX=a.clientX+document.body.scrollLeft,mouseY=a.clientY+document.body.scrollTop):(mouseX=a.pageX,mouseY=a.pageY),typeof oCursor!="undefined"&&loadingRequests>0&&(oCursor.style.left=mouseX+10+"px",oCursor.style.top=mouseY-14+"px")}),tinyMCE.entityDecode=function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstChild?b.firstChild.nodeValue:a},EventHandler={List:{},LastEvent:0,HandleEvent:function(a){var b,c,d,e;a=new xEvent(a),EventHandler.LastEvent=a,d=0;for(b in EventHandler.List[a.type])if(EventHandler.List[a.type].hasOwnProperty(b)&&b!==a.target.id&&EventHandler.List[a.type][b]){if(EventHandler.List[a.type][b].option){e=a.target.parentNode;while(!d&&e)b===e.id?d=1:e=e.parentNode}if(!d)for(c in EventHandler.List[a.type][b].friends)EventHandler.List[a.type][b].friends[c]===a.target.id&&(d=1);EventHandler.List[a.type][b]["function"]&&(d=EventHandler.List[a.type][b]["function"](a,d)),d||evilEval(EventHandler.List[a.type][b].code),d=0}},Add:function(a,b,c,d,e){typeof EventHandler.List[a]!="object"&&(EventHandler.List[a]={},xAddEventListener(document,a,EventHandler.HandleEvent,!1)),typeof EventHandler.List[a][b]!="object"&&(EventHandler.List[a][b]={},EventHandler.List[a][b].friends=[]),EventHandler.List[a][b].code=c,typeof d!="undefined"&&(EventHandler.List[a][b].option=d),typeof e!="undefined"&&(EventHandler.List[a][b]["function"]=e)},AddFriend:function(a,b,c){EventHandler.List[a]&&EventHandler.List[a][b]&&EventHandler.List[a][b].friends.push(c)},Remove:function(a,b){EventHandler.List[a]&&EventHandler.List[a][b]&&(xRemoveEventListener(document,a,EventHandler.HandleEvent,!1),EventHandler.List[a][b]=0)},RemoveFriend:function(a,b,c){var d;for(d=0;d<EventHandler.List[a][b].friends.length;d+=1)if(EventHandler.List[a][b].friends[d]===c){EventHandler.List[a][b].friends[d]=0;return}}};