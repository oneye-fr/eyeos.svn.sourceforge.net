var eyeCatch={Holes:[],Enemies:[],Infos:[],AddHole:function(a,b,c,d,e,f,g){var h,i;i=document.createElement("div"),i.className=b,i.id=a+"_hole"+eyeCatch.Holes[a].length,i.style.left=d+"px",i.style.top=e+"px",i.style.width=f+"px",i.style.height=g+"px",document.getElementById(a+"_holes").appendChild(i),h=[],h.id=a+"_hole"+eyeCatch.Holes[a].length,h.message=c,eyeCatch.Holes[a].push(h)},AddEnemy:function(a,b,c,d,e,f,g,h,i){var j,k;k=document.createElement("div"),k.className=b,k.id=a+"_enemy"+eyeCatch.Enemies[a].length,k.style.left=d+"px",k.style.top=e+"px",k.style.width=f+"px",k.style.height=g+"px",document.getElementById(a+"_field").appendChild(k),j=[],j.id=a+"_enemy"+eyeCatch.Enemies[a].length,j.message=c,j.movex=h,j.movey=i,eyeCatch.Enemies[a].push(j)},CreateField:function(id,father,messageBox,className,speed,left,top,width,height){var fieldDiv,holesDiv;eyeCatch.Holes[id]=[],eyeCatch.Enemies[id]=[],eyeCatch.Infos[id]=[],eyeCatch.Infos[id].messageBox=messageBox,eyeCatch.Infos[id].round=0,eyeCatch.Infos[id].speed=[],eyeCatch.Infos[id].speed.current=0,eyeCatch.Infos[id].speed.increase=eval(speed),eyeCatch.Infos[id].starttime=0,fieldDiv=document.createElement("div"),fieldDiv.className=className,fieldDiv.id=id+"_field",fieldDiv.style.left=left+"px",fieldDiv.style.top=top+"px",fieldDiv.style.width=width+"px",fieldDiv.style.height=height+"px",document.getElementById(father).appendChild(fieldDiv),holesDiv=document.createElement("div"),holesDiv.id=id+"_holes",document.getElementById(id+"_field").appendChild(holesDiv)},CreatePlayer:function(a,b,c,d,e,f){var g;eyeCatch.Infos[a].left=c,eyeCatch.Infos[a].top=d,eyeCatch.Infos[a].width=e,eyeCatch.Infos[a].height=f,g=document.createElement("div"),g.className=b,g.id=a+"_player",g.style.left=c+"px",g.style.top=d+"px",g.style.width=e+"px",g.style.height=f+"px",document.getElementById(a+"_field").appendChild(g),xEnableDrag(a+"_player",function(){eyeCatch.Start(a)},function(b,c,d){eyeCatch.OnDrag(a,c,d)})},HasPoint:function(a,b,c,d,e){var f,g,h,i;return f=xLeft(a),g=xTop(a),h=xWidth(a),i=xHeight(a),b<f||b>f+h||c<g||c>g+i?b<f||b>f+h||c+e<g||c+e>g+i?b+d<f||b+d>f+h||c<g||c>g+i?b+d<f||b+d>f+h||c+e<g||c+e>g+i?!1:!0:!0:!0:!0},MoveEnemies:function(a,b){var c,d,e;if(eyeCatch.Infos[a].round||b){for(c=eyeCatch.Enemies[a].length-1;c>-1;c-=1)eyeCatch.MoveEnemy(a,c);eyeCatch.Infos[a].speed.increase[eyeCatch.Infos[a].round]?(e=Number(eyeCatch.Infos[a].speed.increase[eyeCatch.Infos[a].round][0]),eyeCatch.Infos[a].speed.current=e):e=eyeCatch.Infos[a].speed.current,eyeCatch.Infos[a].round+=1,d=document.getElementById(a+"_player");if(d)for(c=eyeCatch.Enemies[a].length-1;c>-1;c-=1)eyeCatch.HasPoint(eyeCatch.Enemies[a][c].id,eyeCatch.Infos[a].left,eyeCatch.Infos[a].top,eyeCatch.Infos[a].width,eyeCatch.Infos[a].height)&&(xDisableDrag(d),d.parentNode.removeChild(d),document.getElementById(eyeCatch.Infos[a].messageBox).innerHTML=eyeCatch.Enemies[a][c].message.replace(/%s/g,(new Date.getTime-eyeCatch.Infos[a].starttime)/1e3));setTimeout(function(){eyeCatch.MoveEnemies(a,0)},e)}},MoveEnemy:function(a,b){var c,d,e,f,g;c=document.getElementById(eyeCatch.Enemies[a][b].id);if(c){e=xLeft(c),f=xTop(c),g=xWidth(c),d=xHeight(c);if(e>=xWidth(a+"_field")-g||e<=0)eyeCatch.Enemies[a][b].movex*=-1;if(f>=xHeight(a+"_field")-d||f<=0)eyeCatch.Enemies[a][b].movey*=-1;c.style.left=eyeCatch.Enemies[a][b].movex+e+"px",c.style.top=eyeCatch.Enemies[a][b].movey+f+"px"}},OnDrag:function(a,b,c){var d,e,f,g;f=document.getElementById(a+"_player");if(f){eyeCatch.Infos[a].left+=b,eyeCatch.Infos[a].top+=c,eyeCatch.Infos[a].left<0&&(eyeCatch.Infos[a].left=0),g=xWidth(a+"_field")-eyeCatch.Infos[a].width,eyeCatch.Infos[a].left>g&&(eyeCatch.Infos[a].left=g),eyeCatch.Infos[a].top<0&&(eyeCatch.Infos[a].top=0),d=xHeight(a+"_field")-eyeCatch.Infos[a].height,eyeCatch.Infos[a].top>d&&(eyeCatch.Infos[a].top=d),f.style.left=eyeCatch.Infos[a].left+"px",f.style.top=eyeCatch.Infos[a].top+"px";for(e=eyeCatch.Holes[a].length-1;e>-1;e-=1)eyeCatch.HasPoint(eyeCatch.Holes[a][e].id,eyeCatch.Infos[a].left,eyeCatch.Infos[a].top,eyeCatch.Infos[a].width,eyeCatch.Infos[a].height)&&(xDisableDrag(f),f.parentNode.removeChild(f),document.getElementById(eyeCatch.Infos[a].messageBox).innerHTML=eyeCatch.Holes[a][e].message.replace(/%s/g,(new Date.getTime-eyeCatch.Infos[a].starttime)/1e3))}},Remove:function(a){eyeCatch.Holes[a]=[],eyeCatch.Enemies[a]=[],eyeCatch.Infos[a]=[];var b=document.getElementById(a+"_field");b&&b.parentNode.removeChild(b)},Start:function(a){eyeCatch.Infos[a].round||(eyeCatch.Infos[a].starttime=(new Date).getTime(),eyeCatch.MoveEnemies(a,1))}};