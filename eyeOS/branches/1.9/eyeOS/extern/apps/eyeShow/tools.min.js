function createImageButton(a,b,c){var d=document.createElement("img");return d.src=Slimey.imagesDir+a+".png",d.className="slimeyTool",d.title=b,d.slimeyTool=c,d.style.marginLeft="4px",d.style.marginBottom="4px",d.style.verticalAlign="middle",d.style.cursor="pointer",d.onmouseover=function(){this.slimeyTool.enabled&&this.slimeyTool.toggled!=this&&(this.src=Slimey.imagesDir+a+"h.png")},d.onmouseout=function(){this.slimeyTool.enabled&&(this.slimeyTool.toggled==this?this.src=Slimey.imagesDir+a+"d.png":this.src=Slimey.imagesDir+a+".png")},d.onmousedown=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+a+"d.png")},d.onmouseup=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+a+"h.png")},d.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()},d}function createImageButtonBig(a,b,c){var d=document.createElement("img");return d.src=Slimey.imagesDir+a+".png",d.className="slimeyTool",d.title=b,d.style.width="40px",d.slimeyTool=c,d.style.marginLeft="4px",d.style.marginBottom="4px",d.style.verticalAlign="middle",d.style.cursor="pointer",d.onmouseover=function(){this.slimeyTool.enabled&&!this.slimeyTool.toggled&&(this.src=Slimey.imagesDir+a+"h.png")},d.onmouseout=function(){this.slimeyTool.enabled&&(this.slimeyTool.toggled?this.src=Slimey.imagesDir+a+"d.png":this.src=Slimey.imagesDir+a+".png")},d.onmousedown=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+a+"d.png")},d.onmouseup=function(){this.slimeyTool.enabled&&(this.src=Slimey.imagesDir+a+"h.png")},d.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()},d}function createImageButtonText(a,b,c,d){var e=document.createElement("div");return e.innerHTML='<img class="blockbarImg" src="index.php?theme='+USERTHEME+"&amp;extern=icons/22x22/"+d+'.png"/><div class="blockbarText"><a href="#"  accesskey="n">'+b+"</a></div>",e.className="blockbarItem",e.slimeyTool=c,e.style.marginLeft="4px",e.style.marginBottom="4px",e.style.cursor="pointer",e.slimeyTool=c,e.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()},e}var SlimeyTool,SlimeyInsertTool,SlimeyInsertTextTool,SlimeyInsertOrderedListTool,SlimeyInsertUnorderedListTool,SlimeyEditContentTool,SlimeyFontColorTool,SlimeyFontSizeTool,SlimeyFontFamilyTool,SlimeyDeleteTool,SlimeyUndoTool,SlimeyRedoTool,SlimeyStyleToggleTool,SlimeyStyleGroupToggleTool,SlimeySendToBackTool,SlimeyBringToFrontTool,SlimeyViewSourceTool,SlimeySaveTool,SlimeyPreviewTool,SlimeyAddSlideTool,SlimeyDeleteSlideTool,SlimeyMoveSlideDownTool,SlimeyMoveSlideUpTool,SlimeySaveToolBig,SlimeySaveToolBigAs,SlimeyOpenBig,SlimeyNewBig,SlimeyInsertImageToolBigEye,SlimeyPreviewToolBig;SlimeyTool=function(a,b,c){this.slimey=c,this.name=a,this.element=b,this.enabled=!0},SlimeyTool.prototype.getName=function(){return this.name},SlimeyTool.prototype.getElement=function(){return this.element},SlimeyTool.prototype.execute=function(){alert(lang("generic tool"))},SlimeyTool.prototype.notifySelectionChange=function(){},SlimeyInsertTool=function(a){var b=createImageButton("insert",lang("insert an element"),this);SlimeyTool.call(this,"insert",b,a)},SlimeyInsertTool.prototype=new SlimeyTool,SlimeyInsertTool.prototype.execute=function(){var a,b=prompt(lang("what element do you wish to insert?"));b&&(a=new SlimeyInsertAction(this.slimey,b),this.slimey.editor.performAction(a))},SlimeyInsertTextTool=function(a){var b=createImageButton("insertText",lang("insert text"),this);SlimeyTool.call(this,"insertText",b,a)},SlimeyInsertTextTool.prototype=new SlimeyTool,SlimeyInsertTextTool.prototype.execute=function(){var a=new SlimeyInsertAction(this.slimey,"div");this.slimey.editor.performAction(a)},SlimeyInsertOrderedListTool=function(a){var b=createImageButton("insertOList",lang("insert ordered list"),this);SlimeyTool.call(this,"insertOList",b,a)},SlimeyInsertOrderedListTool.prototype=new SlimeyTool,SlimeyInsertOrderedListTool.prototype.execute=function(){var a=new SlimeyInsertAction(this.slimey,"ol");this.slimey.editor.performAction(a)},SlimeyInsertUnorderedListTool=function(a){var b=createImageButton("insertUList",lang("insert unordered list"),this);SlimeyTool.call(this,"insertUList",b,a)},SlimeyInsertUnorderedListTool.prototype=new SlimeyTool,SlimeyInsertUnorderedListTool.prototype.execute=function(){var a=new SlimeyInsertAction(this.slimey,"ul");this.slimey.editor.performAction(a)},SlimeyEditContentTool=function(a){var b=document.createElement("textarea");b.slimeyTool=this,b.style.height="25px",b.style.width="100%",b.style.backgroundColor="lightYellow",b.style.marginBottom="4px",b.title=lang("edit the element's content"),b.onkeyup=function(){this.slimeyTool.execute()},SlimeyTool.call(this,"editContent",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.element.disabled=!0},SlimeyEditContentTool.prototype=new SlimeyTool,SlimeyEditContentTool.prototype.execute=function(){var a,b=this.element.value,c=this.slimey.editor.getSelected();c.tagName=="UL"||c.tagName=="OL"?(b="<li>"+b+"</li>",b=b.replace(/\n/g,"</li><li>")):c.tagName=="DIV"&&(b=b.replace(/\n/g,"<br>")),a=new SlimeyEditContentAction(this.slimey,b),this.slimey.editor.performAction(a)},SlimeyEditContentTool.prototype.notifySelectionChange=function(){var a,b=this.slimey.editor.getSelected();b?(a=b.innerHTML,b.tagName=="UL"||b.tagName=="OL"?(a=a.replace(/<\/li><li>/gi,"\n"),a=a.replace(/<li>|<\/li>/gi,"")):b.tagName=="DIV"&&(a=a.replace(/<br>/gi,"\n")),a!=this.element.value&&(this.element.value=a),b.editable?this.element.disabled=!1:this.element.disabled=!0):(this.element.value="",this.element.disabled=!0)},SlimeyFontColorTool=function(a){var b=createImageButton("color",lang("change font color"),this);SlimeyTool.call(this,"color",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyFontColorTool.prototype=new SlimeyTool,SlimeyFontColorTool.prototype.execute=function(){chooseColor(this.colorChosen,this,this.element)},SlimeyFontColorTool.prototype.colorChosen=function(a){var b;a&&(b=new SlimeyEditStyleAction(this.slimey,"color",a),this.slimey.editor.performAction(b))},SlimeyFontColorTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a&&a.editable?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyFontSizeTool=function(a){var b=document.createElement("select");b.style.height="20px",b.style.width="80px",b.style.marginLeft="4px",b.title=lang("change font size");var c=document.createElement("option");c.value=c.style.fontSize="",c.appendChild(document.createTextNode("-- "+lang("Size")+" --")),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="80%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="100%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="120%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="140%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="160%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="200%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="300%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontSize="400%",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),b.slimeyTool=this,b.onchange=function(){this.slimeyTool.execute()},SlimeyTool.call(this,"fontsize",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.element.disabled=!0},SlimeyFontSizeTool.prototype=new SlimeyTool,SlimeyFontSizeTool.prototype.execute=function(){var a=new SlimeyEditStyleAction(this.slimey,"fontSize",this.element.value);this.slimey.editor.performAction(a)},SlimeyFontSizeTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a&&a.style.fontSize&&a.editable?(this.element.value=a.style.fontSize,this.element.disabled=!1):a&&a.editable?(this.element.value="",this.element.disabled=!1):this.element.disabled=!0},SlimeyFontSizeTool.prototype.notifyActionPerformed=SlimeyFontSizeTool.prototype.notifySelectionChange,SlimeyFontFamilyTool=function(a){var b=document.createElement("select");b.style.height="20px",b.style.width="140px",b.style.marginLeft="4px",b.title=lang("change font family");var c=document.createElement("option");c.value=c.style.fontFamily="",c.appendChild(document.createTextNode("-- "+lang("font family")+" --")),b.appendChild(c);var d=document.createElement("optgroup");d.setAttribute("label",lang("generic fonts")),b.appendChild(d),c=document.createElement("option"),c.value=c.style.fontFamily="serif",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="sans-serif",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="cursive",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="fantasy",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="monospace",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),d=document.createElement("optgroup"),d.setAttribute("label",lang("specific fonts")),b.appendChild(d),c=document.createElement("option"),c.value=c.style.fontFamily="Arial",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="Book Antigua",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="Comic Sans",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="Courier New",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="Tahoma",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="Times New Roman",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),c=document.createElement("option"),c.value=c.style.fontFamily="Verdana",c.appendChild(document.createTextNode(c.value)),b.appendChild(c),b.slimeyTool=this,b.onchange=function(){this.slimeyTool.execute()},SlimeyTool.call(this,"fontfamily",b,a),this.element.disabled=!0,this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this)},SlimeyFontFamilyTool.prototype=new SlimeyTool,SlimeyFontFamilyTool.prototype.execute=function(){var a=new SlimeyEditStyleAction(this.slimey,"fontFamily",this.element.value);this.slimey.editor.performAction(a)},SlimeyFontFamilyTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a&&a.style.fontFamily&&a.editable?(this.element.value=a.style.fontFamily,this.element.disabled=!1):a&&a.editable?(this.element.value="",this.element.disabled=!1):this.element.disabled=!0},SlimeyFontFamilyTool.prototype.notifyActionPerformed=SlimeyFontFamilyTool.prototype.notifySelectionChange,SlimeyDeleteTool=function(a){var b=createImageButton("delete",lang("delete element"),this);SlimeyTool.call(this,"delete",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,b.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyDeleteTool.prototype=new SlimeyTool,SlimeyDeleteTool.prototype.execute=function(){var a,b=this.slimey.editor.getSelected();b&&(a=new SlimeyDeleteAction(this.slimey),this.slimey.editor.performAction(a))},SlimeyDeleteTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyUndoTool=function(a){var b=createImageButton("undo",lang("undo"),this);SlimeyTool.call(this,"undo",b,a),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyUndoTool.prototype=new SlimeyTool,SlimeyUndoTool.prototype.execute=function(){this.slimey.editor.undo()},SlimeyUndoTool.prototype.notifyActionPerformed=function(){this.slimey.editor.undoStack.isEmpty()?(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"):(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer")},SlimeyRedoTool=function(a){var b=createImageButton("redo",lang("redo"),this);SlimeyTool.call(this,"redo",b,a),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyRedoTool.prototype=new SlimeyTool,SlimeyRedoTool.prototype.execute=function(){this.slimey.editor.redo()},SlimeyRedoTool.prototype.notifyActionPerformed=function(){this.slimey.editor.redoStack.isEmpty()?(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"):(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer")},SlimeyStyleToggleTool=function(a,b,c,d,e,f){var g=createImageButton(b,c,this);this.property=d,this.value1=e,this.value2=f,SlimeyTool.call(this,b,g,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyStyleToggleTool.prototype=new SlimeyTool,SlimeyStyleToggleTool.prototype.execute=function(){var a,b=this.slimey.editor.getSelected();b&&(b.style[this.property]==this.value1?(a=new SlimeyEditStyleAction(this.slimey,this.property,this.value2),this.toggled=!1,this.element.src=Slimey.imagesDir+this.name+".png"):(a=new SlimeyEditStyleAction(this.slimey,this.property,this.value1),this.toggled=this.element,this.element.src=Slimey.imagesDir+this.name+"d.png"),this.slimey.editor.performAction(a))},SlimeyStyleToggleTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a&&a.editable?(this.enabled=!0,a.style[this.property]==this.value1?(this.toggled=this.element,this.element.src=Slimey.imagesDir+this.name+"d.png"):(this.toggled=!1,this.element.src=Slimey.imagesDir+this.name+".png"),this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyStyleToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange,SlimeyStyleGroupToggleTool=function(a,b,c,d){window.options=d;var e=document.createElement("span");for(var f=0;f<d.length;f++)d[f].img=createImageButton(d[f].name,d[f].title,this),d[f].img.option=d[f],d[f].img.onclick=function(){this.slimeyTool.enabled&&(this.slimeyTool.toggled=this,this.slimeyTool.execute())},e.appendChild(d[f].img);this.options=d,this.property=c,SlimeyTool.call(this,b,e,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.enable(!1)},SlimeyStyleGroupToggleTool.prototype=new SlimeyTool,SlimeyStyleGroupToggleTool.prototype.enable=function(a){var b;this.enabled=a;for(b=0;b<this.options.length;b++)a?(this.options[b].img.src=Slimey.imagesDir+this.options[b].name+".png",this.options[b].img.style.cursor="pointer"):(this.options[b].img.src=Slimey.imagesDir+this.options[b].name+"x.png",this.options[b].img.style.cursor="default");a&&this.toggled&&(this.toggled.src=Slimey.imagesDir+this.toggled.option.name+"d.png",this.toggled.style.cursor="pointer")},SlimeyStyleGroupToggleTool.prototype.execute=function(){var a,b,c=this.slimey.editor.getSelected();c&&this.toggled&&(a=this.toggled,c.style[this.property]!=a.option.value&&(b=new SlimeyEditStyleAction(this.slimey,this.property,a.option.value),this.enable(!0),this.slimey.editor.performAction(b),this.toggled=a))},SlimeyStyleGroupToggleTool.prototype.notifySelectionChange=function(){var a,b,c=this.slimey.editor.getSelected();if(c){a=c.style[this.property];for(b=0;b<this.options.length;b++)this.options[b].value==a&&(this.toggled=this.options[b].img)}this.enable(c&&c.editable)},SlimeyStyleGroupToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange,SlimeySendToBackTool=function(a){var b=createImageButton("sendToBack",lang("send element to the back"),this);SlimeyTool.call(this,"sendToBack",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeySendToBackTool.prototype=new SlimeyTool,SlimeySendToBackTool.prototype.execute=function(){var a,b=this.slimey.editor.getSelected();b&&(a=new SlimeySendToBackAction(this.slimey),this.slimey.editor.performAction(a))},SlimeySendToBackTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyBringToFrontTool=function(a){var b=createImageButton("bringToFront",lang("bring element to the front"),this);SlimeyTool.call(this,"bringToFront",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this),this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default"},SlimeyBringToFrontTool.prototype=new SlimeyTool,SlimeyBringToFrontTool.prototype.execute=function(){var a,b=this.slimey.editor.getSelected();b&&(a=new SlimeyBringToFrontAction(this.slimey),this.slimey.editor.performAction(a))},SlimeyBringToFrontTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();a?(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"):(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default")},SlimeyViewSourceTool=function(a){var b=createImageButton("viewSource",lang("view source code"),this);SlimeyTool.call(this,"viewSource",b,a),this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this)},SlimeyViewSourceTool.prototype=new SlimeyTool,SlimeyViewSourceTool.prototype.execute=function(){var a,b,c=this.slimey.editor.getHTML();this.ta||(this.ta=document.createElement("textarea"),this.ta.style.border="4px solid deepskyblue",this.ta.style.position="absolute",this.ta.style.zIndex="100000",this.ta.style.visibility="hidden",this.ta.slimeyTool=this,this.ta.onkeyup=function(a){a||(a=event,a.which=a.keyCode),a.which==27&&(this.style.visibility="hidden",this.slimeyTool.toggled=!1,this.slimeyTool.element.src=Slimey.imagesDir+this.slimeyTool.name+".png",this.blur())},document.body.appendChild(this.ta)),this.toggled?(this.ta.style.visibility="hidden",this.toggled=!1,this.element.src=Slimey.imagesDir+this.name+".png",this.ta.blur()):(a=this.slimey.editor.getContainer(),b=getOffsetPosition(a),this.ta.style.left=b.x+"px",this.ta.style.top=b.y+"px",this.ta.style.width=a.offsetWidth+"px",this.ta.style.height=a.offsetHeight+"px",this.ta.value=c,this.ta.style.visibility="visible",this.toggled=this.element,this.element.src=Slimey.imagesDir+this.name+"d.png",this.ta.focus())},SlimeySaveTool=function(a){var b=createImageButton("save",lang("save slideshow"),this);SlimeyTool.call(this,"save",b,a),this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer",this.element.style.visibility="hidden"},SlimeySaveTool.prototype=new SlimeyTool,SlimeySaveTool.prototype.execute=function(){var a=this.slimey.filename;a?this.filenameChosen(a):getInput("Enter a filename:",this.filenameChosen,this,this.element)},SlimeySaveTool.prototype.filenameChosen=function(a){var b;this.slimey.filename=a,b=this.slimey.navigation.getSLIMContent(),this.slimey.slimContent=escapeSLIM(b),this.slimey.submitFile()},SlimeySaveTool.prototype.notifyActionPerformed=function(){this.slimey.editor.undoStack.isEmpty()?(this.enabled=!1,this.element.src=Slimey.imagesDir+this.name+"x.png",this.element.style.cursor="default",this.element.style.visibility="hidden"):(this.enabled=!0,this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer",this.element.style.visibility="hidden")},SlimeyPreviewTool=function(a){var b=createImageButton("preview",lang("preview slideshow"),this);SlimeyTool.call(this,"preview",b,a),this.element.style.visibility="hidden"},SlimeyPreviewTool.prototype=new SlimeyTool,SlimeyPreviewTool.prototype.execute=function(){var a=screen.height*.1,b=screen.width*.1,c=screen.width*.8,d=screen.height*.8;window.slimContent=this.slimey.navigation.getSLIMContent(),window.open(Slimey.rootDir+"slime.html","slimePreview","top="+a+",left="+b+",width="+c+",height="+d+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")},SlimeyAddSlideTool=function(a){var b=createImageButton("addslide",lang("add a new slide after the selected one"),this);SlimeyTool.call(this,"addslide",b,a)},SlimeyAddSlideTool.prototype=new SlimeyTool,SlimeyAddSlideTool.prototype.execute=function(){this.slimey.navigation.addNewSlide()},SlimeyDeleteSlideTool=function(a){var b=createImageButton("delslide",lang("delete the selected slide"),this);SlimeyTool.call(this,"delslide",b,a)},SlimeyDeleteSlideTool.prototype=new SlimeyTool,SlimeyDeleteSlideTool.prototype.execute=function(){this.slimey.navigation.deleteCurrentSlide()},SlimeyMoveSlideDownTool=function(a){var b=createImageButton("slidedown",lang("move the selected slide down one place"),this);SlimeyTool.call(this,"slidedown",b,a)},SlimeyMoveSlideDownTool.prototype=new SlimeyTool,SlimeyMoveSlideDownTool.prototype.execute=function(){this.slimey.navigation.moveSlideDown()},SlimeyMoveSlideUpTool=function(a){var b=createImageButton("slideup",lang("move the selected slide up one place"),this);SlimeyTool.call(this,"slideup",b,a)},SlimeyMoveSlideUpTool.prototype=new SlimeyTool,SlimeyMoveSlideUpTool.prototype.execute=function(){this.slimey.navigation.moveSlideUp()},Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;a=Base64._utf8_encode(a);while(j<a.length)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(b&3)<<4|c>>4,g=(c&15)<<2|d>>6,h=d&63,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(j<a.length)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(f&15)<<4|g>>2,d=(g&3)<<6|h,i+=String.fromCharCode(b),g!=64&&(i+=String.fromCharCode(c)),h!=64&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i),i},_utf8_encode:function(a){var b,c,d;a=a.replace(/\r\n/g,"\n"),b="";for(c=0;c<a.length;c++)d=a.charCodeAt(c),d<128?b+=String.fromCharCode(d):d>127&&d<2048?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(d&63|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(d&63|128));return b},_utf8_decode:function(a){var b="",c=0,d=c1=c2=0;while(c<a.length)d=a.charCodeAt(c),d<128?(b+=String.fromCharCode(d),c++):d>191&&d<224?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((d&31)<<6|c2&63),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63),c+=3);return b}},SlimeySaveToolBig=function(a){var b=createImageButtonText("save",lang("Save"),this,"filesave");SlimeyTool.call(this,"save",b,a),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeySaveToolBig.prototype=new SlimeyTool,SlimeySaveToolBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"Save","<arg1>"+Base64.encode(a)+"</arg1>")},SlimeySaveToolBigAs=function(a){var b=createImageButtonText("save",lang("Save as"),this,"filesaveas");SlimeyTool.call(this,"save",b,a),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeySaveToolBigAs.prototype=new SlimeyTool,SlimeySaveToolBigAs.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"SaveAs","<arg1>"+Base64.encode(a)+"</arg1>")},SlimeyOpenBig=function(a){var b=createImageButtonText("open",lang("Open"),this,"fileopen");SlimeyTool.call(this,"open",b,a),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeyOpenBig.prototype=new SlimeyTool,SlimeyOpenBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"openFile","")},SlimeyNewBig=function(a){var b=createImageButtonText("new",lang("New"),this,"filenew");SlimeyTool.call(this,"new",b,a),this.element.src=Slimey.imagesDir+this.name+".png",this.element.style.cursor="pointer"},SlimeyNewBig.prototype=new SlimeyTool,SlimeyNewBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"NewFile","")},SlimeyInsertImageToolBigEye=function(a){var b=createImageButtonText("open",lang("My Images"),this,"image");SlimeyTool.call(this,"insertImage",b,a)},SlimeyInsertImageToolBigEye.prototype=new SlimeyTool,SlimeyInsertImageToolBigEye.prototype.execute=function(){chooseImageEye(this.imageChosen,this,this.element)},SlimeyInsertImageToolBigEye.prototype.imageChosen=function(a,b,c){var d;a&&(d=new SlimeyInsertAction(this.slimey,"img"),d.getElement().src=a,d.getElement().style.width=b,d.getElement().style.height=c,this.slimey.editor.performAction(d))},SlimeyPreviewToolBig=function(a){var b=createImageButtonText("open",lang("Slideshow"),this,"eyePresentation");SlimeyTool.call(this,"preview",b,a)},SlimeyPreviewToolBig.prototype=new SlimeyTool,SlimeyPreviewToolBig.prototype.execute=function(){var a=screen.height*.1,b=screen.width*.1,c=screen.width*.8,d=screen.height*.8;window.slimContent=this.slimey.navigation.getSLIMContent(),window.open(Slimey.rootDir+"slime.html","slimePreview","top="+a+",left="+b+",width="+c+",height="+d+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")};