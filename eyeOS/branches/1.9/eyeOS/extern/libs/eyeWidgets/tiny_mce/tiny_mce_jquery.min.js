(function(a){var b,c=/^\s*|\s*$/g,d="B".replace(/A(.)|B/,"$1")==="$1",e={majorVersion:"3",minorVersion:"4.9",releaseDate:"2012-02-23",_init:function(){function l(a){return a.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(a.src)?(/_(src|dev)\.js/g.test(a.src)&&(b.suffix="_src"),(j=a.src.indexOf("?"))!=-1&&(b.query=a.src.substring(j+1)),b.baseURL=a.src.substring(0,a.src.lastIndexOf("/")),i&&b.baseURL.indexOf("://")==-1&&b.baseURL.indexOf("/")!==0&&(b.baseURL=i+b.baseURL),b.baseURL):null}var b=this,c=document,d=navigator,e=d.userAgent,f,g,h,i,j,k;b.isOpera=a.opera&&opera.buildNumber,b.isWebKit=/WebKit/.test(e),b.isIE=!b.isWebKit&&!b.isOpera&&/MSIE/gi.test(e)&&/Explorer/gi.test(d.appName),b.isIE6=b.isIE&&/MSIE [56]/.test(e),b.isIE7=b.isIE&&/MSIE [7]/.test(e),b.isIE8=b.isIE&&/MSIE [8]/.test(e),b.isIE9=b.isIE&&/MSIE [9]/.test(e),b.isGecko=!b.isWebKit&&/Gecko/.test(e),b.isMac=e.indexOf("Mac")!=-1,b.isAir=/adobeair/i.test(e),b.isIDevice=/(iPad|iPhone)/.test(e),b.isIOS5=b.isIDevice&&e.match(/AppleWebKit\/(\d*)/)[1]>=534;if(a.tinyMCEPreInit){b.suffix=tinyMCEPreInit.suffix,b.baseURL=tinyMCEPreInit.base,b.query=tinyMCEPreInit.query;return}b.suffix="",g=c.getElementsByTagName("base");for(f=0;f<g.length;f++)if(k=g[f].href)/^https?:\/\/[^\/]+$/.test(k)&&(k+="/"),i=k?k.match(/.*\//)[0]:"";g=c.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return;h=c.getElementsByTagName("head")[0];if(h){g=h.getElementsByTagName("script");for(f=0;f<g.length;f++)if(l(g[f]))return}return},is:function(a,c){return c?c=="array"&&a.hasOwnProperty&&a instanceof Array?!0:typeof a==c:a!==b},makeMap:function(a,b,c){var d;a=a||[],b=b||",",typeof a=="string"&&(a=a.split(b)),c=c||{},d=a.length;while(d--)c[a[d]]={};return c},each:function(a,c,d){var e,f;if(!a)return 0;d=d||a;if(a.length!==b){for(e=0,f=a.length;e<f;e++)if(c.call(d,a[e],e,a)===!1)return 0}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return 0;return 1},trim:function(a){return(a?""+a:"").replace(c,"")},create:function(a,b,c){var d=this,e,f,g,h,i,j=0;a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a),g=a[3].match(/(^|\.)(\w+)$/i)[2],f=d.createNS(a[3].replace(/\.\w+$/,""),c);if(f[g])return;if(a[2]=="static"){f[g]=b,this.onCreate&&this.onCreate(a[2],a[3],f[g]);return}b[g]||(b[g]=function(){},j=1),f[g]=b[g],d.extend(f[g].prototype,b),a[5]&&(e=d.resolve(a[5]).prototype,h=a[5].match(/\.(\w+)$/i)[1],i=f[g],j?f[g]=function(){return e[h].apply(this,arguments)}:f[g]=function(){return this.parent=e[h],i.apply(this,arguments)},f[g].prototype[g]=f[g],d.each(e,function(a,b){f[g].prototype[b]=e[b]}),d.each(b,function(a,b){e[b]?f[g].prototype[b]=function(){return this.parent=e[b],a.apply(this,arguments)}:b!=g&&(f[g].prototype[b]=a)})),d.each(b["static"],function(a,b){f[g][b]=a}),this.onCreate&&this.onCreate(a[2],a[3],f[g].prototype)},walk:function(a,b,c,d){d=d||this,a&&(c&&(a=a[c]),e.each(a,function(a,g){if(b.call(d,a,g,c)===!1)return!1;e.walk(a,b,c,d)}))},createNS:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0;d<b.length;d++)e=b[d],c[e]||(c[e]={}),c=c[e];return c},resolve:function(b,c){var d,e;c=c||a,b=b.split(".");for(d=0,e=b.length;d<e;d++){c=c[b[d]];if(!c)break}return c},addUnload:function(b,c){var d=this;b={func:b,scope:c||this};if(!d.unloads){function e(){var b=d.unloads,c,g;if(b){for(g in b)c=b[g],c&&c.func&&c.func.call(c.scope,1);a.detachEvent?(a.detachEvent("onbeforeunload",f),a.detachEvent("onunload",e)):a.removeEventListener&&a.removeEventListener("unload",e,!1),d.unloads=c=b=w=e=0,a.CollectGarbage&&CollectGarbage()}}function f(){var b=document;if(b.readyState=="interactive"){function c(){b.detachEvent("onstop",c),e&&e(),b=0}b&&b.attachEvent("onstop",c),a.setTimeout(function(){b&&b.detachEvent("onstop",c)},0)}}a.attachEvent?(a.attachEvent("onunload",e),a.attachEvent("onbeforeunload",f)):a.addEventListener&&a.addEventListener("unload",e,!1),d.unloads=[b]}else d.unloads.push(b);return b},removeUnload:function(a){var b=this.unloads,c=null;return e.each(b,function(d,e){if(d&&d.func==a)return b.splice(e,1),c=a,!1}),c},explode:function(a,b){return a?e.map(a.split(b||","),e.trim):a},_addVer:function(a){var b;return this.query?(b=(a.indexOf("?")==-1?"?":"&")+this.query,a.indexOf("#")==-1?a+b:a.replace("#",b+"#")):a},_replace:function(a,c,e){return d?e.replace(a,function(){var a=c,d=arguments,e;for(e=0;e<d.length-2;e++)d[e]===b?a=a.replace(RegExp("\\$"+e,"g"),""):a=a.replace(RegExp("\\$"+e,"g"),d[e]);return a}):e.replace(a,c)}};e._init(),a.tinymce=a.tinyMCE=e})(window),function(a,b){var c,d,e=b.is,f=/^(href|src|style)$/i;if(!a&&window.console)return console.log("Load jQuery first!");b.$=a,b.adapter={patchEditor:function(b){function e(a,b){var c=this;return b&&c.removeAttr("data-mce-style"),d.css.apply(c,arguments)}function g(a,e){var g=this;return f.test(a)?e!==c?(g.each(function(c,d){b.dom.setAttrib(d,a,e)}),g):g.attr("data-mce-"+a):d.attr.apply(g,arguments)}function h(a){return function(c){return c&&(c=b.dom.processHTML(c)),a.call(this,c)}}function i(a){return a.css!==e&&(a.css=e,a.attr=g,a.html=h(d.html),a.append=h(d.append),a.prepend=h(d.prepend),a.after=h(d.after),a.before=h(d.before),a.replaceWith=h(d.replaceWith),a.tinymce=b,a.pushStack=function(){return i(d.pushStack.apply(this,arguments))}),a}var d=a.fn;b.$=function(c,d){var e=b.getDoc();return i(a(c||e,e||d))}}},b.extend=a.extend,b.extend(b,{map:a.map,grep:function(b,c){return a.grep(b,c||function(){return 1})},inArray:function(b,c){return a.inArray(c,b||[])}}),d={"tinymce.dom.DOMUtils":{select:function(b,c){var d=this;return a.find(b,d.get(c)||d.get(d.settings.root_element)||d.doc,[])},is:function(b,c){return a(this.get(b)).is(c)}}},b.onCreate=function(a,c,e){b.extend(e,d[c])}}(window.jQuery,tinymce),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(a){this.scope=a||this,this.listeners=[]},add:function(a,b){return this.listeners.push({cb:a,scope:b||this.scope}),a},addToTop:function(a,b){return this.listeners.unshift({cb:a,scope:b||this.scope}),a},remove:function(a){var b=this.listeners,c=null;return tinymce.each(b,function(d,e){if(a==d.cb)return c=a,b.splice(e,1),!1}),c},dispatch:function(){var a,b,c,d=arguments,e=this.listeners;for(b=0;b<e.length;b++){c=e[b],a=c.cb.apply(c.scope,d.length>0?d:[c.scope]);if(a===!1)break}return a}}),function(){var a=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(b,c){var d,e,f=this;b=tinymce.trim(b),c=f.settings=c||{};if(/^([\w\-]+):([^\/]{2})/i.test(b)||/^\s*#/.test(b)){f.source=b;return}b.indexOf("/")===0&&b.indexOf("//")!==0&&(b=(c.base_uri?c.base_uri.protocol||"http":"http")+"://mce_host"+b),/^[\w-]*:?\/\//.test(b)||(e=c.base_uri?c.base_uri.path:(new tinymce.util.URI(location.href)).directory,b=(c.base_uri&&c.base_uri.protocol||"http")+"://mce_host"+f.toAbsPath(e,b)),b=b.replace(/@@/g,"(mce_at)"),b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(b),a(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(a,c){var d=b[c];d&&(d=d.replace(/\(mce_at\)/g,"@@")),f[a]=d});if(d=c.base_uri){f.protocol||(f.protocol=d.protocol),f.userInfo||(f.userInfo=d.userInfo),!f.port&&f.host=="mce_host"&&(f.port=d.port);if(!f.host||f.host=="mce_host")f.host=d.host;f.source=""}},setPath:function(a){var b=this;a=/^(.*?)\/?(\w+)?$/.exec(a),b.path=a[0],b.directory=a[1],b.file=a[2],b.source="",b.getURI()},toRelative:function(a){var b,c=this;return a==="./"?a:(a=new tinymce.util.URI(a,{base_uri:c}),a.host!="mce_host"&&c.host!=a.host&&a.host||c.port!=a.port||c.protocol!=a.protocol?a.getURI():(b=c.toRelPath(c.path,a.path),a.query&&(b+="?"+a.query),a.anchor&&(b+="#"+a.anchor),b))},toAbsolute:function(a,b){var a=new tinymce.util.URI(a,{base_uri:this});return a.getURI(this.host==a.host&&this.protocol==a.protocol?b:0)},toRelPath:function(a,b){var c,d,e,f=0,g="";a=a.substring(0,a.lastIndexOf("/")),a=a.split("/"),c=b.split("/");if(a.length>=c.length)for(d=0,e=a.length;d<e;d++)if(d>=c.length||a[d]!=c[d]){f=d+1;break}if(a.length<c.length)for(d=0,e=c.length;d<e;d++)if(d>=a.length||a[d]!=c[d]){f=d+1;break}if(f==1)return b;for(d=0,e=a.length-(f-1);d<e;d++)g+="../";for(d=f-1,e=c.length;d<e;d++)d!=f-1?g+="/"+c[d]:g+=c[d];return g},toAbsPath:function(b,c){var d,e,f=0,g=[],h=/\/$/.test(c)?"/":"";b=b.split("/"),c=c.split("/"),a(b,function(a){a&&g.push(a)}),b=g;for(d=c.length-1,g=[];d>=0;d--){if(c[d].length==0||c[d]==".")continue;if(c[d]==".."){f++;continue}if(f>0){f--;continue}g.push(c[d])}return d=b.length-f,d>0?e=b.slice(0,d).join("/")+"/"+g.reverse().join("/"):e=g.reverse().join("/"),e.indexOf("/")!==0&&(e="/"+e),h&&e.lastIndexOf("/")!==e.length-1&&(e+=h),e},getURI:function(a){var b,c=this;if(!c.source||a)b="",a||(c.protocol&&(b+=c.protocol+"://"),c.userInfo&&(b+=c.userInfo+"@"),c.host&&(b+=c.host),c.port&&(b+=":"+c.port)),c.path&&(b+=c.path),c.query&&(b+="?"+c.query),c.anchor&&(b+="#"+c.anchor),c.source=b;return c.source}})}(),function(){var a=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(b){var c,d=this.get(b);return d&&a(d.split("&"),function(a){a=a.split("="),c=c||{},c[unescape(a[0])]=unescape(a[1])}),c},setHash:function(b,c,d,e,f,g){var h="";a(c,function(a,b){h+=(h?"&":"")+escape(b)+"="+escape(a)}),this.set(b,h,d,e,f,g)},get:function(a){var b,c,d=document.cookie,e=a+"=";if(!d)return;c=d.indexOf("; "+e);if(c==-1){c=d.indexOf(e);if(c!=0)return null}else c+=2;return b=d.indexOf(";",c),b==-1&&(b=d.length),unescape(d.substring(c+e.length,b))},set:function(a,b,c,d,e,f){document.cookie=a+"="+escape(b)+(c?"; expires="+c.toGMTString():"")+(d?"; path="+escape(d):"")+(e?"; domain="+e:"")+(f?"; secure":"")},remove:function(a,b){var c=new Date;c.setTime(c.getTime()-1e3),this.set(a,"",c,b,c)}})}(),function(){function serialize(a,b){var c,d,e;b=b||'"';if(a==null)return"null";e=typeof a;if(e=="string")return d="\bb	t\nn\ff\rr\"\"''\\\\",b+a.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,e){return b==='"'&&a==="'"?a:(c=d.indexOf(e),c+1?"\\"+d.charAt(c+1):(a=e.charCodeAt().toString(16),"\\u"+"0000".substring(a.length)+a))})+b;if(e=="object"){if(a.hasOwnProperty&&a instanceof Array){for(c=0,d="[";c<a.length;c++)d+=(c>0?",":"")+serialize(a[c],b);return d+"]"}d="{";for(c in a)a.hasOwnProperty(c)&&(d+=typeof a[c]!="function"?(d.length>1?","+b:b)+c+b+":"+serialize(a[c],b):"");return d+"}"}return""+a}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(ex){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(a){function f(a){b=0;try{b=new ActiveXObject(a)}catch(c){}return b}var b,c,d=window,e=0;a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=a.async===!1?!1:!0,a.data=a.data||"",b=d.XMLHttpRequest?new XMLHttpRequest:f("Microsoft.XMLHTTP")||f("Msxml2.XMLHTTP");if(b){b.overrideMimeType&&b.overrideMimeType(a.content_type),b.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.content_type&&b.setRequestHeader("Content-Type",a.content_type),b.setRequestHeader("X-Requested-With","XMLHttpRequest"),b.send(a.data);function g(){!a.async||b.readyState==4||e++>1e4?(a.success&&e<1e4&&b.status==200?a.success.call(a.success_scope,""+b.responseText,b,a):a.error&&a.error.call(a.error_scope,e>1e4?"TIMED_OUT":"GENERAL",b,a),b=null):d.setTimeout(g,10)}if(!a.async)return g();c=d.setTimeout(g,10)}}}),function(){var a=tinymce.extend,b=tinymce.util.JSON,c=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(b){this.settings=a({},b),this.count=0},send:function(d){var e=d.error,f=d.success;d=a(this.settings,d),d.success=function(a,c){a=b.parse(a),typeof a=="undefined"&&(a={error:"JSON Parse error."}),a.error?e.call(d.error_scope||d.scope,a.error,c):f.call(d.success_scope||d.scope,a.result)},d.error=function(a,b){e&&e.call(d.error_scope||d.scope,a,b)},d.data=b.serialize({id:d.id||"c"+this.count++,method:d.method,params:d.params}),d.content_type="application/json",c.send(d)},"static":{sendRPC:function(a){return(new tinymce.util.JSONRequest).send(a)}}})}(),function(a){a.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey}}}(tinymce),function(a){function e(e){var f=e.dom,g=e.selection;e.onKeyDown.add(function(e,h){var i,j,k,l,m=h.keyCode==d;if((m||h.keyCode==c)&&!b.modifierPressed(h)){h.preventDefault(),i=g.getRng(),j=f.getParent(i.startContainer,f.isBlock),m&&(j=f.getNext(j,f.isBlock));if(j){k=j.firstChild;while(k&&k.nodeType==3&&k.nodeValue.length==0)k=k.nextSibling;k&&k.nodeName==="SPAN"&&(l=k.cloneNode(!1))}e.getDoc().execCommand(m?"ForwardDelete":"Delete",!1,null),j=f.getParent(i.startContainer,f.isBlock),a.each(f.select("span.Apple-style-span,font.Apple-style-span",j),function(a){var b=g.getBookmark();l?f.replace(l.cloneNode(!1),a,!0):f.remove(a,!0),g.moveToBookmark(b)})}})}function f(a){function b(b){var c=a.dom.create("body"),d=b.cloneContents();return c.appendChild(d),a.selection.serializer.serialize(c,{format:"html"})}function e(c){var d,e=b(c),f=a.dom.createRng();return f.selectNode(a.getBody()),d=b(f),e===d}a.onKeyDown.addToTop(function(a,b){var f,g=b.keyCode;if(g==d||g==c)f=a.selection.getRng(!0),!f.collapsed&&e(f)&&(a.setContent("",{format:"raw"}),a.nodeChanged(),b.preventDefault())})}function g(a){a.dom.bind(a.getDoc(),"focusin",function(){a.selection.setRng(a.selection.getRng())})}function h(b){b.onKeyDown.add(function(b,d){var e,f;d.keyCode===c&&b.selection.isCollapsed()&&b.selection.getRng(!0).startOffset===0&&(e=b.selection.getNode(),f=e.previousSibling,f&&f.nodeName&&f.nodeName.toLowerCase()==="hr"&&(b.dom.remove(f),a.dom.Event.cancel(d)))})}function i(a){Range.prototype.getClientRects||a.onMouseDown.add(function(a,b){var c;b.target.nodeName==="HTML"&&(c=a.getBody(),c.blur(),setTimeout(function(){c.focus()},0))})}function j(a){a.onClick.add(function(a,b){b=b.target,/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1),b.nodeName=="A"&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b),a.nodeChanged()})}function k(a){a.onKeyDown.add(function(a,c){function d(a){var b=a.selection.getNode(),c="h1,h2,h3,h4,h5,h6";return a.dom.is(b,c)||a.dom.getParent(b,c)!==null}c.keyCode===b.ENTER&&!b.modifierPressed(c)&&d(a)&&setTimeout(function(){var b=a.selection.getNode();a.dom.is(b,"p")&&(a.dom.setAttrib(b,"style",null),a.execCommand("mceCleanup"))},0)})}function l(b){var c,d;b.dom.bind(b.getDoc(),"selectionchange",function(){d&&(clearTimeout(d),d=0),d=window.setTimeout(function(){var d=b.selection.getRng();if(!c||!a.dom.RangeUtils.compareRanges(d,c))b.nodeChanged(),c=d},50)})}function m(){document.body.setAttribute("role","application")}var b=a.VK,c=b.BACKSPACE,d=b.DELETE;a.create("tinymce.util.Quirks",{Quirks:function(b){a.isWebKit&&(e(b),f(b),g(b),j(b),a.isIDevice&&l(b)),a.isIE&&(h(b),f(b),m(b),k(b)),a.isGecko&&(h(b),i(b))}})}(tinymce),function(a){function j(a){var b=document.createElement("div");return b.innerHTML=a,b.textContent||b.innerText||a}function k(a,b){var c,d,e,f={};if(a){a=a.split(","),b=b||10;for(c=0;c<a.length;c+=2)d=String.fromCharCode(parseInt(a[c],b)),h[d]||(e="&"+a[c+1]+";",f[d]=e,f[e]=d);return f}}var b,c=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e=/[<>&\"\']/g,f=/&(#x|#)?([\w]+);/g,g={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},h={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},i={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};b=k("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),a.html=a.html||{},a.html.Entities={encodeRaw:function(a,b){return a.replace(b?c:d,function(a){return h[a]||a})},encodeAllRaw:function(a){return(""+a).replace(e,function(a){return h[a]||a})},encodeNumeric:function(a,b){return a.replace(b?c:d,function(a){return a.length>1?"&#"+((a.charCodeAt(0)-55296)*1024+(a.charCodeAt(1)-56320)+65536)+";":h[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(a,e,f){return f=f||b,a.replace(e?c:d,function(a){return h[a]||f[a]||a})},getEncodeFunc:function(e,f){function i(a,b){return a.replace(b?c:d,function(a){return h[a]||f[a]||"&#"+a.charCodeAt(0)+";"||a})}function j(a,b){return g.encodeNamed(a,b,f)}var g=a.html.Entities;return f=k(f)||b,e=a.makeMap(e.replace(/\+/g,",")),e.named&&e.numeric?i:e.named?f?j:g.encodeNamed:e.numeric?g.encodeNumeric:g.encodeRaw},decode:function(a){return a.replace(f,function(a,c,d){return c?(d=parseInt(d,c.length===2?16:10),d>65535?(d-=65536,String.fromCharCode(55296+(d>>10),56320+(d&1023))):g[d]||String.fromCharCode(d)):i[a]||b[a]||j(a)})}}}(tinymce),tinymce.html.Styles=function(a,b){function l(a,b,c,d){function e(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}return"#"+e(b)+e(c)+e(d)}var c,d,e,f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,g=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,h=/\s*([^:]+):\s*([^;]+);?/g,i=/\s+$/,j=/rgb/,k={};a=a||{},e="\\\" \\' \\; \\: ; : ﻿".split(" ");for(d=0;d<e.length;d++)k[e[d]]="﻿"+d,k["﻿"+d]=e[d];return{toHex:function(a){return a.replace(f,l)},parse:function(b){function p(a,b){var c,d,e,f=m[a+"-top"+b];if(!f)return;c=m[a+"-right"+b];if(f!=c)return;d=m[a+"-bottom"+b];if(c!=d)return;e=m[a+"-left"+b];if(d!=e)return;m[a+b]=e,delete m[a+"-top"+b],delete m[a+"-right"+b],delete m[a+"-bottom"+b],delete m[a+"-left"+b]}function q(a){var b,c=m[a];if(!c||c.indexOf(" ")<0)return;c=c.split(" "),b=c.length;while(b--)if(c[b]!==c[0])return!1;return m[a]=c[0],!0}function r(a,b,c,d){if(!q(b))return;if(!q(c))return;if(!q(d))return;m[a]=m[b]+" "+m[c]+" "+m[d],delete m[b],delete m[c],delete m[d]}function s(a){return j=!0,k[a]}function t(a,b){return j&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a]})),b||(a=a.replace(/\\([\'\";:])/g,"$1")),a}var c,d,e,j,m={},n=a.url_converter,o=a.url_converter_scope||this;if(b){b=b.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,s)});while(c=h.exec(b)){d=c[1].replace(i,"").toLowerCase(),e=c[2].replace(i,"");if(d&&e.length>0){if(d==="font-weight"&&e==="700")e="bold";else if(d==="color"||d==="background-color")e=e.toLowerCase();e=e.replace(f,l),e=e.replace(g,function(a,b,c,d,e,f){return e=e||f,e?(e=t(e),"'"+e.replace(/\'/g,"\\'")+"'"):(b=t(b||c||d),n&&(b=n.call(o,b,"style")),"url('"+b.replace(/\'/g,"\\'")+"')")}),m[d]=j?t(e,!0):e}h.lastIndex=c.index+c[0].length}p("border",""),p("border","-width"),p("border","-color"),p("border","-style"),p("padding",""),p("margin",""),r("border","border-width","border-style","border-color"),m.border==="medium none"&&delete m.border}return m},serialize:function(a,d){function h(d){var e,f,h,i=b.styles[d];if(i)for(e=0,f=i.length;e<f;e++)d=i[e],h=a[d],h!==c&&h.length>0&&(g+=(g.length>0?" ":"")+d+": "+h+";")}var e,f,g="";if(d&&b&&b.styles)h("*"),h(d);else for(e in a)f=a[e],f!==c&&f.length>0&&(g+=(g.length>0?" ":"")+e+": "+f+";");return g}}},function(a){function l(a,b){return a.split(b||",")}function m(a,b){function e(b){return b.replace(/[A-Z]+/g,function(b){return e(a[b])})}var c,d={};for(c in a)a.hasOwnProperty(c)&&(a[c]=e(a[c]));return e(b).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,b,c,e){c=l(c,"|"),d[b]={attributes:j(c),attributesOrder:c,children:j(e,"|",{"#comment":{}})}}),d}var b,c,d,e,f,g,h={},i={},j=a.makeMap,k=a.each;c="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup",c=j(c,",",j(c.toUpperCase())),h=m({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]"),b=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls"),d=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source"),e=a.extend(j("td,th,iframe,video,audio,object"),d),f=j("pre,script,style,textarea"),g=j("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),a.html.Schema=function(m){function t(a){return RegExp("^"+a.replace(/([?+*])/g,".$1")+"$")}function u(b){var c,d,e,f,g,h,i,k,m,n,o,p,r,u,v,w,x,y,z,A=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,B=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,C=/[*?+]/;if(b){b=l(b),q["@"]&&(w=q["@"].attributes,x=q["@"].attributesOrder);for(c=0,d=b.length;c<d;c++){g=A.exec(b[c]);if(g){u=g[1],m=g[2],v=g[3],k=g[4],p={},r=[],h={attributes:p,attributesOrder:r},u==="#"&&(h.paddEmpty=!0),u==="-"&&(h.removeEmpty=!0);if(w){for(y in w)p[y]=w[y];r.push.apply(r,x)}if(k){k=l(k,"|");for(e=0,f=k.length;e<f;e++){g=B.exec(k[e]);if(g){i={},o=g[1],n=g[2].replace(/::/g,":"),u=g[3],z=g[4],o==="!"&&(h.attributesRequired=h.attributesRequired||[],h.attributesRequired.push(n),i.required=!0);if(o==="-"){delete p[n],r.splice(a.inArray(r,n),1);continue}u&&(u==="="&&(h.attributesDefault=h.attributesDefault||[],h.attributesDefault.push({name:n,value:z}),i.defaultValue=z),u===":"&&(h.attributesForced=h.attributesForced||[],h.attributesForced.push({name:n,value:z}),i.forcedValue=z),u==="<"&&(i.validValues=j(z,"?"))),C.test(n)?(h.attributePatterns=h.attributePatterns||[],i.pattern=t(n),h.attributePatterns.push(i)):(p[n]||r.push(n),p[n]=i)}}}!w&&m=="@"&&(w=p,x=r),v&&(h.outputName=m,q[v]=h),C.test(m)?(h.pattern=t(m),s.push(h)):q[m]=h}}}}function v(a){q={},s=[],u(a),k(h,function(a,b){r[b]=a.children})}function w(a){var b=/^(~)?(.+)$/;a&&k(l(a),function(a){var d=b.exec(a),e=d[1]==="~",f=e?"span":"div",g=d[2];r[g]=r[f],i[g]=f,e||(c[g]={}),k(r,function(a){a[f]&&(a[g]=a[f])})})}function x(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&k(l(a),function(a){var c,d,e=b.exec(a);e&&(d=e[1],d?c=r[e[2]]:c=r[e[2]]={"#comment":{}},c=r[e[2]],k(l(e[3],"|"),function(a){d==="-"?delete c[a]:c[a]={}}))})}function y(a){var b,c=q[a];if(c)return c;b=s.length;while(b--){c=s[b];if(c.pattern.test(a))return c}}var n,o,p=this,q={},r={},s=[];m=m||{},m.verify_html===!1&&(m.valid_elements="*[*]"),m.valid_styles&&(n={},k(m.valid_styles,function(b,c){n[c]=a.explode(b)})),o=m.whitespace_elements?j(m.whitespace_elements):f,m.valid_elements?v(m.valid_elements):(k(h,function(a,b){q[b]={attributes:a.attributes,attributesOrder:a.attributesOrder},r[b]=a.children}),k(l("strong/b,em/i"),function(a){a=l(a,"/"),q[a[1]].outputName=a[0]}),q.img.attributesDefault=[{name:"alt",value:""}],k(l("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){q[a].removeEmpty=!0}),k(l("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){q[a].paddEmpty=!0})),w(m.custom_elements),x(m.valid_children),u(m.extended_valid_elements),x("+ol[ul|ol],+ul[ul|ol]"),y("span")||u("span[!data-mce-type|*]"),m.invalid_elements&&a.each(a.explode(m.invalid_elements),function(a){q[a]&&delete q[a]}),p.children=r,p.styles=n,p.getBoolAttrs=function(){return b},p.getBlockElements=function(){return c},p.getShortEndedElements=function(){return d},p.getSelfClosingElements=function(){return g},p.getNonEmptyElements=function(){return e},p.getWhiteSpaceElements=function(){return o},p.isValidChild=function(a,b){var c=r[a];return!!c&&!!c[b]},p.getElementRule=y,p.getCustomElements=function(){return i},p.addValidElements=u,p.setValidElements=v,p.addCustomElements=w,p.addValidChildren=x},a.html.Schema.boolAttrMap=b,a.html.Schema.blockElementsMap=c}(tinymce),function(a){a.html.SaxParser=function(b,c){var d=this,e=function(){};b=b||{},d.schema=c=c||new a.html.Schema,b.fix_self_closing!==!1&&(b.fix_self_closing=!0),a.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(d[a]=b[a]||e)}),d.parse=function(d){function N(a){var b,c=K.length;while(c--)if(K[c].name===a)break;if(c>=0){for(b=K.length-1;b>=c;b--)a=K[b],a.valid&&I.end(a.name);K.length=c}}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=this,J=0,K=[],L=0,M=a.html.Entities.decode;C=RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g"),D=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g,E={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},n=c.getShortEndedElements(),B=c.getSelfClosingElements(),o=c.getBoolAttrs(),q=b.validate,m=b.remove_internals,G=b.fix_self_closing,H=a.isIE,v=/^:/;while(e=C.exec(d)){J<e.index&&I.text(M(d.substr(J,e.index-J)));if(f=e[6])f=f.toLowerCase(),H&&v.test(f)&&(f=f.substr(1)),N(f);else if(f=e[7]){f=f.toLowerCase(),H&&v.test(f)&&(f=f.substr(1)),p=f in n,G&&B[f]&&K.length>0&&K[K.length-1].name===f&&N(f);if(!q||(r=c.getElementRule(f))){s=!0,q&&(w=r.attributes,x=r.attributePatterns),(u=e[8])?(l=u.indexOf("data-mce-type")!==-1,l&&m&&(s=!1),h=[],h.map={},u.replace(D,function(a,b,c,d,e){var f,g;b=b.toLowerCase(),c=b in o?b:M(c||d||e||"");if(q&&!l&&b.indexOf("data-")!==0){f=w[b];if(!f&&x){g=x.length;while(g--){f=x[g];if(f.pattern.test(b))break}g===-1&&(f=null)}if(!f)return;if(f.validValues&&!(c in f.validValues))return}h.map[b]=c,h.push({name:b,value:c})})):(h=[],h.map={});if(q&&!l){y=r.attributesRequired,z=r.attributesDefault,A=r.attributesForced;if(A){i=A.length;while(i--)t=A[i],k=t.name,F=t.value,F==="{$uid}"&&(F="mce_"+L++),h.map[k]=F,h.push({name:k,value:F})}if(z){i=z.length;while(i--)t=z[i],k=t.name,k in h.map||(F=t.value,F==="{$uid}"&&(F="mce_"+L++),h.map[k]=F,h.push({name:k,value:F}))}if(y){i=y.length;while(i--)if(y[i]in h.map)break;i===-1&&(s=!1)}h.map["data-mce-bogus"]&&(s=!1)}s&&I.start(f,h,p)}else s=!1;if(g=E[f]){g.lastIndex=J=e.index+e[0].length,(e=g.exec(d))?(s&&(j=d.substr(J,e.index-J)),J=e.index+e[0].length):(j=d.substr(J),J=d.length),s&&j.length>0&&I.text(j,!0),s&&I.end(f),C.lastIndex=J;continue}p||(!u||u.indexOf("/")!=u.length-1?K.push({name:f,valid:s}):s&&I.end(f))}else(f=e[1])?I.comment(f):(f=e[2])?I.cdata(f):(f=e[3])?I.doctype(f):(f=e[4])&&I.pi(f,e[5]);J=e.index+e[0].length}J<d.length&&I.text(M(d.substr(J)));for(i=K.length-1;i>=0;i--)f=K[i],f.valid&&I.end(f.name)}}}(tinymce),function(a){function d(a,b,c){var d,e,f=c?"lastChild":"firstChild",g=c?"prev":"next";if(a[f])return a[f];if(a!==b){d=a[g];if(d)return d;for(e=a.parent;e&&e!==b;e=e.parent){d=e[g];if(d)return d}}}function e(a,b){this.name=a,this.type=b,b===1&&(this.attributes=[],this.attributes.map={})}var b=/^[ \t\r\n]*$/,c={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};a.extend(e.prototype,{replace:function(a){var b=this;return a.parent&&a.remove(),b.insert(a,b),b.remove(),b},attr:function(a,b){var c,d,e,f=this;if(typeof a!="string"){for(d in a)f.attr(d,a[d]);return f}if(c=f.attributes){if(b!==e){if(b===null){if(a in c.map){delete c.map[a],d=c.length;while(d--)if(c[d].name===a)return c=c.splice(d,1),f}return f}if(a in c.map){d=c.length;
while(d--)if(c[d].name===a){c[d].value=b;break}}else c.push({name:a,value:b});return c.map[a]=b,f}return c.map[a]}},clone:function(){var a,b,c,d,f,g=this,h=new e(g.name,g.type);if(c=g.attributes){f=[],f.map={};for(a=0,b=c.length;a<b;a++)d=c[a],d.name!=="id"&&(f[f.length]={name:d.name,value:d.value},f.map[d.name]=d.value);h.attributes=f}return h.value=g.value,h.shortEnded=g.shortEnded,h},wrap:function(a){var b=this;return b.parent.insert(a,b),a.append(b),b},unwrap:function(){var a,b,c=this;for(a=c.firstChild;a;)b=a.next,c.insert(a,c,!0),a=b;c.remove()},remove:function(){var a=this,b=a.parent,c=a.next,d=a.prev;return b&&(b.firstChild===a?(b.firstChild=c,c&&(c.prev=null)):d.next=c,b.lastChild===a?(b.lastChild=d,d&&(d.next=null)):c.prev=d,a.parent=a.next=a.prev=null),a},append:function(a){var b,c=this;return a.parent&&a.remove(),b=c.lastChild,b?(b.next=a,a.prev=b,c.lastChild=a):c.lastChild=c.firstChild=a,a.parent=c,a},insert:function(a,b,c){var d;return a.parent&&a.remove(),d=b.parent||this,c?(b===d.firstChild?d.firstChild=a:b.prev.next=a,a.prev=b.prev,a.next=b,b.prev=a):(b===d.lastChild?d.lastChild=a:b.next.prev=a,a.next=b.next,a.prev=b,b.next=a),a.parent=d,a},getAll:function(a){var b,c=this,e=[];for(b=c.firstChild;b;b=d(b,c))b.name===a&&e.push(b);return e},empty:function(){var a,b,c,e=this;if(e.firstChild){a=[];for(c=e.firstChild;c;c=d(c,e))a.push(c);b=a.length;while(b--)c=a[b],c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}return e.firstChild=e.lastChild=null,e},isEmpty:function(a){var c,e,f=this,g=f.firstChild;if(g)do{if(g.type===1){if(g.attributes.map["data-mce-bogus"])continue;if(a[g.name])return!1;c=g.attributes.length;while(c--){e=g.attributes[c].name;if(e==="name"||e.indexOf("data-")===0)return!1}}if(g.type===8)return!1;if(g.type===3&&!b.test(g.value))return!1}while(g=d(g,f));return!0},walk:function(a){return d(this,null,a)}}),a.extend(e,{create:function(a,b){var d,f=new e(a,c[a]||1);if(b)for(d in b)f.attr(d,b[d]);return f}}),a.html.Node=e}(tinymce),function(a){var b=a.html.Node;a.html.DomParser=function(c,d){function j(c){var f,g,h,i,j,k,l,m,n,o,p,q=a.makeMap("tr,td,th,tbody,thead,tfoot,table"),r=d.getNonEmptyElements();for(f=0;f<c.length;f++){g=c[f];if(!g.parent)continue;i=[g];for(h=g.parent;h&&!d.isValidChild(h.name,g.name)&&!q[h.name];h=h.parent)i.push(h);if(h&&i.length>1){i.reverse(),j=k=e.filterNode(i[0].clone());for(n=0;n<i.length-1;n++){d.isValidChild(k.name,i[n].name)?(l=e.filterNode(i[n].clone()),k.append(l)):l=k;for(m=i[n].firstChild;m&&m!=i[n+1];)p=m.next,l.append(m),m=p;k=l}j.isEmpty(r)?h.insert(g,i[0],!0):(h.insert(j,i[0],!0),h.insert(g,j)),h=i[0],(h.isEmpty(r)||h.firstChild===h.lastChild&&h.firstChild.name==="br")&&h.empty().remove()}else if(g.parent){if(g.name==="li"){o=g.prev;if(!o||o.name!=="ul"&&o.name!=="ul"){o=g.next;if(!o||o.name!=="ul"&&o.name!=="ul"){g.wrap(e.filterNode(new b("ul",1)));continue}o.insert(g,o.firstChild,!0);continue}o.append(g);continue}d.isValidChild(g.parent.name,"div")&&d.isValidChild("div",g.name)?g.wrap(e.filterNode(new b("div",1))):g.name==="style"||g.name==="script"?g.empty().remove():g.unwrap()}}}var e=this,f={},g=[],h={},i={};c=c||{},c.validate="validate"in c?c.validate:!0,c.root_name=c.root_name||"body",e.schema=d=d||new a.html.Schema,e.filterNode=function(a){var b,c,d;c in f&&(d=h[c],d?d.push(a):h[c]=[a]),b=g.length;while(b--)c=g[b].name,c in a.attributes.map&&(d=i[c],d?d.push(a):i[c]=[a]);return a},e.addNodeFilter=function(b,c){a.each(a.explode(b),function(a){var b=f[a];b||(f[a]=b=[]),b.push(c)})},e.addAttributeFilter=function(b,c){a.each(a.explode(b),function(a){var b;for(b=0;b<g.length;b++)if(g[b].name===a){g[b].callbacks.push(c);return}g.push({name:a,callbacks:[c]})})},e.parse=function(e,k){function F(){var a,b,c=m.firstChild;while(c)a=c.next,c.type==3||c.type==1&&c.name!=="p"&&!w[c.name]&&!c.attr("data-mce-type")?b?b.append(c):(b=G(D,1),m.insert(b,c),b.append(c)):b=null,c=a}function G(a,c){var d,e=new b(a,c);return a in f&&(d=h[a],d?d.push(e):h[a]=[e]),e}function H(a){var b,c,d;for(b=a.prev;b&&b.type===3;)c=b.value.replace(y,""),c.length>0?(b.value=c,b=b.prev):(d=b.prev,b.remove(),b=d)}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=[];k=k||{},h={},i={},w=a.extend(a.makeMap("script,style,head,html,body,title,meta,param"),d.getBlockElements()),C=d.getNonEmptyElements(),B=d.children,v=c.validate,D="forced_root_block"in k?k.forced_root_block:c.forced_root_block,A=d.getWhiteSpaceElements(),x=/^[ \t\r\n]+/,y=/[ \t\r\n]+$/,z=/[ \t\r\n]+/g,l=new a.html.SaxParser({validate:v,fix_self_closing:!v,cdata:function(a){n.append(G("#cdata",4)).value=a},text:function(a,b){var c;A[n.name]||(a=a.replace(z," "),n.lastChild&&w[n.lastChild.name]&&(a=a.replace(x,""))),a.length!==0&&(c=G("#text",3),c.raw=!!b,n.append(c).value=a)},comment:function(a){n.append(G("#comment",8)).value=a},pi:function(a,b){n.append(G(a,7)).value=b,H(n)},doctype:function(a){var b=n.append(G("#doctype",10));b.value=a,H(n)},start:function(a,b,c){var e,f,h,j,k=v?d.getElementRule(a):{};if(k){e=G(k.outputName||a,1),e.attributes=b,e.shortEnded=c,n.append(e),j=B[n.name],j&&B[e.name]&&!j[e.name]&&E.push(e),f=g.length;while(f--)h=g[f].name,h in b.map&&(t=i[h],t?t.push(e):i[h]=[e]);w[a]&&H(e),c||(n=e)}},end:function(a){var c,e,f,g,h=v?d.getElementRule(a):{};if(h){if(w[a]){if(!A[n.name]){for(c=n.firstChild;c&&c.type===3;)e=c.value.replace(x,""),e.length>0?(c.value=e,c=c.next):(f=c.next,c.remove(),c=f);for(c=n.lastChild;c&&c.type===3;)e=c.value.replace(y,""),e.length>0?(c.value=e,c=c.prev):(f=c.prev,c.remove(),c=f)}c=n.prev,c&&c.type===3&&(e=c.value.replace(x,""),e.length>0?c.value=e:c.remove())}if(h.removeEmpty||h.paddEmpty)if(n.isEmpty(C))if(h.paddEmpty)n.empty().append(new b("#text","3")).value=" ";else if(!n.attributes.map.name){g=n.parent,n.empty().remove(),n=g;return}n=n.parent}}},d),m=n=new b(k.context||c.root_name,11),l.parse(e),v&&E.length&&(k.context?k.invalid=!0:j(E)),D&&m.name=="body"&&F();if(!k.invalid){for(u in h){t=f[u],o=h[u],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(p=0,q=t.length;p<q;p++)t[p](o,u,k)}for(p=0,q=g.length;p<q;p++){t=g[p];if(t.name in i){o=i[t.name],r=o.length;while(r--)o[r].parent||o.splice(r,1);for(r=0,s=t.callbacks.length;r<s;r++)t.callbacks[r](o,t.name,k)}}}return m},c.remove_trailing_brs&&e.addNodeFilter("br",function(b){var c,e,f,g,h,i=b.length,j=d.getBlockElements(),k=d.getNonEmptyElements();j.body=1;for(c=0;c<i;c++){e=b[c],f=e.parent;if(j[e.parent.name]&&e===f.lastChild){g=e.prev;while(g){h=g.name;if(h!=="span"||g.attr("data-mce-type")!=="bookmark"){if(h!=="br")break;if(h==="br"){e=null;break}}g=g.prev}e&&(e.remove(),f.isEmpty(k)&&(elementRule=d.getElementRule(f.name),elementRule&&(elementRule.removeEmpty?f.remove():elementRule.paddEmpty&&(f.empty().append(new a.html.Node("#text",3)).value=" "))))}}})}}(tinymce),tinymce.html.Writer=function(a){var b,c,d,e,f,g=[];return a=a||{},b=a.indent,c=tinymce.makeMap(a.indent_before||""),d=tinymce.makeMap(a.indent_after||""),e=tinymce.html.Entities.getEncodeFunc(a.entity_encoding||"raw",a.entities),f=a.element_format=="html",{start:function(a,h,i){var j,k,l,m;b&&c[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&m!=="\n"&&g.push("\n")),g.push("<",a);if(h)for(j=0,k=h.length;j<k;j++)l=h[j],g.push(" ",l.name,'="',e(l.value,!0),'"');!i||f?g[g.length]=">":g[g.length]=" />",i&&b&&d[a]&&g.length>0&&(m=g[g.length-1],m.length>0&&m!=="\n"&&g.push("\n"))},end:function(a){var c;g.push("</",a,">"),b&&d[a]&&g.length>0&&(c=g[g.length-1],c.length>0&&c!=="\n"&&g.push("\n"))},text:function(a,b){a.length>0&&(g[g.length]=b?a:e(a))},cdata:function(a){g.push("<![CDATA[",a,"]]>")},comment:function(a){g.push("<!--",a,"-->")},pi:function(a,c){c?g.push("<?",a," ",c,"?>"):g.push("<?",a,"?>"),b&&g.push("\n")},doctype:function(a){g.push("<!DOCTYPE",a,">",b?"\n":"")},reset:function(){g.length=0},getContent:function(){return g.join("").replace(/\n$/,"")}}},function(a){a.html.Serializer=function(b,c){var d=this,e=new a.html.Writer(b);b=b||{},b.validate="validate"in b?b.validate:!0,d.schema=c=c||new a.html.Schema,d.writer=e,d.serialize=function(a){function g(a){var b,h,i,j,k,l,m,n,o,p=f[a.type];if(!p){b=a.name,h=a.shortEnded,i=a.attributes;if(d&&i&&i.length>1){l=[],l.map={},o=c.getElementRule(a.name);for(m=0,n=o.attributesOrder.length;m<n;m++)j=o.attributesOrder[m],j in i.map&&(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));for(m=0,n=i.length;m<n;m++)j=i[m].name,j in l.map||(k=i.map[j],l.map[j]=k,l.push({name:j,value:k}));i=l}e.start(a.name,i,h);if(!h){if(a=a.firstChild)do g(a);while(a=a.next);e.end(b)}}else p(a)}var d=b.validate,f={3:function(a){e.text(a.value,a.raw)},8:function(a){e.comment(a.value)},7:function(a){e.pi(a.name,a.value)},10:function(a){e.doctype(a.value)},4:function(a){e.cdata(a.value)},11:function(a){if(a=a.firstChild)do g(a);while(a=a.next)}};return e.reset(),a.type==1&&!b.inner?g(a):f[11](a),e.getContent()}}}(tinymce),function(a){var b=a.each,c=a.is,d=a.isWebKit,e=a.isIE,f=a.html.Entities,g=/^([a-z0-9],?)+$/i,h=a.html.Schema.blockElementsMap,i=/^[ \t\r\n]*$/;a.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(b,c){var d,f=this;f.doc=b,f.win=window,f.files={},f.cssFlicker=!1,f.counter=0,f.stdMode=!a.isIE||b.documentMode>=8,f.boxModel=!a.isIE||b.compatMode=="CSS1Compat"||f.stdMode,f.hasOuterHTML="outerHTML"in b.createElement("a"),f.settings=c=a.extend({keep_values:!1,hex_colors:1},c),f.schema=c.schema,f.styles=new a.html.Styles({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema);if(a.isIE6)try{b.execCommand("BackgroundImageCache",!1,!0)}catch(g){f.cssFlicker=!0}if(e&&c.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(a){b.createElement(a)});for(d in c.schema.getCustomElements())b.createElement(d)}a.addUnload(f.destroy,f)},getRoot:function(){var a=this,b=a.settings;return b&&a.get(b.root_element)||a.doc.body},getViewPort:function(a){var b,c;return a=a?a:this.win,b=a.document,c=this.boxModel?b.documentElement:b.body,{x:a.pageXOffset||c.scrollLeft,y:a.pageYOffset||c.scrollTop,w:a.innerWidth||c.clientWidth,h:a.innerHeight||c.clientHeight}},getRect:function(a){var b,c,d=this;return a=d.get(a),b=d.getPos(a),c=d.getSize(a),{x:b.x,y:b.y,w:c.w,h:c.h}},getSize:function(a){var b,c,d=this;return a=d.get(a),b=d.getStyle(a,"width"),c=d.getStyle(a,"height"),b.indexOf("px")===-1&&(b=0),c.indexOf("px")===-1&&(c=0),{w:parseInt(b)||a.offsetWidth||a.clientWidth,h:parseInt(c)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,c){return this.getParents(a,b,c,!1)},getParents:function(a,b,d,e){var f,g=this,h=g.settings,i=[];a=g.get(a),e=e===undefined,h.strict_root&&(d=d||g.getRoot()),c(b,"string")&&(f=b,b==="*"?b=function(a){return a.nodeType==1}:b=function(a){return g.is(a,f)});while(a){if(a==d||!a.nodeType||a.nodeType===9)break;if(!b||b(a)){if(!e)return a;i.push(a)}a=a.parentNode}return e?i:null},get:function(a){var b;if(a&&this.doc&&typeof a=="string"){b=a,a=this.doc.getElementById(a);if(a&&a.id!==b)return this.doc.getElementsByName(b)[1]}return a},getNext:function(a,b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},add:function(a,b,d,e,f){var g=this;return this.run(a,function(a){var h=c(b,"string")?g.doc.createElement(b):b;return g.setAttribs(h,d),e&&(e.nodeType?h.appendChild(e):g.setHTML(h,e)),f?h:a.appendChild(h)})},create:function(a,b,c){return this.add(this.doc.createElement(a),a,b,c,1)},createHTML:function(a,b,c){var d,e="",f=this;e+="<"+a;for(d in b)b.hasOwnProperty(d)&&(e+=" "+d+'="'+f.encode(b[d])+'"');return typeof c!="undefined"?e+">"+c+"</"+a+">":e+" />"},remove:function(b,c){return this.run(b,function(b){var d,e=b.parentNode;if(!e)return null;if(c)while(d=b.firstChild)!a.isIE||d.nodeType!==3||d.nodeValue?e.insertBefore(d,b):b.removeChild(d);return e.removeChild(b)})},setStyle:function(b,c,d){var f=this;return f.run(b,function(g){var h=g.style;c=c.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),f.pixelStyles.test(c)&&(a.is(d,"number")||/^[\-0-9\.]+$/.test(d))&&(d+="px");switch(c){case"opacity":if(e){h.filter=d===""?"":"alpha(opacity="+d*100+")";if(!b.currentStyle||!b.currentStyle.hasLayout)h.display="inline-block"}h[c]=h["-moz-opacity"]=h["-khtml-opacity"]=d||"";break;case"float":e?h.styleFloat=d:h.cssFloat=d;break;default:h[c]=d||""}f.settings.update_styles&&f.setAttrib(g,"data-mce-style")})},getStyle:function(a,b,c){a=this.get(a);if(!a)return;if(this.doc.defaultView&&c){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(d){return null}}return b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()}),b=="float"&&(b=e?"styleFloat":"cssFloat"),a.currentStyle&&c?a.currentStyle[b]:a.style?a.style[b]:undefined},setStyles:function(a,c){var d=this,e=d.settings,f=e.update_styles;e.update_styles=0,b(c,function(b,c){d.setStyle(a,c,b)}),e.update_styles=f,e.update_styles&&d.setAttrib(a,e.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,c=a.attributes;for(b=c.length-1;b>=0;b--)a.removeAttributeNode(c.item(b))})},setAttrib:function(a,d,e){var f=this;if(!a||!d)return;return f.settings.strict&&(d=d.toLowerCase()),this.run(a,function(a){var g,h=f.settings,i=a.getAttribute(d);if(e!==null)switch(d){case"style":if(!c(e,"string")){b(e,function(b,c){f.setStyle(a,c,b)});return}h.keep_values&&(e&&!f._isRes(e)?a.setAttribute("data-mce-style",e,2):a.removeAttribute("data-mce-style",2)),a.style.cssText=e;break;case"class":a.className=e||"";break;case"src":case"href":h.keep_values&&(h.url_converter&&(e=h.url_converter.call(h.url_converter_scope||f,e,d,a)),f.setAttrib(a,"data-mce-"+d,e,2));break;case"shape":a.setAttribute("data-mce-style",e)}c(e)&&e!==null&&e.length!==0?a.setAttribute(d,""+e,2):a.removeAttribute(d,2),tinyMCE.activeEditor&&i!=e&&(g=tinyMCE.activeEditor,g.onSetAttrib.dispatch(g,a,d,e))})},setAttribs:function(a,c){var d=this;return this.run(a,function(a){b(c,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(b,f,g){var h,i,j=this;b=j.get(b);if(!b||b.nodeType!==1)return g===i?!1:g;c(g)||(g="");if(/^(src|href|style|coords|shape)$/.test(f)){h=b.getAttribute("data-mce-"+f);if(h)return h}e&&j.props[f]&&(h=b[j.props[f]],h=h&&h.nodeValue?h.nodeValue:h),h||(h=b.getAttribute(f,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(f))return b[j.props[f]]===!0&&h===""?f:h?f:"";if(b.nodeName==="FORM"&&b.getAttributeNode(f))return b.getAttributeNode(f).nodeValue;f==="style"&&(h=h||b.style.cssText,h&&(h=j.serializeStyle(j.parseStyle(h),b.nodeName),j.settings.keep_values&&!j._isRes(h)&&b.setAttribute("data-mce-style",h))),d&&f==="class"&&h&&(h=h.replace(/(apple|webkit)\-[a-z\-]+/gi,""));if(e)switch(f){case"rowspan":case"colspan":h===1&&(h="");break;case"size":if(h==="+0"||h===20||h===0)h="";break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":h===0&&(h="");break;case"hspace":h===-1&&(h="");break;case"maxlength":case"tabindex":if(h===32768||h===2147483647||h==="32768")h="";break;case"multiple":case"compact":case"noshade":case"nowrap":if(h===65535)return f;return g;case"shape":h=h.toLowerCase();break;default:f.indexOf("on")===0&&h&&(h=a._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+h))}return h!==i&&h!==null&&h!==""?""+h:g},getPos:function(a,b){var c,d,e=this,f=0,g=0,h=e.doc;a=e.get(a),b=b||h.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),c=e.boxModel?h.documentElement:h.body,f=a.left+(h.documentElement.scrollLeft||h.body.scrollLeft)-c.clientTop,g=a.top+(h.documentElement.scrollTop||h.body.scrollTop)-c.clientLeft,{x:f,y:g};d=a;while(d&&d!=b&&d.nodeType)f+=d.offsetLeft||0,g+=d.offsetTop||0,d=d.offsetParent;d=a.parentNode;while(d&&d!=b&&d.nodeType)f-=d.scrollLeft||0,g-=d.scrollTop||0,d=d.parentNode}return{x:f,y:g}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(c){var d,f=this,g=f.doc;c||(c=""),d=f.select("head")[0],b(c.split(","),function(b){var c;if(f.files[b])return;f.files[b]=!0,c=f.create("link",{rel:"stylesheet",href:a._addVer(b)}),e&&g.documentMode&&g.recalc&&(c.onload=function(){g.recalc&&g.recalc(),c.onload=null}),d.appendChild(c)})},addClass:function(a,b){return this.run(a,function(a){var c;return b?this.hasClass(a,b)?a.className:(c=this.removeClass(a,b),a.className=(c!=""?c+" ":"")+b):0})},removeClass:function(b,c){var d,e=this;return e.run(b,function(b){var f;return e.hasClass(b,c)?(d||(d=RegExp("(^|\\s+)"+c+"(\\s+|$)","g")),f=b.className.replace(d," "),f=a.trim(f!=" "?f:""),b.className=f,f||(b.removeAttribute("class"),b.removeAttribute("className")),f):b.className})},hasClass:function(a,b){return a=this.get(a),!a||!b?!1:(" "+a.className+" ").indexOf(" "+b+" ")!==-1},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){return a=this.get(a),!a||a.style.display=="none"||this.getStyle(a,"display")=="none"},uniqueId:function(a){return(a?a:"mce_")+this.counter++},setHTML:function(a,c){var d=this;return d.run(a,function(a){if(e){while(a.firstChild)a.removeChild(a.firstChild);try{a.innerHTML="<br />"+c,a.removeChild(a.firstChild)}catch(f){a=d.create("div"),a.innerHTML="<br />"+c,b(a.childNodes,function(b,c){c&&a.appendChild(b)})}}else a.innerHTML=c;return c})},getOuterHTML:function(a){var b,c=this;return a=c.get(a),a?a.nodeType===1&&c.hasOuterHTML?a.outerHTML:(b=(a.ownerDocument||c.doc).createElement("body"),b.appendChild(a.cloneNode(!0)),b.innerHTML):null},setOuterHTML:function(a,b,c){function f(a,b,c){var e,f=c.createElement("body");f.innerHTML=b,e=f.lastChild;while(e)d.insertAfter(e.cloneNode(!0),a),e=e.previousSibling;d.remove(a)}var d=this;return this.run(a,function(a){a=d.get(a);if(a.nodeType==1){c=c||a.ownerDocument||d.doc;if(e)try{e&&a.nodeType==1?a.outerHTML=b:f(a,b,c)}catch(g){f(a,b,c)}else f(a,b,c)}})},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,b){return b=this.get(b),this.run(a,function(a){var c=b.parentNode,d=b.nextSibling;return d?c.insertBefore(a,d):c.appendChild(a),a})},isBlock:function(a){var b=a.nodeType;return b?b===1&&!!h[a.nodeName]:!!h[a]},replace:function(d,e,f){var g=this;return c(e,"array")&&(d=d.cloneNode(!0)),g.run(e,function(c){return f&&b(a.grep(c.childNodes),function(a){d.appendChild(a)}),c.parentNode.replaceChild(d,c)})},rename:function(a,c){var d,e=this;return a.nodeName!=c.toUpperCase()&&(d=e.create(c),b(e.getAttribs(a),function(b){e.setAttrib(d,b.nodeName,e.getAttrib(a,b.nodeName))}),e.replace(d,a,1)),d||a},findCommonAncestor:function(a,b){var c,d=a;while(d){c=b;while(c&&d!=c)c=c.parentNode;if(d==c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:d},toHex:function(a){function c(a){return a=parseInt(a).toString(16),a.length>1?a:"0"+a}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);return b?(a="#"+c(b[1])+c(b[2])+c(b[3]),a):a},getClasses:function(){function h(d){b(d.imports,function(a){h(a)}),b(d.cssRules||d.rules,function(d){switch(d.type||1){case 1:d.selectorText&&b(d.selectorText.split(","),function(b){b=b.replace(/^\s*|\s*$|^\s\./g,"");if(/\.mce/.test(b)||!/\.[\w\-]+$/.test(b))return;c=b,b=a._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",b);if(g&&!(b=g(b,c)))return;f[b]||(e.push({"class":b}),f[b]=1)});break;case 3:h(d.styleSheet)}})}var c,d=this,e=[],f={},g=d.settings.class_filter;if(d.classes)return d.classes;try{b(d.doc.styleSheets,h)}catch(i){}return e.length>0&&(d.classes=e),e},run:function(a,c,d){var e,f=this;return f.doc&&typeof a=="string"&&(a=f.get(a)),a?(d=d||this,!a.nodeType&&(a.length||a.length===0)?(e=[],b(a,function(a,b){a&&(typeof a=="string"&&(a=f.doc.getElementById(a)),e.push(c.call(d,a,b)))}),e):c.call(d,a)):!1},getAttribs:function(a){var b;return a=this.get(a),a?e?(b=[],a.nodeName=="OBJECT"?a.attributes:(a.nodeName==="OPTION"&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"}),a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})}),b)):a.attributes:[]},isEmpty:function(b,c){var d,e,f,g,h,j,k=this;b=b.firstChild;if(b){g=new a.dom.TreeWalker(b),c=c||k.schema?k.schema.getNonEmptyElements():null;do{f=b.nodeType;if(f===1){if(b.getAttribute("data-mce-bogus"))continue;h=b.nodeName.toLowerCase();if(c&&c[h]){j=b.parentNode;if(h==="br"&&k.isBlock(j)&&j.firstChild===b&&j.lastChild===b)continue;return!1}e=k.getAttribs(b),d=b.attributes.length;while(d--){h=b.attributes[d].nodeName;if(h==="name"||h==="data-mce-bookmark")return!1}}if(f==8)return!1;if(f===3&&!i.test(b.nodeValue))return!1}while(b=g.next())}return!0},destroy:function(b){var c=this;c.events&&c.events.destroy(),c.win=c.doc=c.root=c.events=null,b||a.removeUnload(c.destroy)},createRng:function(){var b=this.doc;return b.createRange?b.createRange():new a.dom.Range(this)},nodeIndex:function(a,b){var c,d,e,f=0;if(a)for(c=a.nodeType,a=a.previousSibling,d=a;a;a=a.previousSibling){e=a.nodeType;if(b&&e==3)if(e==c||!a.nodeValue.length)continue;f++,c=e}return f},split:function(b,c,d){function j(b){function g(a){var b=a.previousSibling&&a.previousSibling.nodeName=="SPAN",c=a.nextSibling&&a.nextSibling.nodeName=="SPAN";return b&&c}var c,d,e=b.childNodes,f=b.nodeType;if(f==1&&b.getAttribute("data-mce-type")=="bookmark")return;for(c=e.length-1;c>=0;c--)j(e[c]);if(f!=9){if(f==3&&b.nodeValue.length>0){d=a.trim(b.nodeValue).length;if(!h.isBlock(b.parentNode)||d>0||d==0&&g(b))return}else if(f==1){e=b.childNodes,e.length==1&&e[0]&&e[0].nodeType==1&&e[0].getAttribute("data-mce-type")=="bookmark"&&b.parentNode.insertBefore(e[0],b);if(e.length||/^(br|hr|input|img)$/i.test(b.nodeName))return}h.remove(b)}return b}var e,f,g,h=this,i=h.createRng();if(b&&c)return i.setStart(b.parentNode,h.nodeIndex(b)),i.setEnd(c.parentNode,h.nodeIndex(c)),e=i.extractContents(),i=h.createRng(),i.setStart(c.parentNode,h.nodeIndex(c)+1),i.setEnd(b.parentNode,h.nodeIndex(b)+1),f=i.extractContents(),g=b.parentNode,g.insertBefore(j(e),b),d?g.replaceChild(d,c):g.insertBefore(c,b),g.insertBefore(j(f),b),h.remove(b),d||c},bind:function(b,c,d,e){var f=this;return f.events||(f.events=new a.dom.EventUtils),f.events.add(b,c,d,e||this)},unbind:function(b,c,d){var e=this;return e.events||(e.events=new a.dom.EventUtils),e.events.remove(b,c,d)},_findSib:function(a,b,d){var e=this,f=b;if(a){c(f,"string")&&(f=function(a){return e.is(a,b)});for(a=a[d];a;a=a[d])if(f(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}}),a.DOM=new a.dom.DOMUtils(document,{process_html:0})}(tinymce),function(a){function b(a){function p(a,b){I(h,a,b)}function q(a,b){I(i,a,b)}function r(a){p(a.parentNode,o(a))}function s(a){p(a.parentNode,o(a)+1)}function t(a){q(a.parentNode,o(a))}function u(a){q(a.parentNode,o(a)+1)}function v(a){a?(c[l]=c[k],c[m]=c[j]):(c[k]=c[l],c[j]=c[m]),c.collapsed=h}function w(a){r(a),u(a)}function x(a){p(a,0),q(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)}function y(a,b){var d=c[k],e=c[j],f=c[l],g=c[m],h=b.startContainer,i=b.startOffset,n=b.endContainer,o=b.endOffset;if(a===0)return H(d,e,h,i);if(a===1)return H(f,g,h,i);if(a===2)return H(f,g,n,o);if(a===3)return H(d,e,n,o)}function z(){J(g)}function A(){return J(e)}function B(){return J(f)}function C(b){var c,d,e=this[k],f=this[j];e.nodeType!==3&&e.nodeType!==4||!e.nodeValue?(e.childNodes.length>0&&(d=e.childNodes[f]),d?e.insertBefore(b,d):e.appendChild(b)):f?f<e.nodeValue.length?(c=e.splitText(f),e.parentNode.insertBefore(b,c)):a.insertAfter(b,e):e.parentNode.insertBefore(b,e)}function D(a){var b=c.extractContents();c.insertNode(a),a.appendChild(b),c.selectNode(a)}function E(){return n(new b(a),{startContainer:c[k],startOffset:c[j],endContainer:c[l],endOffset:c[m],collapsed:c.collapsed,commonAncestorContainer:c.commonAncestorContainer})}function F(a,b){var c;if(a.nodeType==3)return a;if(b<0)return a;c=a.firstChild;while(c&&b>0)--b,c=c.nextSibling;return c?c:a}function G(){return c[k]==c[l]&&c[j]==c[m]}function H(b,c,d,e){var f,g,h,i,j,k;if(b==d)return c==e?0:c<e?-1:1;f=d;while(f&&f.parentNode!=b)f=f.parentNode;if(f){g=0,h=b.firstChild;while(h!=f&&g<c)g++,h=h.nextSibling;return c>g?1:-1}f=b;while(f&&f.parentNode!=d)f=f.parentNode;if(f){g=0,h=d.firstChild;while(h!=f&&g<e)g++,h=h.nextSibling;return g<e?-1:1}i=a.findCommonAncestor(b,d),j=b;while(j&&j.parentNode!=i)j=j.parentNode;j||(j=i),k=d;while(k&&k.parentNode!=i)k=k.parentNode;k||(k=i);if(j==k)return 0;h=i.firstChild;while(h){if(h==j)return-1;if(h==k)return 1;h=h.nextSibling}}function I(b,d,e){var f,g;b?(c[k]=d,c[j]=e):(c[l]=d,c[m]=e),f=c[l];while(f.parentNode)f=f.parentNode;g=c[k];while(g.parentNode)g=g.parentNode;g==f?H(c[k],c[j],c[l],c[m])>0&&c.collapse(b):c.collapse(b),c.collapsed=G(),c.commonAncestorContainer=a.findCommonAncestor(c[k],c[l])}function J(a){var b,d,e,f,g,h,i,j=0,m=0;if(c[k]==c[l])return K(a);for(b=c[l],d=b.parentNode;d;b=d,d=d.parentNode){if(d==c[k])return L(b,a);++j}for(b=c[k],d=b.parentNode;d;b=d,d=d.parentNode){if(d==c[l])return M(b,a);++m}e=m-j,f=c[k];while(e>0)f=f.parentNode,e--;g=c[l];while(e<0)g=g.parentNode,e++;for(h=f.parentNode,i=g.parentNode;h!=i;h=h.parentNode,i=i.parentNode)f=h,g=i;return N(f,g,a)}function K(a){var b,e,i,l,n,o,p;a!=g&&(b=d.createDocumentFragment());if(c[j]==c[m])return b;if(c[k].nodeType==3){e=c[k].nodeValue,i=e.substring(c[j],c[m]),a!=f&&(c[k].deleteData(c[j],c[m]-c[j]),c.collapse(h));if(a==g)return;return b.appendChild(d.createTextNode(i)),b}l=F(c[k],c[j]),n=c[m]-c[j];while(n>0)o=l.nextSibling,p=R(l,a),b&&b.appendChild(p),--n,l=o;return a!=f&&c.collapse(h),b}function L(a,b){var e,h,k,l,m,n;b!=g&&(e=d.createDocumentFragment()),h=O(a,b),e&&e.appendChild(h),k=o(a),l=k-c[j];if(l>0){h=a.previousSibling;while(l>0)m=h.previousSibling,n=R(h,b),e&&e.insertBefore(n,e.firstChild),--l,h=m;return b!=f&&(c.setEndBefore(a),c.collapse(i)),e}return b!=f&&(c.setEndBefore(a),c.collapse(i)),e}function M(a,b){var e,i,j,k,l,n;b!=g&&(e=d.createDocumentFragment()),j=P(a,b),e&&e.appendChild(j),i=o(a),++i,k=c[m]-i,j=a.nextSibling;while(k>0)l=j.nextSibling,n=R(j,b),e&&e.appendChild(n),--k,j=l;return b!=f&&(c.setStartAfter(a),c.collapse(h)),e}function N(a,b,e){var i,j,k,l,m,n,p,q;e!=g&&(j=d.createDocumentFragment()),i=P(a,e),j&&j.appendChild(i),k=a.parentNode,l=o(a),m=o(b),++l,n=m-l,p=a.nextSibling;while(n>0)q=p.nextSibling,i=R(p,e),j&&j.appendChild(i),p=q,--n;return i=O(b,e),j&&j.appendChild(i),e!=f&&(c.setStartAfter(a),c.collapse(h)),j}function O(a,b){var d,e,f,j,k,n=F(c[l],c[m]-1),o=n!=c[l];if(n==a)return Q(n,o,i,b);d=n.parentNode,e=Q(d,i,i,b);while(d){while(n)f=n.previousSibling,j=Q(n,o,i,b),b!=g&&e.insertBefore(j,e.firstChild),o=h,n=f;if(d==a)return e;n=d.previousSibling,d=d.parentNode,k=Q(d,i,i,b),b!=g&&k.appendChild(e),e=k}}function P(a,b){var d,e,f,l,m,n=F(c[k],c[j]),o=n!=c[k];if(n==a)return Q(n,o,h,b);d=n.parentNode,e=Q(d,i,h,b);while(d){while(n)f=n.nextSibling,l=Q(n,o,h,b),b!=g&&e.appendChild(l),o=h,n=f;if(d==a)return e;n=d.nextSibling,d=d.parentNode,m=Q(d,i,h,b),b!=g&&m.appendChild(e),e=m}}function Q(a,b,d,e){var h,k,l,n,o;if(b)return R(a,e);if(a.nodeType==3){h=a.nodeValue,d?(n=c[j],k=h.substring(n),l=h.substring(0,n)):(n=c[m],k=h.substring(0,n),l=h.substring(n)),e!=f&&(a.nodeValue=l);if(e==g)return;return o=a.cloneNode(i),o.nodeValue=k,o}if(e==g)return;return a.cloneNode(i)}function R(a,b){if(b!=g)return b==f?a.cloneNode(h):a;a.parentNode.removeChild(a)}var c=this,d=a.doc,e=0,f=1,g=2,h=!0,i=!1,j="startOffset",k="startContainer",l="endContainer",m="endOffset",n=tinymce.extend,o=a.nodeIndex;n(c,{startContainer:d,startOffset:0,endContainer:d,endOffset:0,collapsed:h,commonAncestorContainer:d,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:p,setEnd:q,setStartBefore:r,setStartAfter:s,setEndBefore:t,setEndAfter:u,collapse:v,selectNode:w,selectNodeContents:x,compareBoundaryPoints:y,deleteContents:z,extractContents:A,cloneContents:B,insertNode:C,surroundContents:D,cloneRange:E})}a.Range=b}(tinymce.dom),function(){function a(a){function f(b,c){var d,e,f,g,h,i,j,k=0,l=-1,m=b.duplicate();m.collapse(c),j=m.parentElement();if(j.ownerDocument!==a.dom.doc)return;while(j.contentEditable==="false")j=j.parentNode;if(!j.hasChildNodes())return{node:j,inside:1};f=j.children,d=f.length-1;while(k<=d){i=Math.floor((k+d)/2),g=f[i],m.moveToElementText(g),l=m.compareEndPoints(c?"StartToStart":"EndToEnd",b);if(l>0)d=i-1;else{if(l>=0)return{node:g};k=i+1}}if(l<0){g?m.collapse(!1):(m.moveToElementText(j),m.collapse(!0),g=j,e=!0),m.setEndPoint(c?"EndToStart":"EndToEnd",b);if(m.compareEndPoints(c?"StartToStart":"StartToEnd",b)>0){m=b.duplicate(),m.collapse(c),h=-1;while(j==m.parentElement()){if(m.move("character",-1)==0)break;h++}}h=h||m.text.replace("\r\n"," ").length}else m.collapse(!0),m.setEndPoint(c?"StartToStart":"StartToEnd",b),h=m.text.replace("\r\n"," ").length;return{node:g,position:l,offset:h,inside:e}}function g(){function l(a){var b,c,d,e=f(i,a),g=0,h=e.node,k=e.offset;if(e.inside&&!h.hasChildNodes()){j[a?"setStart":"setEnd"](h,0);return}if(k===c){j[a?"setStartBefore":"setEndAfter"](h);return}if(e.position<0){b=e.inside?h.firstChild:h.nextSibling;if(!b){j[a?"setStartAfter":"setEndAfter"](h);return}if(!k){b.nodeType==3?j[a?"setStart":"setEnd"](b,0):j[a?"setStartBefore":"setEndBefore"](b);return}while(b){d=b.nodeValue,g+=d.length;if(g>=k){h=b,g-=k,g=d.length-g;break}b=b.nextSibling}}else{b=h.previousSibling;if(!b)return j[a?"setStartBefore":"setEndBefore"](h);if(!k){h.nodeType==3?j[a?"setStart":"setEnd"](b,h.nodeValue.length):j[a?"setStartAfter":"setEndAfter"](b);return}while(b){g+=b.nodeValue.length;if(g>=k){h=b,g-=k;break}b=b.previousSibling}}j[a?"setStart":"setEnd"](h,g)}var d,e,g,h,i=a.getRng(),j=c.createRng(),k=i.item?i.item(0):i.parentElement();if(k.ownerDocument!=c.doc)return j;d=a.isCollapsed();if(i.item)return j.setStart(k.parentNode,c.nodeIndex(k)),j.setEnd(j.startContainer,j.startOffset+1),j;try{l(!0),d||l()}catch(m){if(m.number!=-2147024809)throw m;h=b.getBookmark(2),e=i.duplicate(),e.collapse(!0),k=e.parentElement(),d||(e=i.duplicate(),e.collapse(!1),g=e.parentElement(),g.innerHTML=g.innerHTML),k.innerHTML=k.innerHTML,b.moveToBookmark(h),i=a.getRng(),l(!0),d||l()}return j}var b=this,c=a.dom,d=!0,e=!1;this.getBookmark=function(b){function g(a){var a,b,d,e=[],f=a.parentNode,g=c.getRoot().parentNode;while(f!=g&&f.nodeType!==9){b=f.children,d=b.length;while(d--)if(a===b[d]){e.push(d);break}a=f,f=f.parentNode}return e}function h(a){var b=f(d,a);if(b)return{position:b.position,offset:b.offset,indexes:g(b.node),inside:b.inside}}var d=a.getRng(),e={};return b===2&&(d.item?e.start={ctrl:!0,indexes:g(d.item(0))}:(e.start=h(!0),a.isCollapsed()||(e.end=h()))),e},this.moveToBookmark=function(a){function e(a){var b,d,e,f=c.getRoot();for(b=a.length-1;b>=0;b--)e=f.children,d=a[b],d<=e.length-1&&(f=e[d]);return f}function f(c){var f,g,h,i=a[c?"start":"end"];i&&(f=i.position>0,g=d.createTextRange(),g.moveToElementText(e(i.indexes)),offset=i.offset,offset!==h?(g.collapse(i.inside||f),g.moveStart("character",f?-offset:offset)):g.collapse(c),b.setEndPoint(c?"StartToStart":"EndToStart",g),c&&b.collapse(!0))}var b,d=c.doc.body;a.start&&(a.start.ctrl?(b=d.createControlRange(),b.addElement(e(a.start.indexes)),b.select()):(b=d.createTextRange(),f(!0),f(),b.select()))},this.addRange=function(b){function m(a){var b,f=c.create("a"),m=a?g:i,n=a?h:j,o=e.duplicate();if(m==k||m==k.documentElement)m=l,n=0;m.nodeType==3?(m.parentNode.insertBefore(f,m),o.moveToElementText(f),o.moveStart("character",n),c.remove(f),e.setEndPoint(a?"StartToStart":"EndToEnd",o)):(b=m.childNodes,b.length?(n<b.length?m.insertBefore(f,b[n]):c.insertAfter(f,b[b.length-1]),o.moveToElementText(f)):(f=k.createTextNode("﻿"),m.appendChild(f),o.moveToElementText(f.parentNode),o.collapse(d)),e.setEndPoint(a?"StartToStart":"EndToEnd",o),c.remove(f))}var e,f,g,h,i,j,k=a.dom.doc,l=k.body;g=b.startContainer,h=b.startOffset,i=b.endContainer,j=b.endOffset,e=l.createTextRange();if(g==i&&g.nodeType==1&&h==j-1&&h==j-1)try{f=l.createControlRange(),f.addElement(g.childNodes[h]),f.select();return}catch(n){}m(!0),m(),e.select()},this.getRangeAt=g}tinymce.dom.TridentSelection=a}(),function(a){var b,c=a.each,d=a.DOM,e=a.isIE,f=a.isWebKit;a.create
("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[],this.events=[]},add:function(b,f,g,h){var i,j,k=this,l=k.events;if(f instanceof Array)return j=[],c(f,function(a){j.push(k.add(b,a,g,h))}),j;if(b&&b.hasOwnProperty&&b instanceof Array)return j=[],c(b,function(a){a=d.get(a),j.push(k.add(a,f,g,h))}),j;b=d.get(b);if(!b)return;return i=function(b){if(k.disabled)return;return b=b||window.event,b&&e&&(b.target||(b.target=b.srcElement),a.extend(b,k._stoppers)),h?g.call(h,b):g(b)},f=="unload"?(a.unloads.unshift({func:i}),i):f=="init"?(k.domLoaded?i():k.inits.push(i),i):(l.push({obj:b,name:f,func:g,cfunc:i,scope:h}),k._add(b,f,i),g)},remove:function(a,b,e){var f,g=this,h=g.events,i=!1;return a&&a.hasOwnProperty&&a instanceof Array?(f=[],c(a,function(a){a=d.get(a),f.push(g.remove(a,b,e))}),f):(a=d.get(a),c(h,function(c,d){if(c.obj==a&&c.name==b&&(!e||c.func==e||c.cfunc==e))return h.splice(d,1),g._remove(a,b,c.cfunc),i=!0,!1}),i)},clear:function(a){var b,c,e=this,f=e.events;if(a){a=d.get(a);for(b=f.length-1;b>=0;b--)c=f[b],c.obj===a&&(e._remove(c.obj,c.name,c.cfunc),c.obj=c.cfunc=null,f.splice(b,1))}},cancel:function(a){return a?(this.stop(a),this.prevent(a)):!1},stop:function(a){return a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,!1},prevent:function(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,!1},destroy:function(){var a=this;c(a.events,function(b){a._remove(b.obj,b.name,b.cfunc),b.obj=b.cfunc=null}),a.events=[],a=null},_add:function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener?a.addEventListener(b,c,!1):a["on"+b]=c},_remove:function(a,b,c){if(a)try{a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener?a.removeEventListener(b,c,!1):a["on"+b]=null}catch(d){}},_pageInit:function(){var a=this;if(a.domLoaded)return;a.domLoaded=!0,c(a.inits,function(a){a()}),a.inits=[]},_wait:function(a){var b=this,c=a.document;if(a.tinyMCE_GZ&&tinyMCE_GZ.loaded){b.domLoaded=1;return}if(c.readyState==="complete"){b._pageInit(a);return}c.attachEvent?(c.attachEvent("onreadystatechange",function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",arguments.callee),b._pageInit(a))}),c.documentElement.doScroll&&a==a.top&&function(){if(b.domLoaded)return;try{c.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}b._pageInit(a)}()):c.addEventListener&&b._add(a,"DOMContentLoaded",function(){b._pageInit(a)}),b._add(a,"load",function(){b._pageInit(a)})},_stoppers:{preventDefault:function(){this.returnValue=!1},stopPropagation:function(){this.cancelBubble=!0}}}),b=a.dom.Event=new a.dom.EventUtils,b._wait(window),a.addUnload(function(){b.destroy()})}(tinymce),function(a){a.dom.Element=function(b,c){var d,e,f=this;f.settings=c=c||{},f.id=b,f.dom=d=c.dom||a.DOM,a.isIE||(e=d.get(f.id)),a.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){f[a]=function(){var c,e=[b];for(c=0;c<arguments.length;c++)e.push(arguments[c]);return e=d[a].apply(d,e),f.update(a),e}}),a.extend(f,{on:function(b,c,d){return a.dom.Event.add(f.id,b,c,d)},getXY:function(){return{x:parseInt(f.getStyle("left")),y:parseInt(f.getStyle("top"))}},getSize:function(){var a=d.get(f.id);return{w:parseInt(f.getStyle("width")||a.clientWidth),h:parseInt(f.getStyle("height")||a.clientHeight)}},moveTo:function(a,b){f.setStyles({left:a,top:b})},moveBy:function(a,b){var c=f.getXY();f.moveTo(c.x+a,c.y+b)},resizeTo:function(a,b){f.setStyles({width:a,height:b})},resizeBy:function(a,b){var c=f.getSize();f.resizeTo(c.w+a,c.h+b)},update:function(b){var e;if(a.isIE6&&c.blocker){b=b||"";if(b.indexOf("get")===0||b.indexOf("has")===0||b.indexOf("is")===0)return;if(b=="remove"){d.remove(f.blocker);return}f.blocker?e=d.get(f.blocker):(f.blocker=d.uniqueId(),e=d.add(c.container||d.getRoot(),"iframe",{id:f.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),d.setStyle(e,"opacity",0)),d.setStyles(e,{left:f.getStyle("left",1),top:f.getStyle("top",1),width:f.getStyle("width",1),height:f.getStyle("height",1),display:f.getStyle("display",1),zIndex:parseInt(f.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(a){var b=a.is,c=a.isIE,d=a.each;a.create("tinymce.dom.Selection",{Selection:function(b,c,e){var f=this;f.dom=b,f.win=c,f.serializer=e,d(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(b){f[b]=new a.util.Dispatcher(f)}),f.win.getSelection||(f.tridentSel=new a.dom.TridentSelection(f)),a.isIE&&b.boxModel&&this._fixIESelection(),a.addUnload(f.destroy,f)},setCursorLocation:function(a,b){var c=this,d=c.dom.createRng();d.setStart(a,b),d.setEnd(a,b),c.setRng(d),c.collapse(!1)},getContent:function(a){var c,d,e,f=this,g=f.getRng(),h=f.dom.create("body"),i=f.getSel();return a=a||{},c=d="",a.get=!0,a.format=a.format||"html",a.forced_root_block="",f.onBeforeGetContent.dispatch(f,a),a.format=="text"?f.isCollapsed()?"":g.text||(i.toString?i+"":""):(g.cloneContents?(e=g.cloneContents(),e&&h.appendChild(e)):b(g.item)||b(g.htmlText)?(h.innerHTML="<br>"+(g.item?g.item(0).outerHTML:g.htmlText),h.removeChild(h.firstChild)):h.innerHTML=g+"",/^\s/.test(h.innerHTML)&&(c=" "),/\s+$/.test(h.innerHTML)&&(d=" "),a.getInner=!0,a.content=f.isCollapsed()?"":c+f.serializer.serialize(h,a)+d,f.onGetContent.dispatch(f,a),a.content)},setContent:function(a,b){var c,d,e,f=this,g=f.getRng(),h=f.win.document;b=b||{format:"html"},b.set=!0,a=b.content=a,b.no_events||f.onBeforeSetContent.dispatch(f,b),a=b.content;if(g.insertNode){a+='<span id="__caret">_</span>',g.startContainer==h&&g.endContainer==h?h.body.innerHTML=a:(g.deleteContents(),h.body.childNodes.length==0?h.body.innerHTML=a:g.createContextualFragment?g.insertNode(g.createContextualFragment(a)):(d=h.createDocumentFragment(),e=h.createElement("div"),d.appendChild(e),e.outerHTML=a,g.insertNode(d))),c=f.dom.get("__caret"),g=h.createRange(),g.setStartBefore(c),g.setEndBefore(c),f.setRng(g),f.dom.remove("__caret");try{f.setRng(g)}catch(i){}}else g.item&&(h.execCommand("Delete",!1,null),g=f.getRng()),/^\s+/.test(a)?(g.pasteHTML('<span id="__mce_tmp">_</span>'+a),f.dom.remove("__mce_tmp")):g.pasteHTML(a);b.no_events||f.onSetContent.dispatch(f,b)},getStart:function(){var a,b,c,d,e=this.getRng();if(e.duplicate||e.item){if(e.item)return e.item(0);c=e.duplicate(),c.collapse(1),a=c.parentElement(),b=d=e.parentElement();while(d=d.parentNode)if(d==a){a=b;break}return a}return a=e.startContainer,a.nodeType==1&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,e.startOffset)]),a&&a.nodeType==3?a.parentNode:a},getEnd:function(){var a,b,c=this,d=c.getRng();return d.duplicate||d.item?d.item?d.item(0):(d=d.duplicate(),d.collapse(0),a=d.parentElement(),a&&a.nodeName=="BODY"?a.lastChild||a:a):(a=d.endContainer,b=d.endOffset,a.nodeType==1&&a.hasChildNodes()&&(a=a.childNodes[b>0?b-1:b]),a&&a.nodeType==3?a.parentNode:a)},getBookmark:function(a,b){function n(a,b){var c=0;return d(l.select(a),function(a,d){a==b&&(c=d)}),c}var c,e,f,g,h,i,j,k=this,l=k.dom,m="﻿";if(a==2){function o(){function e(a,d){var e,f,g=a[d?"startContainer":"endContainer"],h=a[d?"startOffset":"endOffset"],i=[],j=0;if(g.nodeType==3){if(b)for(e=g.previousSibling;e&&e.nodeType==3;e=e.previousSibling)h+=e.nodeValue.length;i.push(h)}else f=g.childNodes,h>=f.length&&f.length&&(j=1,h=Math.max(0,f.length-1)),i.push(k.dom.nodeIndex(f[h],b)+j);for(;g&&g!=c;g=g.parentNode)i.push(k.dom.nodeIndex(g,b));return i}var a=k.getRng(!0),c=l.getRoot(),d={};return d.start=e(a,!0),k.isCollapsed()||(d.end=e(a)),d}return k.tridentSel?k.tridentSel.getBookmark(a):o()}if(a)return{rng:k.getRng()};c=k.getRng(),f=l.uniqueId(),g=tinyMCE.activeEditor.selection.isCollapsed(),j="overflow:hidden;line-height:0px";if(c.duplicate||c.item){if(!!c.item)return i=c.item(0),h=i.nodeName,{name:h,index:n(h,i)};e=c.duplicate();try{c.collapse(),c.pasteHTML('<span data-mce-type="bookmark" id="'+f+'_start" style="'+j+'">'+m+"</span>"),g||(e.collapse(!1),c.moveToElementText(e.parentElement()),c.compareEndPoints("StartToEnd",e)==0&&e.move("character",-1),e.pasteHTML('<span data-mce-type="bookmark" id="'+f+'_end" style="'+j+'">'+m+"</span>"))}catch(p){return null}}else{i=k.getNode(),h=i.nodeName;if(h=="IMG")return{name:h,index:n(h,i)};e=c.cloneRange(),g||(e.collapse(!1),e.insertNode(l.create("span",{"data-mce-type":"bookmark",id:f+"_end",style:j},m))),c.collapse(!0),c.insertNode(l.create("span",{"data-mce-type":"bookmark",id:f+"_start",style:j},m))}return k.moveToBookmark({id:f,keep:1}),{id:f}},moveToBookmark:function(b){var e,f,g,h,i,j,k=this,l=k.dom;if(b)if(b.start){e=l.createRng(),f=l.getRoot();function m(a){var c,d,g,h,i=b[a?"start":"end"];if(i){g=i[0];for(d=f,c=i.length-1;c>=1;c--){h=d.childNodes;if(i[c]>h.length-1)return;d=h[i[c]]}d.nodeType===3&&(g=Math.min(i[0],d.nodeValue.length)),d.nodeType===1&&(g=Math.min(i[0],d.childNodes.length)),a?e.setStart(d,g):e.setEnd(d,g)}return!0}if(k.tridentSel)return k.tridentSel.moveToBookmark(b);m(!0)&&m()&&k.setRng(e)}else if(b.id){function n(c){var e,f,k,m,n=l.get(b.id+"_"+c),o=b.keep;if(n){e=n.parentNode,c=="start"?(o?(e=n.firstChild,f=1):f=l.nodeIndex(n),g=h=e,i=j=f):(o?(e=n.firstChild,f=1):f=l.nodeIndex(n),h=e,j=f);if(!o){m=n.previousSibling,k=n.nextSibling,d(a.grep(n.childNodes),function(a){a.nodeType==3&&(a.nodeValue=a.nodeValue.replace(/\uFEFF/g,""))});while(n=l.get(b.id+"_"+c))l.remove(n,1);m&&k&&m.nodeType==k.nodeType&&m.nodeType==3&&!a.isOpera&&(f=m.nodeValue.length,m.appendData(k.nodeValue),l.remove(k),c=="start"?(g=h=m,i=j=f):(h=m,j=f))}}}function o(a){return l.isBlock(a)&&!a.innerHTML&&(a.innerHTML=c?" ":'<br data-mce-bogus="1" />'),a}n("start"),n("end"),g&&(e=l.createRng(),e.setStart(o(g),i),e.setEnd(o(h),j),k.setRng(e))}else b.name?k.select(l.select(b.name)[b.index]):b.rng&&k.setRng(b.rng)},select:function(b,c){var d,e=this,f=e.dom,g=f.createRng();if(b){d=f.nodeIndex(b),g.setStart(b.parentNode,d),g.setEnd(b.parentNode,d+1);if(c){function h(b,c){var d=new a.dom.TreeWalker(b,b);do{if(b.nodeType==3&&a.trim(b.nodeValue).length!=0){c?g.setStart(b,0):g.setEnd(b,b.nodeValue.length);return}if(b.nodeName=="BR"){c?g.setStartBefore(b):g.setEndBefore(b);return}}while(b=c?d.next():d.prev())}h(b,1),h(b)}e.setRng(g)}return b},isCollapsed:function(){var a=this,b=a.getRng(),c=a.getSel();return!b||b.item?!1:b.compareEndPoints?b.compareEndPoints("StartToEnd",b)===0:!c||b.collapsed},collapse:function(a){var b,c=this,d=c.getRng();d.item&&(b=d.item(0),d=c.win.document.body.createTextRange(),d.moveToElementText(b)),d.collapse(!!a),c.setRng(d)},getSel:function(){var a=this,b=this.win;return b.getSelection?b.getSelection():b.document.selection},getRng:function(b){var c,d,e,f=this,g=f.win.document;if(b&&f.tridentSel)return f.tridentSel.getRangeAt(0);try{if(c=f.getSel())d=c.rangeCount>0?c.getRangeAt(0):c.createRange?c.createRange():g.createRange()}catch(h){}return a.isIE&&d&&d.setStart&&g.selection.createRange().item&&(e=g.selection.createRange().item(0),d=g.createRange(),d.setStartBefore(e),d.setEndAfter(e)),d||(d=g.createRange?g.createRange():g.body.createTextRange()),f.selectedRange&&f.explicitRange&&(d.compareBoundaryPoints(d.START_TO_START,f.selectedRange)===0&&d.compareBoundaryPoints(d.END_TO_END,f.selectedRange)===0?d=f.explicitRange:(f.selectedRange=null,f.explicitRange=null)),d},setRng:function(a){var b,c=this;if(!c.tridentSel){b=c.getSel();if(b){c.explicitRange=a;try{b.removeAllRanges()}catch(d){}b.addRange(a),c.selectedRange=b.rangeCount>0?b.getRangeAt(0):null}}else{if(a.cloneRange){c.tridentSel.addRange(a);return}try{a.select()}catch(d){}}},setNode:function(a){var b=this;return b.setContent(b.dom.getOuterHTML(a)),a},getNode:function(){var a,b=this,c=b.getRng(),d=b.getSel(),e=c.startContainer,f=c.endContainer;if(!c)return b.dom.getRoot();if(c.setStart){a=c.commonAncestorContainer;if(!c.collapsed){c.startContainer==c.endContainer&&c.endOffset-c.startOffset<2&&c.startContainer.hasChildNodes()&&(a=c.startContainer.childNodes[c.startOffset]);if(e.nodeType===3&&f.nodeType===3){function g(a,b){var c=a;while(a&&a.nodeType===3&&a.length===0)a=b?a.nextSibling:a.previousSibling;return a||c}e.length===c.startOffset?e=g(e.nextSibling,!0):e=e.parentNode,c.endOffset===0?f=g(f.previousSibling,!1):f=f.parentNode;if(e&&e===f)return e}}return a&&a.nodeType==3?a.parentNode:a}return c.item?c.item(0):c.parentElement()},getSelectedBlocks:function(b,c){var d,e,f=this,g=f.dom,h=[],i=g.getParent(b||f.getStart(),g.isBlock),j=g.getParent(c||f.getEnd(),g.isBlock);i&&h.push(i);if(i&&j&&i!=j){d=i,e=new a.dom.TreeWalker(i,g.getRoot());while((d=e.next())&&d!=j)g.isBlock(d)&&h.push(d)}return j&&i!=j&&h.push(j),h},normalize:function(){function e(e){var f,g,h=d.dom,i=h.getRoot(),j=b[(e?"start":"end")+"Container"],k=b[(e?"start":"end")+"Offset"];j.nodeType===9&&(j=j.body,k=0);if(j===i&&j.hasChildNodes()){j=j.childNodes[Math.min(!e&&k>0?k-1:k,j.childNodes.length-1)],k=0;if(j.hasChildNodes()){g=j,f=new a.dom.TreeWalker(j,i);do{if(g.nodeType===3){k=e?0:g.nodeValue.length-1,j=g,c=!0;break}if(/^(BR|IMG)$/.test(g.nodeName)){k=h.nodeIndex(g),j=g.parentNode,g.nodeName=="IMG"&&!e&&k++,c=!0;break}}while(g=e?f.next():f.prev())}}c&&b["set"+(e?"Start":"End")](j,k)}var b,c,d=this;if(a.isIE)return;b=d.getRng(),e(!0),b.collapsed||e(),c&&d.setRng(b)},destroy:function(b){var c=this;c.win=null,b||a.removeUnload(c.destroy)},_fixIESelection:function(){function g(a,b){var c=f.createTextRange();try{c.moveToPoint(a,b)}catch(d){c=null}return c}function h(a){var c;a.button?(c=g(a.x,a.y),c&&(c.compareEndPoints("StartToStart",b)>0?c.setEndPoint("StartToStart",b):c.setEndPoint("EndToEnd",b),c.select())):i()}function i(){var c=e.selection.createRange();b&&!c.item&&c.compareEndPoints("StartToEnd",c)===0&&b.select(),d.unbind(e,"mouseup",i),d.unbind(e,"mousemove",h),b=a=0}var a,b,c,d=this.dom,e=d.doc,f=e.body;e.documentElement.unselectable=!0,d.bind(e,["mousedown","contextmenu"],function(f){if(f.target.nodeName==="HTML"){a&&i(),c=e.documentElement;if(c.scrollHeight>c.clientHeight)return;a=1,b=g(f.x,f.y),b&&(d.bind(e,"mouseup",i),d.bind(e,"mousemove",h),d.win.focus(),b.select())}})}})}(tinymce),function(a){a.dom.Serializer=function(b,c,d){var e,f,g,h=a.isIE,i=a.each;return b.apply_source_formatting||(b.indent=!1),c=c||a.DOM,d=d||new a.html.Schema(b),b.entity_encoding=b.entity_encoding||"named",b.remove_trailing_brs="remove_trailing_brs"in b?b.remove_trailing_brs:!0,e=new a.util.Dispatcher(self),f=new a.util.Dispatcher(self),g=new a.html.DomParser(b,d),g.addAttributeFilter("src,href,style",function(a,d){var e,f,g,h=a.length,i="data-mce-"+d,j=b.url_converter,k=b.url_converter_scope;while(h--)e=a[h],f=e.attributes.map[i],f!==g?(e.attr(d,f.length>0?f:null),e.attr(i,null)):(f=e.attributes.map[d],d==="style"?f=c.serializeStyle(c.parseStyle(f),e.name):j&&(f=j.call(k,f,d,e.name)),e.attr(d,f.length>0?f:null))}),g.addAttributeFilter("class",function(a){var b,c,d=a.length;while(d--)b=a[d],c=b.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,""),b.attr("class",c.length>0?c:null)}),g.addAttributeFilter("data-mce-type",function(a,b,c){var d,e=a.length;while(e--)d=a[e],d.attributes.map["data-mce-type"]==="bookmark"&&!c.cleanup&&d.remove()}),g.addNodeFilter("script,style",function(a,b){function f(a){return a.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}var c,d,e=a.length;while(e--)c=a[e],d=c.firstChild?c.firstChild.value:"",b==="script"?(c.attr("type",(c.attr("type")||"text/javascript").replace(/^mce\-/,"")),d.length>0&&(c.firstChild.value="// <![CDATA[\n"+f(d)+"\n// ]]>")):d.length>0&&(c.firstChild.value="<!--\n"+f(d)+"\n-->")}),g.addNodeFilter("#comment",function(a){var b,c=a.length;while(c--)b=a[c],b.value.indexOf("[CDATA[")===0?(b.name="#cdata",b.type=4,b.value=b.value.replace(/^\[CDATA\[|\]\]$/g,"")):b.value.indexOf("mce:protected ")===0&&(b.name="#text",b.type=3,b.raw=!0,b.value=unescape(b.value).substr(14))}),g.addNodeFilter("xml:namespace,input",function(a,b){var c,d=a.length;while(d--)c=a[d],c.type===7?c.remove():c.type===1&&b==="input"&&!("type"in c.attributes.map)&&c.attr("type","text")}),b.fix_list_elements&&g.addNodeFilter("ul,ol",function(a){var b,c,d=a.length;while(d--)b=a[d],c=b.parent,(c.name==="ul"||c.name==="ol")&&b.prev&&b.prev.name==="li"&&b.prev.append(b)}),g.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){var c=a.length;while(c--)a[c].attr(b,null)}),{schema:d,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,onPreProcess:e,onPostProcess:f,serialize:function(j,k){var l,m,n,o,p;return h&&c.select("script,style,select,map").length>0?(p=j.innerHTML,j=j.cloneNode(!1),c.setHTML(j,p)):j=j.cloneNode(!0),l=j.ownerDocument.implementation,l.createHTMLDocument&&(m=l.createHTMLDocument(""),i(j.nodeName=="BODY"?j.childNodes:[j],function(a){m.body.appendChild(m.importNode(a,!0))}),j.nodeName!="BODY"?j=m.body.firstChild:j=m.body,n=c.doc,c.doc=m),k=k||{},k.format=k.format||"html",k.no_events||(k.node=j,e.dispatch(self,k)),o=new a.html.Serializer(b,d),k.content=o.serialize(g.parse(k.getInner?j.innerHTML:a.trim(c.getOuterHTML(j),k),k)),k.cleanup||(k.content=k.content.replace(/\uFEFF|\u200B/g,"")),k.no_events||f.dispatch(self,k),n&&(c.doc=n),k.node=null,k.content},addRules:function(a){d.addValidElements(a)},setRules:function(a){d.setValidElements(a)}}}}(tinymce),function(a){a.dom.ScriptLoader=function(){function k(b,c){function j(){i.remove(g),d&&(d.onreadystatechange=d.onload=d=null),c()}function k(){typeof console!="undefined"&&console.log&&console.log("Failed to load: "+b)}var d,e,f,g,h=this,i=a.DOM;g=i.uniqueId();if(a.isIE6){e=new a.util.URI(b),f=location;if(e.host==f.hostname&&e.port==f.port&&e.protocol+":"==f.protocol&&e.protocol.toLowerCase()!="file"){a.util.XHR.send({url:a._addVer(e.getURI()),success:function(a){var b=i.create("script",{type:"text/javascript"});b.text=a,document.getElementsByTagName("head")[0].appendChild(b),i.remove(b),j()},error:k});return}}d=i.create("script",{id:g,type:"text/javascript",src:a._addVer(b)}),a.isIE||(d.onload=j),d.onerror=k,a.isOpera||(d.onreadystatechange=function(){var a=d.readyState;(a=="complete"||a=="loaded")&&j()}),(document.getElementsByTagName("head")[0]||document.body).appendChild(d)}var b,c=0,d=1,e=2,f={},g=[],h={},i=[],j=0;this.isDone=function(a){return f[a]==e},this.markDone=function(a){f[a]=e},this.add=this.load=function(a,d,e){var i=f[a];i==b&&(g.push(a),f[a]=c),d&&(h[a]||(h[a]=[]),h[a].push({func:d,scope:e||this}))},this.loadQueue=function(a,b){this.loadScripts(g,a,b)},this.loadScripts=function(c,g,l){function n(c){a.each(h[c],function(a){a.func.call(a.scope)}),h[c]=b}var m;i.push({func:g,scope:l||this}),m=function(){var b=a.grep(c);c.length=0,a.each(b,function(a){if(f[a]==e){n(a);return}f[a]!=d&&(f[a]=d,j++,k(a,function(){f[a]=e,j--,n(a),m()}))}),j||(a.each(i,function(a){a.func.call(a.scope)}),i.length=0)},m()}},a.ScriptLoader=new a.dom.ScriptLoader}(tinymce),tinymce.dom.TreeWalker=function(a,b){function d(a,c,d,e){var f,g;if(a){if(!e&&a[c])return a[c];if(a!=b){f=a[d];if(f)return f;for(g=a.parentNode;g&&g!=b;g=g.parentNode){f=g[d];if(f)return f}}}}var c=a;this.current=function(){return c},this.next=function(a){return c=d(c,"firstChild","nextSibling",a)},this.prev=function(a){return c=d(c,"lastChild","previousSibling",a)}},function(a){a.dom.RangeUtils=function(b){var c="﻿";this.walk=function(c,d){function p(a){var b=a[0];return b.nodeType===3&&b===k&&l>=b.nodeValue.length&&a.splice(0,1),b=a[a.length-1],n===0&&a.length>0&&b===m&&b.nodeType===3&&a.splice(a.length-1,1),a}function q(a,b,c){var d=[];for(;a&&a!=c;a=a[b])d.push(a);return d}function r(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function s(a,b,c){var e=c?"nextSibling":"previousSibling";for(h=a,i=h.parentNode;h&&h!=b;h=i)i=h.parentNode,j=q(h==a?h:h[e],e),j.length&&(c||j.reverse(),d(p(j)))}var e,f,g,h,i,j,k=c.startContainer,l=c.startOffset,m=c.endContainer,n=c.endOffset,o=b.select("td.mceSelected,th.mceSelected");if(o.length>0){a.each(o,function(a){d([a])});return}k.nodeType==1&&k.hasChildNodes()&&(k=k.childNodes[l]),m.nodeType==1&&m.hasChildNodes()&&(m=m.childNodes[Math.min(n-1,m.childNodes.length-1)]);if(k==m)return d(p([k]));e=b.findCommonAncestor(k,m);for(h=k;h;h=h.parentNode){if(h===m)return s(k,e,!0);if(h===e)break}for(h=m;h;h=h.parentNode){if(h===k)return s(m,e);if(h===e)break}f=r(k,e)||k,g=r(m,e)||m,s(k,f,!0),j=q(f==k?f:f.nextSibling,"nextSibling",g==m?g.nextSibling:g),j.length&&d(p(j)),s(m,g)},this.split=function(a){function f(a,b){return a.splitText(b)}var b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset;return b==d&&b.nodeType==3?c>0&&c<b.nodeValue.length&&(d=f(b,c),b=d.previousSibling,e>c?(e-=c,b=d=f(d,e).previousSibling,e=d.nodeValue.length,c=0):e=0):(b.nodeType==3&&c>0&&c<b.nodeValue.length&&(b=f(b,c),c=0),d.nodeType==3&&e>0&&e<d.nodeValue.length&&(d=f(d,e).previousSibling,e=d.nodeValue.length)),{startContainer:b,startOffset:c,endContainer:d,endOffset:e}}},a.dom.RangeUtils.compareRanges=function(a,b){if(a&&b){if(!a.item&&!a.duplicate)return a.startContainer==b.startContainer&&a.startOffset==b.startOffset;if(a.item&&b.item&&a.item(0)===b.item(0))return!0;if(a.isEqual&&b.isEqual&&b.isEqual(a))return!0}return!1}}(tinymce),function(a){var b=a.dom.Event,c=a.each;a.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(d,e){var f,g,h,i,j,k=this,l=d.root,m=d.items,n=d.enableUpDown,o=d.enableLeftRight||!d.enableUpDown,p=d.excludeFromTabOrder;e=e||a.DOM,f=function(a){j=a.target.id},g=function(a){e.setAttrib(a.target.id,"tabindex","-1")},i=function(){var a=e.get(j);e.setAttrib(a,"tabindex","0"),a.focus()},k.focus=function(){e.get(j).focus()},k.destroy=function(){c(m,function(a){e.unbind(e.get(a.id),"focus",f),e.unbind(e.get(a.id),"blur",g)}),e.unbind(e.get(l),"focus",i),e.unbind(e.get(l),"keydown",h),m=e=l=k.focus=f=g=h=i=null,k.destroy=function(){}},k.moveFocus=function(a,f){var g,h=-1,i=k.controls;if(!j)return;c(m,function(a,b){if(a.id===j)return h=b,!1}),h+=a,h<0?h=m.length-1:h>=m.length&&(h=0),g=m[h],e.setAttrib(j,"tabindex","-1"),e.setAttrib(g.id,"tabindex","0"),e.get(g.id).focus(),d.actOnFocus&&d.onAction(g.id),f&&b.cancel(f)},h=function(a){var c=37,e=39,f=38,g=40,h=27,i=14,l=13,m=32;switch(a.keyCode){case c:o&&k.moveFocus(-1);break;case e:o&&k.moveFocus(1);break;case f:n&&k.moveFocus(-1);break;case g:n&&k.moveFocus(1);break;case h:d.onCancel&&(d.onCancel(),b.cancel(a));break;case i:case l:case m:d.onAction&&(d.onAction(j),b.cancel(a))}},c(m,function(a,b){var c;a.id||(a.id=e.uniqueId("_mce_item_")),p?(e.bind(a.id,"blur",g),c="-1"):c=b===0?"0":"-1",e.setAttrib(a.id,"tabindex",c),e.bind(e.get(a.id),"focus",f)}),m[0]&&(j=m[0].id),e.setAttrib(l,"tabindex","-1"),e.bind(e.get(l),"focus",i),e.bind(e.get(l),"keydown",h)}})}(tinymce),function(a){var b=a.DOM,c=a.is;a.create("tinymce.ui.Control",{Control:function(b,c,d){this.id=b,this.settings=c=c||{},this.rendered=!1,this.onRender=new a.util.Dispatcher(this),this.classPrefix="",this.scope=c.scope||this,this.disabled=0,this.active=0,this.editor=d},setAriaProperty:function(a,c){var d=b.get(this.id+"_aria")||b.get(this.id);d&&b.setAttrib(d,"aria-"+a,!!c)},focus:function(){b.get(this.id).focus()},setDisabled:function(a){a!=this.disabled&&(this.setAriaProperty("disabled",a),this.setState("Disabled",a),this.setState("Enabled",!a),this.disabled=a)},isDisabled:function(){return this.disabled},setActive:function(a){a!=this.active&&(this.setState("Active",a),this.active=a,this.setAriaProperty("pressed",a))},isActive:function(){return this.active},setState:function(a,c){var d=b.get(this.id);a=this.classPrefix+a,c?b.addClass(d,a):b.removeClass(d,a)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(a){b.setHTML(a,this.renderHTML())},postRender:function(){var a,b=this;c(b.disabled)&&(a=b.disabled,b.disabled=-1,b.setDisabled(a)),c(b.active)&&(a=b.active,b.active=-1,b.setActive(a))},remove:function(){b.remove(this.id),this.destroy()},destroy:function(){a.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(a,b,c){this.parent(a,b,c),this.controls=[],this.lookup={}},add:function(a){return this.lookup[a.id]=a,this.controls.push(a),a},get:function(a){return this.lookup[a]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(a,b){this.parent(a,b),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(a,b){this.parent(a,b),this.classPrefix="mceMenuItem"},setSelected:function(a){this.setState("Selected",a),this.setAriaProperty("checked",!!a),this.selected=a},isSelected:function(){return this.selected},postRender:function(){var a=this;a.parent(),b(a.selected)&&a.setSelected(a.selected)}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.walk;a.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(b,c){var d=this;d.parent(b,c),d.items={},d.collapsed=!1,d.menuCount=0,d.onAddItem=new a.util.Dispatcher(this)},expand:function(a){var b=this;a&&e(b,function(a){a.expand&&a.expand()},"items",b),b.collapsed=!1},collapse:function(a){var b=this;a&&e(b,function(a){a.collapse&&a.collapse()},"items",b),b.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(b){return b.settings||(b=new a.ui.MenuItem(b.id||c.uniqueId(),b)),this.onAddItem.dispatch(this,b),this.items[b.id]=b},addSeparator:function(){return this.add({separator:!0})},addMenu:function(a){return a.collapse||(a=this.createMenu(a)),this.menuCount++,this.add(a)},hasMenus:function(){return this.menuCount!==0},remove:function(a){delete this.items[a.id]},removeAll:function(){var a=this;e(a,function(a){a.removeAll?a.removeAll():a.remove(),a.destroy()},"items",a),a.items={}},createMenu:function(b){var d=new a.ui.Menu(b.id||c.uniqueId(),b);return d.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),d}})}(tinymce),function(a){var b=a.is,c=a.DOM,d=a.each,e=a.dom.Event,f=a.dom.Element;a.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(d,e){e=e||{},e.container=e.container||c.doc.body,e.offset_x=e.offset_x||0,e.offset_y=e.offset_y||0,e.vp_offset_x=e.vp_offset_x||0,e.vp_offset_y=e.vp_offset_y||0,b(e.icons)&&!e.icons&&(e["class"]+=" mceNoIcons"),this.parent(d,e),this.onShowMenu=new a.util.Dispatcher(this),this.onHideMenu=new a.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(b){var d,e=this,f=e.settings;return b.container=b.container||f.container,b.parent=e,b.constrain=b.constrain||f.constrain,b["class"]=b["class"]||f["class"],b.vp_offset_x=b.vp_offset_x||f.vp_offset_x,b.vp_offset_y=b.vp_offset_y||f.vp_offset_y,b.keyboard_focus=f.keyboard_focus,d=new a.ui.DropMenu(b.id||c.uniqueId(),b),d.onAddItem.add(e.onAddItem.dispatch,e.onAddItem),d},focus:function(){var a=this;a.keyboardNav&&a.keyboardNav.focus()},update:function(){var a=this,b=a.settings,d=c.get("menu_"+a.id+"_tbl"),e=c.get("menu_"+a.id+"_co"),f=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth,g=b.max_height?Math.min(d.clientHeight,b.max_height):d.clientHeight;c.boxModel?a.element.setStyles({width:f,height:g}):a.element.setStyles({width:f+2,height:g+2}),b.max_width&&c.setStyle(e,"width",f),b.max_height&&(c.setStyle(e,"height",g),d.clientHeight<b.max_height&&c.setStyle(e,"overflow","hidden"))},showMenu:function(b,g,h){var i,j,k,l,m,n,o=this,p=o.settings,q=c.getViewPort(),r=2,s=o.classPrefix;o.collapse(1);if(o.isMenuVisible)return;o.rendered?i=c.get("menu_"+o.id):(i=c.add(o.settings.container,o.renderNode()),d(o.items,function(a){a.postRender()}),o.element=new f("menu_"+o.id,{blocker:1,container:p.container})),a.isOpera||c.setStyles(i,{left:-65535,top:-65535}),c.show(i),o.update(),b+=p.offset_x||0,g+=p.offset_y||0,q.w-=4,q.h-=4,p.constrain&&(j=i.clientWidth-r,k=i.clientHeight-r,l=q.x+q.w,m=q.y+q.h,b+p.vp_offset_x+j>l&&(b=h?h-j:Math.max(0,l-p.vp_offset_x-j)),g+p.vp_offset_y+k>m&&(g=Math.max(0,m-p.vp_offset_y-k))),c.setStyles(i,{left:b,top:g}),o.element.update(),o.isMenuVisible=1,o.mouseClickFunc=e.add(i,"click",function(a){var b;a=a.target;if(a&&(a=c.getParent(a,"tr"))&&!c.hasClass(a,s+"ItemSub")){b=o.items[a.id];if(b.isDisabled())return;n=o;while(n)n.hideMenu&&n.hideMenu(),n=n.settings.parent;return b.settings.onclick&&b.settings.onclick(a),e.cancel(a)}}),o.hasMenus()&&(o.mouseOverFunc=e.add(i,"mouseover",function(a){var b,d;a=a.target;if(a&&(a=c.getParent(a,"tr"))){b=o.items[a.id],o.lastMenu&&o.lastMenu.collapse(1);if(b.isDisabled())return;a&&c.hasClass(a,s+"ItemSub")&&(d=c.getRect(a),b.showMenu(d.x+d.w-r,d.y-r,d.x),o.lastMenu=b,c.addClass(c.get(b.id).firstChild,s+"ItemActive"))}})),e.add(i,"keydown",o._keyHandler,o),o.onShowMenu.dispatch(o),p.keyboard_focus&&o._setupKeyboardNav()},hideMenu:function(a){var b,d=this,f=c.get("menu_"+d.id);if(!d.isMenuVisible)return;d.keyboardNav&&d.keyboardNav.destroy(),e.remove(f,"mouseover",d.mouseOverFunc),e.remove(f,"click",d.mouseClickFunc),e.remove(f,"keydown",d._keyHandler),c.hide(f),d.isMenuVisible=0,a||d.collapse(1),d.element&&d.element.hide(),(b=c.get(d.id))&&c.removeClass(b.firstChild,d.classPrefix+"ItemActive"),d.onHideMenu.dispatch(d)},add:function(a){var b,d=this;return a=d.parent(a),d.isRendered&&(b=c.get("menu_"+d.id))&&d._add(c.select("tbody",b)[0],a),a},collapse:function(a){this.parent(a),this.hideMenu(1)},remove:function(a){return c.remove(a.id),this.destroy(),this.parent(a)},destroy:function(){var a=this,b=c.get("menu_"+a.id);a.keyboardNav&&a.keyboardNav.destroy(),e.remove(b,"mouseover",a.mouseOverFunc),e.remove(c.select("a",b),"focus",a.mouseOverFunc),e.remove(b,"click",a.mouseClickFunc),e.remove(b,"keydown",a._keyHandler),a.element&&a.element.remove(),c.remove(b)},renderNode:function(){var a,b,e,g=this,h=g.settings,i=c.create("div",{role:"listbox",id:"menu_"+g.id,"class":h["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});return g.settings.parent&&c.setAttrib(i,"aria-parent","menu_"+g.settings.parent.id),e=c.add(i,"div",{role:"presentation",id:"menu_"+g.id+"_co","class":g.classPrefix+(h["class"]?" "+h["class"]:"")}),g.element=new f("menu_"+g.id,{blocker:1,container:h.container}),h.menu_line&&c.add(e,"span",{"class":g.classPrefix+"Line"}),a=c.add(e,"table",{role:"presentation",id:"menu_"+g.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),b=c.add(a,"tbody"),d(g.items,function(a){g._add(b,a)}),g.rendered=!0,i},_setupKeyboardNav:function(){var b=this,d=c.get("menu_"+b.id),e=c.select("a[role=option]","menu_"+b.id);e.splice(0,0,d),b.keyboardNav=new a.ui.KeyboardNavigation({root:"menu_"+b.id,items:e,onCancel:function(){b.hideMenu()},enableUpDown:!0}),d.focus()},_keyHandler:function(a){var b=this;switch(a.keyCode){case 37:b.settings.parent&&(b.hideMenu(),b.settings.parent.focus(),e.cancel(a));break;case 39:b.mouseOverFunc&&b.mouseOverFunc(a)}},_add:function(a,b){var d,e,f,g,h,i=b.settings,j=this.classPrefix;if(i.separator){f=c.add(a,"tr",{id:b.id,"class":j+"ItemSeparator"}),c.add(f,"td",{"class":j+"ItemSeparator"}),(d=f.previousSibling)&&c.addClass(d,"mceLast");return}d=f=c.add(a,"tr",{id:b.id,"class":j+"Item "+j+"ItemEnabled"}),d=g=c.add(d,i.titleItem?"th":"td"),d=e=c.add(d,"a",{id:b.id+"_aria",role:i.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),i.parent&&(c.setAttrib(e,"aria-haspopup","true"),c.setAttrib(e,"aria-owns","menu_"+b.id)),c.addClass(g,i["class"]),h=c.add(d,"span",{"class":"mceIcon"+(i.icon?" mce_"+i.icon:"")}),i.icon_src&&c.add(h,"img",{src:i.icon_src}),d=c.add(d,i.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&c.setAttrib(d,"style",b.settings.style),a.childNodes.length==1&&c.addClass(f,"mceFirst"),(d=f.previousSibling)&&c.hasClass(d,j+"ItemSeparator")&&c.addClass(f,"mceFirst"),b.collapse&&c.addClass(f,j+"ItemSub"),(d=f.previousSibling)&&c.removeClass(d,"mceLast"),c.addClass(f,"mceLast")}})}(tinymce),function(a){var b=a.DOM;a.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceButton"},renderHTML:function(){var a=this.classPrefix,c=this.settings,d=b.encode(c.label||""),e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+a+" "+a+"Enabled "+c["class"]+(d?" "+a+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+
this.id+'_voice" title="'+b.encode(c.title)+'">';return c.image&&(!this.editor||!this.editor.forcedHighContrastMode)?e+='<img class="mceIcon" src="'+c.image+'" alt="'+b.encode(c.title)+'" />'+d:e+='<span class="mceIcon '+c["class"]+'"></span>'+(d?'<span class="'+a+'Label">'+d+"</span>":""),e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+c.title+"</span>",e+="</a>",e},postRender:function(){var b,c=this,d=c.settings;a.isIE&&c.editor&&a.dom.Event.add(c.id,"mousedown",function(){var a=c.editor.selection.getNode().nodeName;b=a==="IMG"?c.editor.selection.getBookmark():null}),a.dom.Event.add(c.id,"click",function(e){if(!c.isDisabled())return a.isIE&&c.editor&&b!==null&&c.editor.selection.moveToBookmark(b),d.onclick.call(d.scope,e)}),a.dom.Event.add(c.id,"keyup",function(b){if(!c.isDisabled()&&b.keyCode==a.VK.SPACEBAR)return d.onclick.call(d.scope,b)})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(b,c,d){var f=this;f.parent(b,c,d),f.items=[],f.onChange=new e(f),f.onPostRender=new e(f),f.onAdd=new e(f),f.onRenderMenu=new a.util.Dispatcher(this),f.classPrefix="mceListBox"},select:function(a){var b,c,e=this;if(a==undefined)return e.selectByIndex(-1);a&&typeof a=="function"?c=a:c=function(b){return b==a},a!=e.selectedValue&&(d(e.items,function(a,d){if(c(a.value))return b=1,e.selectByIndex(d),!1}),b||e.selectByIndex(-1))},selectByIndex:function(a){var c,d,e,f=this;a!=f.selectedIndex&&(c=b.get(f.id+"_text"),e=b.get(f.id+"_voiceDesc"),d=f.items[a],d?(f.selectedValue=d.value,f.selectedIndex=a,b.setHTML(c,b.encode(d.title)),b.setHTML(e,f.settings.title+" - "+d.title),b.removeClass(c,"mceTitle"),b.setAttrib(f.id,"aria-valuenow",d.title)):(b.setHTML(c,b.encode(f.settings.title)),b.setHTML(e,b.encode(f.settings.title)),b.addClass(c,"mceTitle"),f.selectedValue=f.selectedIndex=null,b.setAttrib(f.id,"aria-valuenow",f.settings.title)),c=0)},add:function(b,c,d){var e=this;d=d||{},d=a.extend(d,{title:b,value:c}),e.items.push(d),e.onAdd.dispatch(e,d)},getLength:function(){return this.items.length},renderHTML:function(){var a="",c=this,d=c.settings,e=c.classPrefix;return a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+c.id+'_voiceDesc" aria-describedby="'+c.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+c.id+'" cellpadding="0" cellspacing="0" class="'+e+" "+e+"Enabled"+(d["class"]?" "+d["class"]:"")+'"><tbody><tr>',a+="<td>"+b.createHTML("span",{id:c.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},c.settings.title),a+=b.createHTML("a",{id:c.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},b.encode(c.settings.title))+"</td>",a+="<td>"+b.createHTML("a",{id:c.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>",a+="</tr></tbody></table></span>",a},showMenu:function(){var e,f,g=this,h=b.get(this.id);if(g.isDisabled()||g.items.length==0)return;if(g.menu&&g.menu.isMenuVisible)return g.hideMenu();g.isMenuRendered||(g.renderMenu(),g.isMenuRendered=!0),e=b.getPos(h),f=g.menu,f.settings.offset_x=e.x,f.settings.offset_y=e.y,f.settings.keyboard_focus=!a.isOpera,g.oldID&&f.items[g.oldID].setSelected(0),d(g.items,function(a){a.value===g.selectedValue&&(f.items[a.id].setSelected(1),g.oldID=a.id)}),f.showMenu(0,h.clientHeight),c.add(b.doc,"mousedown",g.hideMenu,g),b.addClass(g.id,g.classPrefix+"Selected")},hideMenu:function(a){var d=this;if(d.menu&&d.menu.isMenuVisible){b.removeClass(d.id,d.classPrefix+"Selected");if(!(!a||a.type!="mousedown"||a.target.id!=d.id+"_text"&&a.target.id!=d.id+"_open"))return;if(!a||!b.getParent(a.target,".mceMenu"))b.removeClass(d.id,d.classPrefix+"Selected"),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu.hideMenu()}},renderMenu:function(){var a=this,c=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});c.onHideMenu.add(function(){a.hideMenu(),a.focus()}),c.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}),d(a.items,function(d){d.value===undefined?c.add({title:d.title,role:"option","class":"mceMenuItemTitle",onclick:function(){a.settings.onselect("")!==!1&&a.select("")}}):(d.id=b.uniqueId(),d.role="option",d.onclick=function(){a.settings.onselect(d.value)!==!1&&a.select(d.value)},c.add(d))}),a.onRenderMenu.dispatch(a,c),a.menu=c},postRender:function(){var d=this,e=d.classPrefix;c.add(d.id,"click",d.showMenu,d),c.add(d.id,"keydown",function(a){a.keyCode==32&&(d.showMenu(a),c.cancel(a))}),c.add(d.id,"focus",function(){d._focused||(d.keyDownHandler=c.add(d.id,"keydown",function(a){a.keyCode==40&&(d.showMenu(),c.cancel(a))}),d.keyPressHandler=c.add(d.id,"keypress",function(a){var b;a.keyCode==13&&(b=d.selectedValue,d.selectedValue=null,c.cancel(a),d.settings.onselect(b))})),d._focused=1}),c.add(d.id,"blur",function(){c.remove(d.id,"keydown",d.keyDownHandler),c.remove(d.id,"keypress",d.keyPressHandler),d._focused=0});if(a.isIE6||!b.boxModel)c.add(d.id,"mouseover",function(){b.hasClass(d.id,e+"Disabled")||b.addClass(d.id,e+"Hover")}),c.add(d.id,"mouseout",function(){b.hasClass(d.id,e+"Disabled")||b.removeClass(d.id,e+"Hover")});d.onPostRender.dispatch(d,b.get(d.id))},destroy:function(){this.parent(),c.clear(this.id+"_text"),c.clear(this.id+"_open")}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.util.Dispatcher;a.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(a,b){this.parent(a,b),this.classPrefix="mceNativeListBox"},setDisabled:function(a){b.get(this.id).disabled=a,this.setAriaProperty("disabled",a)},isDisabled:function(){return b.get(this.id).disabled},select:function(a){var b,c,e=this;if(a==undefined)return e.selectByIndex(-1);a&&typeof a=="function"?c=a:c=function(b){return b==a},a!=e.selectedValue&&(d(e.items,function(a,d){if(c(a.value))return b=1,e.selectByIndex(d),!1}),b||e.selectByIndex(-1))},selectByIndex:function(a){b.get(this.id).selectedIndex=a+1,this.selectedValue=this.items[a]?this.items[a].value:null},add:function(a,c,d){var e,f=this;d=d||{},d.value=c,f.isRendered()&&b.add(b.get(this.id),"option",d,a),e={title:a,value:c,attribs:d},f.items.push(e),f.onAdd.dispatch(f,e)},getLength:function(){return this.items.length},renderHTML:function(){var a=this,c=b.createHTML("option",{value:""},"-- "+a.settings.title+" --");return d(a.items,function(a){c+=b.createHTML("option",{value:a.value},a.title)}),c=b.createHTML("select",{id:a.id,"class":"mceNativeListBox","aria-labelledby":a.id+"_aria"},c),c+=b.createHTML("span",{id:a.id+"_aria",style:"display: none"},a.settings.title),c},postRender:function(){function g(a){var b=e.items[a.target.selectedIndex-1];b&&(b=b.value)&&(e.onChange.dispatch(e,b),e.settings.onselect&&e.settings.onselect(b))}var d,e=this,f=!0;e.rendered=!0,c.add(e.id,"change",g),c.add(e.id,"keydown",function(b){var h;c.remove(e.id,"change",d),f=!1,h=c.add(e.id,"blur",function(){if(f)return;f=!0,c.add(e.id,"change",g),c.remove(e.id,"blur",h)});if(!(!a.isWebKit||b.keyCode!=37&&b.keyCode!=39))return c.prevent(b);if(b.keyCode==13||b.keyCode==32)return g(b),c.cancel(b)}),e.onPostRender.dispatch(e,b.get(e.id))}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(c,d,e){this.parent(c,d,e),this.onRenderMenu=new a.util.Dispatcher(this),d.menu_container=d.menu_container||b.doc.body},showMenu:function(){var a,d,e,f=this,g=b.get(f.id);if(f.isDisabled())return;f.isMenuRendered||(f.renderMenu(),f.isMenuRendered=!0);if(f.isMenuVisible)return f.hideMenu();a=b.getPos(f.settings.menu_container),d=b.getPos(g),e=f.menu,e.settings.offset_x=d.x,e.settings.offset_y=d.y,e.settings.vp_offset_x=d.x,e.settings.vp_offset_y=d.y,e.settings.keyboard_focus=f._focused,e.showMenu(0,g.clientHeight),c.add(b.doc,"mousedown",f.hideMenu,f),f.setState("Selected",1),f.isMenuVisible=1},renderMenu:function(){var a=this,b=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:a.settings.icons});b.onHideMenu.add(function(){a.hideMenu(),a.focus()}),a.onRenderMenu.dispatch(a,b),a.menu=b},hideMenu:function(a){var d=this;if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id||a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceMenu"))d.setState("Selected",0),c.remove(b.doc,"mousedown",d.hideMenu,d),d.menu&&d.menu.hideMenu();d.isMenuVisible=0},postRender:function(){var a=this,b=a.settings;c.add(a.id,"click",function(){a.isDisabled()||(b.onclick&&b.onclick(a.value),a.showMenu())})}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each;a.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(a,b,c){this.parent(a,b,c),this.classPrefix="mceSplitButton"},renderHTML:function(){var a,c=this,d=c.settings,e="<tbody><tr>";return d.image?a=b.createHTML("img ",{src:d.image,role:"presentation","class":"mceAction "+d["class"]}):a=b.createHTML("span",{"class":"mceAction "+d["class"]},""),a+=b.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:c.id+"_voice",style:"display:none;"},d.title),e+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},a)+"</td>",a=b.createHTML("span",{"class":"mceOpen "+d["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>'),e+="<td >"+b.createHTML("a",{role:"button",id:c.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+d["class"],onclick:"return false;",onmousedown:"return false;",title:d.title},a)+"</td>",e+="</tr></tbody>",e=b.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+d["class"],cellpadding:"0",cellspacing:"0",title:d.title},e),b.createHTML("div",{id:c.id,role:"button",tabindex:"0","aria-labelledby":c.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var d,e=this,f=e.settings;f.onclick&&(d=function(a){e.isDisabled()||(f.onclick(e.value),c.cancel(a))},c.add(e.id+"_action","click",d),c.add(e.id,["click","keydown"],function(a){var b=32,f=14,g=13,h=38,i=40;if((a.keyCode===32||a.keyCode===13||a.keyCode===14)&&!a.altKey&&!a.ctrlKey&&!a.metaKey)d(),c.cancel(a);else if(a.type==="click"||a.keyCode===i)e.showMenu(),c.cancel(a)})),c.add(e.id+"_open","click",function(a){e.showMenu(),c.cancel(a)}),c.add([e.id,e.id+"_open"],"focus",function(){e._focused=1}),c.add([e.id,e.id+"_open"],"blur",function(){e._focused=0});if(a.isIE6||!b.boxModel)c.add(e.id,"mouseover",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.addClass(e.id,"mceSplitButtonHover")}),c.add(e.id,"mouseout",function(){b.hasClass(e.id,"mceSplitButtonDisabled")||b.removeClass(e.id,"mceSplitButtonHover")})},destroy:function(){this.parent(),c.clear(this.id+"_action"),c.clear(this.id+"_open"),c.clear(this.id)}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.is,e=a.each;a.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(b,c,d){var e=this;e.parent(b,c,d),e.settings=c=a.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},e.settings),e.onShowMenu=new a.util.Dispatcher(e),e.onHideMenu=new a.util.Dispatcher(e),e.value=c.default_color},showMenu:function(){var a,d,e=this;if(e.isDisabled())return;e.isMenuRendered||(e.renderMenu(),e.isMenuRendered=!0);if(e.isMenuVisible)return e.hideMenu();a=b.get(e.id),b.show(e.id+"_menu"),b.addClass(a,"mceSplitButtonSelected"),d=b.getPos(a),b.setStyles(e.id+"_menu",{left:d.x,top:d.y+a.clientHeight,zIndex:2e5}),a=0,c.add(b.doc,"mousedown",e.hideMenu,e),e.onShowMenu.dispatch(e),e._focused&&(e._keyHandler=c.add(e.id+"_menu","keydown",function(a){a.keyCode==27&&e.hideMenu()}),b.select("a",e.id+"_menu")[0].focus()),e.isMenuVisible=1},hideMenu:function(a){var d=this;if(d.isMenuVisible){if(a&&a.type=="mousedown"&&b.getParent(a.target,function(a){return a.id===d.id+"_open"}))return;if(!a||!b.getParent(a.target,".mceSplitButtonMenu"))b.removeClass(d.id,"mceSplitButtonSelected"),c.remove(b.doc,"mousedown",d.hideMenu,d),c.remove(d.id+"_menu","keydown",d._keyHandler),b.hide(d.id+"_menu");d.isMenuVisible=0,d.onHideMenu.dispatch()}},renderMenu:function(){var f,g,h,i,j=this,k=0,l=j.settings,m=b.add(l.menu_container,"div",{role:"listbox",id:j.id+"_menu","class":l.menu_class+" "+l["class"],style:"position:absolute;left:0;top:-1000px;"}),n=b.add(m,"div",{"class":l["class"]+" mceSplitButtonMenu"});return b.add(n,"span",{"class":"mceMenuLine"}),f=b.add(n,"table",{role:"presentation","class":"mceColorSplitMenu"}),g=b.add(f,"tbody"),k=0,e(d(l.colors,"array")?l.colors:l.colors.split(","),function(c){var d;c=c.replace(/^#/,""),k--||(h=b.add(g,"tr"),k=l.grid_width-1),f=b.add(h,"td"),d={href:"javascript:;",style:{backgroundColor:"#"+c},title:j.editor.getLang("colors."+c,c),"data-mce-color":"#"+c},a.isIE||(d.role="option"),f=b.add(f,"a",d),j.editor.forcedHighContrastMode&&(f=b.add(f,"canvas",{width:16,height:16,"aria-hidden":"true"}),f.getContext&&(i=f.getContext("2d"))?(i.fillStyle="#"+c,i.fillRect(0,0,16,16)):b.remove(f))}),l.more_colors_func&&(f=b.add(g,"tr"),f=b.add(f,"td",{colspan:l.grid_width,"class":"mceMoreColors"}),f=b.add(f,"a",{role:"option",id:j.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},l.more_colors_title),c.add(f,"click",function(a){return l.more_colors_func.call(l.more_colors_scope||this),c.cancel(a)})),b.addClass(n,"mceColorSplitMenu"),new a.ui.KeyboardNavigation({root:j.id+"_menu",items:b.select("a",j.id+"_menu"),onCancel:function(){j.hideMenu(),j.focus()}}),c.add(j.id+"_menu","mousedown",function(a){return c.cancel(a)}),c.add(j.id+"_menu","click",function(a){var d;return a=b.getParent(a.target,"a",g),a&&a.nodeName.toLowerCase()=="a"&&(d=a.getAttribute("data-mce-color"))&&j.setColor(d),c.cancel(a)}),m},setColor:function(a){this.displayColor(a),this.hideMenu(),this.settings.onselect(a)},displayColor:function(a){var c=this;b.setStyle(c.id+"_preview","backgroundColor",a),c.value=a},postRender:function(){var a=this,c=a.id;a.parent(),b.add(c+"_action","div",{id:c+"_preview","class":"mceColorPreview"}),b.setStyle(a.id+"_preview","backgroundColor",a.value)},destroy:function(){this.parent(),c.clear(this.id+"_menu"),c.clear(this.id+"_more"),b.remove(this.id+"_menu")}})}(tinymce),function(a){var b=a.DOM,c=a.each,d=a.dom.Event;a.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=this,d=[],e=c.controls,f=a.each,g=c.settings;return d.push('<div id="'+c.id+'" role="group" aria-labelledby="'+c.id+'_voice">'),d.push("<span role='application'>"),d.push('<span id="'+c.id+'_voice" class="mceVoiceLabel" style="display:none;">'+b.encode(g.name)+"</span>"),f(e,function(a){d.push(a.renderHTML())}),d.push("</span>"),d.push("</div>"),d.join("")},focus:function(){var a=this;b.get(a.id).focus()},postRender:function(){var d=this,e=[];c(d.controls,function(a){c(a.controls,function(a){a.id&&e.push(a)})}),d.keyNav=new a.ui.KeyboardNavigation({root:d.id,items:e,onCancel:function(){a.isWebKit&&b.get(d.editor.id+"_ifr").focus(),d.editor.focus()},excludeFromTabOrder:!d.settings.tab_focus_toolbar})},destroy:function(){var a=this;a.parent(),a.keyNav.destroy(),d.clear(a.id)}})}(tinymce),function(a){var b=a.DOM,c=a.each;a.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var a,c,d,e,f,g=this,h="",i=g.settings,j=g.controls;for(d=0;d<j.length;d++)c=j[d],e=j[d-1],f=j[d+1],d===0&&(a="mceToolbarStart",c.Button?a+=" mceToolbarStartButton":c.SplitButton?a+=" mceToolbarStartSplitButton":c.ListBox&&(a+=" mceToolbarStartListBox"),h+=b.createHTML("td",{"class":a},b.createHTML("span",null,"<!-- IE -->"))),e&&c.ListBox&&(e.Button||e.SplitButton)&&(h+=b.createHTML("td",{"class":"mceToolbarEnd"},b.createHTML("span",null,"<!-- IE -->"))),b.stdMode?h+='<td style="position: relative">'+c.renderHTML()+"</td>":h+="<td>"+c.renderHTML()+"</td>",f&&c.ListBox&&(f.Button||f.SplitButton)&&(h+=b.createHTML("td",{"class":"mceToolbarStart"},b.createHTML("span",null,"<!-- IE -->")));return a="mceToolbarEnd",c.Button?a+=" mceToolbarEndButton":c.SplitButton?a+=" mceToolbarEndSplitButton":c.ListBox&&(a+=" mceToolbarEndListBox"),h+=b.createHTML("td",{"class":a},b.createHTML("span",null,"<!-- IE -->")),b.createHTML("table",{id:g.id,"class":"mceToolbar"+(i["class"]?" "+i["class"]:""),cellpadding:"0",cellspacing:"0",align:g.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+h+"</tr></tbody>")}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each;a.create("tinymce.AddOnManager",{AddOnManager:function(){var a=this;a.items=[],a.urls={},a.lookup={},a.onAdd=new b(a)},get:function(a){return this.lookup[a]?this.lookup[a].instance:undefined},dependencies:function(a){var b;return this.lookup[a]&&(b=this.lookup[a].dependencies),b||[]},requireLangPack:function(b){var c=a.settings;c&&c.language&&c.language_load!==!1&&a.ScriptLoader.add(this.urls[b]+"/langs/"+c.language+".js")},add:function(a,b,c){return this.items.push(b),this.lookup[a]={instance:b,dependencies:c},this.onAdd.dispatch(this,a,b),b},createUrl:function(a,b){return typeof b=="object"?b:{prefix:a.prefix,resource:b,suffix:a.suffix}},addComponents:function(b,c){var d=this.urls[b];a.each(c,function(b){a.ScriptLoader.add(d+"/"+b)})},load:function(b,c,d,e){function h(){var g=f.dependencies(b);a.each(g,function(a){var b=f.createUrl(c,a);f.load(b.resource,b,undefined,undefined)}),d&&(e?d.call(e):d.call(a.ScriptLoader))}var f=this,g=c;if(f.urls[b])return;typeof c=="object"&&(g=c.prefix+c.resource+c.suffix),g.indexOf("/")!=0&&g.indexOf("://")==-1&&(g=a.baseURL+"/"+g),f.urls[b]=g.substring(0,g.lastIndexOf("/")),f.lookup[b]?h():a.ScriptLoader.add(g,h,e)}}),a.PluginManager=new a.AddOnManager,a.ThemeManager=new a.AddOnManager}(tinymce),function(a){var b,c=a.each,d=a.extend,e=a.DOM,f=a.dom.Event,g=a.ThemeManager,h=a.PluginManager,i=a.explode,j=a.util.Dispatcher,k=0;a.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(a.documentBaseURL)||(a.documentBaseURL+="/"),a.baseURL=(new a.util.URI(a.documentBaseURL)).toAbsolute(a.baseURL),a.baseURI=new a.util.URI(a.baseURL),a.onBeforeUnload=new j(a),f.add(window,"beforeunload",function(b){a.onBeforeUnload.dispatch(a,b)}),a.onAddEditor=new j(a),a.onRemoveEditor=new j(a),a.EditorManager=d(a,{editors:[],i18n:{},activeEditor:null,init:function(b){function n(b,c,d){var e=b[c];if(!e)return;return a.is(e,"string")&&(d=e.replace(/\.\w+$/,""),d=d?a.resolve(d):0,e=a.resolve(e)),e.apply(d||this,Array.prototype.slice.call(arguments,2))}var g,h,j=this,l=a.ScriptLoader,m=[];b=d({theme:"simple",language:"en"},b),j.settings=b,f.add(document,"init",function(){var d,f;n(b,"onpageload");switch(b.mode){case"exact":d=b.elements||"",d.length>0&&c(i(d),function(d){e.get(d)?(h=new a.Editor(d,b),m.push(h),h.render(1)):c(document.forms,function(f){c(f.elements,function(c){c.name===d&&(d="mce_editor_"+k++,e.setAttrib(c,"id",d),h=new a.Editor(d,b),m.push(h),h.render(1))})})});break;case"textareas":case"specific_textareas":function l(a,b){return b.constructor===RegExp?b.test(a.className):e.hasClass(a,b)}c(e.select("textarea"),function(c){if(b.editor_deselector&&l(c,b.editor_deselector))return;if(!b.editor_selector||l(c,b.editor_selector)){g=e.get(c.name),!c.id&&!g&&(c.id=c.name);if(!c.id||j.get(c.id))c.id=e.uniqueId();h=new a.Editor(c.id,b),m.push(h),h.render(1)}})}b.oninit&&(d=f=0,c(m,function(a){f++,a.initialized?d++:a.onInit.add(function(){d++,d==f&&n(b,"oninit")}),d==f&&n(b,"oninit")}))})},get:function(a){return a===b?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(b){var c=this,d=c.editors;return d[b.id]=b,d.push(b),c._setActive(b),c.onAddEditor.dispatch(c,b),a.adapter&&a.adapter.patchEditor(b),b},remove:function(a){var b,c=this,d=c.editors;if(!d[a.id])return null;delete d[a.id];for(b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}return c.activeEditor==a&&c._setActive(d[0]),a.destroy(),c.onRemoveEditor.dispatch(c,a),a},execCommand:function(b,c,d){var e,f=this,g=f.get(d);switch(b){case"mceFocus":return g.focus(),!0;case"mceAddEditor":case"mceAddControl":return f.get(d)||(new a.Editor(d,f.settings)).render(),!0;case"mceAddFrameControl":e=d.window,e.tinyMCE=tinyMCE,e.tinymce=a,a.DOM.doc=e.document,a.DOM.win=e,g=new a.Editor(d.element_id,d),g.render();if(a.isIE){function h(){g.destroy(),e.detachEvent("onunload",h),e=e.tinyMCE=e.tinymce=null}e.attachEvent("onunload",h)}return d.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return g&&g.remove(),!0;case"mceToggleEditor":if(!g)return f.execCommand("mceAddControl",0,d),!0;return g.isHidden()?g.show():g.hide(),!0}return f.activeEditor?f.activeEditor.execCommand(b,c,d):!1},execInstanceCommand:function(a,b,c,d){var e=this.get(a);return e?e.execCommand(b,c,d):!1},triggerSave:function(){c(this.editors,function(a){a.save()})},addI18n:function(b,d){var e=this.i18n;a.is(b,"string")?c(d,function(a,c){e[b+"."+c]=a}):c(b,function(a,b){c(a,function(a,d){c(a,function(a,c){d==="common"?e[b+"."+c]=a:e[b+"."+d+"."+c]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.extend,e=a.util.Dispatcher,f=a.each,g=a.isGecko,h=a.isIE,i=a.isWebKit,j=a.is,k=a.ThemeManager,l=a.PluginManager,m=a.inArray,n=a.grep,o=a.explode,p=a.VK;a.create("tinymce.Editor",{Editor:function(b,c){var g=this;g.id=g.editorId=b,g.execCommands={},g.queryStateCommands={},g.queryValueCommands={},g.isNotDirty=!1,g.plugins={},f(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(a){g[a]=new e(g)}),g.settings=c=d({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:a.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:a.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:g.convertURL,url_converter_scope:g,ie7_compat:!0},c),g.documentBaseURI=new a.util.URI(c.document_base_url||a.documentBaseURL,{base_uri:tinyMCE.baseURI}),g.baseURI=a.baseURI,g.contentCSS=[],g.execCallback("setup",g)},render:function(){function i(){e.language&&e.language_load!==!1&&h.add(a.baseURL+"/langs/"+e.language+".js"),e.theme&&e.theme.charAt(0)!="-"&&!k.urls[e.theme]&&k.load(e.theme,"themes/"+e.theme+"/editor_template"+a.suffix+".js"),f(o(e.plugins),function(b){var c;if(b&&!l.urls[b])if(b.charAt(0)=="-")b=b.substr(1,b.length),c=l.dependencies(b),f(c,function(b){var c={prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"},b=l.createUrl(c,b);l.load(b.resource,b)});else{if(b=="safari")return;l.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+a.suffix+".js"})}}),h.loadQueue(function(){d.removed||d.init()})}var d=this,e=d.settings,g=d.id,h=a.ScriptLoader;if(!c.domLoaded){c.add(document,"init",function(){d.render()});return}tinyMCE.settings=e;if(!d.getElement())return;if(a.isIDevice&&!a.isIOS5)return;!/TEXTAREA|INPUT/i.test(d.getElement().nodeName)&&e.hidden_input&&b.getParent(g,"form")&&b.insertAfter(b.create("input",{type:"hidden",name:g}),g),a.WindowManager&&(d.windowManager=new a.WindowManager(d)),e.encoding=="xml"&&d.onGetContent.add(function(a,c){c.save&&(c.content=b.encode(c.content))}),e.add_form_submit_trigger&&d.onSubmit.addToTop(function(){d.initialized&&(d.save(),d.isNotDirty=1)}),e.add_unload_trigger&&(d._beforeUnload=tinyMCE.onBeforeUnload.add(function(){d.initialized&&!d.destroyed&&!d.isHidden()&&d.save({format:"raw",no_events:!0})})),a.addUnload(d.destroy,d),e.submit_patch&&d.onBeforeRenderUI.add(function(){var b=d.getElement().form;if(!b)return;if(b._mceOldSubmit)return;!b.submit.nodeType&&!b.submit.length&&(d.formElement=b,b._mceOldSubmit=b.submit,b.submit=function(){return a.triggerSave(),d.isNotDirty=1,d.formElement._mceOldSubmit(d.formElement)}),b=null}),i()},init:function(){function v(b){var c,d=l.get(b),e=l.urls[b]||a.documentBaseURL.replace(/\/$/,"");d&&a.inArray(u,b)===-1&&(f(l.dependencies(b),function(a){v(a)}),c=new d(r,e),r.plugins[b]=c,c.init&&(c.init(r,e),u.push(b)))}var c,d,e,i,j,m,n,p,q,r=this,s=r.settings,t=r.getElement(),u=[];a.add(r),s.aria_label=s.aria_label||b.getAttrib(t,"aria-label",r.getLang("aria.rich_text_area")),s.theme&&(s.theme=s.theme.replace(/-/,""),i=k.get(s.theme),r.theme=new i,r.theme.init&&s.init_theme&&r.theme.init(r,k.urls[s.theme]||a.documentBaseURL.replace(/\/$/,""))),f(o(s.plugins.replace(/\-/g,"")),v),s.popup_css!==!1&&(s.popup_css?s.popup_css=r.documentBaseURI.toAbsolute(s.popup_css):s.popup_css=r.baseURI.toAbsolute("themes/"+s.theme+"/skins/"+s.skin+"/dialog.css")),s.popup_css_add&&(s.popup_css+=","+r.documentBaseURI.toAbsolute(s.popup_css_add)),r.controlManager=new a.ControlManager(r),s.custom_undo_redo&&(r.onBeforeExecCommand.add(function(a,b,c,d,e){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!e||!e.skip_undo)&&r.undoManager.beforeChange()}),r.onExecCommand.add(function(a,b,c,d,e){b!="Undo"&&b!="Redo"&&b!="mceRepaint"&&(!e||!e.skip_undo)&&r.undoManager.add()})),r.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||r.nodeChanged()});if(g){function w(a,b){(!b||!b.initial)&&r.execCommand("mceRepaint")}r.onUndo.add(w),r.onRedo.add(w),r.onSetContent.add(w)}r.onBeforeRenderUI.dispatch(r,r.controlManager),s.render_ui&&(d=s.width||t.style.width||t.offsetWidth,e=s.height||t.style.height||t.offsetHeight,r.orgDisplay=t.style.display,p=/^[0-9\.]+(|px)$/i,p.test(""+d)&&(d=Math.max(parseInt(d)+(i.deltaWidth||0),100)),p.test(""+e)&&(e=Math.max(parseInt(e)+(i.deltaHeight||0),100)),i=r.theme.renderUI({targetNode:t,width:d,height:e,deltaWidth:s.delta_width,deltaHeight:s.delta_height}),r.editorContainer=i.editorContainer),document.domain&&location.hostname!=document.domain&&(a.relaxedDomain=document.domain),b.setStyles(i.sizeContainer||i.editorContainer,{width:d,height:e}),s.content_css&&a.each(o(s.content_css),function(a){r.contentCSS.push(r.documentBaseURI.toAbsolute(a))}),e=(i.iframeHeight||e)+(typeof e=="number"?i.deltaHeight||0:""),e<100&&(e=100),r.iframeHTML=s.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',s.document_base_url!=a.documentBaseURL&&(r.iframeHTML+='<base href="'+r.documentBaseURI.getURI()+'" />'),s.ie7_compat?r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />':r.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=edge" />',r.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(q=0;q<r.contentCSS.length;q++)r.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+r.contentCSS[q]+'" />';r.contentCSS=[],m=s.body_id||"tinymce",m.indexOf("=")!=-1&&(m=r.getParam("body_id","","hash"),m=m[r.id]||m),n=s.body_class||"",n.indexOf("=")!=-1&&(n=r.getParam("body_class","","hash"),n=n[r.id]||""),r.iframeHTML+='</head><body id="'+m+'" class="mceContentBody '+n+'" onload="window.parent.tinyMCE.get(\''+r.id+"').onLoad.dispatch();\"><br></body></html>",a.relaxedDomain&&(h||a.isOpera&&parseFloat(opera.version())<11)&&(j='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+r.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()'),c=b.add(i.iframeContainer,"iframe",{id:r.id+"_ifr",src:j||'javascript:""',frameBorder:"0",allowTransparency:"true",title:s.aria_label,style:{width:"100%",height:e,display:"block"}}),r.contentAreaContainer=i.iframeContainer,b.get(i.editorContainer).style.display=r.orgDisplay,b.get(r.id).style.display="none",b.setAttrib(r.id,"aria-hidden",!0),(!a.relaxedDomain||!j)&&r.setupIframe(),t=c=i=null},setupIframe:function(){var d,e=this,i=e.settings,j=b.get(e.id),k=e.getDoc();if(!h||!a.relaxedDomain)k.open(),k.write(e.iframeHTML),k.close(),a.relaxedDomain&&(k.domain=a.relaxedDomain);d=e.getBody(),d.disabled=!0,i.readonly||(d.contentEditable=!0),d.disabled=!1,e.schema=new a.html.Schema(i),e.dom=new a.dom.DOMUtils(e.getDoc(),{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:e.schema}),e.parser=new a.html.DomParser(i,e.schema),e.settings.allow_html_in_named_anchor||e.parser.addAttributeFilter("name",function(a){var b,c,d,e,f=a.length;while(f--){e=a[f];if(e.name==="a"&&e.firstChild){d=e.parent,b=e.lastChild;do c=b.prev,d.insert(b,e),b=c;while(b)}}}),e.parser.addAttributeFilter("src,href,style",function(a,b){var c,d,f,g=a.length,h=e.dom;while(g--)c=a[g],d=c.attr(b),f="data-mce-"+b,c.attributes.map[f]||(b==="style"?c.attr(f,h.serializeStyle(h.parseStyle(d),c.name)):c.attr(f,e.convertURL(d,b,c.name)))}),e.parser.addNodeFilter("script",function(a){var b,c=a.length;while(c--)b=a[c],b.attr("type","mce-"+(b.attr("type")||"text/javascript"))}),e.parser.addNodeFilter("#cdata",function(a){var b,c=a.length;while(c--)b=a[c],b.type=8,b.name="#comment",b.value="[CDATA["+b.value+"]]"}),e.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(b){var c,d=b.length,f=e.schema.getNonEmptyElements();while(d--)c=b[d],c.isEmpty(f)&&(c.empty().append(new a.html.Node("br",1)).shortEnded=!0)}),e.serializer=new a.dom.Serializer(i,e.dom,e.schema),e.selection=new a.dom.Selection(e.dom,e.getWin(),e.serializer),e.formatter=new a.Formatter(this),e.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript
:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(a,b,c){f(c,function(b,c){e.dom.setAttrib(a,c,b)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),f("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){e.formatter.register(a,{block:a,remove:"all"})}),e.formatter.register(e.settings.formats),e.undoManager=new a.UndoManager(e),e.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return e.onChange.dispatch(e,b,a)}),e.undoManager.onUndo.add(function(a,b){return e.onUndo.dispatch(e,b,a)}),e.undoManager.onRedo.add(function(a,b){return e.onRedo.dispatch(e,b,a)}),e.forceBlocks=new a.ForceBlocks(e,{forced_root_block:i.forced_root_block}),e.editorCommands=new a.EditorCommands(e),e.serializer.onPreProcess.add(function(a,b){return e.onPreProcess.dispatch(e,b,a)}),e.serializer.onPostProcess.add(function(a,b){return e.onPostProcess.dispatch(e,b,a)}),e.onPreInit.dispatch(e),i.gecko_spellcheck||(e.getBody().spellcheck=0),i.readonly||e._addEvents(),e.controlManager.onPostRender.dispatch(e,e.controlManager),e.onPostRender.dispatch(e),e.quirks=new a.util.Quirks(this),i.directionality&&(e.getBody().dir=i.directionality),i.nowrap&&(e.getBody().style.whiteSpace="nowrap"),i.handle_node_change_callback&&e.onNodeChange.add(function(a,b,c){e.execCallback("handle_node_change_callback",e.id,c,-1,-1,!0,e.selection.isCollapsed())}),i.save_callback&&e.onSaveContent.add(function(a,b){var c=e.execCallback("save_callback",e.id,b.content,e.getBody());c&&(b.content=c)}),i.onchange_callback&&e.onChange.add(function(a,b){e.execCallback("onchange_callback",e,b)}),i.protect&&e.onBeforeSetContent.add(function(a,b){i.protect&&f(i.protect,function(a){b.content=b.content.replace(a,function(a){return"<!--mce:protected "+escape(a)+"-->"})})}),i.convert_newlines_to_brs&&e.onBeforeSetContent.add(function(a,b){b.initial&&(b.content=b.content.replace(/\r?\n/g,"<br />"))}),i.preformatted&&e.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,""),b.content=b.content.replace(/<\/pre>\s*$/,""),b.set&&(b.content='<pre class="mceItemHidden">'+b.content+"</pre>")}),i.verify_css_classes&&(e.serializer.attribValueFilter=function(a,b){var c,d;return a=="class"?(e.classesRE||(d=e.dom.getClasses(),d.length>0&&(c="",f(d,function(a){c+=(c?"|":"")+a["class"]}),e.classesRE=RegExp("("+c+")","gi"))),!e.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(b)||e.classesRE.test(b)?b:""):b}),i.cleanup_callback&&(e.onBeforeSetContent.add(function(a,b){b.content=e.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),e.onPreProcess.add(function(a,b){b.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b),b.get&&e.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),e.onPostProcess.add(function(a,b){b.set&&(b.content=e.execCallback("cleanup_callback","insert_to_editor",b.content,b)),b.get&&(b.content=e.execCallback("cleanup_callback","get_from_editor",b.content,b))})),i.save_callback&&e.onGetContent.add(function(a,b){b.save&&(b.content=e.execCallback("save_callback",e.id,b.content,e.getBody()))}),i.handle_event_callback&&e.onEvent.add(function(a,b,d){e.execCallback("handle_event_callback",b,a,d)===!1&&c.cancel(b)}),e.onSetContent.add(function(){e.addVisual(e.getBody())}),i.padd_empty_editor&&e.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(g){function l(a){f(a.dom.select("a"),function(b){var c=b.parentNode;a.dom.isBlock(c)&&c.lastChild===b&&a.dom.add(c,"br",{"data-mce-bogus":1})})}e.onExecCommand.add(function(a,b){b==="CreateLink"&&l(a)}),e.onSetContent.add(e.selection.onSetContent.add(l))}e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),e.undoManager.add(),e.initialized=!0,e.onInit.dispatch(e),e.execCallback("setupcontent_callback",e.id,e.getBody(),e.getDoc()),e.execCallback("init_instance_callback",e),e.focus(!0),e.nodeChanged({initial:1}),f(e.contentCSS,function(a){e.dom.loadCSS(a)}),i.auto_focus&&setTimeout(function(){var b=a.get(i.auto_focus);b.selection.select(b.getBody(),1),b.selection.collapse(1),b.getBody().focus(),b.getWin().focus()},100),j=null},focus:function(b){var c,d,e,f=this,g=f.selection,h=f.settings.content_editable,i=f.getDoc();b||(d=g.getRng(),d.item&&(e=d.item(0)),f._refreshContentEditable(),h||f.getWin().focus(),a.isGecko&&f.getBody().focus(),e&&e.ownerDocument==i&&(d=i.body.createControlRange(),d.addElement(e),d.select())),a.activeEditor!=f&&((c=a.activeEditor)!=null&&c.onDeactivate.dispatch(c,f),f.onActivate.dispatch(f,c)),a._setActive(f)},execCallback:function(b){var c,d=this,e=d.settings[b];if(!e)return;return d.callbackLookup&&(c=d.callbackLookup[b])&&(e=c.func,c=c.scope),j(e,"string")&&(c=e.replace(/\.\w+$/,""),c=c?a.resolve(c):0,e=a.resolve(e),d.callbackLookup=d.callbackLookup||{},d.callbackLookup[b]={func:e,scope:c}),e.apply(c||d,Array.prototype.slice.call(arguments,1))},translate:function(b){var c=this.settings.language||"en",d=a.i18n;return b?d[c+"."+b]||b.replace(/{\#([^}]+)\}/g,function(a,b){return d[c+"."+b]||"{#"+b+"}"}):""},getLang:function(b,c){return a.i18n[(this.settings.language||"en")+"."+b]||(j(c)?c:"{#"+b+"}")},getParam:function(b,c,d){var e,g=a.trim,h=j(this.settings[b])?this.settings[b]:c;return d==="hash"?(e={},j(h,"string")?f(h.indexOf("=")>0?h.split(/[;,](?![^=;,]*(?:[;,]|$))/):h.split(","),function(a){a=a.split("="),a.length>1?e[g(a[0])]=g(a[1]):e[g(a[0])]=g(a)}):e=h,e):h},nodeChanged:function(a){var b=this,c=b.selection,d=c.getStart()||b.getBody();b.initialized&&(a=a||{},d=h&&d.ownerDocument!=b.getDoc()?b.getBody():d,a.parents=[],b.dom.getParent(d,function(b){if(b.nodeName=="BODY")return!0;a.parents.push(b)}),b.onNodeChange.dispatch(b,a?a.controlManager||b.controlManager:b.controlManager,d,c.isCollapsed(),a))},addButton:function(a,b){var c=this;c.buttons=c.buttons||{},c.buttons[a]=b},addCommand:function(a,b,c){this.execCommands[a]={func:b,scope:c||this}},addQueryStateHandler:function(a,b,c){this.queryStateCommands[a]={func:b,scope:c||this}},addQueryValueHandler:function(a,b,c){this.queryValueCommands[a]={func:b,scope:c||this}},addShortcut:function(a,b,c,d){var e,g=this;return g.settings.custom_shortcuts?(g.shortcuts=g.shortcuts||{},j(c,"string")&&(e=c,c=function(){g.execCommand(e,!1,null)}),j(c,"object")&&(e=c,c=function(){g.execCommand(e[0],e[1],e[2])}),f(o(a),function(a){var e={func:c,scope:d||this,desc:b,alt:!1,ctrl:!1,shift:!1};f(o(a,"+"),function(a){switch(a){case"alt":case"ctrl":case"shift":e[a]=!0;break;default:e.charCode=a.charCodeAt(0),e.keyCode=a.toUpperCase().charCodeAt(0)}}),g.shortcuts[(e.ctrl?"ctrl":"")+","+(e.alt?"alt":"")+","+(e.shift?"shift":"")+","+e.keyCode]=e}),!0):!1},execCommand:function(a,b,c,e){var g,h,i=this,j=0;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(a)&&(!e||!e.skip_focus)&&i.focus(),e=d({},e),i.onBeforeExecCommand.dispatch(i,a,b,c,e);if(e.terminate)return!1;if(i.execCallback("execcommand_callback",i.id,i.selection.getNode(),a,b,c))return i.onExecCommand.dispatch(i,a,b,c,e),!0;if(g=i.execCommands[a]){h=g.func.call(g.scope,b,c);if(h!==!0)return i.onExecCommand.dispatch(i,a,b,c,e),h}f(i.plugins,function(d){if(d.execCommand&&d.execCommand(a,b,c))return i.onExecCommand.dispatch(i,a,b,c,e),j=1,!1});if(j)return!0;if(i.theme&&i.theme.execCommand&&i.theme.execCommand(a,b,c))return i.onExecCommand.dispatch(i,a,b,c,e),!0;if(i.editorCommands.execCommand(a,b,c))return i.onExecCommand.dispatch(i,a,b,c,e),!0;i.getDoc().execCommand(a,b,c),i.onExecCommand.dispatch(i,a,b,c,e)},queryCommandState:function(a){var b,c,d=this;if(d._isHidden())return;if(b=d.queryStateCommands[a]){c=b.func.call(b.scope);if(c!==!0)return c}b=d.editorCommands.queryCommandState(a);if(b!==-1)return b;try{return this.getDoc().queryCommandState(a)}catch(e){}},queryCommandValue:function(a){var b,c,d=this;if(d._isHidden())return;if(b=d.queryValueCommands[a]){c=b.func.call(b.scope);if(c!==!0)return c}b=d.editorCommands.queryCommandValue(a);if(j(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(e){}},show:function(){var a=this;b.show(a.getContainer()),b.hide(a.id),a.load()},hide:function(){var a=this,c=a.getDoc();h&&c&&c.execCommand("SelectAll"),a.save(),b.hide(a.getContainer()),b.setStyle(a.id,"display",a.orgDisplay)},isHidden:function(){return!b.isHidden(this.id)},setProgressState:function(a,b,c){return this.onSetProgressState.dispatch(this,a,b,c),a},load:function(a){var b,c=this,d=c.getElement();if(d)return a=a||{},a.load=!0,b=c.setContent(j(d.value)?d.value:d.innerHTML,a),a.element=d,a.no_events||c.onLoadContent.dispatch(c,a),a.element=d=null,b},save:function(a){var c,d,e=this,g=e.getElement();if(!g||!e.initialized)return;return a=a||{},a.save=!0,a.no_events||(e.undoManager.typing=!1,e.undoManager.add()),a.element=g,c=a.content=e.getContent(a),a.no_events||e.onSaveContent.dispatch(e,a),c=a.content,/TEXTAREA|INPUT/i.test(g.nodeName)?g.value=c:(g.innerHTML=c,(d=b.getParent(e.id,"form"))&&f(d.elements,function(a){if(a.name==e.id)return a.value=c,!1})),a.element=g=null,c},setContent:function(b,c){var d,e=this,f=e.getBody();c=c||{},c.format=c.format||"html",c.set=!0,c.content=b,c.no_events||e.onBeforeSetContent.dispatch(e,c),b=c.content;if(!a.isIE&&(b.length===0||/^\s+$/.test(b))){d=e.settings.forced_root_block,d?b="<"+d+'><br data-mce-bogus="1"></'+d+">":b='<br data-mce-bogus="1">',f.innerHTML=b,e.selection.select(f,!0),e.selection.collapse(!0);return}return c.format!=="raw"&&(b=(new a.html.Serializer({},e.schema)).serialize(e.parser.parse(b))),c.content=a.trim(b),e.dom.setHTML(f,c.content),c.no_events||e.onSetContent.dispatch(e,c),e.selection.normalize(),c.content},getContent:function(b){var c,d=this;return b=b||{},b.format=b.format||"html",b.get=!0,b.no_events||d.onBeforeGetContent.dispatch(d,b),b.format=="raw"?c=d.getBody().innerHTML:c=d.serializer.serialize(d.getBody(),b),b.content=a.trim(c),b.no_events||d.onGetContent.dispatch(d,b),b.content},isDirty:function(){var b=this;return a.trim(b.startContent)!=a.trim(b.getContent({format:"raw",no_events:1}))&&!b.isNotDirty},getContainer:function(){var a=this;return a.container||(a.container=b.get(a.editorContainer||a.id+"_parent")),a.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return b.get(this.settings.content_element||this.id)},getWin:function(){var a,c=this;return c.contentWindow||(a=b.get(c.id+"_ifr"),a&&(c.contentWindow=a.contentWindow)),c.contentWindow},getDoc:function(){var a,b=this;return b.contentDocument||(a=b.getWin(),a&&(b.contentDocument=a.document)),b.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,c){var d=this,e=d.settings;return e.urlconverter_callback?d.execCallback("urlconverter_callback",a,c,!0,b):!e.convert_urls||c&&c.nodeName=="LINK"||a.indexOf("file:")===0?a:e.relative_urls?d.documentBaseURI.toRelative(a):(a=d.documentBaseURI.toAbsolute(a,e.remove_script_host),a)},addVisual:function(a){var b=this,c=b.settings;a=a||b.getBody(),j(b.hasVisual)||(b.hasVisual=c.visual),f(b.dom.select("table,a",a),function(a){var d;switch(a.nodeName){case"TABLE":d=b.dom.getAttrib(a,"border");if(!d||d=="0")b.hasVisual?b.dom.addClass(a,c.visual_table_class):b.dom.removeClass(a,c.visual_table_class);return;case"A":d=b.dom.getAttrib(a,"name"),d&&(b.hasVisual?b.dom.addClass(a,"mceItemAnchor"):b.dom.removeClass(a,"mceItemAnchor"));return}}),b.onVisualAid.dispatch(b,a,b.hasVisual)},remove:function(){var c=this,d=c.getContainer();c.removed=1,c.hide(),c.execCallback("remove_instance_callback",c),c.onRemove.dispatch(c),c.onExecCommand.listeners=[],a.remove(c),b.remove(d)},destroy:function(b){var d=this;if(d.destroyed)return;b||(a.removeUnload(d.destroy),tinyMCE.onBeforeUnload.remove(d._beforeUnload),d.theme&&d.theme.destroy&&d.theme.destroy(),d.controlManager.destroy(),d.selection.destroy(),d.dom.destroy(),d.settings.content_editable||(c.clear(d.getWin()),c.clear(d.getDoc())),c.clear(d.getBody()),c.clear(d.formElement)),d.formElement&&(d.formElement.submit=d.formElement._mceOldSubmit,d.formElement._mceOldSubmit=null),d.contentAreaContainer=d.formElement=d.container=d.settings.content_element=d.bodyElement=d.contentDocument=d.contentWindow=null,d.selection&&(d.selection=d.selection.win=d.selection.dom=d.selection.dom.doc=null),d.destroyed=1},_addEvents:function(){function l(a,b){var c=a.type;if(h.removed)return;h.onEvent.dispatch(h,a,b)!==!1&&h[k[a.fakeType||a.type]].dispatch(h,a,b)}var d,e,h=this,i=h.settings,j=h.dom,k={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};f(k,function(a,c){switch(c){case"contextmenu":j.bind(h.getDoc(),c,l);break;case"paste":j.bind(h.getBody(),c,function(a){l(a)});break;case"submit":case"reset":j.bind(h.getElement().form||b.getParent(h.id,"form"),c,l);break;default:j.bind(i.content_editable?h.getBody():h.getDoc(),c,l)}}),j.bind(i.content_editable?h.getBody():g?h.getDoc():h.getWin(),"focus",function(){h.focus(!0)}),a.isGecko&&j.bind(h.getDoc(),"DOMNodeInserted",function(a){var b;a=a.target,a.nodeType===1&&a.nodeName==="IMG"&&(b=a.getAttribute("data-mce-src"))&&(a.src=h.documentBaseURI.toAbsolute(b))});if(g){function m(){var a=this,b=a.getDoc(),c=a.settings;if(g&&!c.readonly){a._refreshContentEditable();try{b.execCommand("styleWithCSS",0,!1)}catch(d){if(!a._isHidden())try{b.execCommand("useCSS",0,!0)}catch(d){}}if(!c.table_inline_editing)try{b.execCommand("enableInlineTableEditing",!1,!1)}catch(d){}if(!c.object_resizing)try{b.execCommand("enableObjectResizing",!1,!1)}catch(d){}}}h.onBeforeExecCommand.add(m),h.onMouseDown.add(m)}h.onMouseUp.add(h.nodeChanged),h.onKeyUp.add(function(b,c){var d=c.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||a.isMac&&(d==91||d==93)||c.ctrlKey)&&h.nodeChanged()}),h.onKeyDown.add(function(a,b){var c,d,e;if(b.keyCode!=p.BACKSPACE)return;c=a.selection.getRng();if(!c.collapsed)return;d=c.startContainer,e=c.startOffset;while(d&&d.nodeType&&d.nodeType!=1&&d.parentNode)d=d.parentNode;d&&d.parentNode&&d.parentNode.tagName==="BLOCKQUOTE"&&d.parentNode.firstChild==d&&e==0&&(a.formatter.toggle("blockquote",null,d.parentNode),c.setStart(d,0),c.setEnd(d,0),a.selection.setRng(c),a.selection.collapse(!1))}),h.onReset.add(function(){h.setContent(h.startContent,{format:"raw"})});if(i.custom_shortcuts){i.custom_undo_redo_keyboard_shortcuts&&(h.addShortcut("ctrl+z",h.getLang("undo_desc"),"Undo"),h.addShortcut("ctrl+y",h.getLang("redo_desc"),"Redo")),h.addShortcut("ctrl+b",h.getLang("bold_desc"),"Bold"),h.addShortcut("ctrl+i",h.getLang("italic_desc"),"Italic"),h.addShortcut("ctrl+u",h.getLang("underline_desc"),"Underline");for(d=1;d<=6;d++)h.addShortcut("ctrl+"+d,"",["FormatBlock",!1,"h"+d]);h.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),h.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),h.addShortcut("ctrl+9","",["FormatBlock",!1,"address"]);function n(b){var c=null;return!b.altKey&&!b.ctrlKey&&!b.metaKey?c:(f(h.shortcuts,function(d){if(a.isMac&&d.ctrl!=b.metaKey)return;if(!a.isMac&&d.ctrl!=b.ctrlKey)return;if(d.alt!=b.altKey)return;if(d.shift!=b.shiftKey)return;if(b.keyCode==d.keyCode||b.charCode&&b.charCode==d.charCode)return c=d,!1}),c)}h.onKeyUp.add(function(a,b){var d=n(b);if(d)return c.cancel(b)}),h.onKeyPress.add(function(a,b){var d=n(b);if(d)return c.cancel(b)}),h.onKeyDown.add(function(a,b){var d=n(b);if(d)return d.func.call(d.scope),c.cancel(b)})}a.isIE&&j.bind(h.getDoc(),"controlselect",function(a){var b,d=h.resizeInfo;a=a.target;if(a.nodeName!=="IMG")return;d&&j.unbind(d.node,d.ev,d.cb),j.hasClass(a,"mceItemNoResize")?(ev="resizestart",b=j.bind(a,"resizestart",c.cancel,c)):(ev="resizeend",b=j.bind(a,ev,function(a){var b;a=a.target;if(b=j.getStyle(a,"width"))j.setAttrib(a,"width",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"width","");if(b=j.getStyle(a,"height"))j.setAttrib(a,"height",b.replace(/[^0-9%]+/g,"")),j.setStyle(a,"height","")})),d=h.resizeInfo={node:a,ev:ev,cb:b}}),a.isOpera&&h.onClick.add(function(a,b){c.prevent(b)});if(i.custom_undo_redo){function o(){h.undoManager.typing=!1,h.undoManager.add()}e=a.isGecko?"blur":"focusout",j.bind(h.getDoc(),e,function(){!h.removed&&h.undoManager.typing&&o()}),h.dom.bind(h.dom.getRoot(),"dragend",function(){o()}),h.onKeyUp.add(function(a,b){var c=b.keyCode;(c>=33&&c<=36||c>=37&&c<=40||c==13||c==45||b.ctrlKey)&&o()}),h.onKeyDown.add(function(b,d){var e,f=d.keyCode;if(f==8){e=h.getDoc().selection;if(e&&e.createRange&&e.createRange().item)return h.undoManager.beforeChange(),b.dom.remove(e.createRange().item(0)),o(),c.cancel(d)}if(f>=33&&f<=36||f>=37&&f<=40||f==13||f==45){a.isIE&&f==13&&h.undoManager.beforeChange(),h.undoManager.typing&&o();return}(f<16||f>20)&&f!=224&&f!=91&&!h.undoManager.typing&&(h.undoManager.beforeChange(),h.undoManager.typing=!0,h.undoManager.add())}),h.onMouseDown.add(function(){h.undoManager.typing&&o()})}if(a.isGecko){function q(){var a=h.dom.getAttribs(h.selection.getStart().cloneNode(!1));return function(){var b=h.selection.getStart();b!==h.getBody()&&(h.dom.setAttrib(b,"style",null),f(a,function(a){b.setAttributeNode(a.cloneNode(!0))}))}}function r(){var a=h.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()}h.onKeyPress.add(function(a,b){var d;if((b.keyCode==8||b.keyCode==46)&&r())return d=q(),h.getDoc().execCommand("delete",!1,null),d(),c.cancel(b)}),h.dom.bind(h.getDoc(),"cut",function(){var a;r()&&(a=q(),h.onKeyUp.addToTop(c.cancel,c),setTimeout(function(){a(),h.onKeyUp.remove(c.cancel,c)},0))})}},_refreshContentEditable:function(){var a,b,c=this;c._isHidden()&&(a=c.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;return g?(a=this.selection.getSel(),!a||!a.rangeCount||a.rangeCount==0):0}})}(tinymce),function(a){var b,c=a.each,d=!0,e=!1;a.EditorCommands=function(f){function m(a,b,c){var f;return a=a.toLowerCase(),(f=j.exec[a])?(f(a,b,c),d):e}function n(a){var b;return a=a.toLowerCase(),(b=j.state[a])?b(a):-1}function o(a){var b;return a=a.toLowerCase(),(b=j.value[a])?b(a):e}function p(a,b){b=b||"exec",c(a,function(a,d){c(d.toLowerCase().split(","),function(c){j[b][c]=a})})}function q(a,c,d){return c===b&&(c=e),d===b&&(d=null),f.getDoc().execCommand(a,c,d)}function r(a){return l.match(a)}function s(a,c){l.toggle(a,c?{value:c}:b)}function t(a){g=i.getBookmark(a)}function u(){i.moveToBookmark(g)}var g,h=f.dom,i=f.selection,j={state:{},exec:{},value:{}},k=f.settings,l=f.formatter;a.extend(this,{execCommand:m,queryCommandState:n,queryCommandValue:o,addCommands:p}),p({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){f.undoManager.add()},"Cut,Copy,Paste":function(b){var c,e=f.getDoc();try{q(b)}catch(g){c=d}if(c||!e.queryCommandSupported(b))a.isGecko?f.windowManager.confirm(f.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):f.windowManager.alert(f.getLang("clipboard_no_support"))},unlink:function(a){i.isCollapsed()&&i.select(i.getNode()),q(a),i.collapse(e)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b=a.substring(7);c("left,center,right,full".split(","),function(a){b!=a&&l.remove("align"+a)}),s("align"+b),m("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b,c;q(a),b=h.getParent(i.getNode(),"ol,ul"),b&&(c=b.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(c.nodeName)&&(t(),h.split(c,b),u()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){s(a)},"ForeColor,HiliteColor,FontName":function(a,b,c){s(a,c)},FontSize:function(b,c,d){var e,f;d>=1&&d<=7&&(f=a.explode(k.font_size_style_values),e=a.explode(k.font_size_classes),e?d=e[d-1]||d:d=f[d-1]||d),s(b,d)},RemoveFormat:function(a){l.remove(a)},mceBlockQuote:function(){s("blockquote")},FormatBlock:function(a,b,c){return s(c||"p")},mceCleanup:function(){var a=i.getBookmark();f.setContent(f.getContent({cleanup:d}),{cleanup:d}),i.moveToBookmark(a)},mceRemoveNode:function(a,b,c){var e=c||i.getNode();e!=f.getBody()&&(t(),f.dom.remove(e,d),u())},mceSelectNodeDepth:function(a,b,c){var d=0;h.getParent(i.getNode(),function(a){if(a.nodeType==1&&d++==c)return i.select(a),e},f.getBody())},mceSelectNode:function(a,b,c){i.select(c)},mceInsertContent:function(b,c,d){var e,g,j,k,l,m,n,o,p,q,r=f.parser,s=new a.html.Serializer({},f.schema),t='<span id="mce_marker" data-mce-type="bookmark">﻿</span>',u={content:d,format:"html"};i.onBeforeSetContent.dispatch(i,u),d=u.content,d.indexOf("{$caret}")==-1&&(d+="{$caret}"),d=d.replace(/\{\$caret\}/,t),i.isCollapsed()||f.getDoc().execCommand("Delete",!1,null),e=i.getNode(),u={context:e.nodeName.toLowerCase()},j=r.parse(d,u),o=j.lastChild;if(o.attr("id")=="mce_marker"){k=o;for(o=o.prev;o;o=o.walk(!0))if(o.type==3||!h.isBlock(o.name)){o.parent.insert(k,o,o.name==="br");break}}if(!u.invalid)d=s.serialize(j),o=e.firstChild,p=e.lastChild,!o||o===p&&o.nodeName==="BR"?h.setHTML(e,d):i.setContent(d);else{i.setContent(t),e=f.selection.getNode(),g=f.getBody(),e.nodeType==9?e=o=g:o=e;while(o!==g)e=o,o=o.parentNode;d=e==g?g.innerHTML:h.getOuterHTML(e),d=s.serialize(r.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return s.serialize(j)}))),e==g?h.setHTML(g,d):h.setOuterHTML(e,d)}k=h.get("mce_marker"),l=h.getRect(k),m=h.getViewPort(f.getWin());if(l.y+l.h>m.y+m.h||l.y<m.y||l.x>m.x+m.w||l.x<m.x)q=a.isIE?f.getDoc().documentElement:f.getBody(),q.scrollLeft=l.x,q.scrollTop=l.y-m.h+25;n=h.createRng(),o=k.previousSibling,o&&o.nodeType==3?n.setStart(o,o.nodeValue.length):(n.setStartBefore(k),n.setEndBefore(k)),h.remove(k),i.setRng(n),i.onSetContent.dispatch(i,u),f.addVisual()},mceInsertRawHTML:function(a,b,c){i.setContent("tiny_mce_marker"),f.setContent(f.getContent().replace(/tiny_mce_marker/g,function(){return c}))},mceSetContent:function(a,b,c){f.setContent(c)},"Indent,Outdent":function(a){var b,d=k.indentation,e=/[a-z%]+$/i.exec(d);d=parseInt(d),!n("InsertUnorderedList")&&!n("InsertOrderedList")?c(i.getSelectedBlocks(),function(c){a=="outdent"?(b=Math.max(0,parseInt(c.style.paddingLeft||0)-d),h.setStyle(c,"paddingLeft",b?b+e:"")):h.setStyle(c,"paddingLeft",parseInt(c.style.paddingLeft||0)+d+e)}):q(a)},mceRepaint:function(){if(a.isGecko)try{t(d),i.getSel()&&i.getSel().selectAllChildren(f.getBody()),i.collapse(d),u()}catch(b){}},mceToggleFormat:function(a,b,c){l.toggle(c)},InsertHorizontalRule:function(){f.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){f.hasVisual=!f.hasVisual,f.addVisual()},mceReplaceContent:function(a,b,c){f.execCommand("mceInsertContent",!1,c.replace(/\{\$selection\}/g,i.getContent({format:"text"})))},mceInsertLink:function(a,b,c){var d;typeof c=="string"&&(c={href:c}),d=h.getParent(i.getNode(),"a"),c.href=c.href.replace(" ","%20"),(!d||!c.href)&&l.remove("link"),c.href&&l.apply("link",c,d)},selectAll:function(){var a=h.getRoot(),b=h.createRng();b.setStart(a,0),b.setEnd(a,a.childNodes.length),f.selection.setRng(b)}}),p({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var c="align"+b.substring(7),e=i.isCollapsed()?[i.getNode()]:i.getSelectedBlocks(),f=a.map(e,function(a){return!!l.matchNode(a,c)});return a.inArray(f,d)!==-1},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return r(a)},mceBlockQuote:function(){return r("blockquote")},Outdent:function(){var a;if(k.inline_styles){if((a=h.getParent(i.getStart(),h.isBlock))&&parseInt(a.style.paddingLeft)>0)return d;if((a=h.getParent(i.getEnd(),h.isBlock))&&parseInt(a.style.paddingLeft)>0)return d}return n("InsertUnorderedList")||n("InsertOrderedList")||!k.inline_styles&&!!h.getParent(i.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(a){return h.getParent(i.getNode(),a=="insertunorderedlist"?"UL":"OL")}},"state"),p({"FontSize,FontName":function(a){var b,c=0;if(b=h.getParent(i.getNode(),"span"))a=="fontsize"?c=b.style.fontSize:c=b.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return c}},"value"),k.custom_undo_redo&&p({Undo:function(){f.undoManager.undo()},Redo:function(){f.undoManager.redo()}})}}(tinymce),function(a){var b=a.util.Dispatcher;a.UndoManager=function(c){function h(){return a.trim(c.getContent({format:"raw",no_events:1}))}var d,e,f=0,g=[];return d={typing:!1,onAdd:new b(d),onUndo:new b(d),onRedo:new b(d),beforeChange:function(){e=c.selection.getBookmark(2,!0)},add:function(a){var b,i,j=c.settings;a=a||{},a.content=h(),i=g[f];if(i&&i.content==a.content)return null;g[f]&&(g[f].beforeBookmark=e);if(j.custom_undo_redo_levels&&g.length>j.custom_undo_redo_levels){for(b=0;b<g.length-1;b++)g[b]=g[b+1];g.length--,f=g.length}return a.bookmark=c.selection.getBookmark(2,!0),f<g.length-1&&(g.length=f+1),g.push(a),f=g.length-1,d.onAdd.dispatch(d,a),c.isNotDirty=0,a},undo:function(){var a;return d.typing&&(d.add(),d.typing=!1),f>0&&(a=g[--f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.beforeBookmark),d.onUndo.dispatch(d,a)),a},redo:function(){var a;return f<g.length-1&&(a=g[++f],c.setContent(a.content,{format:"raw"}),c.selection.moveToBookmark(a.bookmark),d.onRedo.dispatch(d,a)),a},clear:function(){g=[],f=0,d.typing=!1},hasUndo:function(){return f>0||this.typing},hasRedo:function(){return f<g.length-1&&!this.typing}}}}(tinymce),function(a){function j(a){var b,c,d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(a.nodeName)&&(b?(c=a.cloneNode(!1),c.appendChild(b),b=c):b=d=a.cloneNode(!1),b.removeAttribute("id"));while(a=a.parentNode);if(b)return{wrapper:b,inner:d}}function k(a,b){var c=b.ownerDocument.createRange();return c.setStart(a.endContainer,a.endOffset),c.setEndAfter(b),c.cloneContents().textContent.length==0}function l(a,b,c){var d,e;return b.isEmpty(c)?(d=b.getParent(c,"ul,ol"),b.getParent(d.parentNode,"ul,ol")||(b.split(d,c),e=b.create("p",0,'<br data-mce-bogus="1" />'),b.replace(e,c),a.select(e,1)),i):h}var b=a.dom.Event,c=a.isIE,d=a.isGecko,e=a.isOpera,f=a.each,g=a.extend,h=!0,i=!1;a.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b,c=this,d=a.settings;c.editor=a,c.dom=a.dom,b=(d.forced_root_block||"p").toLowerCase(),d.element=b.toUpperCase(),a.onPreInit.add(c.setup,c)},setup:function(){var e=this,f=e.editor,g=f.settings,i=f.dom,k=f.selection,l=f.schema.getBlockElements();if(g.forced_root_block){function m(){var a,b,c,d,e,h,j,m=k.getStart(),n=f.getBody(),o=-16777215;if(!m||m.nodeType!==1)return;while(m!=n){if(l[m.nodeName])return;m=m.parentNode}a=k.getRng(),a.setStart?(b=a.startContainer,c=a.startOffset,d=a.endContainer,e=a.endOffset):(a.item&&(a=f.getDoc().body.createTextRange(),a.moveToElementText(a.item(0))),tmpRng=a.duplicate(),tmpRng.collapse(!0),c=tmpRng.move("character",o)*-1,tmpRng.collapsed||(tmpRng=a.duplicate(),tmpRng.collapse(!1),e=tmpRng.move("character",o)*-1-c));for(m=n.firstChild;m;m)m.nodeType===3||m.nodeType==1&&!l[m.nodeName]?(h||(h=i.create(g.forced_root_block),m.parentNode.insertBefore(h,m)),j=m,m=m.nextSibling,h.appendChild(j)):(h=null,m=m.nextSibling);if(a.setStart)a.setStart(b,c),a.setEnd(d,e),k.setRng(a);else try{a=f.getDoc().body.createTextRange(),a.moveToElementText(n),a.collapse(!0),a.moveStart("character",c),e>0&&a.moveEnd("character",e),a.select()}catch(p){}f.nodeChanged()}f.onKeyUp.add(m),f.onClick.add(m)}g.force_br_newlines&&c&&f.onKeyPress.add(function(a,c){var d;if(c.keyCode==13&&k.getNode().nodeName!="LI")return k.setContent('<br id="__" /> ',{format:"raw"}),d=i.get("__"),d.removeAttribute("id"),k.select(d),k.collapse(),b.cancel(c)}),g.force_p_newlines&&(c?(a.addUnload(function(){e._previousFormats=0}),f.onKeyPress.add(function(a,b){e._previousFormats=0,b.keyCode==13&&!b.shiftKey&&a.selection.isCollapsed()&&g.keep_styles&&(e._previousFormats=j(a.selection.getStart()))}),f.onKeyUp.add(function(a,b){var c,d;b.keyCode==13&&!b.shiftKey&&(c=a.selection.getStart(),d=e._previousFormats,!c.hasChildNodes()&&d&&(c=i.getParent(c,i.isBlock),c&&c.nodeName!="LI"&&(c.innerHTML="",e._previousFormats?(c.appendChild(d.wrapper),d.inner.innerHTML="﻿"):c.innerHTML="﻿",k.select(c,1),k.collapse(!0),a.getDoc().execCommand("Delete",!1,null),e._previousFormats=0)))})):f.onKeyPress.add(function(a,c){c.keyCode==13&&!c.shiftKey&&!e.insertPara(c)&&b.cancel(c)}),d&&f.onKeyDown.add(function(a,b){(b.keyCode==8||b.keyCode==46)&&!b.shiftKey&&e.backspaceDelete(b,b.keyCode==8)}));if(a.isWebKit){function n(a){var b,c,d=k.getRng(),e=i.create("div",null," "),f=i.getViewPort(a.getWin()).h;d.insertNode(b=i.create("br")),d.setStartAfter(b),d.setEndAfter(b),k.setRng(d),k.getSel().focusNode==b.previousSibling&&(k.select(i.insertAfter(i.doc.createTextNode(" "),b)),k.collapse(h)),i.insertAfter(e,b),c=i.getPos(e).y,i.remove(e),c>f&&a.getWin().scrollTo(0,c)}f.onKeyPress.add(function(a,c){c.keyCode==13&&(c.shiftKey||g.force_br_newlines&&!i.getParent(k.getNode(),"h1,h2,h3,h4,h5,h6,ol,ul"))&&(n(a),b.cancel(c))})}c&&g.element!="P"&&(f.onKeyPress.add(function(){e.lastElm=k.getNode().nodeName}),f.onKeyUp.add(function(a,b){var c,d=k.getNode(),f=a.getBody();f.childNodes.length===1&&d.nodeName=="P"?(d=i.rename(d,g.element),k.select(d),k.collapse(),a.nodeChanged()):b.keyCode==13&&!b.shiftKey&&e.lastElm!="P"&&(c=i.getParent(d,"p"),c&&(i.rename(c,g.element),a.nodeChanged()))}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){function G(a,b){var c,d,f,g=[];a.innerHTML="";if(A.keep_styles){d=b;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(d.nodeName)&&(c=d.cloneNode(i),y.setAttrib(c,"id",""),g.push(c));while(d=d.parentNode)}if(g.length>0){for(f=g.length-1,c=a;f>=0;f--)c=c.appendChild(g[f]);return g[0].innerHTML=e?" ":"<br />",g[0]}a.innerHTML=e?" ":"<br />"}var a,b,c,d,f,g,j,m,n,o,p,q,r,s,t,u,v,w=this,x=w.editor,y=x.dom,z=x.getDoc(),A=x.settings,B=x.selection.getSel(),C=B.getRangeAt(0),D=z.body,E=y.getViewPort(x.getWin());x.undoManager.beforeChange(),a=z.createRange(),a.setStart(B.anchorNode,B.anchorOffset),a.collapse(h),b=z.createRange(),b.setStart(B.focusNode,B.focusOffset),b.collapse(h),c=a.compareBoundaryPoints(a.START_TO_END,b)<0,d=c?B.anchorNode:B.focusNode,f=c?B.anchorOffset:B.focusOffset,g=c?B.focusNode:B.anchorNode,j=c?B.focusOffset:B.anchorOffset;if(d===g&&/^(TD|TH)$/.test(d.nodeName))return d.firstChild.nodeName=="BR"&&y.remove(d.firstChild),d.childNodes.length==0?(x.dom.add(d,A.element,null,"<br />"),q=x.dom.add(d,A.element,null,"<br />")):(t=d.innerHTML,d.innerHTML="",x.dom.add(d,A.element,null,t),q=x.dom.add(d,A.element,null,"<br />")),C=z.createRange(),C.selectNodeContents(q),C.collapse(1),x.selection.setRng(C),i;d==D&&g==D&&D.firstChild&&x.dom.isBlock(D.firstChild)&&(d=g=d.firstChild,f=j=0,a=z.createRange(),a.setStart(d,0),b=z.createRange(),b.setStart(g,0)),z.body.hasChildNodes()||z.body.appendChild(y.create("br")),d=d.nodeName=="HTML"?z.body:d,d=d.nodeName=="BODY"?d.firstChild:d,g=g.nodeName=="HTML"?z.body:g,g=g.nodeName=="BODY"?g.firstChild:g,m=w.getParentBlock(d),n=w.getParentBlock(g),o=m?m.nodeName:A.element;if(t=w.dom.getParent(m,"li,pre"))return t.nodeName=="LI"?l(x.selection,w.dom,t):h;m&&(m.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(y.getStyle(m,"position",1)))&&(o=A.element,m=null),n&&(n.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(y.getStyle(m,"position",1)))&&(o=A.element,n=null);if(/(TD|TABLE|TH|CAPTION)/.test(o)||m&&o=="DIV"&&/left|right/gi.test(y.getStyle(m,"float",1)))o=A.element,m=n=null;p=m&&m.nodeName==o?m.cloneNode(0):x.dom.create(o),q=n&&n.nodeName==o?n.cloneNode(0):x.dom.create(o),q.removeAttribute("id"),/^(H[1-6])$/.test(o)&&k(C,m)&&(q=x.dom.create(A.element)),t=r=d;do{if(t==D||t.nodeType==9||w.dom.isBlock(t)||/(TD|TABLE|TH|CAPTION)/.test(t.nodeName))break;r=t}while(t=t.previousSibling?t.previousSibling:t.parentNode);t=s=g;do{if(t==D||t.nodeType==9||w.dom.isBlock(t)||/(TD|TABLE|TH|CAPTION)/.test(t.nodeName))break;s=t}while(t=t.nextSibling?t.nextSibling:t.parentNode);r.nodeName==o?a.setStart(r,0):a.setStartBefore(r),a.setEnd(d,f),p.appendChild(a.cloneContents()||z.createTextNode(""));try{b.setEndAfter(s)}catch(F){}return b.setStart(g,j),q.appendChild(b.cloneContents()||z.createTextNode("")),C=z.createRange(),!r.previousSibling&&r.parentNode.nodeName==o?C.setStartBefore(r.parentNode):a.startContainer.nodeName==o&&a.startOffset==0?C.setStartBefore(a.startContainer):C.setStart(a.startContainer,a.startOffset),!s.nextSibling&&s.parentNode.nodeName==o?C.setEndAfter(s.
parentNode):C.setEnd(b.endContainer,b.endOffset),C.deleteContents(),e&&x.getWin().scrollTo(0,E.y),p.firstChild&&p.firstChild.nodeName==o&&(p.innerHTML=p.firstChild.innerHTML),q.firstChild&&q.firstChild.nodeName==o&&(q.innerHTML=q.firstChild.innerHTML),y.isEmpty(p)&&G(p,d),y.isEmpty(q)&&(v=G(q,g)),e&&parseFloat(opera.version())<9.5?(C.insertNode(p),C.insertNode(q)):(C.insertNode(q),C.insertNode(p)),q.normalize(),p.normalize(),x.selection.select(q,!0),x.selection.collapse(!0),u=x.dom.getPos(q).y,(u<E.y||u+25>E.y+E.h)&&x.getWin().scrollTo(0,u<E.y?u:u-E.h+25),x.undoManager.add(),i},backspaceDelete:function(c,d){var e,f,g,h,j=this,k=j.editor,l=k.getBody(),m=k.dom,n=k.selection,o=n.getRng(),p=o.startContainer;if(!d&&o.collapsed&&p.nodeType==1&&o.startOffset==p.childNodes.length){h=new a.dom.TreeWalker(p.lastChild,p);for(e=p.lastChild;e;e=h.prev())if(e.nodeType==3){o.setStart(e,e.nodeValue.length),o.collapse(!0),n.setRng(o);return}}if(p&&k.dom.isBlock(p)&&!/^(TD|TH)$/.test(p.nodeName)&&d)if(p.childNodes.length==0||p.childNodes.length==1&&p.firstChild.nodeName=="BR"){e=p;while((e=e.previousSibling)&&!k.dom.isBlock(e));if(e){if(p!=l.firstChild){f=k.dom.doc.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,i);while(g=f.nextNode())e=g;o=k.getDoc().createRange(),o.setStart(e,e.nodeValue?e.nodeValue.length:0),o.setEnd(e,e.nodeValue?e.nodeValue.length:0),n.setRng(o),k.dom.remove(p)}return b.cancel(c)}}}})}(tinymce),function(a){var b=a.DOM,c=a.dom.Event,d=a.each,e=a.extend;a.create("tinymce.ControlManager",{ControlManager:function(b,c){var e=this;c=c||{},e.editor=b,e.controls={},e.onAdd=new a.util.Dispatcher(e),e.onPostRender=new a.util.Dispatcher(e),e.prefix=c.prefix||b.id+"_",e._cls={},e.onPostRender.add(function(){d(e.controls,function(a){a.postRender()})})},get:function(a){return this.controls[this.prefix+a]||this.controls[a]},setActive:function(a,b){var c=null;return(c=this.get(a))&&c.setActive(b),c},setDisabled:function(a,b){var c=null;return(c=this.get(a))&&c.setDisabled(b),c},add:function(a){var b=this;return a&&(b.controls[a.id]=a,b.onAdd.dispatch(a,b)),a},createControl:function(a){var b,c=this,e=c.editor;d(e.plugins,function(d){if(d.createControl){b=d.createControl(a,c);if(b)return!1}});switch(a){case"|":case"separator":return c.createSeparator()}return!b&&e.buttons&&(b=e.buttons[a])?c.createButton(a,b):c.add(b)},createDropMenu:function(b,c,d){var f,g,h,i,j=this,k=j.editor;c=e({"class":"mceDropDown",constrain:k.settings.constrain_menus},c),c["class"]=c["class"]+" "+k.getParam("skin")+"Skin";if(h=k.getParam("skin_variant"))c["class"]+=" "+k.getParam("skin")+"Skin"+h.substring(0,1).toUpperCase()+h.substring(1);return b=j.prefix+b,i=d||j._cls.dropmenu||a.ui.DropMenu,f=j.controls[b]=new i(b,c),f.onAddItem.add(function(a,b){var c=b.settings;c.title=k.getLang(c.title,c.title),c.onclick||(c.onclick=function(){c.cmd&&k.execCommand(c.cmd,c.ui||!1,c.value)})}),k.onRemove.add(function(){f.destroy()}),a.isIE&&(f.onShowMenu.add(function(){k.focus(),g=k.selection.getBookmark(1)}),f.onHideMenu.add(function(){g&&(k.selection.moveToBookmark(g),g=0)})),j.add(f)},createListBox:function(b,d,f){function k(b){return b.settings.use_accessible_selects&&!a.isGecko}var g,h,i=this,j=i.editor;return i.get(b)?null:(d.title=j.translate(d.title),d.scope=d.scope||j,d.onselect||(d.onselect=function(a){j.execCommand(d.cmd,d.ui||!1,a||d.value)}),d=e({title:d.title,"class":"mce_"+b,scope:d.scope,control_manager:i},d),b=i.prefix+b,j.settings.use_native_selects||k(j)?g=new a.ui.NativeListBox(b,d):(h=f||i._cls.listbox||a.ui.ListBox,g=new h(b,d,j)),i.controls[b]=g,a.isWebKit&&g.onPostRender.add(function(a,b){c.add(b,"mousedown",function(){j.bookmark=j.selection.getBookmark(1)}),c.add(b,"focus",function(){j.selection.moveToBookmark(j.bookmark),j.bookmark=null})}),g.hideMenu&&j.onMouseDown.add(g.hideMenu,g),i.add(g))},createButton:function(b,c,d){var f,g,h=this,i=h.editor;return h.get(b)?null:(c.title=i.translate(c.title),c.label=i.translate(c.label),c.scope=c.scope||i,!c.onclick&&!c.menu_button&&(c.onclick=function(){i.execCommand(c.cmd,c.ui||!1,c.value)}),c=e({title:c.title,"class":"mce_"+b,unavailable_prefix:i.getLang("unavailable",""),scope:c.scope,control_manager:h},c),b=h.prefix+b,c.menu_button?(g=d||h._cls.menubutton||a.ui.MenuButton,f=new g(b,c,i),i.onMouseDown.add(f.hideMenu,f)):(g=h._cls.button||a.ui.Button,f=new g(b,c,i)),h.add(f))},createMenuButton:function(a,b,c){return b=b||{},b.menu_button=1,this.createButton(a,b,c)},createSplitButton:function(b,c,d){var f,g,h=this,i=h.editor;return h.get(b)?null:(c.title=i.translate(c.title),c.scope=c.scope||i,c.onclick||(c.onclick=function(a){i.execCommand(c.cmd,c.ui||!1,a||c.value)}),c.onselect||(c.onselect=function(a){i.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,scope:c.scope,control_manager:h},c),b=h.prefix+b,g=d||h._cls.splitbutton||a.ui.SplitButton,f=h.add(new g(b,c,i)),i.onMouseDown.add(f.hideMenu,f),f)},createColorSplitButton:function(b,c,d){var f,g,h,i=this,j=i.editor;return i.get(b)?null:(c.title=j.translate(c.title),c.scope=c.scope||j,c.onclick||(c.onclick=function(b){a.isIE&&(h=j.selection.getBookmark(1)),j.execCommand(c.cmd,c.ui||!1,b||c.value)}),c.onselect||(c.onselect=function(a){j.execCommand(c.cmd,c.ui||!1,a||c.value)}),c=e({title:c.title,"class":"mce_"+b,menu_class:j.getParam("skin")+"Skin",scope:c.scope,more_colors_title:j.getLang("more_colors")},c),b=i.prefix+b,g=d||i._cls.colorsplitbutton||a.ui.ColorSplitButton,f=new g(b,c,j),j.onMouseDown.add(f.hideMenu,f),j.onRemove.add(function(){f.destroy()}),a.isIE&&(f.onShowMenu.add(function(){j.focus(),h=j.selection.getBookmark(1)}),f.onHideMenu.add(function(){h&&(j.selection.moveToBookmark(h),h=0)})),i.add(f))},createToolbar:function(b,c,d){var e,f,g=this;return b=g.prefix+b,f=d||g._cls.toolbar||a.ui.Toolbar,e=new f(b,c,g.editor),g.get(b)?null:g.add(e)},createToolbarGroup:function(b,c,d){var e,f,g=this;return b=g.prefix+b,f=d||this._cls.toolbarGroup||a.ui.ToolbarGroup,e=new f(b,c,g.editor),g.get(b)?null:g.add(e)},createSeparator:function(b){var c=b||this._cls.separator||a.ui.Separator;return new c},setControlType:function(a,b){return this._cls[a.toLowerCase()]=b},destroy:function(){d(this.controls,function(a){a.destroy()}),this.controls=null}})}(tinymce),function(a){var b=a.util.Dispatcher,c=a.each,d=a.isIE,e=a.isOpera;a.create("tinymce.WindowManager",{WindowManager:function(a){var c=this;c.editor=a,c.onOpen=new b(c),c.onClose=new b(c),c.params={},c.features={}},open:function(b,f){var g,h,i,j,k=this,l="",m=k.editor.settings.dialog_type=="modal",n=a.DOM.getViewPort();b=b||{},f=f||{},h=e?n.w:screen.width,i=e?n.h:screen.height,b.name=b.name||"mc_"+(new Date).getTime(),b.width=parseInt(b.width||320),b.height=parseInt(b.height||240),b.resizable=!0,b.left=b.left||parseInt(h/2)-b.width/2,b.top=b.top||parseInt(i/2)-b.height/2,f.inline=!1,f.mce_width=b.width,f.mce_height=b.height,f.mce_auto_focus=b.auto_focus,m&&d&&(b.center=!0,b.help=!1,b.dialogWidth=b.width+"px",b.dialogHeight=b.height+"px",b.scroll=b.scrollbars||!1),c(b,function(b,c){a.is(b,"boolean")&&(b=b?"yes":"no"),/^(name|url)$/.test(c)||(d&&m?l+=(l?";":"")+c+":"+b:l+=(l?",":"")+c+"="+b)}),k.features=b,k.params=f,k.onOpen.dispatch(k,b,f),j=b.url||b.file,j=a._addVer(j);try{d&&m?(g=1,window.showModalDialog(j,window,l)):g=window.open(j,b.name,l)}catch(o){}g||alert(k.editor.getLang("popup_blocked"))},close:function(a){a.close(),this.onClose.dispatch(this)},createInstance:function(b,c,d,e,f,g){var h=a.resolve(b);return new h(c,d,e,f,g)},confirm:function(a,b,c,d){d=d||window,b.call(c||this,d.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,b,c,d){var e=this;d=d||window,d.alert(e._decode(e.editor.getLang(a,a))),b&&b.call(c||e)},resizeBy:function(a,b,c){c.resizeBy(a,b)},_decode:function(b){return a.DOM.decode(b).replace(/\\n/g,"\n")}})}(tinymce),function(a){a.Formatter=function(b){function t(a,b){return h.getParents(a,b,h.getRoot())}function u(a){return a.nodeType===1&&a.id==="_mce_caret"}function v(a){return a?f[a]:f}function w(a,b){a&&(typeof a!="string"?g(a,function(a,b){w(b,a)}):(b=b.length?b:[b],g(b,function(a){a.deep===c&&(a.deep=!a.selector),a.split===c&&(a.split=!a.selector||a.inline),a.remove===c&&a.selector&&!a.inline&&(a.remove="none"),a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0),typeof a.classes=="string"&&(a.classes=a.classes.split(/\s+/))}),f[a]=b))}function x(c,d,f){function x(a,b){b=b||t,a&&(b.onformat&&b.onformat(a,b,d,f),g(b.styles,function(b,c){h.setStyle(a,c,H(b,d))}),g(b.attributes,function(b,c){h.setAttrib(a,c,H(b,d))}),g(b.classes,function(b){b=H(b,d),h.hasClass(a,b)||h.addClass(a,b)}))}function y(){function h(a,b){var c=new j(b);for(f=c.current();f;f=c.prev())if(f.childNodes.length>1||f==a)return f}var a,c,d,e,g;return a=b.selection.getRng(),c=a.startContainer,d=a.endContainer,c!=d&&a.endOffset==0&&(e=h(c,d),g=e.nodeType==3?e.length:e.childNodes.length,a.setEnd(e,g)),a}function z(b,c,d,e,f){var i,j,k=[],l=-1,m=-1,n=-1;return g(b.childNodes,function(a,b){if(a.nodeName==="UL"||a.nodeName==="OL")return l=b,i=a,!1}),g(b.childNodes,function(a,b){a.nodeName==="SPAN"&&h.getAttrib(a,"data-mce-type")=="bookmark"&&(a.id==c.id+"_start"?m=b:a.id==c.id+"_end"&&(n=b))}),l<=0||m<l&&n>l?(g(a.grep(b.childNodes),f),0):(j=d.cloneNode(r),g(a.grep(b.childNodes),function(a,b){if(m<l&&b<l||m>l&&b>l)k.push(a),a.parentNode.removeChild(a)}),m<l?b.insertBefore(j,i):m>l&&b.insertBefore(j,i.nextSibling),e.push(j),g(k,function(a){j.appendChild(a)}),j)}function B(b,e,f){var i=[],j=t.inline||t.block,n=h.create(j);x(n),k.walk(b,function(b){function m(b){var o,p=b.nodeName.toLowerCase(),s=b.parentNode.nodeName.toLowerCase();if(F(p,"br")){k=0,t.block&&h.remove(b);return}if(t.wrapper&&A(b,c,d)){k=0;return}if(t.block&&!t.wrapper&&Q(p)){b=h.rename(b,j),x(b),i.push(b),k=0;return}if(t.selector){g(q,function(a){if("collapsed"in a&&a.collapsed!==w)return;h.is(b,a.selector)&&!u(b)&&(x(b,a),o=!0)});if(!t.inline||o){k=0;return}}l(j,p)&&l(s,j)&&(!!f||b.nodeType!==3||b.nodeValue.length!==1||b.nodeValue.charCodeAt(0)!==65279)&&!u(b)?(k||(k=n.cloneNode(r),b.parentNode.insertBefore(k,b),i.push(k)),k.appendChild(b)):p=="li"&&e?k=z(b,e,n,i,m):(k=0,g(a.grep(b.childNodes),m),k=0)}var k;g(b,m)}),t.wrap_links===!1&&g(i,function(b){function c(b){var d,e,f;if(b.nodeName==="A"){e=n.cloneNode(r),i.push(e),f=a.grep(b.childNodes);for(d=0;d<f.length;d++)e.appendChild(f[d]);b.appendChild(e)}g(a.grep(b.childNodes),c)}c(b)}),g(i,function(a){function e(a){var b=0;return g(a.childNodes,function(a){!I(a)&&!O(a)&&b++}),b}function f(a){var b,c;return g(a.childNodes,function(a){if(a.nodeType==1&&!O(a)&&!u(a))return b=a,r}),b&&E(b,t)&&(c=b.cloneNode(r),x(c),h.replace(c,a,s),h.remove(b,1)),c||a}var b;b=e(a);if((i.length>1||!m(a))&&b===0){h.remove(a,1);return}if(t.inline||t.wrapper){!t.exact&&b===1&&(a=f(a)),g(q,function(b){g(h.select(b.inline,a),function(a){var c;if(b.wrap_links===!1){c=a.parentNode;do if(c.nodeName==="A")return;while(c=c.parentNode)}L(b,d,a,b.exact?a:null)})});if(A(a.parentNode,c,d))return h.remove(a,1),a=0,s;t.merge_with_parents&&h.getParent(a.parentNode,function(b){if(A(b,c,d))return h.remove(a,1),a=0,s}),a&&t.merge_siblings!==!1&&(a=P(N(a),a),a=P(a,N(a,s)))}})}var n,o,p,q=v(c),t=q[0],w=i.isCollapsed();t&&(f?f.nodeType?(o=h.createRng(),o.setStartBefore(f),o.setEndAfter(f),B(K(o,q),null,!0)):B(f,null,!0):!w||!t.inline||h.select("td.mceSelected,th.mceSelected").length?(p=b.selection.getNode(),b.selection.setRng(y()),n=i.getBookmark(),B(K(i.getRng(s),q),n),t.styles&&(t.styles.color||t.styles.textDecoration)&&(a.walk(p,e,"childNodes"),e(p)),i.moveToBookmark(n),T(i.getRng(s)),b.nodeChanged()):S("apply",c,d))}function y(c,e,f){function q(b){var c,d,f=a.grep(b.childNodes);for(c=0,d=n.length;c<d;c++)if(L(n[c],e,b,b))break;if(p.deep)for(c=0,d=f.length;c<d;c++)q(f[c])}function u(a){var b;return g(t(a.parentNode).reverse(),function(a){var d;!b&&a.id!="_start"&&a.id!="_end"&&(d=A(a,c,e),d&&d.split!==!1&&(b=a))}),b}function w(a,b,c,d){var f,g,i,j,k,l;if(a){l=a.parentNode;for(f=b.parentNode;f&&f!=l;f=f.parentNode){g=f.cloneNode(r);for(k=0;k<n.length;k++)if(L(n[k],e,g,g)){g=0;break}g&&(i&&g.appendChild(i),j||(j=g),i=g)}d&&(!p.mixed||!m(a))&&(b=h.split(a,b)),i&&(c.parentNode.insertBefore(i,c),j.appendChild(c))}return b}function x(a){return w(u(a),a,a,!0)}function y(a){var b=h.get(a?"_start":"_end"),c=b[a?"firstChild":"lastChild"];return O(c)&&(c=c[a?"firstChild":"lastChild"]),h.remove(b,!0),c}function z(a){var c,e;a=K(a,n,s),p.split&&(c=R(a,s),e=R(a),c!=e?(c=J(c,"span",{id:"_start","data-mce-type":"bookmark"}),e=J(e,"span",{id:"_end","data-mce-type":"bookmark"}),x(c),x(e),c=y(s),e=y()):c=e=x(c),a.startContainer=c.parentNode,a.startOffset=o(c),a.endContainer=e.parentNode,a.endOffset=o(e)+1),k.walk(a,function(a){g(a,function(a){q(a),a.nodeType===1&&b.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&d(a.parentNode)==="underline"&&L({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,a)})})}var j,l,n=v(c),p=n[0];if(f){f.nodeType?(l=h.createRng(),l.setStartBefore(f),l.setEndAfter(f),z(l)):z(f);return}!i.isCollapsed()||!p.inline||h.select("td.mceSelected,th.mceSelected").length?(j=i.getBookmark(),z(i.getRng(s)),i.moveToBookmark(j),p.inline&&B(c,e,i.getStart())&&T(i.getRng(!0)),b.nodeChanged()):S("remove",c,e),a.isWebKit&&b.execCommand("mceCleanup")}function z(a,b,c){var d=v(a);!B(a,b,c)||"toggle"in d[0]&&!d[0].toggle?x(a,b,c):y(a,b,c)}function A(a,b,d,e){function k(a,b,f){var g,i,j,k=b[f];if(b.onmatch)return b.onmatch(a,b,f);if(k)if(k.length===c){for(g in k)if(k.hasOwnProperty(g)){f==="attributes"?i=h.getAttrib(a,g):i=G(a,g);if(e&&!i&&!b.exact)return;if((!e||b.exact)&&!F(i,H(k[g],d)))return}}else for(j=0;j<k.length;j++)if(f==="attributes"?h.getAttrib(a,k[j]):G(a,k[j]))return b;return b}var f,g,i,j=v(b);if(j&&a)for(g=0;g<j.length;g++){f=j[g];if(E(a,f)&&k(a,f,"attributes")&&k(a,f,"styles")){if(i=f.classes)for(g=0;g<i.length;g++)if(!h.hasClass(a,i[g]))return;return f}}}function B(a,b,c){function e(c){return c=h.getParent(c,function(c){return!!A(c,a,b,!0)}),A(c,a,b)}var d;return c?e(c):(c=i.getNode(),e(c)?s:(d=i.getStart(),d!=c&&e(d)?s:r))}function C(a,b){var c=[],d={},e=i.getStart();return h.getParent(e,function(e){var f,g;for(f=0;f<a.length;f++)g=a[f],!d[g]&&A(e,g,b)&&(d[g]=!0,c.push(g))}),c}function D(a){var b,c,d,e,f,g=v(a);if(g){b=i.getStart(),c=t(b);for(e=g.length-1;e>=0;e--){f=g[e].selector;if(!f)return s;for(d=c.length-1;d>=0;d--)if(h.is(c[d],f))return s}}return r}function E(a,b){if(F(a,b.inline))return s;if(F(a,b.block))return s;if(b.selector)return h.is(a,b.selector)}function F(a,b){return a=a||"",b=b||"",a=""+(a.nodeName||a),b=""+(b.nodeName||b),a.toLowerCase()==b.toLowerCase()}function G(a,b){var c=h.getStyle(a,b);if(b=="color"||b=="backgroundColor")c=h.toHex(c);return b=="fontWeight"&&c==700&&(c="bold"),""+c}function H(a,b){return typeof a!="string"?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,c){return b[c]||a})),a}function I(a){return a&&a.nodeType===3&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function J(a,b,c){var d=h.create(b,c);return a.parentNode.insertBefore(d,a),d.appendChild(a),d}function K(a,d,e){function q(a){var b,c,e=b=a?k:n,f=a?"previousSibling":"nextSibling";root=h.getRoot();if(e.nodeType==3&&!I(e))if(a?l>0:p<e.nodeValue.length)return e;for(;;){if(!d[0].block_expand&&m(b))return b;for(c=b[f];c;c=c[f])if(!O(c)&&!I(c))return b;if(b.parentNode==root){e=b;break}b=b.parentNode}return e}function s(a,b){b===c&&(b=a.nodeType===3?a.length:a.childNodes.length);while(a&&a.hasChildNodes())a=a.childNodes[b],a&&(b=a.nodeType===3?a.length:a.childNodes.length);return{node:a,offset:b}}var f,g,i,k=a.startContainer,l=a.startOffset,n=a.endContainer,p=a.endOffset;k.nodeType==1&&k.hasChildNodes()&&(f=k.childNodes.length-1,k=k.childNodes[l>f?f:l],k.nodeType==3&&(l=0)),n.nodeType==1&&n.hasChildNodes()&&(f=n.childNodes.length-1,n=n.childNodes[p>f?f:p-1],n.nodeType==3&&(p=n.nodeValue.length));if(O(k.parentNode)||O(k))k=O(k)?k:k.parentNode,k=k.nextSibling||k,k.nodeType==3&&(l=0);if(O(n.parentNode)||O(n))n=O(n)?n:n.parentNode,n=n.previousSibling||n,n.nodeType==3&&(p=n.length);if(d[0].inline){if(a.collapsed){function u(a,c,d){function l(a,b){var c,f,g=a.nodeValue;return typeof b=="undefined"&&(b=d?g.length:0),d?(c=g.lastIndexOf(" ",b),f=g.lastIndexOf(" ",b),c=c>f?c:f,c!==-1&&!e&&c++):(c=g.indexOf(" ",b),f=g.indexOf(" ",b),c=c===-1||f!==-1&&c>=f?f:c),c}var f,g,i,k;if(a.nodeType===3){i=l(a,c);if(i!==-1)return{container:a,offset:i};k=a}f=new j(a,h.getParent(a,m)||b.getBody());while(g=f[d?"prev":"next"]())if(g.nodeType===3){k=g,i=l(g);if(i!==-1)return{container:g,offset:i}}else if(m(g))break;if(k)return d?c=0:c=k.length,{container:k,offset:c}}i=u(k,l,!0),i&&(k=i.container,l=i.offset),i=u(n,p),i&&(n=i.container,p=i.offset)}g=s(n,p);if(g.node){while(g.node&&g.offset===0&&g.node.previousSibling)g=s(g.node.previousSibling);g.node&&g.offset>0&&g.node.nodeType===3&&g.node.nodeValue.charAt(g.offset-1)===" "&&(g.offset>1?(n=g.node,n.splitText(g.offset-1)):!g.node.previousSibling)}}if(d[0].inline||d[0].block_expand){if(!d[0].inline||k.nodeType!=3||l===0)k=q(!0);if(!d[0].inline||n.nodeType!=3||p===n.nodeValue.length)n=q()}if(d[0].selector&&d[0].expand!==r&&!d[0].inline){function v(b,c){var e,f,g,i;b.nodeType==3&&b.nodeValue.length==0&&b[c]&&(b=b[c]),e=t(b);for(f=0;f<e.length;f++)for(g=0;g<d.length;g++){i=d[g];if("collapsed"in i&&i.collapsed!==a.collapsed)continue;if(h.is(e[f],i.selector))return e[f]}return b}k=v(k,"previousSibling"),n=v(n,"nextSibling")}if(d[0].block||d[0].selector){function w(a,b){var c;d[0].wrapper||(c=h.getParent(a,d[0].block)),c||(c=h.getParent(a.nodeType==3?a.parentNode:a,m)),c&&d[0].wrapper&&(c=t(c,"ul,ol").reverse()[0]||c);if(!c){c=a;while(c[b]&&!m(c[b])){c=c[b];if(F(c,"br"))break}}return c||a}k=w(k,"previousSibling"),n=w(n,"nextSibling"),d[0].block&&(m(k)||(k=q(!0)),m(n)||(n=q()))}return k.nodeType==1&&(l=o(k),k=k.parentNode),n.nodeType==1&&(p=o(n)+1,n=n.parentNode),{startContainer:k,startOffset:l,endContainer:n,endOffset:p}}function L(a,b,c,d){var e,f,i;if(!E(c,a))return r;if(a.remove!="all"){g(a.styles,function(a,e){a=H(a,b),typeof e=="number"&&(e=a,d=0),(!d||F(G(d,e),a))&&h.setStyle(c,e,""),i=1}),i&&h.getAttrib(c,"style")==""&&(c.removeAttribute("style"),c.removeAttribute("data-mce-style")),g(a.attributes,function(a,e){var f;a=H(a,b),typeof e=="number"&&(e=a,d=0);if(!d||F(h.getAttrib(d,e),a)){if(e=="class"){a=h.getAttrib(c,e);if(a){f="",g(a.split(/\s+/),function(a){/mce\w+/.test(a)&&(f+=(f?" ":"")+a)});if(f){h.setAttrib(c,e,f);return}}}e=="class"&&c.removeAttribute("className"),q.test(e)&&c.removeAttribute("data-mce-"+e),c.removeAttribute(e)}}),g(a.classes,function(a){a=H(a,b),(!d||h.hasClass(d,a))&&h.removeClass(c,a)}),f=h.getAttribs(c);for(e=0;e<f.length;e++)if(f[e].nodeName.indexOf("_")!==0)return r}if(a.remove!="none")return M(c,a),s}function M(b,c){var d,e=b.parentNode;if(c.block)if(!n){function f(a,b,c){return a=N(a,b,c),!a||a.nodeName=="BR"||m(a)}m(b)&&!m(e)&&(!f(b,r)&&!f(b.firstChild,s,1)&&b.insertBefore(h.create("br"),b.firstChild),!f(b,s)&&!f(b.lastChild,r,1)&&b.appendChild(h.create("br")))}else e==h.getRoot()&&(!c.list_block||!F(b,c.list_block))&&g(a.grep(b.childNodes),function(a){l(n,a.nodeName.toLowerCase())?d?d.appendChild(a):d=J(a,n):d=0});if(c.selector&&c.inline&&!F(c.inline,b))return;h.remove(b,1)}function N(a,b,c){if(a){b=b?"nextSibling":"previousSibling";for(a=c?a:a[b];a;a=a[b])if(a.nodeType==1||!I(a))return a}}function O(a){return a&&a.nodeType==1&&a.getAttribute("data-mce-type")=="bookmark"}function P(b,d){function i(a,b){function d(a){var b={};return g(h.getAttribs(a),function(c){var d=c.nodeName.toLowerCase();d.indexOf("_")!==0&&d!=="style"&&(b[d]=h.getAttrib(a,d))}),b}function e(a,b){var d,e;for(e in a)if(a.hasOwnProperty(e)){d=b[e];if(d===c)return r;if(a[e]!=d)return r;delete b[e]}for(e in b)if(b.hasOwnProperty(e))return r;return s}return a.nodeName!=b.nodeName?r:e(d(a),d(b))?e(h.parseStyle(h.getAttrib(a,"style")),h.parseStyle(h.getAttrib(b,"style")))?s:r:r}var e,f;if(b&&d){function j(a,b){for(e=a;e;e=e[b]){if(e.nodeType==3&&e.nodeValue.length!==0)return a;if(e.nodeType==1&&!O(e))return e}return a}b=j(b,"previousSibling"),d=j(d,"nextSibling");if(i(b,d)){for(e=b.nextSibling;e&&e!=d;)f=e,e=e.nextSibling,b.appendChild(f);return h.remove(d),g(a.grep(d.childNodes),function(a){b.appendChild(a)}),b}}return d}function Q(a){return/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(a)}function R(a,c){var d,e=a[c?"startContainer":"endContainer"],f=a[c?"startOffset":"endOffset"];return e.nodeType==1&&(d=e.childNodes.length-1,!c&&f&&f--,e=e.childNodes[f>d?d:f]),e.nodeType===3&&c&&f>=e.nodeValue.length&&(e=(new j(e,b.getBody())).next()||e),e.nodeType===3&&!c&&f==0&&(e=(new j(e,b.getBody())).prev()||e),e}function S(c,d,e){function m(a){var c=h.create("span",{id:f,"data-mce-bogus":!0,style:g?"color:red":""});return a&&c.appendChild(b.getDoc().createTextNode(l)),c}function n(a,b){while(a){if(a.nodeType===3&&a.nodeValue!==l||a.childNodes.length>1)return!1;b&&a.nodeType===1&&b.push(a),a=a.firstChild}return!0}function o(a){while(a){if(a.id===f)return a;a=a.parentNode}}function q(a){var b;if(a){b=new j(a,a);for(a=b.current();a;a=b.next())if(a.nodeType===3)return a}}function r(a,b){var c,d;if(!a){a=o(i.getStart());if(!a)while(a=h.get(f))r(a,!1)}else d=i.getRng(!0),n(a)?(b!==!1&&(d.setStartBefore(a),d.setEndBefore(a)),h.remove(a)):(c=q(a),c.nodeValue.charAt(0)===p&&(c=c.deleteData(0,1)),h.remove(a,1)),i.setRng(d)}function s(){var a,b,c=i.getRng(!0),f=c.startOffset,g=c.startContainer,h=g.nodeValue,j=o(i.getStart());j&&(a=q(j)),h&&f>0&&f<h.length&&/\w/.test(h.charAt(f))&&/\w/.test(h.charAt(f-1))?(b=i.getBookmark(),c.collapse(!0),c=K(c,v(d)),c=k.split(c),x(d,e,c),i.moveToBookmark(b)):(!j||a.nodeValue!==l?(j=m(!0),a=j.firstChild,c.insertNode(j),f=1,x(d,e,j)):x(d,e,j),i.setCursorLocation(a,f))}function t(){var a,b,c,f,g,j=i.getRng(!0),n=[],o=j.startContainer,p=j.startOffset,q=o;if(o.nodeType==3){if(p!=o.nodeValue.length||o.nodeValue===l)b=!0;q=q.parentNode}while(q){if(A(q,d,e)){c=q;break}q.nextSibling&&(b=!0),n.push(q),q=q.parentNode}if(!c)return;if(b)a=i.getBookmark(),j.collapse(!0),j=K(j,v(d),!0),j=k.split(j),y(d,e,j),i.moveToBookmark(a);else{g=m(),q=g;for(f=n.length-1;f>=0;f--)q.appendChild(n[f].cloneNode(!1)),q=q.firstChild;q.appendChild(h.doc.createTextNode(l)),q=q.firstChild,h.insertAfter(g,c),i.setCursorLocation(q,1)}}var f="_mce_caret",g=b.settings.caret_debug,l=a.isGecko?"​":p;self._hasCaretEvents||(b.onBeforeGetContent.addToTop(function(){var a,b=[];if(n(o(i.getStart()),b)){a=b.length;while(a--)h.setAttrib(b[a],"data-mce-bogus","1")}}),a.each("onMouseUp onKeyUp".split(" "),function(a){b[a].addToTop(function(){r()})}),b.onKeyDown.addToTop(function(a,b){var c=b.keyCode;(c==8||c==37||c==39)&&r(o(i.getStart()))}),self._hasCaretEvents=!0),c=="apply"?s():t()}function T(a){var b,c,d,e,f=a.startContainer,g=a.startOffset;f.nodeType==3&&g>=f.nodeValue.length-1&&(f=f.parentNode,g=o(f)+1);if(f.nodeType==1){d=f.childNodes,f=d[Math.min(g,d.length-1)],b=new j(f),g>d.length-1&&b.next();for(c=b.current();c;c=b.next())if(c.nodeType==3&&!I(c)){e=h.create("a",null,p),c.parentNode.insertBefore(e,c),a.setStart(c,0),i.setRng(a),h.remove(e);return}}}var c,d,e,f={},g=a.each,h=b.dom,i=b.selection,j=a.dom.TreeWalker,k=new a.dom.RangeUtils(h),l=b.schema.isValidChild,m=h.isBlock,n=b.settings.forced_root_block,o=h.nodeIndex,p="﻿",q=/^(src|href|style)$/,r=!1,s=!0;d=function(a){var c;return b.dom.getParent(a,function(a){return c=b.dom.getStyle(a,"text-decoration"),c&&c!=="none"}),c},e=function(a){var c;a.nodeType===1&&a.parentNode&&a.parentNode.nodeType===1&&(c=d(a.parentNode),b.dom.getStyle(a,"color")&&c?b.dom.setStyle(a,"text-decoration",c):b.dom.getStyle(a,"textdecoration")===c&&b.dom.setStyle(a,"text-decoration",null))},a.extend(this,{get:v,register:w,apply:x,remove:y,toggle:z,match:B,matchAll:C,matchNode:A,canApply:D})}}(tinymce),tinymce.onAddEditor.add(function(a,b){var c,d,e,f=b.settings;if(f.inline_styles){d=a.explode(f.font_size_legacy_values);function g(b,c){a.each(c,function(a,c){a&&e.setStyle(b,c,a)}),e.rename(b,"span")}c={font:function(a,b){g(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:d[parseInt(b.size)-1]})},u:function(a,b){g(b,{textDecoration:"underline"})},strike:function(a,b){g(b,{textDecoration:"line-through"})}};function h(d,g){e=d.dom,f.convert_fonts_to_spans&&a.each(e.select("font,u,strike",g.node),function(a){c[a.nodeName.toLowerCase()](b.dom,a)})}b.onPreProcess.add(h),b.onSetContent.add(h),b.onInit.add(function(){b.selection.onSetContent.add(h)})}});