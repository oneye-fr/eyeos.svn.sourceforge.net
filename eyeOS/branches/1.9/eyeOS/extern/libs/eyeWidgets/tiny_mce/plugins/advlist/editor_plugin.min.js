(function(){var a=tinymce.each;tinymce.create("tinymce.plugins.AdvListPlugin",{init:function(b){function d(b){var c=[];return a(b.split(/,/),function(a){c.push({title:"advlist."+(a=="default"?"def":a.replace(/-/g,"_")),styles:{listStyleType:a=="default"?"":a}})}),c}var c=this;c.editor=b,c.numlist=b.getParam("advlist_number_styles")||d("default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman"),c.bullist=b.getParam("advlist_bullet_styles")||d("default,circle,disc,square"),tinymce.isIE&&/MSIE [2-7]/.test(navigator.userAgent)&&(c.isIE7=!0)},createControl:function(b,c){var d,e,f=this,g=f.editor;if(b=="numlist"||b=="bullist"){f[b][0].title=="advlist.def"&&(e=f[b][0]);function h(b,c){var d=!0;return a(c.styles,function(a,c){if(g.dom.getStyle(b,c)!=a)return d=!1,!1}),d}function i(){var a=g.dom,c=g.selection,d=a.getParent(c.getNode(),"ol,ul");(!d||d.nodeName==(b=="bullist"?"OL":"UL")||h(d,e))&&g.execCommand(b=="bullist"?"InsertUnorderedList":"InsertOrderedList"),e&&(d=a.getParent(c.getNode(),"ol,ul"),d&&(a.setStyles(d,e.styles),d.removeAttribute("data-mce-style"))),g.focus()}return d=c.createSplitButton(b,{title:"advanced."+b+"_desc","class":"mce_"+b,onclick:function(){i()}}),d.onRenderMenu.add(function(c,d){d.onHideMenu.add(function(){f.bookmark&&(g.selection.moveToBookmark(f.bookmark),f.bookmark=0)}),d.onShowMenu.add(function(){var c,i=g.dom,j=i.getParent(g.selection.getNode(),"ol,ul");if(j||e)c=f[b],a(d.items,function(b){var d=!0;b.setSelected(0),j&&!b.isDisabled()&&(a(c,function(a){if(a.id==b.id&&!h(j,a))return d=!1,!1}),d&&b.setSelected(1))}),j||d.items[e.id].setSelected(1);g.focus(),tinymce.isIE&&(f.bookmark=g.selection.getBookmark(1))}),d.add({id:g.dom.uniqueId(),title:"advlist.types","class":"mceMenuItemTitle",titleItem:!0}).setDisabled(1),a(f[b],function(a){if(f.isIE7&&a.styles.listStyleType=="lower-greek")return;a.id=g.dom.uniqueId(),d.add({id:a.id,title:a.title,onclick:function(){e=a,i()}})})}),d}},getInfo:function(){return{longname:"Advanced lists",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/advlist",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("advlist",tinymce.plugins.AdvListPlugin)})();