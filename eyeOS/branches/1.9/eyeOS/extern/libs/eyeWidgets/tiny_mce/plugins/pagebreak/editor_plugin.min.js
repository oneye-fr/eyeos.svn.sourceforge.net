(function(){tinymce.create("tinymce.plugins.PageBreakPlugin",{init:function(a){var b='<img src="'+a.theme.url+'/img/trans.gif" class="mcePageBreak mceItemNoResize" />',c="mcePageBreak",d=a.getParam("pagebreak_separator","<!-- pagebreak -->"),e=RegExp(d.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(a){return"\\"+a}),"g");a.addCommand("mcePageBreak",function(){a.execCommand("mceInsertContent",0,b)}),a.addButton("pagebreak",{title:"pagebreak.desc",cmd:c}),a.onInit.add(function(){a.theme.onResolveName&&a.theme.onResolveName.add(function(b,d){d.node.nodeName=="IMG"&&a.dom.hasClass(d.node,c)&&(d.name="pagebreak")})}),a.onClick.add(function(a,b){b=b.target,b.nodeName==="IMG"&&a.dom.hasClass(b,c)&&a.selection.select(b)}),a.onNodeChange.add(function(a,b,d){b.setActive("pagebreak",d.nodeName==="IMG"&&a.dom.hasClass(d,c))}),a.onBeforeSetContent.add(function(a,c){c.content=c.content.replace(e,b)}),a.onPostProcess.add(function(a,b){b.get&&(b.content=b.content.replace(/<img[^>]+>/g,function(a){return a.indexOf('class="mcePageBreak')!==-1&&(a=d),a}))})},getInfo:function(){return{longname:"PageBreak",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/pagebreak",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("pagebreak",tinymce.plugins.PageBreakPlugin)})();