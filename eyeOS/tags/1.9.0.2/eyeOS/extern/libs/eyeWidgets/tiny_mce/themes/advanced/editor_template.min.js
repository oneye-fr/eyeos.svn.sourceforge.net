(function(p){var d=p.DOM,q=p.dom.Event,y=p.extend,s=p.each,w=p.util.Cookie,x,v=p.explode;p.ThemeManager.requireLangPack("advanced");p.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],
justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc",
"mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc",
"mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(a,e){var b=this,c,g,f;b.editor=a;b.url=e;b.onResolveName=new p.util.Dispatcher(this);b.settings=c=y({theme_advanced_path:true,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",
theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",
theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",readonly:a.settings.readonly},a.settings);if(!c.font_size_style_values)c.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt";if(p.is(c.theme_advanced_font_sizes,"string")){c.font_size_style_values=p.explode(c.font_size_style_values);c.font_size_classes=p.explode(c.font_size_classes||"");f={};a.settings.theme_advanced_font_sizes=
c.theme_advanced_font_sizes;s(a.getParam("theme_advanced_font_sizes","","hash"),function(j,i){var h;if(i==j&&j>=1&&j<=7){i=j+" ("+b.sizes[j-1]+"pt)";if(a.settings.convert_fonts_to_spans){h=c.font_size_classes[j-1];j=c.font_size_style_values[j-1]||b.sizes[j-1]+"pt"}}if(/^\s*\./.test(j))h=j.replace(/\./g,"");f[i]=h?{"class":h}:{fontSize:j}});c.theme_advanced_font_sizes=f}if((g=c.theme_advanced_path_location)&&g!="none")c.theme_advanced_statusbar_location=c.theme_advanced_path_location;if(c.theme_advanced_statusbar_location==
"none")c.theme_advanced_statusbar_location=0;a.onInit.add(function(){a.onNodeChange.add(b._nodeChanged,b);a.settings.content_css!==false&&a.dom.loadCSS(a.baseURI.toAbsolute("themes/advanced/skins/"+a.settings.skin+"/content.css"))});a.onSetProgressState.add(function(j,i,h){var l,m=j.id,o;if(i)b.progressTimer=setTimeout(function(){l=j.getContainer();l=l.insertBefore(d.create("DIV",{style:"position:relative"}),l.firstChild);o=d.get(j.id+"_tbl");d.add(l,"div",{id:m+"_blocker","class":"mceBlocker",style:{width:o.clientWidth+
2,height:o.clientHeight+2}});d.add(l,"div",{id:m+"_progress","class":"mceProgress",style:{left:o.clientWidth/2,top:o.clientHeight/2}})},h||0);else{d.remove(m+"_blocker");d.remove(m+"_progress");clearTimeout(b.progressTimer)}});d.loadCSS(c.editor_css?a.documentBaseURI.toAbsolute(c.editor_css):e+"/skins/"+a.settings.skin+"/ui.css");c.skin_variant&&d.loadCSS(e+"/skins/"+a.settings.skin+"/ui_"+c.skin_variant+".css")},createControl:function(a,e){var b;if(b=e.createControl(a))return b;switch(a){case "styleselect":return this._createStyleSelect();
case "formatselect":return this._createBlockFormats();case "fontselect":return this._createFontSelect();case "fontsizeselect":return this._createFontSizeSelect();case "forecolor":return this._createForeColorMenu();case "backcolor":return this._createBackColorMenu();case "zoomselect":return this._createZoomSelect()}if(b=this.controls[a])return e.createButton(a,{title:"advanced."+b[0],cmd:b[1],ui:b[2],value:b[3]})},execCommand:function(a,e,b){if(a=this["_"+a]){a.call(this,e,b);return true}return false},
_importClasses:function(){var a=this.editor,e=a.controlManager.get("styleselect");e.getLength()==0&&s(a.dom.getClasses(),function(b){e.add(b["class"],b["class"])})},_createStyleSelect:function(){var a=this,e=a.editor,b=e.controlManager.createListBox("styleselect",{title:"advanced.style_select",onselect:function(c){if(b.selectedValue===c){e.execCommand("mceSetStyleInfo",0,{command:"removeformat"});b.select();return false}else e.execCommand("mceSetCSSClass",0,c)}});if(b){s(e.getParam("theme_advanced_styles",
"","hash"),function(c,g){c&&b.add(a.editor.translate(g),c)});b.onPostRender.add(function(c,g){if(b.NativeListBox)q.add(g.id,"focus",a._importClasses,a);else{q.add(g.id+"_text","focus",a._importClasses,a);q.add(g.id+"_text","mousedown",a._importClasses,a);q.add(g.id+"_open","focus",a._importClasses,a);q.add(g.id+"_open","mousedown",a._importClasses,a)}})}return b},_createFontSelect:function(){var a,e=this,b=e.editor;(a=b.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",cmd:"FontName"}))&&
s(b.getParam("theme_advanced_fonts",e.settings.theme_advanced_fonts,"hash"),function(c,g){a.add(b.translate(g),c,{style:c.indexOf("dings")==-1?"font-family:"+c:""})});return a},_createFontSizeSelect:function(){var a=this,e=a.editor,b,c=0,g=[];(b=e.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(f){if(f.fontSize)e.execCommand("FontSize",false,f.fontSize);else{s(a.settings.theme_advanced_font_sizes,function(j){j["class"]&&g.push(j["class"])});e.editorCommands._applyInlineStyle("span",
{"class":f["class"]},{check_classes:g})}}}))&&s(a.settings.theme_advanced_font_sizes,function(f,j){var i=f.fontSize;if(i>=1&&i<=7)i=a.sizes[parseInt(i)-1]+"pt";b.add(j,f,{style:"font-size:"+i,"class":"mceFontSize"+c++ +(" "+(f["class"]||""))})});return b},_createBlockFormats:function(){var a,e={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",
code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},b=this;(a=b.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"}))&&s(b.editor.getParam("theme_advanced_blockformats",b.settings.theme_advanced_blockformats,"hash"),function(c,g){a.add(b.editor.translate(g!=c?g:e[c]),c,{"class":"mce_formatPreview mce_"+c})});return a},_createZoomSelect:function(){var a;if(a=this.editor.controlManager.createListBox("zoomselect",{title:"zoom",cmd:"SelectZoom"})){a.add("50%",
"50",{style:"font-size:8px;"});a.add("75%","75",{style:"font-size:9px;"});a.add("100%","100",{style:"font-size:10px;"});a.add("125%","125",{style:"font-size:11px;"});a.add("150%","150",{style:"font-size:12px;"});a.add("175%","175",{style:"font-size:13px;"});a.add("200%","200",{style:"font-size:14px;"})}return a},_createForeColorMenu:function(){var a,e=this,b=e.settings,c={},g;if(b.theme_advanced_more_colors)c.more_colors_func=function(){e._mceColorPicker(0,{color:a.value,func:function(f){a.setColor(f)}})};
if(g=b.theme_advanced_text_colors)c.colors=g;if(b.theme_advanced_default_foreground_color)c.default_color=b.theme_advanced_default_foreground_color;c.title="advanced.forecolor_desc";c.cmd="ForeColor";c.scope=this;return a=e.editor.controlManager.createColorSplitButton("forecolor",c)},_createBackColorMenu:function(){var a,e=this,b=e.settings,c={},g;if(b.theme_advanced_more_colors)c.more_colors_func=function(){e._mceColorPicker(0,{color:a.value,func:function(f){a.setColor(f)}})};if(g=b.theme_advanced_background_colors)c.colors=
g;if(b.theme_advanced_default_background_color)c.default_color=b.theme_advanced_default_background_color;c.title="advanced.backcolor_desc";c.cmd="HiliteColor";c.scope=this;return a=e.editor.controlManager.createColorSplitButton("backcolor",c)},renderUI:function(a){var e,b,c,g=this,f=g.editor,j=g.settings,i,h,l;e=h=d.create("span",{id:f.id+"_parent","class":"mceEditor "+f.settings.skin+"Skin"+(j.skin_variant?" "+f.settings.skin+"Skin"+g._ufirst(j.skin_variant):"")});d.boxModel||(e=d.add(e,"div",{"class":"mceOldBoxModel"}));
e=i=d.add(e,"table",{id:f.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});e=c=d.add(e,"tbody");switch((j.theme_advanced_layout_manager||"").toLowerCase()){case "rowlayout":b=g._rowLayout(j,c,a);break;case "customlayout":b=f.execCallback("theme_advanced_custom_layout",j,c,a,h);break;default:b=g._simpleLayout(j,c,a,h)}e=a.targetNode;l=d.stdMode?i.getElementsByTagName("tr"):i.rows;d.addClass(l[0],"mceFirst");d.addClass(l[l.length-1],"mceLast");s(d.select("tr",c),function(m){d.addClass(m.firstChild,
"mceFirst");d.addClass(m.childNodes[m.childNodes.length-1],"mceLast")});d.get(j.theme_advanced_toolbar_container)?d.get(j.theme_advanced_toolbar_container).appendChild(h):d.insertAfter(h,e);q.add(f.id+"_path_row","click",function(m){m=m.target;if(m.nodeName=="A"){g._sel(m.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return q.cancel(m)}});f.getParam("accessibility_focus")||q.add(d.add(h,"a",{href:"#"},"<!-- IE --\>"),"focus",function(){tinyMCE.get(f.id).focus()});if(j.theme_advanced_toolbar_location==
"external")a.deltaHeight=0;g.deltaHeight=a.deltaHeight;a.targetNode=null;return{iframeContainer:b,editorContainer:f.id+"_parent",sizeContainer:i,deltaHeight:a.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:p.majorVersion+"."+p.minorVersion}},resizeBy:function(a,e){var b=d.get(this.editor.id+"_tbl");this.resizeTo(b.clientWidth+a,b.clientHeight+e)},resizeTo:function(a,e){var b=this.editor,c=b.settings,
g=d.get(b.id+"_tbl");b=d.get(b.id+"_ifr");a=Math.max(c.theme_advanced_resizing_min_width||100,a);e=Math.max(c.theme_advanced_resizing_min_height||100,e);a=Math.min(c.theme_advanced_resizing_max_width||65535,a);e=Math.min(c.theme_advanced_resizing_max_height||65535,e);d.setStyle(b,"height",e-(g.clientHeight-b.clientHeight));d.setStyles(g,{width:a,height:e})},destroy:function(){var a=this.editor.id;q.clear(a+"_resize");q.clear(a+"_path_row");q.clear(a+"_external_close")},_simpleLayout:function(a,e,
b,c){var g=this,f=g.editor,j=a.theme_advanced_toolbar_location,i=a.theme_advanced_statusbar_location,h,l,m;if(a.readonly){h=d.add(e,"tr");return h=l=d.add(h,"td",{"class":"mceIframeContainer"})}j=="top"&&g._addToolbars(e,b);if(j=="external"){h=m=d.create("div",{style:"position:relative"});h=d.add(h,"div",{id:f.id+"_external","class":"mceExternalToolbar"});d.add(h,"a",{id:f.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});h=d.add(h,"table",{id:f.id+"_tblext",cellSpacing:0,cellPadding:0});
h=d.add(h,"tbody");c.firstChild.className=="mceOldBoxModel"?c.firstChild.appendChild(m):c.insertBefore(m,c.firstChild);g._addToolbars(h,b);f.onMouseUp.add(function(){var o=d.get(f.id+"_external");d.show(o);d.hide(x);var t=q.add(f.id+"_external_close","click",function(){d.hide(f.id+"_external");q.remove(f.id+"_external_close","click",t)});d.show(o);d.setStyle(o,"top",0-d.getRect(f.id+"_tblext").h-1);d.hide(o);d.show(o);o.style.filter="";x=f.id+"_external";o=null})}i=="top"&&g._addStatusBar(e,b);if(!a.theme_advanced_toolbar_container){h=
d.add(e,"tr");h=l=d.add(h,"td",{"class":"mceIframeContainer"})}j=="bottom"&&g._addToolbars(e,b);i=="bottom"&&g._addStatusBar(e,b);return l},_rowLayout:function(a,e,b){var c=this,g,f,j=c.editor.controlManager,i,h,l,m;g=a.theme_advanced_containers_default_class||"";f=a.theme_advanced_containers_default_align||"center";s(v(a.theme_advanced_containers||""),function(o,t){var k=a["theme_advanced_container_"+o]||"";switch(k.toLowerCase()){case "mceeditor":i=d.add(e,"tr");i=h=d.add(i,"td",{"class":"mceIframeContainer"});
break;case "mceelementpath":c._addStatusBar(e,b);break;default:m=(a["theme_advanced_container_"+o+"_align"]||f).toLowerCase();m="mce"+c._ufirst(m);i=d.add(d.add(e,"tr"),"td",{"class":"mceToolbar "+(a["theme_advanced_container_"+o+"_class"]||g)+" "+m||f});l=j.createToolbar("toolbar"+t);c._addControls(k,l);d.setHTML(i,l.renderHTML());b.deltaHeight-=a.theme_advanced_row_height}});return h},_addControls:function(a,e){var b=this,c=b.settings,g,f=b.editor.controlManager;if(c.theme_advanced_disable&&!b._disabled){g=
{};s(v(c.theme_advanced_disable),function(j){g[j]=1});b._disabled=g}else g=b._disabled;s(v(a),function(j){if(!(g&&g[j]))if(j=="tablecontrols")s(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(i){(i=b.createControl(i,f))&&e.add(i)});else(j=b.createControl(j,f))&&e.add(j)})},_addToolbars:function(a,e){var b=this,c,g=b.editor,f=b.settings,j,i=g.controlManager,h,l=[];c=f.theme_advanced_toolbar_align.toLowerCase();
c="mce"+b._ufirst(c);h=d.add(d.add(a,"tr"),"td",{"class":"mceToolbar "+c});g.getParam("accessibility_focus")||l.push(d.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+g.id+"').focus();"},"<!-- IE --\>"));l.push(d.createHTML("a",{href:"#",accesskey:"q",title:g.getLang("advanced.toolbar_focus")},"<!-- IE --\>"));for(a=1;j=f["theme_advanced_buttons"+a];a++){c=i.createToolbar("toolbar"+a,{"class":"mceToolbarRow"+a});if(f["theme_advanced_buttons"+a+"_add"])j+=","+f["theme_advanced_buttons"+a+"_add"];
if(f["theme_advanced_buttons"+a+"_add_before"])j=f["theme_advanced_buttons"+a+"_add_before"]+","+j;b._addControls(j,c);l.push(c.renderHTML());e.deltaHeight-=f.theme_advanced_row_height}l.push(d.createHTML("a",{href:"#",accesskey:"z",title:g.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+g.id+"').focus();"},"<!-- IE --\>"));d.setHTML(h,l.join(""))},_addStatusBar:function(a,e){var b=this,c=b.editor,g=b.settings,f,j,i,h;a=d.add(a,"tr");a=h=d.add(a,"td",{"class":"mceStatusbar"});
a=d.add(a,"div",{id:c.id+"_path_row"},g.theme_advanced_path?c.translate("advanced.path")+": ":"&#160;");d.add(a,"a",{href:"#",accesskey:"x"});if(g.theme_advanced_resizing){d.add(h,"a",{id:c.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});g.theme_advanced_resizing_use_cookie&&c.onPostRender.add(function(){var l=w.getHash("TinyMCE_"+c.id+"_size"),m=d.get(c.id+"_tbl");if(l){if(g.theme_advanced_resize_horizontal)m.style.width=Math.max(10,l.cw)+"px";m.style.height=Math.max(10,
l.ch)+"px";d.get(c.id+"_ifr").style.height=Math.max(10,parseInt(l.ch)+b.deltaHeight)+"px"}});c.onPostRender.add(function(){q.add(c.id+"_resize","mousedown",function(l){var m,o,t,k;m=d.get(c.id+"_tbl");t=m.clientWidth;k=m.clientHeight;miw=g.theme_advanced_resizing_min_width||100;mih=g.theme_advanced_resizing_min_height||100;maw=g.theme_advanced_resizing_max_width||65535;mah=g.theme_advanced_resizing_max_height||65535;o=d.add(d.get(c.id+"_parent"),"div",{"class":"mcePlaceHolder"});d.setStyles(o,{width:t,
height:k});d.hide(m);d.show(o);f={x:l.screenX,y:l.screenY,w:t,h:k,dx:null,dy:null};j=q.add(d.doc,"mousemove",function(n){var r,u;f.dx=n.screenX-f.x;f.dy=n.screenY-f.y;r=Math.max(miw,f.w+f.dx);u=Math.max(mih,f.h+f.dy);r=Math.min(maw,r);u=Math.min(mah,u);if(g.theme_advanced_resize_horizontal)o.style.width=r+"px";o.style.height=u+"px";return q.cancel(n)});i=q.add(d.doc,"mouseup",function(){var n;q.remove(d.doc,"mousemove",j);q.remove(d.doc,"mouseup",i);m.style.display="";d.remove(o);if(f.dx!==null){n=
d.get(c.id+"_ifr");if(g.theme_advanced_resize_horizontal)m.style.width=Math.max(10,f.w+f.dx)+"px";m.style.height=Math.max(10,f.h+f.dy)+"px";n.style.height=Math.max(10,n.clientHeight+f.dy)+"px";g.theme_advanced_resizing_use_cookie&&w.setHash("TinyMCE_"+c.id+"_size",{cw:f.w+f.dx,ch:f.h+f.dy})}});return q.cancel(l)})})}e.deltaHeight-=21;a=a=null},_nodeChanged:function(a,e,b,c){var g=this,f,j=0,i,h,l=g.settings,m,o,t;if(!l.readonly){p.each(g.stateControls,function(k){e.setActive(k,a.queryCommandState(g.controls[k][1]))});
e.setActive("visualaid",a.hasVisual);e.setDisabled("undo",!a.undoManager.hasUndo()&&!a.typing);e.setDisabled("redo",!a.undoManager.hasRedo());e.setDisabled("outdent",!a.queryCommandState("Outdent"));f=d.getParent(b,"A");if(h=e.get("link"))if(!f||!f.name){h.setDisabled(!f&&c);h.setActive(!!f)}if(h=e.get("unlink")){h.setDisabled(!f&&c);h.setActive(!!f&&!f.name)}if(h=e.get("anchor")){h.setActive(!!f&&f.name);if(p.isWebKit){f=d.getParent(b,"IMG");h.setActive(!!f&&d.getAttrib(f,"mce_name")=="a")}}f=d.getParent(b,
"IMG");if(h=e.get("image"))h.setActive(!!f&&b.className.indexOf("mceItem")==-1);if(h=e.get("styleselect"))if(b.className){g._importClasses();h.select(b.className)}else h.select();if(h=e.get("formatselect"))(f=d.getParent(b,d.isBlock))&&h.select(f.nodeName.toLowerCase());if(a.settings.convert_fonts_to_spans){a.dom.getParent(b,function(k){if(k.nodeName==="SPAN"){if(!m&&k.className)m=k.className;if(!o&&k.style.fontSize)o=k.style.fontSize;if(!t&&k.style.fontFamily)t=k.style.fontFamily.replace(/[\"\']+/g,
"").replace(/^([^,]+).*/,"$1").toLowerCase()}return false});if(h=e.get("fontselect"))h.select(function(k){return k.replace(/^([^,]+).*/,"$1").toLowerCase()==t});if(h=e.get("fontsizeselect"))h.select(function(k){if(k.fontSize&&k.fontSize===o)return true;if(k["class"]&&k["class"]===m)return true})}else{if(h=e.get("fontselect"))h.select(a.queryCommandValue("FontName"));if(h=e.get("fontsizeselect")){i=a.queryCommandValue("FontSize");h.select(function(k){return k.fontSize==i})}}if(l.theme_advanced_path&&
l.theme_advanced_statusbar_location){f=d.get(a.id+"_path")||d.add(a.id+"_path_row","span",{id:a.id+"_path"});d.setHTML(f,"");a.dom.getParent(b,function(k){var n=k.nodeName.toLowerCase(),r="";if(!(k.nodeType!=1||k.nodeName==="BR"||d.hasClass(k,"mceItemHidden")||d.hasClass(k,"mceItemRemoved"))){if(i=d.getAttrib(k,"mce_name"))n=i;if(p.isIE&&k.scopeName!=="HTML")n=k.scopeName+":"+n;n=n.replace(/mce\:/g,"");switch(n){case "b":n="strong";break;case "i":n="em";break;case "img":if(i=d.getAttrib(k,"src"))r+=
"src: "+i+" ";break;case "a":if(i=d.getAttrib(k,"name")){r+="name: "+i+" ";n+="#"+i}if(i=d.getAttrib(k,"href"))r+="href: "+i+" ";break;case "font":if(l.convert_fonts_to_spans)n="span";if(i=d.getAttrib(k,"face"))r+="font: "+i+" ";if(i=d.getAttrib(k,"size"))r+="size: "+i+" ";if(i=d.getAttrib(k,"color"))r+="color: "+i+" ";break;case "span":if(i=d.getAttrib(k,"style"))r+="style: "+i+" ";break}if(i=d.getAttrib(k,"id"))r+="id: "+i+" ";if(i=k.className)if((i=i.replace(/(webkit-[\w\-]+|Apple-[\w\-]+|mceItem\w+|mceVisualAid)/g,
""))&&i.indexOf("mceItem")==-1){r+="class: "+i+" ";if(d.isBlock(k)||n=="img"||n=="span")n+="."+i}n=n.replace(/(html:)/g,"");n={name:n,node:k,title:r};g.onResolveName.dispatch(g,n);r=n.title;n=n.name;k=d.create("a",{href:"javascript:;",onmousedown:"return false;",title:r,"class":"mcePath_"+j++},n);if(f.hasChildNodes()){f.insertBefore(d.doc.createTextNode(" \u00bb "),f.firstChild);f.insertBefore(k,f.firstChild)}else f.appendChild(k)}},a.getBody())}}},_sel:function(a){this.editor.execCommand("mceSelectNodeDepth",
false,a)},_mceInsertAnchor:function(){var a=this.editor;a.windowManager.open({url:p.baseURL+"/themes/advanced/anchor.htm",width:320+parseInt(a.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(a.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var a=this.editor;a.windowManager.open({url:p.baseURL+"/themes/advanced/charmap.htm",width:550+parseInt(a.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(a.getLang("advanced.charmap_delta_height",
0)),inline:true},{theme_url:this.url})},_mceHelp:function(){this.editor.windowManager.open({url:p.baseURL+"/themes/advanced/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(a,e){a=this.editor;e=e||{};a.windowManager.open({url:p.baseURL+"/themes/advanced/color_picker.htm",width:375+parseInt(a.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(a.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:e.color,
func:e.func,theme_url:this.url})},_mceCodeEditor:function(){var a=this.editor;a.windowManager.open({url:p.baseURL+"/themes/advanced/source_editor.htm",width:parseInt(a.getParam("theme_advanced_source_editor_width",720)),height:parseInt(a.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceImage:function(){var a=this.editor;a.dom.getAttrib(a.selection.getNode(),"class").indexOf("mceItem")==-1&&a.windowManager.open({url:p.baseURL+
"/themes/advanced/image.htm",width:355+parseInt(a.getLang("advanced.image_delta_width",0)),height:275+parseInt(a.getLang("advanced.image_delta_height",0)),inline:true},{theme_url:this.url})},_mceLink:function(){var a=this.editor;a.windowManager.open({url:p.baseURL+"/themes/advanced/link.htm",width:310+parseInt(a.getLang("advanced.link_delta_width",0)),height:200+parseInt(a.getLang("advanced.link_delta_height",0)),inline:true},{theme_url:this.url})},_mceNewDocument:function(){var a=this.editor;a.windowManager.confirm("advanced.newdocument",
function(e){if(e){sendMsg(a.checknum,"New","");a.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var a=this;this._mceColorPicker(0,{color:a.fgColor,func:function(e){a.fgColor=e;a.editor.execCommand("ForeColor",false,e)}})},_mceBackColor:function(){var a=this;this._mceColorPicker(0,{color:a.bgColor,func:function(e){a.bgColor=e;a.editor.execCommand("HiliteColor",false,e)}})},_ufirst:function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}});p.ThemeManager.add("advanced",
p.themes.AdvancedTheme)})(tinymce);
