function smoothScale(l,h,m){var k=document.getElementById(h),p=xWidth(k);if(l<m)if(p>l){p-=50;if(p<l)p=l;k.style.width=p+"px";setTimeout("smoothScale("+l+",'"+h+"',"+m+");",100)}else enableShadow(h);else if(p<l){p+=50;if(p>l)p=l;k.style.width=p+"px";setTimeout("smoothScale("+l+",'"+h+"',"+m+");",100)}else enableShadow(h)}
function disableEdShadow(l){document.getElementById(l+"_shadowleft").parentNode.removeChild(document.getElementById(l+"_shadowleft"));document.getElementById(l+"_shadowright").parentNode.removeChild(document.getElementById(l+"_shadowright"));document.getElementById(l+"_shadowleftcorner").parentNode.removeChild(document.getElementById(l+"_shadowleftcorner"));document.getElementById(l+"_shadowrightcorner").parentNode.removeChild(document.getElementById(l+"_shadowrightcorner"));document.getElementById(l+
"_shadowtop").parentNode.removeChild(document.getElementById(l+"_shadowtop"))}
function enableShadow(l){if(!document.getElementById(l+"_shadowleft")){var h=document.createElement("div"),m=document.getElementById(l).parentNode.parentNode.parentNode.parentNode,k=document.getElementById(l);h.style.width="8px";h.style.backgroundImage="url(index.php/extern/externVersion/1/externPath/libs/eyeWidgets/tiny_mce/themes/advanced/img/left_sh.png)";h.style.height=xHeight(k)-6+"px";h.style.top="109px";h.style.position="absolute";h.setAttribute("id",l+"_shadowleft");var p=xWidth(k.parentNode);
p-=xWidth(k);p/=2;h.style.left=p-8+"px";m.appendChild(h);h=document.createElement("div");h.style.width="14px";h.style.height="14px";h.setAttribute("id",l+"_shadowleftcorner");h.style.backgroundImage="url(index.php/extern/externVersion/1/externPath/libs/eyeWidgets/tiny_mce/themes/advanced/img/cornerleft_sh.png)";h.style.position="absolute";h.style.top="95px";h.style.left=p-8+"px";m.appendChild(h);h=document.createElement("div");h.style.width="8px";h.style.backgroundImage="url(index.php/extern/externVersion/1/externPath/libs/eyeWidgets/tiny_mce/themes/advanced/img/right_sh.png)";
h.style.height=xHeight(k)-6+"px";h.style.top="109px";h.style.position="absolute";h.setAttribute("id",l+"_shadowright");p=xWidth(k.parentNode);p-=xWidth(k);p/=2;h.style.left=p+xWidth(k)+"px";m.appendChild(h);h=document.createElement("div");h.style.width="14px";h.style.height="14px";h.style.backgroundImage="url(index.php/extern/externVersion/1/externPath/libs/eyeWidgets/tiny_mce/themes/advanced/img/cornerright_sh.png)";h.style.position="absolute";h.setAttribute("id",l+"_shadowrightcorner");h.style.top=
"95px";h.style.left=p+xWidth(k)-6+"px";m.appendChild(h);h=document.createElement("div");h.style.width=xWidth(k)-12+"px";h.style.left=p+6+"px";h.style.top="95px";h.style.height="8px";h.style.position="absolute";h.setAttribute("id",l+"_shadowtop");h.style.backgroundImage="url(index.php/extern/externVersion/1/externPath/libs/eyeWidgets/tiny_mce/themes/advanced/img/top_sh.png)";m.appendChild(h)}}function disableShadow(l){}
var tinymce={majorVersion:"3",minorVersion:"2.7",releaseDate:"2009-09-22",_init:function(){function l(d){if(d.src&&/tiny_mce(|_gzip|_jquery|_prototype)(_dev|_src)?.js/.test(d.src)){if(/_(src|dev)\.js/g.test(d.src))h.suffix="_src";if((b=d.src.indexOf("?"))!=-1)h.query=d.src.substring(b+1);h.baseURL=d.src.substring(0,d.src.lastIndexOf("/"));if(a&&h.baseURL.indexOf("://")==-1&&h.baseURL.indexOf("/")!==0)h.baseURL=a+h.baseURL;return h.baseURL}return null}var h=this,m=document,k=window,p=navigator,c=p.userAgent,
a,b;h.isOpera=k.opera&&opera.buildNumber;h.isWebKit=/WebKit/.test(c);h.isIE=!h.isWebKit&&!h.isOpera&&/MSIE/gi.test(c)&&/Explorer/gi.test(p.appName);h.isIE6=h.isIE&&/MSIE [56]/.test(c);h.isGecko=!h.isWebKit&&/Gecko/.test(c);h.isMac=c.indexOf("Mac")!=-1;h.isAir=/adobeair/i.test(c);if(k.tinyMCEPreInit){h.suffix=tinyMCEPreInit.suffix;h.baseURL=tinyMCEPreInit.base;h.query=tinyMCEPreInit.query}else{h.suffix="";p=m.getElementsByTagName("base");for(k=0;k<p.length;k++)if(c=p[k].href){if(/^https?:\/\/[^\/]+$/.test(c))c+=
"/";a=c?c.match(/.*\//)[0]:""}p=m.getElementsByTagName("script");for(k=0;k<p.length;k++)if(l(p[k]))return;if(m=m.getElementsByTagName("head")[0]){p=m.getElementsByTagName("script");for(k=0;k<p.length;k++)if(l(p[k]))return}}},is:function(l,h){var m=typeof l;if(!h)return m!="undefined";if(h=="array"&&l.hasOwnProperty&&l instanceof Array)return true;return m==h},each:function(l,h,m){var k,p;if(!l)return 0;m=m||l;if(typeof l.length!="undefined"){k=0;for(p=l.length;k<p;k++)if(h.call(m,l[k],k,l)===false)return 0}else for(k in l)if(l.hasOwnProperty(k))if(h.call(m,
l[k],k,l)===false)return 0;return 1},map:function(l,h){var m=[];tinymce.each(l,function(k){m.push(h(k))});return m},grep:function(l,h){var m=[];tinymce.each(l,function(k){if(!h||h(k))m.push(k)});return m},inArray:function(l,h){var m,k;if(l){m=0;for(k=l.length;m<k;m++)if(l[m]===h)return m}return-1},extend:function(l,h){var m,k=arguments;for(m=1;m<k.length;m++){h=k[m];tinymce.each(h,function(p,c){if(typeof p!=="undefined")l[c]=p})}return l},trim:function(l){return(l?""+l:"").replace(/^\s*|\s*$/g,"")},
create:function(l,h){var m=this,k,p,c,a,b,d=0;l=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(l);c=l[3].match(/(^|\.)(\w+)$/i)[2];p=m.createNS(l[3].replace(/\.\w+$/,""));if(!p[c])if(l[2]=="static"){p[c]=h;this.onCreate&&this.onCreate(l[2],l[3],p[c])}else{if(!h[c]){h[c]=function(){};d=1}p[c]=h[c];m.extend(p[c].prototype,h);if(l[5]){k=m.resolve(l[5]).prototype;a=l[5].match(/\.(\w+)$/i)[1];b=p[c];p[c]=d?function(){return k[a].apply(this,arguments)}:function(){this.parent=k[a];return b.apply(this,arguments)};
p[c].prototype[c]=p[c];m.each(k,function(e,g){p[c].prototype[g]=k[g]});m.each(h,function(e,g){if(k[g])p[c].prototype[g]=function(){this.parent=k[g];return e.apply(this,arguments)};else if(g!=c)p[c].prototype[g]=e})}m.each(h["static"],function(e,g){p[c][g]=e});this.onCreate&&this.onCreate(l[2],l[3],p[c].prototype)}},walk:function(l,h,m,k){k=k||this;if(l){if(m)l=l[m];tinymce.each(l,function(p,c){if(h.call(k,p,c,m)===false)return false;tinymce.walk(p,h,m,k)})}},createNS:function(l,h){var m,k;h=h||window;
l=l.split(".");for(m=0;m<l.length;m++){k=l[m];h[k]||(h[k]={});h=h[k]}return h},resolve:function(l,h){var m,k;h=h||window;l=l.split(".");m=0;for(k=l.length;m<k;m++){h=h[l[m]];if(!h)break}return h},addUnload:function(l,h){var m=this,k=window;l={func:l,scope:h||this};if(m.unloads)m.unloads.push(l);else{function p(){var a=m.unloads,b,d;if(a){for(d in a)(b=a[d])&&b.func&&b.func.call(b.scope,1);if(k.detachEvent){k.detachEvent("onbeforeunload",c);k.detachEvent("onunload",p)}else k.removeEventListener&&k.removeEventListener("unload",
p,false);m.unloads=k=p=0;window.CollectGarbage&&window.CollectGarbage()}}function c(){var a=document;if(a.readyState=="interactive"){function b(){a.detachEvent("onstop",b);p&&p();a=0}a&&a.attachEvent("onstop",b);window.setTimeout(function(){a&&a.detachEvent("onstop",b)},0)}}if(k.attachEvent){k.attachEvent("onunload",p);k.attachEvent("onbeforeunload",c)}else k.addEventListener&&k.addEventListener("unload",p,false);m.unloads=[l]}return l},removeUnload:function(l){var h=this.unloads,m=null;tinymce.each(h,
function(k,p){if(k&&k.func==l){h.splice(p,1);m=l;return false}});return m},explode:function(l,h){return l?tinymce.map(l.split(h||","),tinymce.trim):l},_addVer:function(l){var h;if(!this.query)return l;h=(l.indexOf("?")==-1?"?":"&")+this.query;if(l.indexOf("#")==-1)return l+h;return l.replace("#",h+"#")}};window.tinymce=tinymce;tinymce._init();
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(l){this.scope=l||this;this.listeners=[]},add:function(l,h){this.listeners.push({cb:l,scope:h||this.scope});return l},addToTop:function(l,h){this.listeners.unshift({cb:l,scope:h||this.scope});return l},remove:function(l){var h=this.listeners,m=null;tinymce.each(h,function(k,p){if(l==k.cb){m=l;h.splice(p,1);return false}});return m},dispatch:function(){var l,h=arguments,m,k=this.listeners;for(m=0;m<k.length;m++){l=
k[m];l=l.cb.apply(l.scope,h);if(l===false)break}return l}});
(function(){var l=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(h,m){var k=this;h=tinymce.trim(h);m=k.settings=m||{};if(/^(mailto|tel|news|javascript|about|data):/i.test(h)||/^\s*#/.test(h))k.source=h;else{if(h.indexOf("/")===0&&h.indexOf("//")!==0)h=(m.base_uri?m.base_uri.protocol||"http":"http")+"://mce_host"+h;/^\w*:?\/\//.test(h)||(h=(m.base_uri.protocol||"http")+"://mce_host"+k.toAbsPath(m.base_uri.path,h));h=h.replace(/@@/g,"(mce_at)");h=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(h);
l(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(p,c){if(c=h[c])c=c.replace(/\(mce_at\)/g,"@@");k[p]=c});if(m=m.base_uri){if(!k.protocol)k.protocol=m.protocol;if(!k.userInfo)k.userInfo=m.userInfo;if(!k.port&&k.host=="mce_host")k.port=m.port;if(!k.host||k.host=="mce_host")k.host=m.host;k.source=""}}},setPath:function(h){var m=this;h=/^(.*?)\/?(\w+)?$/.exec(h);m.path=h[0];m.directory=h[1];m.file=h[2];m.source=
"";m.getURI()},toRelative:function(h){var m=this;if(h==="./")return h;h=new tinymce.util.URI(h,{base_uri:m});if(h.host!="mce_host"&&m.host!=h.host&&h.host||m.port!=h.port||m.protocol!=h.protocol)return h.getURI();m=m.toRelPath(m.path,h.path);if(h.query)m+="?"+h.query;if(h.anchor)m+="#"+h.anchor;return m},toAbsolute:function(h){return tinyMCEPreInit.base+"/"+h},toAbsolute_:function(h,m){h=new tinymce.util.URI(h,{base_uri:this});return h.getURI(this.host==h.host&&this.protocol==h.protocol?m:0)},toRelPath:function(h,
m){var k,p=0,c="",a,b;h=h.substring(0,h.lastIndexOf("/"));h=h.split("/");k=m.split("/");if(h.length>=k.length){a=0;for(b=h.length;a<b;a++)if(a>=k.length||h[a]!=k[a]){p=a+1;break}}if(h.length<k.length){a=0;for(b=k.length;a<b;a++)if(a>=h.length||h[a]!=k[a]){p=a+1;break}}if(p==1)return m;a=0;for(b=h.length-(p-1);a<b;a++)c+="../";a=p-1;for(b=k.length;a<b;a++)c+=a!=p-1?"/"+k[a]:k[a];return c},toAbsPath:function(h,m){var k,p=0,c=[],a;a=/\/$/.test(m)?"/":"";h=h.split("/");m=m.split("/");l(h,function(b){b&&
c.push(b)});h=c;k=m.length-1;for(c=[];k>=0;k--)if(!(m[k].length==0||m[k]=="."))if(m[k]=="..")p++;else if(p>0)p--;else c.push(m[k]);k=h.length-p;h=k<=0?c.reverse().join("/"):h.slice(0,k).join("/")+"/"+c.reverse().join("/");if(h.indexOf("/")!==0)h="/"+h;if(a&&h.lastIndexOf("/")!==h.length-1)h+=a;return h},getURI:function(h){var m,k=this;if(!k.source||h){m="";if(!h){if(k.protocol)m+=k.protocol+"://";if(k.userInfo)m+=k.userInfo+"@";if(k.host)m+=k.host;if(k.port)m+=":"+k.port}if(k.path)m+=k.path;if(k.query)m+=
"?"+k.query;if(k.anchor)m+="#"+k.anchor;k.source=m}return k.source}})})();
(function(){var l=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(h){h=this.get(h);var m;h&&l(h.split("&"),function(k){k=k.split("=");m=m||{};m[unescape(k[0])]=unescape(k[1])});return m},setHash:function(h,m,k,p,c,a){var b="";l(m,function(d,e){b+=(!b?"":"&")+escape(e)+"="+escape(d)});this.set(h,b,k,p,c,a)},get:function(h){var m=document.cookie,k=h+"=",p;if(m){p=m.indexOf("; "+k);if(p==-1){p=m.indexOf(k);if(p!=0)return null}else p+=2;h=m.indexOf(";",p);if(h==-1)h=m.length;
return unescape(m.substring(p+k.length,h))}},set:function(h,m,k,p,c,a){document.cookie=h+"="+escape(m)+(k?"; expires="+k.toGMTString():"")+(p?"; path="+escape(p):"")+(c?"; domain="+c:"")+(a?"; secure":"")},remove:function(h,m){var k=new Date;k.setTime(k.getTime()-1E3);this.set(h,"",k,m,k)}})})();
tinymce.create("static tinymce.util.JSON",{serialize:function(l){var h,m,k=tinymce.util.JSON.serialize,p;if(l==null)return"null";p=typeof l;if(p=="string"){m="\u0008b\tt\nn\u000cf\rr\"\"''\\\\";return'"'+l.replace(/([\u0080-\uFFFF\x00-\x1f\"])/g,function(c,a){h=m.indexOf(a);if(h+1)return"\\"+m.charAt(h+1);c=a.charCodeAt().toString(16);return"\\u"+"0000".substring(c.length)+c})+'"'}if(p=="object"){if(l.hasOwnProperty&&l instanceof Array){h=0;for(m="[";h<l.length;h++)m+=(h>0?",":"")+k(l[h]);return m+
"]"}m="{";for(h in l)m+=typeof l[h]!="function"?(m.length>1?',"':'"')+h+'":'+k(l[h]):"";return m+"}"}return""+l},parse:function(l){try{return eval("("+l+")")}catch(h){}}});
tinymce.create("static tinymce.util.XHR",{send:function(l){function h(a){m=0;try{m=new ActiveXObject(a)}catch(b){}return m}var m,k=window,p=0;l.scope=l.scope||this;l.success_scope=l.success_scope||l.scope;l.error_scope=l.error_scope||l.scope;l.async=l.async===false?false:true;l.data=l.data||"";if(m=k.XMLHttpRequest?new XMLHttpRequest:h("Microsoft.XMLHTTP")||h("Msxml2.XMLHTTP")){m.overrideMimeType&&m.overrideMimeType(l.content_type);m.open(l.type||(l.data?"POST":"GET"),l.url,l.async);l.content_type&&
m.setRequestHeader("Content-Type",l.content_type);m.setRequestHeader("X-Requested-With","XMLHttpRequest");m.send(l.data);function c(){if(!l.async||m.readyState==4||p++>1E4){if(l.success&&p<1E4&&m.status==200)l.success.call(l.success_scope,""+m.responseText,m,l);else if(l.error)l.error.call(l.error_scope,p>1E4?"TIMED_OUT":"GENERAL",m,l);m=null}else k.setTimeout(c,10)}if(!l.async)return c();k.setTimeout(c,10)}}});
(function(){var l=tinymce.extend,h=tinymce.util.JSON,m=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(k){this.settings=l({},k);this.count=0},send:function(k){var p=k.error,c=k.success;k=l(this.settings,k);k.success=function(a,b){a=h.parse(a);if(typeof a=="undefined")a={error:"JSON Parse error."};a.error?p.call(k.error_scope||k.scope,a.error,b):c.call(k.success_scope||k.scope,a.result)};k.error=function(a,b){p.call(k.error_scope||k.scope,a,b)};k.data=h.serialize({id:k.id||
"c"+this.count++,method:k.method,params:k.params});k.content_type="application/json";m.send(k)},"static":{sendRPC:function(k){return(new tinymce.util.JSONRequest).send(k)}}})})();
(function(l){var h=l.each,m=l.is,k=l.isWebKit,p=l.isIE;l.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(c,a){var b=this;b.doc=c;b.win=window;b.files={};b.cssFlicker=false;b.counter=0;b.boxModel=
!l.isIE||c.compatMode=="CSS1Compat";b.stdMode=c.documentMode===8;b.settings=l.extend({keep_values:false,hex_colors:1,process_html:1},a);if(l.isIE6)try{c.execCommand("BackgroundImageCache",false,true)}catch(d){b.cssFlicker=true}l.addUnload(b.destroy,b)},getRoot:function(){var c=this,a=c.settings;return a&&c.get(a.root_element)||c.doc.body},getViewPort:function(c){var a;c=!c?this.win:c;a=c.document;a=this.boxModel?a.documentElement:a.body;return{x:c.pageXOffset||a.scrollLeft,y:c.pageYOffset||a.scrollTop,
w:c.innerWidth||a.clientWidth,h:c.innerHeight||a.clientHeight}},getRect:function(c){var a,b=this;c=b.get(c);a=b.getPos(c);c=b.getSize(c);return{x:a.x,y:a.y,w:c.w,h:c.h}},getSize:function(c){var a=this,b;c=a.get(c);b=a.getStyle(c,"width");a=a.getStyle(c,"height");if(b.indexOf("px")===-1)b=0;if(a.indexOf("px")===-1)a=0;return{w:parseInt(b)||c.offsetWidth||c.clientWidth,h:parseInt(a)||c.offsetHeight||c.clientHeight}},getParent:function(c,a,b){return this.getParents(c,a,b,false)},getParents:function(c,
a,b,d){var e=this,g,n=e.settings,o=[];c=e.get(c);d=d===undefined;if(n.strict_root)b=b||e.getRoot();if(m(a,"string")){g=a;a=a==="*"?function(s){return s.nodeType==1}:function(s){return e.is(s,g)}}for(;c;){if(c==b||!c.nodeType||c.nodeType===9)break;if(!a||a(c))if(d)o.push(c);else return c;c=c.parentNode}return d?o:null},get:function(c){var a;if(c&&this.doc&&typeof c=="string"){a=c;if((c=this.doc.getElementById(c))&&c.id!==a)return this.doc.getElementsByName(a)[1]}return c},getNext:function(c,a){return this._findSib(c,
a,"nextSibling")},getPrev:function(c,a){return this._findSib(c,a,"previousSibling")},select:function(c,a){var b=this;return l.dom.Sizzle(c,b.get(a)||b.get(b.settings.root_element)||b.doc,[])},is:function(c,a){return l.dom.Sizzle.matches(a,c.nodeType?[c]:c).length>0},add:function(c,a,b,d,e){var g=this;return this.run(c,function(n){var o;o=m(a,"string")?g.doc.createElement(a):a;g.setAttribs(o,b);if(d)d.nodeType?o.appendChild(d):g.setHTML(o,d);return!e?n.appendChild(o):o})},create:function(c,a,b){return this.add(this.doc.createElement(c),
c,a,b,1)},createHTML:function(c,a,b){var d="",e=this,g;d+="<"+c;for(g in a)if(a.hasOwnProperty(g))d+=" "+g+'="'+e.encode(a[g])+'"';if(l.is(b))return d+">"+b+"</"+c+">";return d+" />"},remove:function(c,a){var b=this;return this.run(c,function(d){var e,g;e=d.parentNode;if(!e)return null;if(a)for(g=d.childNodes.length-1;g>=0;g--)b.insertAfter(d.childNodes[g],d);if(b.fixPsuedoLeaks){e=d.cloneNode(true);a="IELeakGarbageBin";g=b.get(a)||b.add(b.doc.body,"div",{id:a,style:"display:none"});g.appendChild(d);
g.innerHTML="";return e}return e.removeChild(d)})},setStyle:function(c,a,b){var d=this;return d.run(c,function(e){var g;g=e.style;a=a.replace(/-(\D)/g,function(n,o){return o.toUpperCase()});if(d.pixelStyles.test(a)&&(l.is(b,"number")||/^[\-0-9\.]+$/.test(b)))b+="px";switch(a){case "opacity":if(p){g.filter=b===""?"":"alpha(opacity="+b*100+")";if(!c.currentStyle||!c.currentStyle.hasLayout)g.display="inline-block"}g[a]=g["-moz-opacity"]=g["-khtml-opacity"]=b||"";break;case "float":p?(g.styleFloat=b):
(g.cssFloat=b);break;default:g[a]=b||""}d.settings.update_styles&&d.setAttrib(e,"mce_style")})},getStyle:function(c,a,b){c=this.get(c);if(!c)return false;if(this.doc.defaultView&&b){a=a.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(c,null).getPropertyValue(a)}catch(d){return null}}a=a.replace(/-(\D)/g,function(e,g){return g.toUpperCase()});if(a=="float")a=p?"styleFloat":"cssFloat";if(c.currentStyle&&b)return c.currentStyle[a];return c.style[a]},setStyles:function(c,
a){var b=this,d=b.settings,e;e=d.update_styles;d.update_styles=0;h(a,function(g,n){b.setStyle(c,n,g)});d.update_styles=e;d.update_styles&&b.setAttrib(c,d.cssText)},setAttrib:function(c,a,b){var d=this;if(c&&a){if(d.settings.strict)a=a.toLowerCase();return this.run(c,function(e){var g=d.settings;switch(a){case "style":if(!m(b,"string")){h(b,function(n,o){d.setStyle(e,o,n)});return}if(g.keep_values)b&&!d._isRes(b)?e.setAttribute("mce_style",b,2):e.removeAttribute("mce_style",2);e.style.cssText=b;break;
case "class":e.className=b||"";break;case "src":case "href":if(g.keep_values){if(g.url_converter)b=g.url_converter.call(g.url_converter_scope||d,b,a,e);d.setAttrib(e,"mce_"+a,b,2)}break;case "shape":e.setAttribute("mce_style",b);break}m(b)&&b!==null&&b.length!==0?e.setAttribute(a,""+b,2):e.removeAttribute(a,2)})}},setAttribs:function(c,a){var b=this;return this.run(c,function(d){h(a,function(e,g){b.setAttrib(d,g,e)})})},getAttrib:function(c,a,b){var d,e=this;c=e.get(c);if(!c||c.nodeType!==1)return false;
m(b)||(b="");if(/^(src|href|style|coords|shape)$/.test(a))if(d=c.getAttribute("mce_"+a))return d;if(p&&e.props[a])d=(d=c[e.props[a]])&&d.nodeValue?d.nodeValue:d;d||(d=c.getAttribute(a,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(a)){if(c[e.props[a]]===true&&d==="")return a;return d?a:""}if(c.nodeName==="FORM"&&c.getAttributeNode(a))return c.getAttributeNode(a).nodeValue;if(a==="style")if(d=d||c.style.cssText){d=e.serializeStyle(e.parseStyle(d));
e.settings.keep_values&&!e._isRes(d)&&c.setAttribute("mce_style",d)}if(k&&a==="class"&&d)d=d.replace(/(apple|webkit)\-[a-z\-]+/gi,"");if(p)switch(a){case "rowspan":case "colspan":if(d===1)d="";break;case "size":if(d==="+0"||d===20||d===0)d="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":if(d===0)d="";break;case "hspace":if(d===-1)d="";break;case "maxlength":case "tabindex":if(d===32768||d===2147483647||d==="32768")d="";break;case "multiple":case "compact":case "noshade":case "nowrap":if(d===
65535)return a;return b;case "shape":d=d.toLowerCase();break;default:if(a.indexOf("on")===0&&d)d=(""+d).replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1")}return d!==undefined&&d!==null&&d!==""?""+d:b},getPos:function(c,a){var b=this,d=0,e=0,g=b.doc;c=b.get(c);a=a||g.body;if(c){if(p&&!b.stdMode){c=c.getBoundingClientRect();a=b.boxModel?g.documentElement:g.body;d=b.getStyle(b.select("html")[0],"borderWidth");d=(d=="medium"||b.boxModel&&!b.isIE6)&&2||d;c.top+=b.win.self!=b.win.top?2:0;return{x:c.left+
a.scrollLeft-d,y:c.top+a.scrollTop-d}}for(b=c;b&&b!=a&&b.nodeType;){d+=b.offsetLeft||0;e+=b.offsetTop||0;b=b.offsetParent}for(b=c.parentNode;b&&b!=a&&b.nodeType;){d-=b.scrollLeft||0;e-=b.scrollTop||0;b=b.parentNode}}return{x:d,y:e}},parseStyle:function(c){function a(n,o,s){var j,i;if(j=g[n+"-top"+o]){i=g[n+"-right"+o];if(j==i){j=g[n+"-bottom"+o];if(i==j){i=g[n+"-left"+o];if(j==i){g[s]=i;delete g[n+"-top"+o];delete g[n+"-right"+o];delete g[n+"-bottom"+o];delete g[n+"-left"+o]}}}}}function b(n,o,s,
j){var i;if(i=g[o])if(i=g[s])if(i=g[j]){g[n]=g[o]+" "+g[s]+" "+g[j];delete g[o];delete g[s];delete g[j]}}var d=this,e=d.settings,g={};if(!c)return g;c=c.replace(/&(#?[a-z0-9]+);/g,"&$1_MCE_SEMI_");h(c.split(";"),function(n){var o,s=[];if(n){n=n.replace(/_MCE_SEMI_/g,";");n=n.replace(/url\([^\)]+\)/g,function(j){s.push(j);return"url("+s.length+")"});n=n.split(":");o=l.trim(n[1]);o=o.replace(/url\(([^\)]+)\)/g,function(j,i){return s[parseInt(i)-1]});o=o.replace(/rgb\([^\)]+\)/g,function(j){return d.toHex(j)});
if(e.url_converter)o=o.replace(/url\([\'\"]?([^\)\'\"]+)[\'\"]?\)/g,function(j,i){return"url("+e.url_converter.call(e.url_converter_scope||d,d.decode(i),"style",null)+")"});g[l.trim(n[0]).toLowerCase()]=o}});a("border","","border");a("border","-width","border-width");a("border","-color","border-color");a("border","-style","border-style");a("padding","","padding");a("margin","","margin");b("border","border-width","border-style","border-color");if(p)if(g.border=="medium none")g.border="";return g},
serializeStyle:function(c){var a="";h(c,function(b,d){if(d&&b)if(!(l.isGecko&&d.indexOf("-moz-")===0)){switch(d){case "color":case "background-color":b=b.toLowerCase();break}a+=(a?" ":"")+d+": "+b+";"}});return a},loadCSS:function(c){var a=this,b=a.doc,d;c||(c="");d=a.select("head")[0];h(c.split(","),function(e){var g;if(!a.files[e]){a.files[e]=true;g=a.create("link",{rel:"stylesheet",href:l._addVer(e)});if(p&&b.documentMode)g.onload=function(){b.recalc();g.onload=null};d.appendChild(g)}})},addClass:function(c,
a){return this.run(c,function(b){var d;if(!a)return 0;if(this.hasClass(b,a))return b.className;d=this.removeClass(b,a);return b.className=(d!=""?d+" ":"")+a})},removeClass:function(c,a){var b=this,d;return b.run(c,function(e){var g;if(b.hasClass(e,a)){d||(d=new RegExp("(^|\\s+)"+a+"(\\s+|$)","g"));g=e.className.replace(d," ");return e.className=l.trim(g!=" "?g:"")}return e.className})},hasClass:function(c,a){c=this.get(c);if(!c||!a)return false;return(" "+c.className+" ").indexOf(" "+a+" ")!==-1},
show:function(c){return this.setStyle(c,"display","block")},hide:function(c){return this.setStyle(c,"display","none")},isHidden:function(c){c=this.get(c);return!c||c.style.display=="none"||this.getStyle(c,"display")=="none"},uniqueId:function(c){return(!c?"mce_":c)+this.counter++},setHTML:function(c,a){var b=this;return this.run(c,function(d){var e,g,n,o,s;a=b.processHTML(a);if(p){function j(){try{d.innerHTML="<br />"+a;d.removeChild(d.firstChild)}catch(i){for(;d.firstChild;)d.firstChild.removeNode();
e=b.create("div");e.innerHTML="<br />"+a;h(e.childNodes,function(f,q){q&&d.appendChild(f)})}}if(b.settings.fix_ie_paragraphs)a=a.replace(/<p><\/p>|<p([^>]+)><\/p>|<p[^\/+]\/>/gi,'<p$1 mce_keep="true">&nbsp;</p>');j();if(b.settings.fix_ie_paragraphs){n=d.getElementsByTagName("p");g=n.length-1;for(e=0;g>=0;g--){o=n[g];if(!o.hasChildNodes()){if(!o.mce_keep){e=1;break}o.removeAttribute("mce_keep")}}}if(e){a=a.replace(/<p ([^>]+)>|<p>/ig,'<div $1 mce_tmp="1">');a=a.replace(/<\/p>/g,"</div>");j();if(b.settings.fix_ie_paragraphs){n=
d.getElementsByTagName("DIV");for(g=n.length-1;g>=0;g--){o=n[g];if(o.mce_tmp){s=b.doc.createElement("p");o.cloneNode(false).outerHTML.replace(/([a-z0-9\-_]+)=/gi,function(i,f){if(f!=="mce_tmp"){i=o.getAttribute(f);if(!i&&f==="class")i=o.className;s.setAttribute(f,i)}});for(e=0;e<o.childNodes.length;e++)s.appendChild(o.childNodes[e].cloneNode(true));o.swapNode(s)}}}}}else d.innerHTML=a;return a})},processHTML:function(c){var a=this,b=a.settings,d=[];if(!b.process_html)return c;if(l.isGecko){c=c.replace(/<(\/?)strong>|<strong( [^>]+)>/gi,
"<$1b$2>");c=c.replace(/<(\/?)em>|<em( [^>]+)>/gi,"<$1i$2>")}else if(p){c=c.replace(/&apos;/g,"&#39;");c=c.replace(/\s+(disabled|checked|readonly|selected)\s*=\s*[\"\']?(false|0)[\"\']?/gi,"")}c=c.replace(/<a( )([^>]+)\/>|<a\/>/gi,"<a$1$2></a>");if(b.keep_values){if(/<script|noscript|style/i.test(c)){function e(g){g=g.replace(/(<!--\[CDATA\[|\]\]--\>)/g,"\n");g=g.replace(/^[\r\n]*|[\r\n]*$/g,"");g=g.replace(/^\s*(\/\/\s*<!--|\/\/\s*<!\[CDATA\[|<!--|<!\[CDATA\[)[\r\n]*/g,"");return g=g.replace(/\s*(\/\/\s*\]\]>|\/\/\s*--\>|\]\]>|--\>|\]\]--\>)\s*$/g,
"")}c=c.replace(/<script([^>]+|)>([\s\S]*?)<\/script>/gi,function(g,n,o){n||(n=' type="text/javascript"');n=n.replace(/src=\"([^\"]+)\"?/i,function(s,j){if(b.url_converter)j=a.encode(b.url_converter.call(b.url_converter_scope||a,a.decode(j),"src","script"));return'mce_src="'+j+'"'});if(l.trim(o)){d.push(e(o));o="<!--\nMCE_SCRIPT:"+(d.length-1)+"\n// --\>"}return"<mce:script"+n+">"+o+"</mce:script>"});c=c.replace(/<style([^>]+|)>([\s\S]*?)<\/style>/gi,function(g,n,o){if(o){d.push(e(o));o="<!--\nMCE_SCRIPT:"+
(d.length-1)+"\n--\>"}return"<mce:style"+n+">"+o+"</mce:style><style "+n+' mce_bogus="1">'+o+"</style>"});c=c.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(g,n,o){return"<mce:noscript"+n+"><!--"+a.encode(o).replace(/--/g,"&#45;&#45;")+"--\></mce:noscript>"})}c=c.replace(/<!\[CDATA\[([\s\S]+)\]\]>/g,"<!--[CDATA[$1]]--\>");c=c.replace(/<([\w:]+) [^>]*(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)[^>]*>/gi,function(g){function n(o,s,j){if(j===
"false"||j==="0")return"";return" "+s+'="'+s+'"'}g=g.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)=[\"]([^\"]+)[\"]/gi,n);g=g.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)=[\']([^\']+)[\']/gi,n);g=g.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)=([^\s\"\'>]+)/gi,n);return g=g.replace(/ (checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)([\s>])/gi,
' $1="$1"$2')});c=c.replace(/<([\w:]+) [^>]*(src|href|style|shape|coords)[^>]*>/gi,function(g,n){function o(s,j,i){var f=i;if(g.indexOf("mce_"+j)!=-1)return s;if(j=="style"){if(a._isRes(i))return s;f=a.encode(a.serializeStyle(a.parseStyle(f)))}else if(j!="coords"&&j!="shape")if(b.url_converter)f=a.encode(b.url_converter.call(b.url_converter_scope||a,a.decode(i),j,n));return" "+j+'="'+i+'" mce_'+j+'="'+f+'"'}g=g.replace(/ (src|href|style|coords|shape)=[\"]([^\"]+)[\"]/gi,o);g=g.replace(/ (src|href|style|coords|shape)=[\']([^\']+)[\']/gi,
o);return g.replace(/ (src|href|style|coords|shape)=([^\s\"\'>]+)/gi,o)});c=c.replace(/MCE_SCRIPT:([0-9]+)/g,function(g,n){return d[n]})}return c},getOuterHTML:function(c){var a;c=this.get(c);if(!c)return null;if(c.outerHTML!==undefined)return c.outerHTML;a=(c.ownerDocument||this.doc).createElement("body");a.appendChild(c.cloneNode(true));return a.innerHTML},setOuterHTML:function(c,a,b){function d(g,n,o){o=o.createElement("body");o.innerHTML=n;for(n=o.lastChild;n;){e.insertAfter(n.cloneNode(true),
g);n=n.previousSibling}e.remove(g)}var e=this;return this.run(c,function(g){g=e.get(g);if(g.nodeType==1){b=b||g.ownerDocument||e.doc;if(p)try{if(p&&g.nodeType==1)g.outerHTML=a;else d(g,a,b)}catch(n){d(g,a,b)}else d(g,a,b)}})},decode:function(c){var a,b;if(/&[^;]+;/.test(c)){a=this.doc.createElement("div");a.innerHTML=c;a=a.firstChild;b="";if(a){do b+=a.nodeValue;while(a.nextSibling)}return b||c}return c},encode:function(c){return c?(""+c).replace(/[<>&\"]/g,function(a){switch(a){case "&":return"&amp;";
case '"':return"&quot;";case "<":return"&lt;";case ">":return"&gt;"}return a}):c},insertAfter:function(c,a){a=this.get(a);return this.run(c,function(b){var d,e;d=a.parentNode;(e=a.nextSibling)?d.insertBefore(b,e):d.appendChild(b);return b})},isBlock:function(c){if(c.nodeType&&c.nodeType!==1)return false;c=c.nodeName||c;return/^(H[1-6]|HR|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TH|TBODY|TR|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP)$/.test(c)},replace:function(c,
a,b){var d=this;if(m(a,"array"))c=c.cloneNode(true);return d.run(a,function(e){b&&h(e.childNodes,function(g){c.appendChild(g.cloneNode(true))});if(d.fixPsuedoLeaks&&e.nodeType===1){e.parentNode.insertBefore(c,e);d.remove(e);return c}return e.parentNode.replaceChild(c,e)})},findCommonAncestor:function(c,a){for(var b=c,d;b;){for(d=a;d&&b!=d;)d=d.parentNode;if(b==d)break;b=b.parentNode}if(!b&&c.ownerDocument)return c.ownerDocument.documentElement;return b},toHex:function(c){function a(d){d=parseInt(d).toString(16);
return d.length>1?d:"0"+d}var b=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(c);if(b)return c="#"+a(b[1])+a(b[2])+a(b[3]);return c},getClasses:function(){function c(o){h(o.imports,function(s){c(s)});h(o.cssRules||o.rules,function(s){switch(s.type||1){case 1:s.selectorText&&h(s.selectorText.split(","),function(j){j=j.replace(/^\s*|\s*$|^\s\./g,"");if(!(/\.mce/.test(j)||!/\.[\w\-]+$/.test(j))){g=j;j=j.replace(/.*\.([a-z0-9_\-]+).*/i,"$1");if(!(e&&!(j=e(j,g))))if(!d[j]){b.push({"class":j});
d[j]=1}}});break;case 3:c(s.styleSheet);break}})}var a=this,b=[],d={},e=a.settings.class_filter,g;if(a.classes)return a.classes;try{h(a.doc.styleSheets,c)}catch(n){}if(b.length>0)a.classes=b;return b},run:function(c,a,b){var d=this,e;if(d.doc&&typeof c==="string")c=d.get(c);if(!c)return false;b=b||this;if(!c.nodeType&&(c.length||c.length===0)){e=[];h(c,function(g,n){if(g){if(typeof g=="string")g=d.doc.getElementById(g);e.push(a.call(b,g,n))}});return e}return a.call(b,c)},getAttribs:function(c){var a;
c=this.get(c);if(!c)return[];if(p){a=[];if(c.nodeName=="OBJECT")return c.attributes;c.nodeName==="OPTION"&&this.getAttrib(c,"selected")&&a.push({specified:1,nodeName:"selected"});c.cloneNode(false).outerHTML.replace(/<\/?[\w:]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=\w+|>/gi,"").replace(/[\w:]+/gi,function(b){a.push({specified:1,nodeName:b})});return a}return c.attributes},destroy:function(c){var a=this;a.events&&a.events.destroy();a.win=a.doc=a.root=a.events=null;c||l.removeUnload(a.destroy)},createRng:function(){var c=
this.doc;return c.createRange?c.createRange():new l.dom.Range(this)},split:function(c,a,b){function d(i,f){(i=i[f])&&i[f]&&i[f].nodeType==1&&e(i[f])&&n.remove(i[f])}function e(i){i=n.getOuterHTML(i);i=i.replace(/<(img|hr|table)/gi,"-");i=i.replace(/<[^>]+>/g,"");return i.replace(/[ \t\r\n]+|&nbsp;|&#160;/g,"")==""}function g(i){for(var f=0;i.previousSibling;){f++;i=i.previousSibling}return f}var n=this,o=n.createRng(),s,j;if(c&&a){o.setStart(c.parentNode,g(c));o.setEnd(a.parentNode,g(a));s=o.extractContents();
o=n.createRng();o.setStart(a.parentNode,g(a)+1);o.setEnd(c.parentNode,g(c)+1);o=o.extractContents();j=c.parentNode;d(s,"lastChild");e(s)||j.insertBefore(s,c);b?j.replaceChild(b,a):j.insertBefore(a,c);d(o,"firstChild");e(o)||j.insertBefore(o,c);n.remove(c);return b||a}},bind:function(c,a,b,d){var e=this;if(!e.events)e.events=new l.dom.EventUtils;return e.events.add(c,a,b,d||this)},unbind:function(c,a,b){var d=this;if(!d.events)d.events=new l.dom.EventUtils;return d.events.remove(c,a,b)},_findSib:function(c,
a,b){var d=this,e=a;if(c){if(m(e,"string"))e=function(g){return d.is(g,a)};for(c=c[b];c;c=c[b])if(e(c))return c}return null},_isRes:function(c){return/^(top|left|bottom|right|width|height)/i.test(c)||/;\s*(top|left|bottom|right|width|height)/i.test(c)}});l.DOM=new l.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(l){function h(a,b){var d;if(a.parentNode!=b)return-1;d=b.firstChild;for(b=0;d!=a;d=d.nextSibling)b++;return b}function m(a){for(var b=0;a.previousSibling;){b++;a=a.previousSibling}return b}function k(a,b){var d;if(a.nodeType==3)return a;if(b<0)return a;for(d=a.firstChild;d!=null&&b>0;){--b;d=d.nextSibling}if(d!=null)return d;return a}function p(a){var b=a.doc;c(this,{dom:a,startContainer:b,startOffset:0,endContainer:b,endOffset:0,collapsed:true,commonAncestorContainer:b,START_TO_START:0,
START_TO_END:1,END_TO_END:2,END_TO_START:3})}var c=tinymce.extend;c(p.prototype,{setStart:function(a,b){this._setEndPoint(true,a,b)},setEnd:function(a,b){this._setEndPoint(false,a,b)},setStartBefore:function(a){this.setStart(a.parentNode,m(a))},setStartAfter:function(a){this.setStart(a.parentNode,m(a)+1)},setEndBefore:function(a){this.setEnd(a.parentNode,m(a))},setEndAfter:function(a){this.setEnd(a.parentNode,m(a)+1)},collapse:function(a){var b=this;if(a){b.endContainer=b.startContainer;b.endOffset=
b.startOffset}else{b.startContainer=b.endContainer;b.startOffset=b.endOffset}b.collapsed=true},selectNode:function(a){this.setStartBefore(a);this.setEndAfter(a)},selectNodeContents:function(a){this.setStart(a,0);this.setEnd(a,a.nodeType===1?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a){var b=this,d=b.startContainer,e=b.startOffset,g=b.endContainer,n=b.endOffset;if(a===0)return b._compareBoundaryPoints(d,e,d,e);if(a===1)return b._compareBoundaryPoints(d,e,g,n);if(a===2)return b._compareBoundaryPoints(g,
n,g,n);if(a===3)return b._compareBoundaryPoints(g,n,d,e)},deleteContents:function(){this._traverse(2)},extractContents:function(){return this._traverse(0)},cloneContents:function(){return this._traverse(1)},insertNode:function(a){var b=this,d;if(a.nodeType===3||a.nodeType===4){d=b.startContainer.splitText(b.startOffset);b.startContainer.parentNode.insertBefore(a,d)}else{if(b.startContainer.childNodes.length>0)d=b.startContainer.childNodes[b.startOffset];b.startContainer.insertBefore(a,d)}},surroundContents:function(a){var b=
this,d=b.extractContents();b.insertNode(a);a.appendChild(d);b.selectNode(a)},cloneRange:function(){var a=this;return c(new p(a.dom),{startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset,collapsed:a.collapsed,commonAncestorContainer:a.commonAncestorContainer})},_isCollapsed:function(){return this.startContainer==this.endContainer&&this.startOffset==this.endOffset},_compareBoundaryPoints:function(a,b,d,e){var g,n;if(a==d)return b==e?0:b<e?-1:1;
for(g=d;g&&g.parentNode!=a;)g=g.parentNode;if(g){n=0;for(d=a.firstChild;d!=g&&n<b;){n++;d=d.nextSibling}return b<=n?-1:1}for(g=a;g&&g.parentNode!=d;)g=g.parentNode;if(g){n=0;for(d=d.firstChild;d!=g&&n<e;){n++;d=d.nextSibling}return n<e?-1:1}b=this.dom.findCommonAncestor(a,d);for(a=a;a&&a.parentNode!=b;)a=a.parentNode;a||(a=b);for(e=d;e&&e.parentNode!=b;)e=e.parentNode;e||(e=b);if(a==e)return 0;for(d=b.firstChild;d;){if(d==a)return-1;if(d==e)return 1;d=d.nextSibling}},_setEndPoint:function(a,b,d){var e=
this;if(a){e.startContainer=b;e.startOffset=d}else{e.endContainer=b;e.endOffset=d}for(b=e.endContainer;b.parentNode;)b=b.parentNode;for(d=e.startContainer;d.parentNode;)d=d.parentNode;if(d!=b)e.collapse(a);else e._compareBoundaryPoints(e.startContainer,e.startOffset,e.endContainer,e.endOffset)>0&&e.collapse(a);e.collapsed=e._isCollapsed();e.commonAncestorContainer=e.dom.findCommonAncestor(e.startContainer,e.endContainer)},_traverse:function(a){var b=this,d,e=0,g=0,n;if(b.startContainer==b.endContainer)return b._traverseSameContainer(a);
d=b.endContainer;for(n=d.parentNode;n!=null;d=n,n=n.parentNode){if(n==b.startContainer)return b._traverseCommonStartContainer(d,a);++e}d=b.startContainer;for(n=d.parentNode;n!=null;d=n,n=n.parentNode){if(n==b.endContainer)return b._traverseCommonEndContainer(d,a);++g}g=g-e;for(d=b.startContainer;g>0;){d=d.parentNode;g--}for(e=b.endContainer;g<0;){e=e.parentNode;g++}g=d.parentNode;for(n=e.parentNode;g!=n;g=g.parentNode,n=n.parentNode){d=g;e=n}return b._traverseCommonAncestors(d,e,a)},_traverseSameContainer:function(a){var b=
this,d,e,g,n;if(a!=2)d=b.dom.doc.createDocumentFragment();if(b.startOffset==b.endOffset)return d;if(b.startContainer.nodeType==3){e=b.startContainer.nodeValue;e=e.substring(b.startOffset,b.endOffset);if(a!=1){b.startContainer.deleteData(b.startOffset,b.endOffset-b.startOffset);b.collapse(true)}if(a==2)return null;d.appendChild(b.dom.doc.createTextNode(e));return d}g=k(b.startContainer,b.startOffset);for(e=b.endOffset-b.startOffset;e>0;){n=g.nextSibling;g=b._traverseFullySelected(g,a);d&&d.appendChild(g);
--e;g=n}a!=1&&b.collapse(true);return d},_traverseCommonStartContainer:function(a,b){var d=this,e,g,n,o;if(b!=2)e=d.dom.doc.createDocumentFragment();g=d._traverseRightBoundary(a,b);e&&e.appendChild(g);n=h(a,d.startContainer)-d.startOffset;if(n<=0){if(b!=1){d.setEndBefore(a);d.collapse(false)}return e}for(g=a.previousSibling;n>0;){o=g.previousSibling;g=d._traverseFullySelected(g,b);e&&e.insertBefore(g,e.firstChild);--n;g=o}if(b!=1){d.setEndBefore(a);d.collapse(false)}return e},_traverseCommonEndContainer:function(a,
b){var d=this,e,g,n,o;if(b!=2)e=d.dom.doc.createDocumentFragment();n=d._traverseLeftBoundary(a,b);e&&e.appendChild(n);g=h(a,d.endContainer);++g;g=d.endOffset-g;for(n=a.nextSibling;g>0;){o=n.nextSibling;n=d._traverseFullySelected(n,b);e&&e.appendChild(n);--g;n=o}if(b!=1){d.setStartAfter(a);d.collapse(true)}return e},_traverseCommonAncestors:function(a,b,d){var e=this,g,n,o,s;if(d!=2)n=e.dom.doc.createDocumentFragment();g=e._traverseLeftBoundary(a,d);n&&n.appendChild(g);o=a.parentNode;s=h(a,o);o=h(b,
o);++s;s=o-s;for(g=a.nextSibling;s>0;){o=g.nextSibling;g=e._traverseFullySelected(g,d);n&&n.appendChild(g);g=o;--s}g=e._traverseRightBoundary(b,d);n&&n.appendChild(g);if(d!=1){e.setStartAfter(a);e.collapse(true)}return n},_traverseRightBoundary:function(a,b){var d=this,e=k(d.endContainer,d.endOffset-1),g,n,o,s=e!=d.endContainer;if(e==a)return d._traverseNode(e,s,false,b);g=e.parentNode;for(n=d._traverseNode(g,false,false,b);g!=null;){for(;e!=null;){o=e.previousSibling;e=d._traverseNode(e,s,false,
b);b!=2&&n.insertBefore(e,n.firstChild);s=true;e=o}if(g==a)return n;e=g.previousSibling;g=g.parentNode;o=d._traverseNode(g,false,false,b);b!=2&&o.appendChild(n);n=o}return null},_traverseLeftBoundary:function(a,b){var d=this,e=k(d.startContainer,d.startOffset),g=e!=d.startContainer,n,o,s;if(e==a)return d._traverseNode(e,g,true,b);n=e.parentNode;for(o=d._traverseNode(n,false,true,b);n!=null;){for(;e!=null;){s=e.nextSibling;e=d._traverseNode(e,g,true,b);b!=2&&o.appendChild(e);g=true;e=s}if(n==a)return o;
e=n.nextSibling;n=n.parentNode;s=d._traverseNode(n,false,true,b);b!=2&&s.appendChild(o);o=s}return null},_traverseNode:function(a,b,d,e){var g=this;if(b)return g._traverseFullySelected(a,e);if(a.nodeType==3){b=a.nodeValue;if(d){g=g.startOffset;d=b.substring(g);b=b.substring(0,g)}else{g=g.endOffset;d=b.substring(0,g);b=b.substring(g)}if(e!=1)a.nodeValue=b;if(e==2)return null;a=a.cloneNode(false);a.nodeValue=d;return a}if(e==2)return null;return a.cloneNode(false)},_traverseFullySelected:function(a,
b){if(b!=2)return b==1?a.cloneNode(true):a;a.parentNode.removeChild(a);return null}});l.Range=p})(tinymce.dom);
(function(){function l(h){function m(d,e){if(d&&e){if(d.item&&e.item&&d.item(0)===e.item(0))return 1;if(d.isEqual&&e.isEqual&&e.isEqual(d))return 1}return 0}function k(){function d(f){var q=f.parentNode.childNodes,r;for(r=q.length-1;r>=0;r--)if(q[r]==f)return r;return-1}function e(f){var q=n.duplicate(),r,t,v,x=0,w=0,u;q.collapse(f);f=q.parentElement();q.pasteHTML(c);t=f.childNodes;for(r=0;r<t.length;r++){v=t[r];if(r>0&&(v.nodeType!==3||t[r-1].nodeType!==3))w++;if(v.nodeType===3){u=v.nodeValue.indexOf(c);
if(u!==-1){x+=u;break}x+=v.nodeValue.length}else x=0}q.moveStart("character",-1);q.text="";return{index:w,offset:x,parent:f}}var g=h.dom,n=h.getRng(),o=g.createRng(),s,j,i;j=n.item?n.item(0):n.parentElement();if(j.ownerDocument!=g.doc)return o;if(n.item||!j.hasChildNodes()){o.setStart(j.parentNode,d(j));o.setEnd(o.startContainer,o.startOffset+1);return o}j=h.isCollapsed();s=e(true);g=e(false);s.parent.normalize();g.parent.normalize();i=s.parent.childNodes[Math.min(s.index,s.parent.childNodes.length-
1)];i.nodeType!=3?o.setStart(s.parent,s.index):o.setStart(s.parent.childNodes[s.index],s.offset);s=g.parent.childNodes[Math.min(g.index,g.parent.childNodes.length-1)];if(s.nodeType!=3){j||g.index++;o.setEnd(g.parent,g.index)}else o.setEnd(g.parent.childNodes[g.index],g.offset);if(!j){i=o.startContainer;i.nodeType==1&&o.setStart(i,Math.min(o.startOffset,i.childNodes.length));s=o.endContainer;s.nodeType==1&&o.setEnd(s,Math.min(o.endOffset,s.childNodes.length))}p.addRange(o);return o}var p=this,c="\ufeff",
a,b;this.addRange=function(d){function e(f,q){var r,t;if(f.nodeType!=3)return-1;r=f.nodeValue;t=n.createTextRange();f.nodeValue=r.substring(0,q)+c+r.substring(q);t.moveToElementText(f.parentNode);t.findText(c);q=Math.abs(t.moveStart("character",-1048575));f.nodeValue=r;return q}var g,n=h.dom.doc.body,o,s,j,i;s=d.startContainer;o=d.startOffset;j=d.endContainer;i=d.endOffset;g=n.createTextRange();s=s.nodeType==1?s.childNodes[Math.min(o,s.childNodes.length-1)]:s;j=j.nodeType==1?j.childNodes[Math.min(o==
i?i:i-1,j.childNodes.length-1)]:j;if(s==j&&s.nodeType==1){if(/^(IMG|TABLE)$/.test(s.nodeName)&&o!=i){g=n.createControlRange();g.addElement(s)}else{g=n.createTextRange();if(!s.hasChildNodes()&&s.canHaveHTML)s.innerHTML=c;g.moveToElementText(s);if(s.innerHTML==c){g.collapse(true);s.removeChild(s.firstChild)}}o==i&&g.collapse(i<=d.endContainer.childNodes.length-1)}else if(d.collapsed){pos=e(s,o);g=n.createTextRange();g.move("character",pos)}else if(s==j&&s.nodeType==3){d=e(s,o);g=n.createTextRange();
g.move("character",d);g.moveEnd("character",i-o)}else{d=e(s,o);o=e(j,i);g=n.createTextRange();if(d==-1){g.moveToElementText(s);d=0}else g.move("character",d);tmpRng=n.createTextRange();o==-1?tmpRng.moveToElementText(j):tmpRng.move("character",o);g.setEndPoint("EndToEnd",tmpRng)}g.select()};this.getRangeAt=function(){if(!a||!m(b,h.getRng())){a=k();b=h.getRng()}return a};this.destroy=function(){b=a=null}}tinymce.dom.TridentSelection=l})();
(function(){function l(f,q,r,t,v,x){v=f=="previousSibling"&&!x;for(var w=0,u=t.length;w<u;w++){var y=t[w];if(y){if(v&&y.nodeType===1){y.sizcache=r;y.sizset=w}y=y[f];for(var z=false;y;){if(y.sizcache===r){z=t[y.sizset];break}if(y.nodeType===1&&!x){y.sizcache=r;y.sizset=w}if(y.nodeName===q){z=y;break}y=y[f]}t[w]=z}}}function h(f,q,r,t,v,x){v=f=="previousSibling"&&!x;for(var w=0,u=t.length;w<u;w++){var y=t[w];if(y){if(v&&y.nodeType===1){y.sizcache=r;y.sizset=w}y=y[f];for(var z=false;y;){if(y.sizcache===
r){z=t[y.sizset];break}if(y.nodeType===1){if(!x){y.sizcache=r;y.sizset=w}if(typeof q!=="string"){if(y===q){z=true;break}}else if(a.filter(q,[y]).length>0){z=y;break}}y=y[f]}t[w]=z}}}var m=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g,k=0,p=Object.prototype.toString,c=false,a=function(f,q,r,t){r=r||[];var v=q=q||document;if(q.nodeType!==1&&q.nodeType!==9)return[];if(!f||typeof f!=="string")return r;var x=[],w,u,y,z,A=true,B=j(q);
for(m.lastIndex=0;(w=m.exec(f))!==null;){x.push(w[1]);if(w[2]){z=RegExp.rightContext;break}}if(x.length>1&&d.exec(f))if(x.length===2&&b.relative[x[0]])u=i(x[0]+x[1],q);else for(u=b.relative[x[0]]?[q]:a(x.shift(),q);x.length;){f=x.shift();if(b.relative[f])f+=x.shift();u=i(f,u)}else{if(!t&&x.length>1&&q.nodeType===9&&!B&&b.match.ID.test(x[0])&&!b.match.ID.test(x[x.length-1])){w=a.find(x.shift(),q,B);q=w.expr?a.filter(w.expr,w.set)[0]:w.set[0]}if(q){w=t?{expr:x.pop(),set:g(t)}:a.find(x.pop(),x.length===
1&&(x[0]==="~"||x[0]==="+")&&q.parentNode?q.parentNode:q,B);u=w.expr?a.filter(w.expr,w.set):w.set;if(x.length>0)y=g(u);else A=false;for(;x.length;){var C=x.pop();w=C;if(b.relative[C])w=x.pop();else C="";if(w==null)w=q;b.relative[C](y,w,B)}}else y=[]}y||(y=u);if(!y)throw"Syntax error, unrecognized expression: "+(C||f);if(p.call(y)==="[object Array]")if(A)if(q&&q.nodeType===1)for(f=0;y[f]!=null;f++){if(y[f]&&(y[f]===true||y[f].nodeType===1&&s(q,y[f])))r.push(u[f])}else for(f=0;y[f]!=null;f++)y[f]&&
y[f].nodeType===1&&r.push(u[f]);else r.push.apply(r,y);else g(y,r);if(z){a(z,v,r,t);a.uniqueSort(r)}return r};a.uniqueSort=function(f){if(o){c=false;f.sort(o);if(c)for(var q=1;q<f.length;q++)f[q]===f[q-1]&&f.splice(q--,1)}};a.matches=function(f,q){return a(f,null,null,q)};a.find=function(f,q,r){var t,v;if(!f)return[];for(var x=0,w=b.order.length;x<w;x++){var u=b.order[x];if(v=b.match[u].exec(f)){var y=RegExp.leftContext;if(y.substr(y.length-1)!=="\\"){v[1]=(v[1]||"").replace(/\\/g,"");t=b.find[u](v,
q,r);if(t!=null){f=f.replace(b.match[u],"");break}}}}t||(t=q.getElementsByTagName("*"));return{set:t,expr:f}};a.filter=function(f,q,r,t){for(var v=f,x=[],w=q,u,y,z=q&&q[0]&&j(q[0]);f&&q.length;){for(var A in b.filter)if((u=b.match[A].exec(f))!=null){var B=b.filter[A],C,D;y=false;if(w==x)x=[];if(b.preFilter[A])if(u=b.preFilter[A](u,w,r,x,t,z)){if(u===true)continue}else y=C=true;if(u)for(var F=0;(D=w[F])!=null;F++)if(D){C=B(D,u,F,w);var J=t^!!C;if(r&&C!=null)if(J)y=true;else w[F]=false;else if(J){x.push(D);
y=true}}if(C!==undefined){r||(w=x);f=f.replace(b.match[A],"");if(!y)return[];break}}if(f==v)if(y==null)throw"Syntax error, unrecognized expression: "+f;else break;v=f}return w};var b=a.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF_-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF_-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF_-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*_-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,
POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF_-]|\\.)+)(?:\((['"]*)((?:\([^\)]+\)|[^\2\(\)]*)+)\2\))?/},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(f){return f.getAttribute("href")}},relative:{"+":function(f,q,r){var t=typeof q==="string",v=t&&!/\W/.test(q);t=t&&!v;if(v&&!r)q=q.toUpperCase();r=0;v=f.length;for(var x;r<v;r++)if(x=f[r]){for(;(x=x.previousSibling)&&x.nodeType!==1;);f[r]=t||x&&x.nodeName===q?x||false:x===q}t&&
a.filter(q,f,true)},">":function(f,q,r){var t=typeof q==="string";if(t&&!/\W/.test(q)){q=r?q:q.toUpperCase();r=0;for(var v=f.length;r<v;r++){var x=f[r];if(x){t=x.parentNode;f[r]=t.nodeName===q?t:false}}}else{r=0;for(v=f.length;r<v;r++)if(x=f[r])f[r]=t?x.parentNode:x.parentNode===q;t&&a.filter(q,f,true)}},"":function(f,q,r){var t=k++,v=h;if(!q.match(/\W/)){var x=q=r?q:q.toUpperCase();v=l}v("parentNode",q,t,f,x,r)},"~":function(f,q,r){var t=k++,v=h;if(typeof q==="string"&&!q.match(/\W/)){var x=q=r?
q:q.toUpperCase();v=l}v("previousSibling",q,t,f,x,r)}},find:{ID:function(f,q,r){if(typeof q.getElementById!=="undefined"&&!r)return(f=q.getElementById(f[1]))?[f]:[]},NAME:function(f,q){if(typeof q.getElementsByName!=="undefined"){var r=[];q=q.getElementsByName(f[1]);for(var t=0,v=q.length;t<v;t++)q[t].getAttribute("name")===f[1]&&r.push(q[t]);return r.length===0?null:r}},TAG:function(f,q){return q.getElementsByTagName(f[1])}},preFilter:{CLASS:function(f,q,r,t,v,x){f=" "+f[1].replace(/\\/g,"")+" ";
if(x)return f;x=0;for(var w;(w=q[x])!=null;x++)if(w)if(v^(w.className&&(" "+w.className+" ").indexOf(f)>=0))r||t.push(w);else if(r)q[x]=false;return false},ID:function(f){return f[1].replace(/\\/g,"")},TAG:function(f,q){for(var r=0;q[r]===false;r++);return q[r]&&j(q[r])?f[1]:f[1].toUpperCase()},CHILD:function(f){if(f[1]=="nth"){var q=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(f[2]=="even"&&"2n"||f[2]=="odd"&&"2n+1"||!/\D/.test(f[2])&&"0n+"+f[2]||f[2]);f[2]=q[1]+(q[2]||1)-0;f[3]=q[3]-0}f[0]=k++;return f},ATTR:function(f,
q,r,t,v,x){q=f[1].replace(/\\/g,"");if(!x&&b.attrMap[q])f[1]=b.attrMap[q];if(f[2]==="~=")f[4]=" "+f[4]+" ";return f},PSEUDO:function(f,q,r,t,v){if(f[1]==="not")if(f[3].match(m).length>1||/^\w/.test(f[3]))f[3]=a(f[3],null,null,q);else{f=a.filter(f[3],q,r,true^v);r||t.push.apply(t,f);return false}else if(b.match.POS.test(f[0])||b.match.CHILD.test(f[0]))return true;return f},POS:function(f){f.unshift(true);return f}},filters:{enabled:function(f){return f.disabled===false&&f.type!=="hidden"},disabled:function(f){return f.disabled===
true},checked:function(f){return f.checked===true},selected:function(f){return f.selected===true},parent:function(f){return!!f.firstChild},empty:function(f){return!f.firstChild},has:function(f,q,r){return!!a(r[3],f).length},header:function(f){return/h\d/i.test(f.nodeName)},text:function(f){return"text"===f.type},radio:function(f){return"radio"===f.type},checkbox:function(f){return"checkbox"===f.type},file:function(f){return"file"===f.type},password:function(f){return"password"===f.type},submit:function(f){return"submit"===
f.type},image:function(f){return"image"===f.type},reset:function(f){return"reset"===f.type},button:function(f){return"button"===f.type||f.nodeName.toUpperCase()==="BUTTON"},input:function(f){return/input|select|textarea|button/i.test(f.nodeName)}},setFilters:{first:function(f,q){return q===0},last:function(f,q,r,t){return q===t.length-1},even:function(f,q){return q%2===0},odd:function(f,q){return q%2===1},lt:function(f,q,r){return q<r[3]-0},gt:function(f,q,r){return q>r[3]-0},nth:function(f,q,r){return r[3]-
0==q},eq:function(f,q,r){return r[3]-0==q}},filter:{PSEUDO:function(f,q,r,t){var v=q[1],x=b.filters[v];if(x)return x(f,r,q,t);else if(v==="contains")return(f.textContent||f.innerText||"").indexOf(q[3])>=0;else if(v==="not"){q=q[3];r=0;for(t=q.length;r<t;r++)if(q[r]===f)return false;return true}},CHILD:function(f,q){var r=q[1],t=f;switch(r){case "only":case "first":for(;t=t.previousSibling;)if(t.nodeType===1)return false;if(r=="first")return true;t=f;case "last":for(;t=t.nextSibling;)if(t.nodeType===
1)return false;return true;case "nth":r=q[2];var v=q[3];if(r==1&&v==0)return true;q=q[0];var x=f.parentNode;if(x&&(x.sizcache!==q||!f.nodeIndex)){var w=0;for(t=x.firstChild;t;t=t.nextSibling)if(t.nodeType===1)t.nodeIndex=++w;x.sizcache=q}f=f.nodeIndex-v;return r==0?f==0:f%r==0&&f/r>=0}},ID:function(f,q){return f.nodeType===1&&f.getAttribute("id")===q},TAG:function(f,q){return q==="*"&&f.nodeType===1||f.nodeName===q},CLASS:function(f,q){return(" "+(f.className||f.getAttribute("class"))+" ").indexOf(q)>
-1},ATTR:function(f,q){var r=q[1];f=b.attrHandle[r]?b.attrHandle[r](f):f[r]!=null?f[r]:f.getAttribute(r);r=f+"";var t=q[2];q=q[4];return f==null?t==="!=":t==="="?r===q:t==="*="?r.indexOf(q)>=0:t==="~="?(" "+r+" ").indexOf(q)>=0:!q?r&&f!==false:t==="!="?r!=q:t==="^="?r.indexOf(q)===0:t==="$="?r.substr(r.length-q.length)===q:t==="|="?r===q||r.substr(0,q.length+1)===q+"-":false},POS:function(f,q,r,t){var v=b.setFilters[q[2]];if(v)return v(f,r,q,t)}}},d=b.match.POS;for(var e in b.match)b.match[e]=new RegExp(b.match[e].source+
/(?![^\[]*\])(?![^\(]*\))/.source);var g=function(f,q){f=Array.prototype.slice.call(f);if(q){q.push.apply(q,f);return q}return f};try{Array.prototype.slice.call(document.documentElement.childNodes)}catch(n){g=function(f,q){q=q||[];if(p.call(f)==="[object Array]")Array.prototype.push.apply(q,f);else if(typeof f.length==="number")for(var r=0,t=f.length;r<t;r++)q.push(f[r]);else for(r=0;f[r];r++)q.push(f[r]);return q}}var o;if(document.documentElement.compareDocumentPosition)o=function(f,q){f=f.compareDocumentPosition(q)&
4?-1:f===q?0:1;if(f===0)c=true;return f};else if("sourceIndex"in document.documentElement)o=function(f,q){f=f.sourceIndex-q.sourceIndex;if(f===0)c=true;return f};else if(document.createRange)o=function(f,q){var r=f.ownerDocument.createRange(),t=q.ownerDocument.createRange();r.setStart(f,0);r.setEnd(f,0);t.setStart(q,0);t.setEnd(q,0);f=r.compareBoundaryPoints(Range.START_TO_END,t);if(f===0)c=true;return f};(function(){var f=document.createElement("div"),q="script"+(new Date).getTime();f.innerHTML=
"<a name='"+q+"'/>";var r=document.documentElement;r.insertBefore(f,r.firstChild);if(document.getElementById(q)){b.find.ID=function(t,v,x){if(typeof v.getElementById!=="undefined"&&!x)return(v=v.getElementById(t[1]))?v.id===t[1]||typeof v.getAttributeNode!=="undefined"&&v.getAttributeNode("id").nodeValue===t[1]?[v]:undefined:[]};b.filter.ID=function(t,v){var x=typeof t.getAttributeNode!=="undefined"&&t.getAttributeNode("id");return t.nodeType===1&&x&&x.nodeValue===v}}r.removeChild(f)})();(function(){var f=
document.createElement("div");f.appendChild(document.createComment(""));if(f.getElementsByTagName("*").length>0)b.find.TAG=function(q,r){r=r.getElementsByTagName(q[1]);if(q[1]==="*"){q=[];for(var t=0;r[t];t++)r[t].nodeType===1&&q.push(r[t]);r=q}return r};f.innerHTML="<a href='#'></a>";if(f.firstChild&&typeof f.firstChild.getAttribute!=="undefined"&&f.firstChild.getAttribute("href")!=="#")b.attrHandle.href=function(q){return q.getAttribute("href",2)}})();document.querySelectorAll&&function(){var f=
a,q=document.createElement("div");q.innerHTML="<p class='TEST'></p>";if(!(q.querySelectorAll&&q.querySelectorAll(".TEST").length===0)){a=function(t,v,x,w){v=v||document;if(!w&&v.nodeType===9&&!j(v))try{return g(v.querySelectorAll(t),x)}catch(u){}return f(t,v,x,w)};for(var r in f)a[r]=f[r]}}();document.getElementsByClassName&&document.documentElement.getElementsByClassName&&function(){var f=document.createElement("div");f.innerHTML="<div class='test e'></div><div class='test'></div>";if(f.getElementsByClassName("e").length!==
0){f.lastChild.className="e";if(f.getElementsByClassName("e").length!==1){b.order.splice(1,0,"CLASS");b.find.CLASS=function(q,r,t){if(typeof r.getElementsByClassName!=="undefined"&&!t)return r.getElementsByClassName(q[1])}}}}();var s=document.compareDocumentPosition?function(f,q){return f.compareDocumentPosition(q)&16}:function(f,q){return f!==q&&(f.contains?f.contains(q):true)},j=function(f){return f.nodeType===9&&f.documentElement.nodeName!=="HTML"||!!f.ownerDocument&&f.ownerDocument.documentElement.nodeName!==
"HTML"},i=function(f,q){var r=[],t="",v;for(q=q.nodeType?[q]:q;v=b.match.PSEUDO.exec(f);){t+=v[0];f=f.replace(b.match.PSEUDO,"")}f=b.relative[f]?f+"*":f;v=0;for(var x=q.length;v<x;v++)a(f,q[v],r);return a.filter(t,r)};window.tinymce.dom.Sizzle=a})();
(function(l){var h=l.each,m=l.DOM,k=l.isIE,p;l.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(c,a,b,d){var e,g=this,n=g.events,o;if(a instanceof Array){o=[];h(a,function(s){o.push(g.add(c,s,b,d))});return o}if(c&&c.hasOwnProperty&&c instanceof Array){o=[];h(c,function(s){s=m.get(s);o.push(g.add(s,a,b,d))});return o}if(c=m.get(c)){e=function(s){if(!g.disabled){if((s=s||window.event)&&k){if(!s.target)s.target=s.srcElement;l.extend(s,g._stoppers)}if(!d)return b(s);
return b.call(d,s)}};if(a=="unload"){l.unloads.unshift({func:e});return e}if(a=="init"){g.domLoaded?e():g.inits.push(e);return e}n.push({obj:c,name:a,func:b,cfunc:e,scope:d});g._add(c,a,e);return b}},remove:function(c,a,b){var d=this,e=d.events,g=false,n;if(c&&c.hasOwnProperty&&c instanceof Array){n=[];h(c,function(o){o=m.get(o);n.push(d.remove(o,a,b))});return n}c=m.get(c);h(e,function(o,s){if(o.obj==c&&o.name==a&&(!b||o.func==b||o.cfunc==b)){e.splice(s,1);d._remove(c,a,o.cfunc);g=true;return false}});
return g},clear:function(c){var a=this,b=a.events,d,e;if(c){c=m.get(c);for(d=b.length-1;d>=0;d--){e=b[d];if(e.obj===c){a._remove(e.obj,e.name,e.cfunc);e.obj=e.cfunc=null;b.splice(d,1)}}}},cancel:function(c){if(!c)return false;this.stop(c);return this.prevent(c)},stop:function(c){if(c.stopPropagation)c.stopPropagation();else c.cancelBubble=true;return false},prevent:function(c){if(c.preventDefault)c.preventDefault();else c.returnValue=false;return false},destroy:function(){var c=this;h(c.events,function(a){c._remove(a.obj,
a.name,a.cfunc);a.obj=a.cfunc=null});c.events=[];c=null},_add:function(c,a,b){if(c.attachEvent)c.attachEvent("on"+a,b);else if(c.addEventListener)c.addEventListener(a,b,false);else c["on"+a]=b},_remove:function(c,a,b){if(c)try{if(c.detachEvent)c.detachEvent("on"+a,b);else if(c.removeEventListener)c.removeEventListener(a,b,false);else c["on"+a]=null}catch(d){}},_pageInit:function(){var c=this;if(!c.domLoaded){c.domLoaded=true;h(c.inits,function(a){a()});c.inits=[]}},_wait:function(c){var a=this,b=
c.document;if(c.tinyMCE_GZ&&tinyMCE_GZ.loaded)a.domLoaded=1;else{if(b.attachEvent){b.attachEvent("onreadystatechange",function(){if(b.readyState==="complete"){b.detachEvent("onreadystatechange",arguments.callee);a._pageInit(c)}});b.documentElement.doScroll&&c==c.top&&function(){if(!a.domLoaded){try{b.documentElement.doScroll("left")}catch(d){setTimeout(arguments.callee,0);return}a._pageInit(c)}}()}else b.addEventListener&&a._add(c,"DOMContentLoaded",function(){a._pageInit(c)});a._add(c,"load",function(){a._pageInit(c)})}},
_stoppers:{preventDefault:function(){this.returnValue=false},stopPropagation:function(){this.cancelBubble=true}}});p=l.dom.Event=new l.dom.EventUtils;p._wait(window);l.addUnload(function(){p.destroy()})})(tinymce);
(function(l){var h=l.each;l.create("tinymce.dom.Element",{Element:function(m,k){var p=this,c;k=k||{};p.id=m;p.dom=c=k.dom||l.DOM;p.settings=k;l.isIE||p.dom.get(p.id);h(["getPos","getRect","getParent","add","setStyle","getStyle","setStyles","setAttrib","setAttribs","getAttrib","addClass","removeClass","hasClass","getOuterHTML","setOuterHTML","remove","show","hide","isHidden","setHTML","get"],function(a){p[a]=function(){var b=[m],d;for(d=0;d<arguments.length;d++)b.push(arguments[d]);b=c[a].apply(c,
b);p.update(a);return b}})},on:function(m,k,p){return l.dom.Event.add(this.id,m,k,p)},getXY:function(){return{x:parseInt(this.getStyle("left")),y:parseInt(this.getStyle("top"))}},getSize:function(){var m=this.dom.get(this.id);return{w:parseInt(this.getStyle("width")||m.clientWidth),h:parseInt(this.getStyle("height")||m.clientHeight)}},moveTo:function(m,k){this.setStyles({left:m,top:k})},moveBy:function(m,k){var p=this.getXY();this.moveTo(p.x+m,p.y+k)},resizeTo:function(m,k){this.setStyles({width:m,
height:k})},resizeBy:function(m,k){var p=this.getSize();this.resizeTo(p.w+m,p.h+k)},update:function(m){var k=this,p=k.dom;if(l.isIE6&&k.settings.blocker){m=m||"";if(!(m.indexOf("get")===0||m.indexOf("has")===0||m.indexOf("is")===0))if(m=="remove")p.remove(k.blocker);else{if(k.blocker)m=p.get(k.blocker);else{k.blocker=p.uniqueId();m=p.add(k.settings.container||p.getRoot(),"iframe",{id:k.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'});p.setStyle(m,"opacity",0)}p.setStyle(m,"left",
k.getStyle("left",1));p.setStyle(m,"top",k.getStyle("top",1));p.setStyle(m,"width",k.getStyle("width",1));p.setStyle(m,"height",k.getStyle("height",1));p.setStyle(m,"display",k.getStyle("display",1));p.setStyle(m,"zIndex",parseInt(k.getStyle("zIndex",1)||0)-1)}}}})})(tinymce);
(function(l){function h(c){return c.replace(/[\n\r]+/g,"")}var m=l.is,k=l.isIE,p=l.each;l.create("tinymce.dom.Selection",{Selection:function(c,a,b){var d=this;d.dom=c;d.win=a;d.serializer=b;p(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(e){d[e]=new l.util.Dispatcher(d)});if(!d.win.getSelection)d.tridentSel=new l.dom.TridentSelection(d);l.addUnload(d.destroy,d)},getContent:function(c){var a=this,b=a.getRng(),d=a.dom.create("body"),e=a.getSel(),g,n;c=c||{};g=n=
"";c.get=true;c.format=c.format||"html";a.onBeforeGetContent.dispatch(a,c);if(c.format=="text")return a.isCollapsed()?"":b.text||(e.toString?e.toString():"");if(b.cloneContents)(b=b.cloneContents())&&d.appendChild(b);else d.innerHTML=m(b.item)||m(b.htmlText)?b.item?b.item(0).outerHTML:b.htmlText:b.toString();if(/^\s/.test(d.innerHTML))g=" ";if(/\s+$/.test(d.innerHTML))n=" ";c.getInner=true;c.content=a.isCollapsed()?"":g+a.serializer.serialize(d,c)+n;a.onGetContent.dispatch(a,c);return c.content},
setContent:function(c,a){var b=this,d=b.getRng(),e=b.win.document;a=a||{format:"html"};a.set=true;a.content=b.dom.processHTML(c);b.onBeforeSetContent.dispatch(b,a);c=a.content;if(d.insertNode){c+='<span id="__caret">_</span>';d.deleteContents();d.insertNode(b.getRng().createContextualFragment(c));c=b.dom.get("__caret");d=e.createRange();d.setStartBefore(c);d.setEndAfter(c);b.setRng(d);b.dom.remove("__caret")}else{if(d.item){e.execCommand("Delete",false,null);d=b.getRng()}d.pasteHTML(c)}b.onSetContent.dispatch(b,
a)},getStart:function(){var c=this,a=c.getRng();if(k){if(a.item)return a.item(0);a=a.duplicate();a.collapse(1);if((a=a.parentElement())&&a.nodeName=="BODY")return a.firstChild;return a}else{a=a.startContainer;if(a.nodeName=="BODY")return a.firstChild;return c.dom.getParent(a,"*")}},getEnd:function(){var c=this,a=c.getRng();if(k){if(a.item)return a.item(0);a=a.duplicate();a.collapse(0);if((a=a.parentElement())&&a.nodeName=="BODY")return a.lastChild;return a}else{a=a.endContainer;if(a.nodeName=="BODY")return a.lastChild;
return c.dom.getParent(a,"*")}},getBookmark:function(c){function a(i,f,q){i=b.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,false);for(var r,t=0,v={};(r=i.nextNode())!=null;){if(r==f)v.start=t;if(r==q){v.end=t;return v}t+=h(r.nodeValue||"").length}return null}var b=this,d=b.getRng(),e,g;g=b.dom.getViewPort(b.win);var n,o,s;s=b.dom.getRoot();var j=0;e=g.x;g=g.y;if(c)return{rng:d,scrollX:e,scrollY:g};if(k){if(d.item){n=d.item(0);p(b.dom.select(n.nodeName),function(i,f){if(n==i){o=f;return false}});
return{tag:n.nodeName,index:o,scrollX:e,scrollY:g}}c=b.dom.doc.body.createTextRange();c.moveToElementText(s);c.collapse(true);s=Math.abs(c.move("character",-16777215));c=d.duplicate();c.collapse(true);o=Math.abs(c.move("character",-16777215));c=d.duplicate();c.collapse(false);d=Math.abs(c.move("character",-16777215))-o;return{start:o-s,length:d,scrollX:e,scrollY:g}}n=b.getNode();c=b.getSel();if(!c)return null;if(n&&n.nodeName=="IMG")return{scrollX:e,scrollY:g};if(c.anchorNode==c.focusNode&&c.anchorOffset==
c.focusOffset){n=a(s,c.anchorNode,c.focusNode);if(!n)return{scrollX:e,scrollY:g};h(c.anchorNode.nodeValue||"").replace(/^\s+/,function(i){j=i.length});return{start:Math.max(n.start+c.anchorOffset-j,0),end:Math.max(n.end+c.focusOffset-j,0),scrollX:e,scrollY:g,beg:c.anchorOffset-j==0}}else{n=a(s,d.startContainer,d.endContainer);if(!n)return{scrollX:e,scrollY:g};return{start:Math.max(n.start+d.startOffset-j,0),end:Math.max(n.end+d.endOffset-0,0),scrollX:e,scrollY:g,beg:d.startOffset-j==0}}},moveToBookmark:function(c){function a(r,
t,v){r=b.dom.doc.createTreeWalker(r,NodeFilter.SHOW_TEXT,null,false);for(var x,w=0,u={},y;(x=r.nextNode())!=null;){s=x.nodeValue||"";o=h(s).length;w+=o;if(w>=t&&!u.startNode){y=t-(w-o);if(c.beg&&y>=o)continue;u.startNode=x;u.startOffset=y+0}if(w>=v){u.endNode=x;u.endOffset=v-(w-o)+0;return u}}return null}var b=this,d=b.getRng(),e=b.getSel(),g=b.dom.getRoot(),n,o,s;if(!c)return false;b.win.scrollTo(c.scrollX,c.scrollY);if(k){b.tridentSel.destroy();if(d=c.rng){try{d.select()}catch(j){}return true}b.win.focus();
if(c.tag){d=g.createControlRange();p(b.dom.select(c.tag),function(r,t){t==c.index&&d.addElement(r)})}else try{if(c.start<0)return true;d=e.createRange();d.moveToElementText(g);d.collapse(true);d.moveStart("character",c.start);d.moveEnd("character",c.length)}catch(i){return true}try{d.select()}catch(f){}return true}if(!e)return false;if(c.rng){e.removeAllRanges();e.addRange(c.rng)}else if(m(c.start)&&m(c.end))try{if(n=a(g,c.start,c.end)){d=b.dom.doc.createRange();d.setStart(n.startNode,n.startOffset);
d.setEnd(n.endNode,n.endOffset);e.removeAllRanges();e.addRange(d)}l.isOpera||b.win.focus()}catch(q){}},select:function(c,a){function b(s,j){var i,f;if(s)for(i=n.createTreeWalker(s,NodeFilter.SHOW_TEXT,null,false);s=i.nextNode();){f=s;if(l.trim(s.nodeValue).length!=0)if(j)return s;else f=s}return f}var d=this,e=d.getRng();d.getSel();var g,n=d.win.document;if(k)try{g=n.body;if(/^(IMG|TABLE)$/.test(c.nodeName)){e=g.createControlRange();e.addElement(c)}else{e=g.createTextRange();e.moveToElementText(c)}e.select()}catch(o){}else{if(a){a=
b(c,1)||d.dom.select("br:first",c)[0];g=b(c,0)||d.dom.select("br:last",c)[0];if(a&&g){e=n.createRange();a.nodeName=="BR"?e.setStartBefore(a):e.setStart(a,0);g.nodeName=="BR"?e.setEndBefore(g):e.setEnd(g,g.nodeValue.length)}else e.selectNode(c)}else e.selectNode(c);d.setRng(e)}return c},isCollapsed:function(){var c=this,a=c.getRng();c=c.getSel();if(!a||a.item)return false;return!c||a.boundingWidth==0||a.collapsed},collapse:function(c){var a=this,b=a.getRng(),d;if(b.item){d=b.item(0);b=this.win.document.body.createTextRange();
b.moveToElementText(d)}b.collapse(!!c);a.setRng(b)},getSel:function(){var c=this.win;return c.getSelection?c.getSelection():c.document.selection},getRng:function(c){var a=this,b,d;if(c&&a.tridentSel)return a.tridentSel.getRangeAt(0);try{if(b=a.getSel())d=b.rangeCount>0?b.getRangeAt(0):b.createRange?b.createRange():a.win.document.createRange()}catch(e){}d||(d=k?a.win.document.body.createTextRange():a.win.document.createRange());return d},setRng:function(c){var a;a=this;if(a.tridentSel)if(c.cloneRange)a.tridentSel.addRange(c);
else try{c.select()}catch(b){}else if(a=a.getSel()){a.removeAllRanges();a.addRange(c)}},setNode:function(c){var a=this;a.setContent(a.dom.getOuterHTML(c));return c},getNode:function(){var c=this,a=c.getRng(),b=c.getSel(),d;if(!k){if(!a)return c.dom.getRoot();d=a.commonAncestorContainer;if(!a.collapsed){if(l.isWebKit&&b.anchorNode&&b.anchorNode.nodeType==1)return b.anchorNode.childNodes[b.anchorOffset];if(a.startContainer==a.endContainer)if(a.startOffset-a.endOffset<2)if(a.startContainer.hasChildNodes())d=
a.startContainer.childNodes[a.startOffset]}return c.dom.getParent(d,"*")}return a.item?a.item(0):a.parentElement()},getSelectedBlocks:function(c,a){var b=this,d=b.dom,e=[];c=d.getParent(c||b.getStart(),d.isBlock);a=d.getParent(a||b.getEnd(),d.isBlock);c&&e.push(c);if(c&&a&&c!=a)for(b=c;(b=b.nextSibling)&&b!=a;)d.isBlock(b)&&e.push(b);a&&c!=a&&e.push(a);return e},destroy:function(c){var a=this;a.win=null;a.tridentSel&&a.tridentSel.destroy();c||l.removeUnload(a.destroy)}})})(tinymce);
(function(l){l.create("tinymce.dom.XMLWriter",{node:null,XMLWriter:function(){function h(){var m=document.implementation;if(!m||!m.createDocument){try{return new ActiveXObject("MSXML2.DOMDocument")}catch(k){}try{return new ActiveXObject("Microsoft.XmlDom")}catch(p){}}else return m.createDocument("","",null)}this.doc=h();this.valid=l.isOpera||l.isWebKit;this.reset()},reset:function(){var h=this,m=h.doc;m.firstChild&&m.removeChild(m.firstChild);h.node=m.appendChild(m.createElement("html"))},writeStartElement:function(h){var m=
this;m.node=m.node.appendChild(m.doc.createElement(h))},writeAttribute:function(h,m){if(this.valid)m=m.replace(/>/g,"%MCGT%");this.node.setAttribute(h,m)},writeEndElement:function(){this.node=this.node.parentNode},writeFullEndElement:function(){var h=this,m=h.node;m.appendChild(h.doc.createTextNode(""));h.node=m.parentNode},writeText:function(h){if(this.valid)h=h.replace(/>/g,"%MCGT%");this.node.appendChild(this.doc.createTextNode(h))},writeCDATA:function(h){this.node.appendChild(this.doc.createCDATASection(h))},
writeComment:function(h){if(l.isIE)h=h.replace(/^\-|\-$/g," ");this.node.appendChild(this.doc.createComment(h.replace(/\-\-/g," ")))},getContent:function(){var h;h=this.doc.xml||(new XMLSerializer).serializeToString(this.doc);h=h.replace(/<\?[^?]+\?>|<html>|<\/html>|<html\/>|<!DOCTYPE[^>]+>/g,"");h=h.replace(/ ?\/>/g," />");if(this.valid)h=h.replace(/\%MCGT%/g,"&gt;");return h}})})(tinymce);
(function(l){l.create("tinymce.dom.StringWriter",{str:null,tags:null,count:0,settings:null,indent:null,StringWriter:function(h){this.settings=l.extend({indent_char:" ",indentation:0},h);this.reset()},reset:function(){this.str=this.indent="";this.tags=[];this.count=0},writeStartElement:function(h){this._writeAttributesEnd();this.writeRaw("<"+h);this.tags.push(h);this.inAttr=true;this.count++;this.elementCount=this.count},writeAttribute:function(h,m){var k=this;k.writeRaw(" "+k.encode(h)+'="'+k.encode(m)+
'"')},writeEndElement:function(){var h;if(this.tags.length>0){h=this.tags.pop();this._writeAttributesEnd(1)&&this.writeRaw("</"+h+">");this.settings.indentation>0&&this.writeRaw("\n")}},writeFullEndElement:function(){if(this.tags.length>0){this._writeAttributesEnd();this.writeRaw("</"+this.tags.pop()+">");this.settings.indentation>0&&this.writeRaw("\n")}},writeText:function(h){this._writeAttributesEnd();this.writeRaw(this.encode(h));this.count++},writeCDATA:function(h){this._writeAttributesEnd();
this.writeRaw("<![CDATA["+h+"]]\>");this.count++},writeComment:function(h){this._writeAttributesEnd();this.writeRaw("<!-- "+h+"--\>");this.count++},writeRaw:function(h){this.str+=h},encode:function(h){return h.replace(/[<>&"]/g,function(m){switch(m){case "<":return"&lt;";case ">":return"&gt;";case "&":return"&amp;";case '"':return"&quot;"}return m})},getContent:function(){return this.str},_writeAttributesEnd:function(h){if(this.inAttr){this.inAttr=false;if(h&&this.elementCount==this.count){this.writeRaw(" />");
return false}this.writeRaw(">");return true}}})})(tinymce);
(function(l){function h(b){return b.replace(/([?+*])/g,".$1")}var m=l.extend,k=l.each,p=l.util.Dispatcher,c=l.isIE,a=l.isGecko;l.create("tinymce.dom.Serializer",{Serializer:function(b){var d=this;d.key=0;d.onPreProcess=new p(d);d.onPostProcess=new p(d);try{d.writer=new l.dom.XMLWriter}catch(e){d.writer=new l.dom.StringWriter}d.settings=b=m({dom:l.DOM,valid_nodes:0,node_filter:0,attr_filter:0,invalid_attrs:/^(mce_|_moz_|sizset|sizcache)/,closed:/^(br|hr|input|meta|img|link|param|area)$/,entity_encoding:"named",
entities:"160,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro",
valid_elements:"*[*]",extended_valid_elements:0,valid_child_elements:0,invalid_elements:0,fix_table_elements:1,fix_list_elements:true,fix_content_duplication:true,convert_fonts_to_spans:false,font_size_classes:0,font_size_style_values:0,apply_source_formatting:0,indent_mode:"simple",indent_char:"\t",indent_levels:1,remove_linebreaks:1,remove_redundant_brs:1,element_format:"xhtml"},b);d.dom=b.dom;b.remove_redundant_brs&&d.onPostProcess.add(function(g,n){n.content=n.content.replace(/(<br \/>\s*)+<\/(p|h[1-6]|div|li)>/gi,
function(o,s,j){if(/^<br \/>\s*<\//.test(o))return"</"+j+">";return o})});b.element_format=="html"&&d.onPostProcess.add(function(g,n){n.content=n.content.replace(/<([^>]+) \/>/g,"<$1>")});b.fix_list_elements&&d.onPreProcess.add(function(g,n){function o(v,x){x=x.split(",");for(var w;(v=v.previousSibling)!=null;)for(w=0;w<x.length;w++)if(v.nodeName==x[w])return v;return null}var s,j=["ol","ul"],i,f,q,r=/^(OL|UL)$/,t;for(s=0;s<j.length;s++){g=d.dom.select(j[s],n.node);for(i=0;i<g.length;i++){f=g[i];
q=f.parentNode;if(r.test(q.nodeName))if(t=o(f,"LI"))t.appendChild(f);else{t=d.dom.create("li");t.innerHTML="&nbsp;";t.appendChild(f);q.insertBefore(t,q.firstChild)}}}});b.fix_table_elements&&d.onPreProcess.add(function(g,n){if(!l.isOpera||opera.buildNumber()>=1767)k(d.dom.select("p table",n.node).reverse(),function(o){var s=d.dom.getParent(o.parentNode,"table,p");if(s.nodeName!="TABLE")try{d.dom.split(s,o)}catch(j){}})})},setEntities:function(b){var d=this,e,g={},n="",o;if(!d.entityLookup){b=b.split(",");
for(e=0;e<b.length;e+=2){o=b[e];if(!(o==34||o==38||o==60||o==62)){g[String.fromCharCode(b[e])]=b[e+1];o=parseInt(b[e]).toString(16);n+="\\u"+"0000".substring(o.length)+o}}if(n){d.entitiesRE=new RegExp("["+n+"]","g");d.entityLookup=g}else d.settings.entity_encoding="raw"}},setValidChildRules:function(b){this.childRules=null;this.addValidChildRules(b)},addValidChildRules:function(b){var d=this;if(b){k(b.split(","),function(e){var g=e.split(/\[|\]/),n;e="";k(g[1].split("|"),function(o){if(e)e+="|";switch(o){case "%itrans":o=
"A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment";break;case "%itrans_na":o="A|BR|SPAN|BDO|OBJECT|APPLET|IMG|MAP|IFRAME|TT|I|B|U|S|STRIKE|BIG|SMALL|FONT|BASEFONT|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|INPUT|SELECT|TEXTAREA|LABEL|BUTTON|#text|#comment".substring(2);break;case "%istrict":o="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment";
break;case "%istrict_na":o="A|BR|SPAN|BDO|MAP|OBJECT|IMG|TT|I|B|BIG|SMALL|EM|STRONG|DFN|CODE|Q|SAMP|KBD|VAR|CITE|ABBR|ACRONYM|SUB|SUP|#text|#comment".substring(2);break;case "%btrans":o="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP";break;case "%bstrict":o="H[1-6]|P|DIV|ADDRESS|PRE|FORM|TABLE|LI|OL|UL|TD|CAPTION|BLOCKQUOTE|CENTER|DL|DT|DD|DIR|FIELDSET|FORM|NOSCRIPT|NOFRAMES|MENU|ISINDEX|SAMP";break}e+=o});
n=new RegExp("^("+e.toLowerCase()+")$","i");k(g[0].split("/"),function(o){d.childRules=d.childRules||{};d.childRules[o]=n})});b="";k(d.childRules,function(e,g){if(b)b+="|";b+=g});d.parentElementsRE=new RegExp("^("+b.toLowerCase()+")$","i")}},setRules:function(b){var d=this;d._setup();d.rules={};d.wildRules=[];d.validElements={};return d.addRules(b)},addRules:function(b){var d=this,e;if(b){d._setup();k(b.split(","),function(g){g=g.split(/\[|\]/);var n=g[0].split("/"),o,s,j,i=[];if(e)s=l.extend([],
e.attribs);g.length>1&&k(g[1].split("|"),function(f){var q={},r;s=s||[];f=f.replace(/::/g,"~");f=/^([!\-])?([\w*.?~_\-]+|)([=:<])?(.+)?$/.exec(f);f[2]=f[2].replace(/~/g,":");if(f[1]=="!"){o=o||[];o.push(f[2])}if(f[1]=="-")for(r=0;r<s.length;r++)if(s[r].name==f[2]){s.splice(r,1);return}switch(f[3]){case "=":q.defaultVal=f[4]||"";break;case ":":q.forcedVal=f[4];break;case "<":q.validVals=f[4].split("?");break}if(/[*.?]/.test(f[2])){j=j||[];q.nameRE=new RegExp("^"+h(f[2])+"$");j.push(q)}else{q.name=
f[2];s.push(q)}i.push(f[2])});k(n,function(f,q){var r=f.charAt(0),t=1,v={};if(e){if(e.noEmpty)v.noEmpty=e.noEmpty;if(e.fullEnd)v.fullEnd=e.fullEnd;if(e.padd)v.padd=e.padd}switch(r){case "-":v.noEmpty=true;break;case "+":v.fullEnd=true;break;case "#":v.padd=true;break;default:t=0}n[q]=f=f.substring(t);d.validElements[f]=1;if(/[*.?]/.test(n[0])){v.nameRE=new RegExp("^"+h(n[0])+"$");d.wildRules=d.wildRules||{};d.wildRules.push(v)}else{v.name=n[0];if(n[0]=="@")e=v;d.rules[f]=v}v.attribs=s;if(o)v.requiredAttribs=
o;if(j){f="";k(i,function(x){if(f)f+="|";f+="("+h(x)+")"});v.validAttribsRE=new RegExp("^"+f.toLowerCase()+"$");v.wildAttribs=j}})});b="";k(d.validElements,function(g,n){if(b)b+="|";if(n!="@")b+=n});d.validElementsRE=new RegExp("^("+h(b.toLowerCase())+")$")}},findRule:function(b){var d=this,e=d.rules;d._setup();if(e=e[b])return e;e=d.wildRules;for(d=0;d<e.length;d++)if(e[d].nameRE.test(b))return e[d];return null},findAttribRule:function(b,d){var e=b.wildAttribs;for(b=0;b<e.length;b++)if(e[b].nameRE.test(d))return e[b];
return null},serialize:function(b,d){var e=this,g,n,o,s;e._setup();d=d||{};d.format=d.format||"html";e.processObj=d;if(c){s=[];k(b.getElementsByTagName("option"),function(j){j=e.dom.getAttrib(j,"selected");s.push(j?j:null)})}b=b.cloneNode(true);c&&k(b.getElementsByTagName("option"),function(j,i){e.dom.setAttrib(j,"selected",s[i])});o=b.ownerDocument.implementation;if(o.createHTMLDocument&&l.isOpera&&opera.buildNumber()>=1767){g=o.createHTMLDocument("");k(b.nodeName=="BODY"?b.childNodes:[b],function(j){g.body.appendChild(g.importNode(j,
true))});b=b.nodeName!="BODY"?g.body.firstChild:g.body;n=e.dom.doc;e.dom.doc=g}e.key=""+(parseInt(e.key)+1);if(!d.no_events){d.node=b;e.onPreProcess.dispatch(e,d)}e.writer.reset();e._serializeNode(b,d.getInner);d.content=e.writer.getContent();if(n)e.dom.doc=n;d.no_events||e.onPostProcess.dispatch(e,d);e._postProcess(d);d.node=null;return l.trim(d.content)},_postProcess:function(b){var d=this,e=d.settings,g=b.content,n;if(b.format=="html"){n=d._protect({content:g,patterns:[{pattern:/(<script[^>]*>)(.*?)(<\/script>)/g},
{pattern:/(<noscript[^>]*>)(.*?)(<\/noscript>)/g},{pattern:/(<style[^>]*>)(.*?)(<\/style>)/g},{pattern:/(<pre[^>]*>)(.*?)(<\/pre>)/g,encode:1},{pattern:/(<!--\[CDATA\[)(.*?)(\]\]--\>)/g}]});g=n.content;if(e.entity_encoding!=="raw")g=d._encode(g);if(!b.set){g=g.replace(/<p>\s+<\/p>|<p([^>]+)>\s+<\/p>/g,e.entity_encoding=="numeric"?"<p$1>&#160;</p>":"<p$1>&nbsp;</p>");if(e.remove_linebreaks){g=g.replace(/\r?\n|\r/g," ");g=g.replace(/(<[^>]+>)\s+/g,"$1 ");g=g.replace(/\s+(<\/[^>]+>)/g," $1");g=g.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object) ([^>]+)>\s+/g,
"<$1 $2>");g=g.replace(/<(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>\s+/g,"<$1>");g=g.replace(/\s+<\/(p|h[1-6]|blockquote|hr|div|table|tbody|tr|td|body|head|html|title|meta|style|pre|script|link|object)>/g,"</$1>")}if(e.apply_source_formatting&&e.indent_mode=="simple"){g=g.replace(/<(\/?)(ul|hr|table|meta|link|tbody|tr|object|body|head|html|map)(|[^>]+)>\s*/g,"\n<$1$2$3>\n");g=g.replace(/\s*<(p|h[1-6]|blockquote|div|title|style|pre|script|td|li|area)(|[^>]+)>/g,
"\n<$1$2>");g=g.replace(/<\/(p|h[1-6]|blockquote|div|title|style|pre|script|td|li)>\s*/g,"</$1>\n");g=g.replace(/\n\n/g,"\n")}}g=d._unprotect(g,n);g=g.replace(/<!--\[CDATA\[([\s\S]+)\]\]--\>/g,"<![CDATA[$1]]\>");if(e.entity_encoding=="raw")g=g.replace(/<p>&nbsp;<\/p>|<p([^>]+)>&nbsp;<\/p>/g,"<p$1>\u00a0</p>");g=g.replace(/<noscript([^>]+|)>([\s\S]*?)<\/noscript>/g,function(o,s,j){return"<noscript"+s+">"+d.dom.decode(j.replace(/<!--|--\>/g,""))+"</noscript>"})}b.content=g},_serializeNode:function(b,
d){var e=this,g=e.settings,n=e.writer,o,s,j,i,f,q,r,t,v,x;if(!g.node_filter||g.node_filter(b))switch(b.nodeType){case 1:if(b.hasAttribute?b.hasAttribute("mce_bogus"):b.getAttribute("mce_bogus"))return;v=false;o=b.hasChildNodes();r=b.getAttribute("mce_name")||b.nodeName.toLowerCase();if(c)if(b.scopeName!=="HTML"&&b.scopeName!=="html")r=b.scopeName+":"+r;if(r.indexOf("mce:")===0)r=r.substring(4);if(!e.validElementsRE||!e.validElementsRE.test(r)||e.invalidElementsRE&&e.invalidElementsRE.test(r)||d){v=
true;break}if(c){if(g.fix_content_duplication){if(b.mce_serialized==e.key)return;b.mce_serialized=e.key}if(r.charAt(0)=="/")r=r.substring(1)}else if(a)if(b.nodeName==="BR"&&b.getAttribute("type")=="_moz")return;if(e.childRules){if(e.parentElementsRE.test(e.elementName))if(!e.childRules[e.elementName].test(r)){v=true;break}e.elementName=r}t=e.findRule(r);r=t.name||r;x=g.closed.test(r);if(!o&&t.noEmpty||c&&!r){v=true;break}if(t.requiredAttribs){i=t.requiredAttribs;for(d=i.length-1;d>=0;d--)if(this.dom.getAttrib(b,
i[d])!=="")break;if(d==-1){v=true;break}}n.writeStartElement(r);if(t.attribs){d=0;f=t.attribs;for(j=f.length;d<j;d++){i=f[d];q=e._getAttrib(b,i);q!==null&&n.writeAttribute(i.name,q)}}if(t.validAttribsRE){f=e.dom.getAttribs(b);for(d=f.length-1;d>-1;d--){i=f[d];if(i.specified){i=i.nodeName.toLowerCase();if(!(g.invalid_attrs.test(i)||!t.validAttribsRE.test(i))){j=e.findAttribRule(t,i);q=e._getAttrib(b,j,i);q!==null&&n.writeAttribute(i,q)}}}}if(r==="script"&&l.trim(b.innerHTML)){n.writeText("// ");n.writeCDATA(b.innerHTML.replace(/<!--|--\>|<\[CDATA\[|\]\]>/g,
""));o=false;break}if(t.padd)if(o&&(s=b.firstChild)&&s.nodeType===1&&b.childNodes.length===1){if(s.hasAttribute?s.hasAttribute("mce_bogus"):s.getAttribute("mce_bogus"))n.writeText("\u00a0")}else o||n.writeText("\u00a0");break;case 3:if(e.childRules&&e.parentElementsRE.test(e.elementName))if(!e.childRules[e.elementName].test(b.nodeName))return;return n.writeText(b.nodeValue);case 4:return n.writeCDATA(b.nodeValue);case 8:return n.writeComment(b.nodeValue)}else if(b.nodeType==1)o=b.hasChildNodes();
if(o&&!x)for(s=b.firstChild;s;){e._serializeNode(s);e.elementName=r;s=s.nextSibling}v||(x?n.writeEndElement():n.writeFullEndElement())},_protect:function(b){function d(n){return n.replace(/[\r\n\\]/g,function(o){if(o==="\n")return"\\n";else if(o==="\\")return"\\\\";return"\\r"})}function e(n){return n.replace(/\\[\\rn]/g,function(o){if(o==="\\n")return"\n";else if(o==="\\\\")return"\\";return"\r"})}var g=this;b.items=b.items||[];k(b.patterns,function(n){b.content=e(d(b.content).replace(n.pattern,
function(o,s,j,i){j=e(j);if(n.encode)j=g._encode(j);b.items.push(j);return s+"<!--mce:"+(b.items.length-1)+"--\>"+i}))});return b},_unprotect:function(b,d){b=b.replace(/\<!--mce:([0-9]+)--\>/g,function(e,g){return d.items[parseInt(g)]});d.items=[];return b},_encode:function(b){var d=this,e=d.settings,g;if(e.entity_encoding!=="raw"){if(e.entity_encoding.indexOf("named")!=-1){d.setEntities(e.entities);g=d.entityLookup;b=b.replace(d.entitiesRE,function(n){var o;if(o=g[n])n="&"+o+";";return n})}if(e.entity_encoding.indexOf("numeric")!=
-1)b=b.replace(/[\u007E-\uFFFF]/g,function(n){return"&#"+n.charCodeAt(0)+";"})}return b},_setup:function(){var b=this,d=this.settings;if(!b.done){b.done=1;b.setRules(d.valid_elements);b.addRules(d.extended_valid_elements);b.addValidChildRules(d.valid_child_elements);if(d.invalid_elements)b.invalidElementsRE=new RegExp("^("+h(d.invalid_elements.replace(/,/g,"|").toLowerCase())+")$");if(d.attrib_value_filter)b.attribValueFilter=d.attribValueFilter}},_getAttrib:function(b,d,e){var g;e=e||d.name;if(d.forcedVal&&
(g=d.forcedVal)){if(g==="{$uid}")return this.dom.uniqueId();return g}g=this.dom.getAttrib(b,e);switch(e){case "rowspan":case "colspan":if(g=="1")g="";break}if(this.attribValueFilter)g=this.attribValueFilter(e,g,b);if(d.validVals){for(b=d.validVals.length-1;b>=0;b--)if(g==d.validVals[b])break;if(b==-1)return null}if(g===""&&typeof d.defaultVal!="undefined"){g=d.defaultVal;if(g==="{$uid}")return this.dom.uniqueId();return g}else if(e=="class"&&this.processObj.get)g=g.replace(/\s?mceItem\w+\s?/g,"");
if(g==="")return null;return g}})})(tinymce);
(function(l){var h=l.each,m=l.dom.Event;l.create("tinymce.dom.ScriptLoader",{ScriptLoader:function(k){this.settings=k||{};this.queue=[];this.lookup={}},isDone:function(k){return this.lookup[k]?this.lookup[k].state==2:0},markDone:function(k){this.lookup[k]={state:2,url:k}},add:function(k,p,c,a){var b=this,d=b.lookup,e;if(e=d[k]){if(p&&e.state==2)p.call(c||this);return e}e={state:0,url:k,func:p,scope:c||this};a?b.queue.unshift(e):b.queue.push(e);return d[k]=e},load:function(k,p,c){function a(e){m.domLoaded||
b.settings.strict_mode?l.util.XHR.send({url:l._addVer(e),error:b.settings.error,async:false,success:function(g){b.eval(g)}}):document.write('<script type="text/javascript" src="'+l._addVer(e)+'"><\/script>')}var b=this,d;if(d=b.lookup[k]){if(p&&d.state==2)p.call(c||b);return d}l.is(k,"string")?a(k):h(k,function(e){a(e)});if(p)p.call(c||b)},loadQueue:function(k,p){var c=this;if(c.queueLoading){if(k)c.queueCallbacks.push({func:k,scope:p||c})}else{c.queueLoading=1;c.queueCallbacks=[];c.loadScripts(c.queue,
function(){c.queueLoading=0;if(k)k.call(p||c);h(c.queueCallbacks,function(a){a.func.call(a.scope)})})}},eval:function(k){var p=window;if(p.execScript)p.execScript(k);else try{eval.call(p,k)}catch(c){eval(k,p)}},loadScripts:function(k,p,c){function a(n){n.state=2;if(n.func)n.func.call(n.scope||e)}function b(){var n;n=k.length;h(k,function(o){o=g[o.url];if(o.state===2){a(o);n--}else d(o)});if(n===0&&p){p.call(c||e);p=0}}function d(n){if(!(n.state>0)){n.state=1;l.dom.ScriptLoader.loadScript(n.url,function(){a(n);
b()})}}var e=this,g=e.lookup;h(k,function(n){var o=n.url;if(g[o])n=g[o];else{g[o]=n;e.queue.push(n)}if(!(n.state>0))if(!m.domLoaded&&!e.settings.strict_mode){var s,j="";if(p||n.func){n.state=1;s=l.dom.ScriptLoader._addOnLoad(function(){a(n);b()});j=l.isIE?' onreadystatechange="':' onload="';j+="tinymce.dom.ScriptLoader._onLoad(this,'"+o+"',"+s+');"'}document.write('<script type="text/javascript" src="'+l._addVer(o)+'"'+j+"><\/script>");n.func||a(n)}else d(n)});b()},"static":{_addOnLoad:function(k){var p=
this;p._funcs=p._funcs||[];p._funcs.push(k);return p._funcs.length-1},_onLoad:function(k,p,c){if(!l.isIE||k.readyState=="complete")this._funcs[c].call(this)},loadScript:function(k,p){function c(){m.clear(a);l.DOM.remove(a);if(p){p.call(document,k);p=0}}var a=l.DOM.uniqueId(),b;if(l.isIE)l.util.XHR.send({url:l._addVer(k),async:false,success:function(d){window.execScript(d);c()}});else{b=l.DOM.create("script",{id:a,type:"text/javascript",src:l._addVer(k)});m.add(b,"load",c);(document.getElementsByTagName("head")[0]||
document.body).appendChild(b)}}}});l.ScriptLoader=new l.dom.ScriptLoader})(tinymce);
(function(l){var h=l.DOM,m=l.is;l.create("tinymce.ui.Control",{Control:function(k,p){this.id=k;this.settings=p=p||{};this.rendered=false;this.onRender=new l.util.Dispatcher(this);this.classPrefix="";this.scope=p.scope||this;this.active=this.disabled=0},setDisabled:function(k){var p;if(k!=this.disabled){if((p=h.get(this.id))&&this.settings.unavailable_prefix)if(k){this.prevTitle=p.title;p.title=this.settings.unavailable_prefix+": "+p.title}else p.title=this.prevTitle;this.setState("Disabled",k);this.setState("Enabled",
!k);this.disabled=k}},isDisabled:function(){return this.disabled},setActive:function(k){if(k!=this.active){this.setState("Active",k);this.active=k}},isActive:function(){return this.active},setState:function(k,p){var c=h.get(this.id);k=this.classPrefix+k;p?h.addClass(c,k):h.removeClass(c,k)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(k){h.setHTML(k,this.renderHTML())},postRender:function(){var k=this,p;if(m(k.disabled)){p=k.disabled;k.disabled=-1;k.setDisabled(p)}if(m(k.active)){p=
k.active;k.active=-1;k.setActive(p)}},remove:function(){h.remove(this.id);this.destroy()},destroy:function(){l.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(l,h){this.parent(l,h);this.controls=[];this.lookup={}},add:function(l){this.lookup[l.id]=l;this.controls.push(l);return l},get:function(l){return this.lookup[l]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(l,h){this.parent(l,h);this.classPrefix="mceSeparator"},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix})}});
(function(l){var h=l.is;l.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(m,k){this.parent(m,k);this.classPrefix="mceMenuItem"},setSelected:function(m){this.setState("Selected",m);this.selected=m},isSelected:function(){return this.selected},postRender:function(){var m=this;m.parent();h(m.selected)&&m.setSelected(m.selected)}})})(tinymce);
(function(l){var h=l.DOM,m=l.walk;l.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(k,p){var c=this;c.parent(k,p);c.items={};c.collapsed=false;c.menuCount=0;c.onAddItem=new l.util.Dispatcher(this)},expand:function(k){var p=this;k&&m(p,function(c){c.expand&&c.expand()},"items",p);p.collapsed=false},collapse:function(k){var p=this;k&&m(p,function(c){c.collapse&&c.collapse()},"items",p);p.collapsed=true},isCollapsed:function(){return this.collapsed},add:function(k){k.settings||(k=new l.ui.MenuItem(k.id||
h.uniqueId(),k));this.onAddItem.dispatch(this,k);return this.items[k.id]=k},addSeparator:function(){return this.add({separator:true})},addMenu:function(k){k.collapse||(k=this.createMenu(k));this.menuCount++;return this.add(k)},hasMenus:function(){return this.menuCount!==0},remove:function(k){delete this.items[k.id]},removeAll:function(){var k=this;m(k,function(p){p.removeAll?p.removeAll():p.remove();p.destroy()},"items",k);k.items={}},createMenu:function(k){k=new l.ui.Menu(k.id||h.uniqueId(),k);k.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return k}})})(tinymce);
(function(l){var h=l.is,m=l.DOM,k=l.each,p=l.dom.Event,c=l.dom.Element;l.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||m.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;if(h(b.icons)&&!b.icons)b["class"]+=" mceNoIcons";this.parent(a,b);this.onShowMenu=new l.util.Dispatcher(this);this.onHideMenu=new l.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b=
this,d=b.settings;a.container=a.container||d.container;a.parent=b;a.constrain=a.constrain||d.constrain;a["class"]=a["class"]||d["class"];a.vp_offset_x=a.vp_offset_x||d.vp_offset_x;a.vp_offset_y=a.vp_offset_y||d.vp_offset_y;a=new l.ui.DropMenu(a.id||m.uniqueId(),a);a.onAddItem.add(b.onAddItem.dispatch,b.onAddItem);return a},update:function(){var a=this,b=a.settings,d=m.get("menu_"+a.id+"_tbl"),e=m.get("menu_"+a.id+"_co"),g,n;g=b.max_width?Math.min(d.clientWidth,b.max_width):d.clientWidth;n=b.max_height?
Math.min(d.clientHeight,b.max_height):d.clientHeight;m.boxModel?a.element.setStyles({width:g,height:n}):a.element.setStyles({width:g+2,height:n+2});b.max_width&&m.setStyle(e,"width",g);if(b.max_height){m.setStyle(e,"height",n);d.clientHeight<b.max_height&&m.setStyle(e,"overflow","hidden")}},showMenu:function(a,b,d){var e=this,g=e.settings,n,o=m.getViewPort(),s,j,i,f,q=e.classPrefix;e.collapse(1);if(!e.isMenuVisible){if(e.rendered)n=m.get("menu_"+e.id);else{n=m.add(e.settings.container,e.renderNode());
k(e.items,function(r){r.postRender()});e.element=new c("menu_"+e.id,{blocker:1,container:g.container})}l.isOpera||m.setStyles(n,{left:-65535,top:-65535});m.show(n);e.update();a+=g.offset_x||0;b+=g.offset_y||0;o.w-=4;o.h-=4;if(g.constrain){s=n.clientWidth-2;j=n.clientHeight-2;i=o.x+o.w;o=o.y+o.h;if(a+g.vp_offset_x+s>i)a=d?d-s:Math.max(0,i-g.vp_offset_x-s);if(b+g.vp_offset_y+j>o)b=Math.max(0,o-g.vp_offset_y-j)}m.setStyles(n,{left:a,top:b});e.element.update();e.isMenuVisible=1;e.mouseClickFunc=p.add(n,
"click",function(r){var t;if((r=r.target)&&(r=m.getParent(r,"tr"))&&!m.hasClass(r,q+"ItemSub")){t=e.items[r.id];if(!t.isDisabled()){for(f=e;f;){f.hideMenu&&f.hideMenu();f=f.settings.parent}t.settings.onclick&&t.settings.onclick(r);return p.cancel(r)}}});if(e.hasMenus())e.mouseOverFunc=p.add(n,"mouseover",function(r){var t;if((r=r.target)&&(r=m.getParent(r,"tr"))){t=e.items[r.id];e.lastMenu&&e.lastMenu.collapse(1);if(!t.isDisabled())if(r&&m.hasClass(r,q+"ItemSub")){r=m.getRect(r);t.showMenu(r.x+r.w-
2,r.y-2,r.x);e.lastMenu=t;m.addClass(m.get(t.id).firstChild,q+"ItemActive")}}});e.onShowMenu.dispatch(e);if(g.keyboard_focus){p.add(n,"keydown",e._keyHandler,e);m.select("a","menu_"+e.id)[0].focus();e._focusIdx=0}}},hideMenu:function(a){var b=this,d=m.get("menu_"+b.id);if(b.isMenuVisible){p.remove(d,"mouseover",b.mouseOverFunc);p.remove(d,"click",b.mouseClickFunc);p.remove(d,"keydown",b._keyHandler);m.hide(d);b.isMenuVisible=0;a||b.collapse(1);b.element&&b.element.hide();if(a=m.get(b.id))m.removeClass(a.firstChild,
b.classPrefix+"ItemActive");b.onHideMenu.dispatch(b)}},add:function(a){var b=this,d;a=b.parent(a);if(b.isRendered&&(d=m.get("menu_"+b.id)))b._add(m.select("tbody",d)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){m.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=this,b=m.get("menu_"+a.id);p.remove(b,"mouseover",a.mouseOverFunc);p.remove(b,"click",a.mouseClickFunc);a.element&&a.element.remove();m.remove(b)},renderNode:function(){var a=
this,b=a.settings,d,e,g;g=m.create("div",{id:"menu_"+a.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000"});e=m.add(g,"div",{id:"menu_"+a.id+"_co","class":a.classPrefix+(b["class"]?" "+b["class"]:"")});a.element=new c("menu_"+a.id,{blocker:1,container:b.container});b.menu_line&&m.add(e,"span",{"class":a.classPrefix+"Line"});b=m.add(e,"table",{id:"menu_"+a.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});d=m.add(b,"tbody");k(a.items,function(n){a._add(d,n)});a.rendered=true;
return g},_keyHandler:function(a){function b(e){e=d._focusIdx+e;var g=m.select("a","menu_"+d.id)[e];if(g){d._focusIdx=e;g.focus()}}var d=this;switch(a.keyCode){case 38:b(-1);return;case 40:b(1);return;case 13:return;case 27:return this.hideMenu()}},_add:function(a,b){var d,e=b.settings,g,n,o=this.classPrefix;if(e.separator){g=m.add(a,"tr",{id:b.id,"class":o+"ItemSeparator"});m.add(g,"td",{"class":o+"ItemSeparator"});if(d=g.previousSibling)m.addClass(d,"mceLast")}else{d=g=m.add(a,"tr",{id:b.id,"class":o+
"Item "+o+"ItemEnabled"});d=n=m.add(d,"td");d=m.add(d,"a",{href:"javascript:;",onclick:"return false;",onmousedown:"return false;"});m.addClass(n,e["class"]);n=m.add(d,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")});e.icon_src&&m.add(n,"img",{src:e.icon_src});d=m.add(d,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title);b.settings.style&&m.setAttrib(d,"style",b.settings.style);a.childNodes.length==1&&m.addClass(g,"mceFirst");if((d=g.previousSibling)&&m.hasClass(d,
o+"ItemSeparator"))m.addClass(g,"mceFirst");b.collapse&&m.addClass(g,o+"ItemSub");if(d=g.previousSibling)m.removeClass(d,"mceLast");m.addClass(g,"mceLast")}}})})(tinymce);
(function(l){var h=l.DOM;l.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(m,k){this.parent(m,k);this.classPrefix="mceButton"},renderHTML:function(){var m=this.classPrefix,k=this.settings,p,c;c=h.encode(k.label||"");p='<a id="'+this.id+'" href="javascript:;" class="'+m+" "+m+"Enabled "+k["class"]+(c?" "+m+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" title="'+h.encode(k.title)+'">';p+=k.image?'<img class="mceIcon" src="'+k.image+'" />'+c+"</a>":'<span class="mceIcon '+
k["class"]+'"></span>'+(c?'<span class="'+m+'Label">'+c+"</span>":"")+"</a>";return p},postRender:function(){var m=this,k=m.settings;l.dom.Event.add(m.id,"click",function(p){if(!m.isDisabled())return k.onclick.call(k.scope,p)})}})})(tinymce);
(function(l){var h=l.DOM,m=l.dom.Event,k=l.each,p=l.util.Dispatcher;l.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(c,a){var b=this;b.parent(c,a);b.items=[];b.onChange=new p(b);b.onPostRender=new p(b);b.onAdd=new p(b);b.onRenderMenu=new l.util.Dispatcher(this);b.classPrefix="mceListBox"},select:function(c){var a=this,b,d;if(c==undefined)return a.selectByIndex(-1);d=c&&c.call?c:function(e){return e==c};if(c!=a.selectedValue){k(a.items,function(e,g){if(d(e.value)){b=1;a.selectByIndex(g);
return false}});b||a.selectByIndex(-1)}},selectByIndex:function(c){var a=this,b,d;if(c!=a.selectedIndex){b=h.get(a.id+"_text");if(d=a.items[c]){a.selectedValue=d.value;a.selectedIndex=c;h.setHTML(b,h.encode(d.title));h.removeClass(b,"mceTitle")}else{h.setHTML(b,h.encode(a.settings.title));h.addClass(b,"mceTitle");a.selectedValue=a.selectedIndex=null}}},add:function(c,a,b){var d=this;b=b||{};b=l.extend(b,{title:c,value:a});d.items.push(b);d.onAdd.dispatch(d,b)},getLength:function(){return this.items.length},
renderHTML:function(){var c="",a=this;c=a.settings;var b=a.classPrefix;c='<table id="'+a.id+'" cellpadding="0" cellspacing="0" class="'+b+" "+b+"Enabled"+(c["class"]?" "+c["class"]:"")+'"><tbody><tr>';c+="<td>"+h.createHTML("a",{id:a.id+"_text",href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},h.encode(a.settings.title))+"</td>";c+="<td>"+h.createHTML("a",{id:a.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},
"<span></span>")+"</td>";c+="</tr></tbody></table>";return c},showMenu:function(){var c=this,a,b=h.get(this.id),d;if(!(c.isDisabled()||c.items.length==0)){if(c.menu&&c.menu.isMenuVisible)return c.hideMenu();if(!c.isMenuRendered){c.renderMenu();c.isMenuRendered=true}h.getPos(this.settings.menu_container);a=h.getPos(b);d=c.menu;d.settings.offset_x=a.x;d.settings.offset_y=a.y;d.settings.keyboard_focus=!l.isOpera;c.oldID&&d.items[c.oldID].setSelected(0);k(c.items,function(e){if(e.value===c.selectedValue){d.items[e.id].setSelected(1);
c.oldID=e.id}});d.showMenu(0,b.clientHeight);m.add(h.doc,"mousedown",c.hideMenu,c);h.addClass(c.id,c.classPrefix+"Selected")}},hideMenu:function(c){var a=this;if(!(c&&c.type=="mousedown"&&(c.target.id==a.id+"_text"||c.target.id==a.id+"_open")))if(!c||!h.getParent(c.target,".mceMenu")){h.removeClass(a.id,a.classPrefix+"Selected");m.remove(h.doc,"mousedown",a.hideMenu,a);a.menu&&a.menu.hideMenu()}},renderMenu:function(){var c=this,a;a=c.settings.control_manager.createDropMenu(c.id+"_menu",{menu_line:1,
"class":c.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});a.onHideMenu.add(c.hideMenu,c);a.add({title:c.settings.title,"class":"mceMenuItemTitle",onclick:function(){c.settings.onselect("")!==false&&c.select("")}});k(c.items,function(b){b.id=h.uniqueId();b.onclick=function(){c.settings.onselect(b.value)!==false&&c.select(b.value)};a.add(b)});c.onRenderMenu.dispatch(c,a);c.menu=a},postRender:function(){var c=this,a=c.classPrefix;m.add(c.id,"click",c.showMenu,c);m.add(c.id+"_text","focus",
function(){if(!c._focused)c.keyDownHandler=m.add(c.id+"_text","keydown",function(b){var d=-1,e,g=b.keyCode;k(c.items,function(n,o){if(c.selectedValue==n.value)d=o});if(g==38)e=c.items[d-1];else if(g==40)e=c.items[d+1];else if(g==13){e=c.selectedValue;c.selectedValue=null;c.settings.onselect(e);return m.cancel(b)}if(e){c.hideMenu();c.select(e.value)}});c._focused=1});m.add(c.id+"_text","blur",function(){m.remove(c.id+"_text","keydown",c.keyDownHandler);c._focused=0});if(l.isIE6||!h.boxModel){m.add(c.id,
"mouseover",function(){h.hasClass(c.id,a+"Disabled")||h.addClass(c.id,a+"Hover")});m.add(c.id,"mouseout",function(){h.hasClass(c.id,a+"Disabled")||h.removeClass(c.id,a+"Hover")})}c.onPostRender.dispatch(c,h.get(c.id))},destroy:function(){this.parent();m.clear(this.id+"_text");m.clear(this.id+"_open")}})})(tinymce);
(function(l){var h=l.DOM,m=l.dom.Event,k=l.each;l.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(p,c){this.parent(p,c);this.classPrefix="mceNativeListBox"},setDisabled:function(p){h.get(this.id).disabled=p},isDisabled:function(){return h.get(this.id).disabled},select:function(p){var c=this,a,b;if(p==undefined)return c.selectByIndex(-1);b=p&&p.call?p:function(d){return d==p};if(p!=c.selectedValue){k(c.items,function(d,e){if(b(d.value)){a=1;c.selectByIndex(e);return false}});
a||c.selectByIndex(-1)}},selectByIndex:function(p){h.get(this.id).selectedIndex=p+1;this.selectedValue=this.items[p]?this.items[p].value:null},add:function(p,c,a){var b=this;a=a||{};a.value=c;b.isRendered()&&h.add(h.get(this.id),"option",a,p);p={title:p,value:c,attribs:a};b.items.push(p);b.onAdd.dispatch(b,p)},getLength:function(){return h.get(this.id).options.length-1},renderHTML:function(){var p,c=this;p=h.createHTML("option",{value:""},"-- "+c.settings.title+" --");k(c.items,function(a){p+=h.createHTML("option",
{value:a.value},a.title)});return p=h.createHTML("select",{id:c.id,"class":"mceNativeListBox"},p)},postRender:function(){function p(b){if((b=c.items[b.target.selectedIndex-1])&&(b=b.value)){c.onChange.dispatch(c,b);c.settings.onselect&&c.settings.onselect(b)}}var c=this,a;c.rendered=true;m.add(c.id,"change",p);m.add(c.id,"keydown",function(b){var d;m.remove(c.id,"change",a);d=m.add(c.id,"blur",function(){m.add(c.id,"change",p);m.remove(c.id,"blur",d)});if(b.keyCode==13||b.keyCode==32){p(b);return m.cancel(b)}});
c.onPostRender.dispatch(c,h.get(c.id))}})})(tinymce);
(function(l){var h=l.DOM,m=l.dom.Event;l.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(k,p){this.parent(k,p);this.onRenderMenu=new l.util.Dispatcher(this);p.menu_container=p.menu_container||h.doc.body},showMenu:function(){var k=this,p,c=h.get(k.id),a;if(!k.isDisabled()){if(!k.isMenuRendered){k.renderMenu();k.isMenuRendered=true}if(k.isMenuVisible)return k.hideMenu();h.getPos(k.settings.menu_container);p=h.getPos(c);a=k.menu;a.settings.offset_x=p.x;a.settings.offset_y=p.y;a.settings.vp_offset_x=
p.x;a.settings.vp_offset_y=p.y;a.settings.keyboard_focus=k._focused;a.showMenu(0,c.clientHeight);m.add(h.doc,"mousedown",k.hideMenu,k);k.setState("Selected",1);k.isMenuVisible=1}},renderMenu:function(){var k=this,p;p=k.settings.control_manager.createDropMenu(k.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:k.settings.icons});p.onHideMenu.add(k.hideMenu,k);k.onRenderMenu.dispatch(k,p);k.menu=p},hideMenu:function(k){var p=this;if(!(k&&k.type=="mousedown"&&h.getParent(k.target,function(c){return c.id===
p.id||c.id===p.id+"_open"}))){if(!k||!h.getParent(k.target,".mceMenu")){p.setState("Selected",0);m.remove(h.doc,"mousedown",p.hideMenu,p);p.menu&&p.menu.hideMenu()}p.isMenuVisible=0}},postRender:function(){var k=this,p=k.settings;m.add(k.id,"click",function(){if(!k.isDisabled()){p.onclick&&p.onclick(k.value);k.showMenu()}})}})})(tinymce);
(function(l){var h=l.DOM,m=l.dom.Event;l.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(k,p){this.parent(k,p);this.classPrefix="mceSplitButton"},renderHTML:function(){var k,p=this,c=p.settings,a;k="<tbody><tr>";a=c.image?h.createHTML("img ",{src:c.image,"class":"mceAction "+c["class"]}):h.createHTML("span",{"class":"mceAction "+c["class"]},"");k+="<td>"+h.createHTML("a",{id:p.id+"_action",href:"javascript:;","class":"mceAction "+c["class"],onclick:"return false;",onmousedown:"return false;",
title:c.title},a)+"</td>";a=h.createHTML("span",{"class":"mceOpen "+c["class"]});k+="<td>"+h.createHTML("a",{id:p.id+"_open",href:"javascript:;","class":"mceOpen "+c["class"],onclick:"return false;",onmousedown:"return false;",title:c.title},a)+"</td>";k+="</tr></tbody>";return h.createHTML("table",{id:p.id,"class":"mceSplitButton mceSplitButtonEnabled "+c["class"],cellpadding:"0",cellspacing:"0",onmousedown:"return false;",title:c.title},k)},postRender:function(){var k=this,p=k.settings;p.onclick&&
m.add(k.id+"_action","click",function(){k.isDisabled()||p.onclick(k.value)});m.add(k.id+"_open","click",k.showMenu,k);m.add(k.id+"_open","focus",function(){k._focused=1});m.add(k.id+"_open","blur",function(){k._focused=0});if(l.isIE6||!h.boxModel){m.add(k.id,"mouseover",function(){h.hasClass(k.id,"mceSplitButtonDisabled")||h.addClass(k.id,"mceSplitButtonHover")});m.add(k.id,"mouseout",function(){h.hasClass(k.id,"mceSplitButtonDisabled")||h.removeClass(k.id,"mceSplitButtonHover")})}},destroy:function(){this.parent();
m.clear(this.id+"_action");m.clear(this.id+"_open")}})})(tinymce);
(function(l){var h=l.DOM,m=l.dom.Event,k=l.is,p=l.each;l.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(c,a){var b=this;b.parent(c,a);b.settings=a=l.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
b.settings);b.onShowMenu=new l.util.Dispatcher(b);b.onHideMenu=new l.util.Dispatcher(b);b.value=a.default_color},showMenu:function(){var c=this,a,b;if(!c.isDisabled()){if(!c.isMenuRendered){c.renderMenu();c.isMenuRendered=true}if(c.isMenuVisible)return c.hideMenu();a=h.get(c.id);h.show(c.id+"_menu");h.addClass(a,"mceSplitButtonSelected");b=h.getPos(a);h.setStyles(c.id+"_menu",{left:b.x,top:b.y+a.clientHeight,zIndex:2E5});a=0;m.add(h.doc,"mousedown",c.hideMenu,c);c.onShowMenu.dispatch(c);if(c._focused){c._keyHandler=
m.add(c.id+"_menu","keydown",function(d){d.keyCode==27&&c.hideMenu()});h.select("a",c.id+"_menu")[0].focus()}c.isMenuVisible=1}},hideMenu:function(c){var a=this;if(!(c&&c.type=="mousedown"&&h.getParent(c.target,function(b){return b.id===a.id+"_open"}))){if(!c||!h.getParent(c.target,".mceSplitButtonMenu")){h.removeClass(a.id,"mceSplitButtonSelected");m.remove(h.doc,"mousedown",a.hideMenu,a);m.remove(a.id+"_menu","keydown",a._keyHandler);h.hide(a.id+"_menu")}a.onHideMenu.dispatch(a);a.isMenuVisible=
0}},renderMenu:function(){var c=this,a,b=0,d=c.settings,e,g,n,o;o=h.add(d.menu_container,"div",{id:c.id+"_menu","class":d.menu_class+" "+d["class"],style:"position:absolute;left:0;top:-1000px;"});a=h.add(o,"div",{"class":d["class"]+" mceSplitButtonMenu"});h.add(a,"span",{"class":"mceMenuLine"});e=h.add(a,"table",{"class":"mceColorSplitMenu"});g=h.add(e,"tbody");b=0;p(k(d.colors,"array")?d.colors:d.colors.split(","),function(s){s=s.replace(/^#/,"");if(!b--){n=h.add(g,"tr");b=d.grid_width-1}e=h.add(n,
"td");e=h.add(e,"a",{href:"javascript:;",style:{backgroundColor:"#"+s},mce_color:"#"+s})});if(d.more_colors_func){e=h.add(g,"tr");e=h.add(e,"td",{colspan:d.grid_width,"class":"mceMoreColors"});e=h.add(e,"a",{id:c.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},d.more_colors_title);m.add(e,"click",function(s){d.more_colors_func.call(d.more_colors_scope||this);return m.cancel(s)})}h.addClass(a,"mceColorSplitMenu");m.add(c.id+"_menu","click",function(s){var j;s=s.target;
if(s.nodeName=="A"&&(j=s.getAttribute("mce_color")))c.setColor(j);return m.cancel(s)});return o},setColor:function(c){var a=this;h.setStyle(a.id+"_preview","backgroundColor",c);a.value=c;a.hideMenu();a.settings.onselect(c)},postRender:function(){var c=this,a=c.id;c.parent();h.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});h.setStyle(c.id+"_preview","backgroundColor",c.value)},destroy:function(){this.parent();m.clear(this.id+"_menu");m.clear(this.id+"_more");h.remove(this.id+"_menu")}})})(tinymce);
tinymce.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var l=this,h="",m,k,p=tinymce.DOM,c=l.settings,a,b,d,e;e=l.controls;for(a=0;a<e.length;a++){k=e[a];b=e[a-1];d=e[a+1];if(a===0){m="mceToolbarStart";if(k.Button)m+=" mceToolbarStartButton";else if(k.SplitButton)m+=" mceToolbarStartSplitButton";else if(k.ListBox)m+=" mceToolbarStartListBox";h+=p.createHTML("td",{"class":m},p.createHTML("span",null,"<!-- IE --\>"))}if(b&&k.ListBox)if(b.Button||b.SplitButton)h+=p.createHTML("td",
{"class":"mceToolbarEnd"},p.createHTML("span",null,"<!-- IE --\>"));h+=p.stdMode?'<td style="position: relative">'+k.renderHTML()+"</td>":"<td>"+k.renderHTML()+"</td>";if(d&&k.ListBox)if(d.Button||d.SplitButton)h+=p.createHTML("td",{"class":"mceToolbarStart"},p.createHTML("span",null,"<!-- IE --\>"))}m="mceToolbarEnd";if(k.Button)m+=" mceToolbarEndButton";else if(k.SplitButton)m+=" mceToolbarEndSplitButton";else if(k.ListBox)m+=" mceToolbarEndListBox";h+=p.createHTML("td",{"class":m},p.createHTML("span",
null,"<!-- IE --\>"));return p.createHTML("table",{id:l.id,"class":"mceToolbar"+(c["class"]?" "+c["class"]:""),cellpadding:"0",cellspacing:"0",align:l.settings.align||""},"<tbody><tr>"+h+"</tr></tbody>")}});
(function(l){l.create("tinymce.AddOnManager",{items:[],urls:{},lookup:{},onAdd:new l.util.Dispatcher(this),get:function(h){return this.lookup[h]},requireLangPack:function(h){var m=l.EditorManager.settings;if(m&&m.language){h=this.urls[h]+"/langs/"+m.language+".js";!l.dom.Event.domLoaded&&!m.strict_mode?l.ScriptLoader.load(h):l.ScriptLoader.add(h)}},add:function(h,m){this.items.push(m);this.lookup[h]=m;this.onAdd.dispatch(this,h,m);return m},load:function(h,m,k,p){var c=this;if(!c.urls[h]){if(m.indexOf("/")!=
0&&m.indexOf("://")==-1)m=l.baseURL+"/"+m;c.urls[h]=m.substring(0,m.lastIndexOf("/"));l.ScriptLoader.add(m,k,p)}}});l.PluginManager=new l.AddOnManager;l.ThemeManager=new l.AddOnManager})(tinymce);
(function(l){var h=l.each,m=l.extend,k=l.DOM,p=l.dom.Event,c=l.ThemeManager,a=l.PluginManager,b=l.explode;l.create("static tinymce.EditorManager",{editors:{},i18n:{},activeEditor:null,preInit:function(){var d=this;l.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,"");/[\/\\]$/.test(l.documentBaseURL)||(l.documentBaseURL+="/");l.baseURL=(new l.util.URI(l.documentBaseURL)).toAbsolute_(l.baseURL);l.EditorManager.baseURI=new l.util.URI(l.baseURL);d.onBeforeUnload=new l.util.Dispatcher(d);
p.add(window,"beforeunload",function(e){d.onBeforeUnload.dispatch(d,e)})},init:function(d){function e(f,q,r){var t=f[q];if(t){if(l.is(t,"string")){r=(r=t.replace(/\.\w+$/,""))?l.resolve(r):0;t=l.resolve(t)}return t.apply(r||this,Array.prototype.slice.call(arguments,2))}}var g=this,n,o=l.ScriptLoader,s,j=[],i;d=m({theme:"simple",language:"en",strict_loading_mode:document.contentType=="application/xhtml+xml"},d);g.settings=d;if(!p.domLoaded&&!d.strict_loading_mode){d.language&&o.add(l.baseURL+"/langs/"+
d.language+".js");d.theme&&d.theme.charAt(0)!="-"&&!c.urls[d.theme]&&c.load(d.theme,"themes/"+d.theme+"/editor_template"+l.suffix+".js");if(d.plugins){n=b(d.plugins);h(n,function(f){if(f&&f.charAt(0)!="-"&&!a.urls[f])!l.isWebKit&&f=="safari"||a.load(f,"plugins/"+f+"/editor_plugin"+l.suffix+".js")})}o.loadQueue()}p.add(document,"init",function(){var f,q;e(d,"onpageload");if(d.browsers){f=false;h(b(d.browsers),function(t){switch(t){case "ie":case "msie":if(l.isIE)f=true;break;case "gecko":if(l.isGecko)f=
true;break;case "safari":case "webkit":if(l.isWebKit)f=true;break;case "opera":if(l.isOpera)f=true;break}});if(!f)return}switch(d.mode){case "exact":f=d.elements||"";f.length>0&&h(b(f),function(t){if(k.get(t)){i=new l.Editor(t,d);j.push(i);i.render(1)}else h(document.forms,function(v){h(v.elements,function(x){if(x.name===t){t="mce_editor_0";k.setAttrib(x,"id",t);i=new l.Editor(t,d);j.push(i);i.render(1)}})})});break;case "textareas":case "specific_textareas":function r(t,v){return v.constructor===
RegExp?v.test(t.className):k.hasClass(t,v)}h(k.select("textarea"),function(t){if(!(d.editor_deselector&&r(t,d.editor_deselector)))if(!d.editor_selector||r(t,d.editor_selector)){s=k.get(t.name);if(!t.id&&!s)t.id=t.name;if(!t.id||g.get(t.id))t.id=k.uniqueId();i=new l.Editor(t.id,d);j.push(i);i.render(1)}});break}if(d.oninit){f=q=0;h(j,function(t){q++;if(t.initialized)f++;else t.onInit.add(function(){f++;f==q&&e(d,"oninit")});f==q&&e(d,"oninit")})}})},get:function(d){return this.editors[d]},getInstanceById:function(d){return this.get(d)},
add:function(d){this.editors[d.id]=d;this._setActive(d);return d},remove:function(d){var e=this;if(!e.editors[d.id])return null;delete e.editors[d.id];if(e.activeEditor==d){e._setActive(null);h(e.editors,function(g){e._setActive(g);return false})}d.destroy();return d},execCommand:function(d,e,g){var n=this,o=n.get(g),s;switch(d){case "mceFocus":o.focus();return true;case "mceAddEditor":case "mceAddControl":n.get(g)||(new l.Editor(g,n.settings)).render();return true;case "mceAddFrameControl":s=g.window;
s.tinyMCE=tinyMCE;s.tinymce=l;l.DOM.doc=s.document;l.DOM.win=s;o=new l.Editor(g.element_id,g);o.render();if(l.isIE){function j(){o.destroy();s.detachEvent("onunload",j);s=s.tinyMCE=s.tinymce=null}s.attachEvent("onunload",j)}g.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":o&&o.remove();return true;case "mceToggleEditor":if(!o){n.execCommand("mceAddControl",0,g);return true}o.isHidden()?o.show():o.hide();return true}if(n.activeEditor)return n.activeEditor.execCommand(d,
e,g);return false},execInstanceCommand:function(d,e,g,n){if(d=this.get(d))return d.execCommand(e,g,n);return false},triggerSave:function(){h(this.editors,function(d){d.save()})},addI18n:function(d,e){var g=this.i18n;l.is(d,"string")?h(e,function(n,o){g[d+"."+o]=n}):h(d,function(n,o){h(n,function(s,j){h(s,function(i,f){if(j==="common")g[o+"."+f]=i;else g[o+"."+j+"."+f]=i})})})},_setActive:function(d){this.selectedInstance=this.activeEditor=d}});l.EditorManager.preInit()})(tinymce);
var tinyMCE=window.tinyMCE=tinymce.EditorManager;
(function(l){var h=l.DOM,m=l.dom.Event,k=l.extend,p=l.util.Dispatcher,c=l.each,a=l.isGecko,b=l.isIE,d=l.isWebKit,e=l.is,g=l.ThemeManager,n=l.PluginManager,o=l.EditorManager,s=l.explode;l.create("tinymce.Editor",{Editor:function(j,i){var f=this;f.id=f.editorId=j;f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.isNotDirty=false;f.plugins={};c(["onPreInit","onBeforeRenderUI","onPostRender","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown",
"onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState"],function(q){f[q]=new p(f)});f.settings=i=k({id:j,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",
plugins:"",document_base_url:l.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,doctype:'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">',visual_table_class:"mceItemTable",visual:1,inline_styles:true,convert_fonts_to_spans:true,
font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",valid_elements:"@[id|class|style|title|dir<ltr?rtl|lang|xml::lang|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup],a[rel|rev|charset|hreflang|tabindex|accesskey|type|name|href|target|title|class|onfocus|onblur],strong/b,em/i,strike,u,#p,-ol[type|compact],-ul[type|compact],-li,br,img[longdesc|usemap|src|border|alt=|title|hspace|vspace|width|height|align],-sub,-sup,-blockquote[cite],-table[border|cellspacing|cellpadding|width|frame|rules|height|align|summary|bgcolor|background|bordercolor],-tr[rowspan|width|height|align|valign|bgcolor|background|bordercolor],tbody,thead,tfoot,#td[colspan|rowspan|width|height|align|valign|bgcolor|background|bordercolor|scope],#th[colspan|rowspan|width|height|align|valign|scope],caption,-div,-span,-code,-pre,address,-h1,-h2,-h3,-h4,-h5,-h6,hr[size|noshade],-font[face|size|color],dd,dl,dt,cite,abbr,acronym,del[datetime|cite],ins[datetime|cite],object[classid|width|height|codebase|*],param[name|value],embed[type|width|height|src|*],script[src|type],map[name],area[shape|coords|href|alt|target],bdo,button,col[align|char|charoff|span|valign|width],colgroup[align|char|charoff|span|valign|width],dfn,fieldset,form[action|accept|accept-charset|enctype|method],input[accept|alt|checked|disabled|maxlength|name|readonly|size|src|type|value|tabindex|accesskey],kbd,label[for],legend,noscript,optgroup[label|disabled],option[disabled|label|selected|value],q[cite],samp,select[disabled|multiple|name|size],small,textarea[cols|rows|disabled|name|readonly],tt,var,big",
hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,removeformat_selector:"span,b,strong,em,i,font,u,strike"},i);f.documentBaseURI=new l.util.URI(i.document_base_url||l.documentBaseURL,{base_uri:tinyMCE.baseURI});f.baseURI=o.baseURI;f.execCallback("setup",f)},render:function(j){function i(){q.language&&t.add(l.baseURL+"/langs/"+q.language+".js");q.theme&&q.theme.charAt(0)!="-"&&!g.urls[q.theme]&&g.load(q.theme,"themes/"+
q.theme+"/editor_template"+l.suffix+".js");c(s(q.plugins),function(v){if(v&&v.charAt(0)!="-"&&!n.urls[v])!d&&v=="safari"||n.load(v,"plugins/"+v+"/editor_plugin"+l.suffix+".js")});t.loadQueue(function(){f.removed||f.init()})}var f=this,q=f.settings,r=f.id,t=l.ScriptLoader;if(m.domLoaded){if(!j){q.strict_loading_mode=1;tinyMCE.settings=q}if(f.getElement()){if(q.strict_loading_mode){t.settings.strict_mode=q.strict_loading_mode;l.DOM.settings.strict=1}!/TEXTAREA|INPUT/i.test(f.getElement().nodeName)&&
q.hidden_input&&h.getParent(r,"form")&&h.insertAfter(h.create("input",{type:"hidden",name:r}),r);if(l.WindowManager)f.windowManager=new l.WindowManager(f);q.encoding=="xml"&&f.onGetContent.add(function(v,x){if(x.save)x.content=h.encode(x.content)});q.add_form_submit_trigger&&f.onSubmit.addToTop(function(){if(f.initialized){f.save();f.isNotDirty=1}});if(q.add_unload_trigger)f._beforeUnload=tinyMCE.onBeforeUnload.add(function(){f.initialized&&!f.destroyed&&!f.isHidden()&&f.save({format:"raw",no_events:true})});
l.addUnload(f.destroy,f);q.submit_patch&&f.onBeforeRenderUI.add(function(){var v=f.getElement().form;if(v)if(!v._mceOldSubmit){if(!v.submit.nodeType&&!v.submit.length){f.formElement=v;v._mceOldSubmit=v.submit;v.submit=function(){o.triggerSave();f.isNotDirty=1;return f.formElement._mceOldSubmit(f.formElement)}}v=null}});i()}}else m.add(document,"init",function(){f.render()})},init:function(){var j,i=this,f=i.settings,q,r=i.getElement(),t,v,x;o.add(i);if(f.theme){f.theme=f.theme.replace(/-/,"");t=g.get(f.theme);
i.theme=new t;if(i.theme.init&&f.init_theme)i.theme.init(i,g.urls[f.theme]||l.documentBaseURL.replace(/\/$/,""))}c(s(f.plugins.replace(/\-/g,"")),function(u){var y=n.get(u),z=n.urls[u]||l.documentBaseURL.replace(/\/$/,"");if(y){y=new y(i,z);i.plugins[u]=y;y.init&&y.init(i,z)}});if(f.popup_css!==false)f.popup_css=f.popup_css?i.documentBaseURI.toAbsolute(f.popup_css):i.baseURI.toAbsolute("themes/"+f.theme+"/skins/"+f.skin+"/dialog.css");if(f.popup_css_add)f.popup_css+=","+i.documentBaseURI.toAbsolute(f.popup_css_add);
i.controlManager=new l.ControlManager(i);i.undoManager=new l.UndoManager(i);i.undoManager.onAdd.add(function(u,y){if(!y.initial)return i.onChange.dispatch(i,y,u)});i.undoManager.onUndo.add(function(u,y){return i.onUndo.dispatch(i,y,u)});i.undoManager.onRedo.add(function(u,y){return i.onRedo.dispatch(i,y,u)});f.custom_undo_redo&&i.onExecCommand.add(function(u,y,z,A,B){if(y!="Undo"&&y!="Redo"&&y!="mceRepaint"&&(!B||!B.skip_undo))i.undoManager.add()});i.onExecCommand.add(function(u,y){/^(FontName|FontSize)$/.test(y)||
i.nodeChanged()});if(a){function w(u,y){if(!y||!y.initial)i.execCommand("mceRepaint")}i.onUndo.add(w);i.onRedo.add(w);i.onSetContent.add(w)}i.onBeforeRenderUI.dispatch(i,i.controlManager);if(f.render_ui){q=f.width||r.style.width||r.offsetWidth;j=f.height||r.style.height||r.offsetHeight;i.orgDisplay=r.style.display;x=/^[0-9\.]+(|px)$/i;if(x.test(""+q))q=Math.max(parseInt(q)+(t.deltaWidth||0),100);if(x.test(""+j))j=Math.max(parseInt(j)+(t.deltaHeight||0),100);t=i.theme.renderUI({targetNode:r,width:q,
height:j,deltaWidth:f.delta_width,deltaHeight:f.delta_height});i.editorContainer=t.editorContainer}if(document.domain&&location.hostname!=document.domain)l.relaxedDomain=document.domain;h.setStyles(t.sizeContainer||t.editorContainer,{width:q,height:j});j=(t.iframeHeight||j)+(typeof j=="number"?t.deltaHeight||0:"");if(j<100)j=100;i.iframeHTML=f.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';if(f.document_base_url!=l.documentBaseURL)i.iframeHTML+='<base href="'+i.documentBaseURI.getURI()+
'" />';i.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';if(l.relaxedDomain)i.iframeHTML+='<script type="text/javascript">document.domain = "'+l.relaxedDomain+'";<\/script>';q=f.body_id||"tinymce";if(q.indexOf("=")!=-1){q=i.getParam("body_id","","hash");q=q[i.id]||q}f=f.body_class||"";if(f.indexOf("=")!=-1){f=i.getParam("body_class","","hash");f=f[i.id]||""}i.iframeHTML+='</head><body id="'+q+'" class="mceContentBody '+f+'"></body></html>';if(l.relaxedDomain)if(b||
l.isOpera&&parseFloat(opera.version())>=9.5)v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+i.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';else if(l.isOpera)v='javascript:(function(){document.open();document.domain="'+document.domain+'";document.close();ed.setupIframe();})()';j=h.add(t.iframeContainer,"iframe",{id:i.id+"_ifr",src:v||'javascript:""',frameBorder:"0",style:{width:"100%",height:j}});
i.contentAreaContainer=t.iframeContainer;h.get(t.editorContainer).style.display=i.orgDisplay;h.get(i.id).style.display="none";if(!b||!l.relaxedDomain)i.setupIframe();r=j=t=null},setupIframe:function(){var j=this,i=j.settings,f=h.get(j.id);f=j.getDoc();var q;if(!b||!l.relaxedDomain){f.open();f.write(j.iframeHTML);f.close()}if(!b)try{if(!i.readonly)f.designMode="On"}catch(r){}if(b){q=j.getBody();h.hide(q);if(!i.readonly)q.contentEditable=true;h.show(q)}j.dom=new l.dom.DOMUtils(j.getDoc(),{keep_values:true,
url_converter:j.convertURL,url_converter_scope:j,hex_colors:i.force_hex_style_colors,class_filter:i.class_filter,update_styles:1,fix_ie_paragraphs:1});j.serializer=new l.dom.Serializer(k(i,{valid_elements:i.verify_html===false?"*[*]":i.valid_elements,dom:j.dom}));j.selection=new l.dom.Selection(j.dom,j.getWin(),j.serializer);j.forceBlocks=new l.ForceBlocks(j,{forced_root_block:i.forced_root_block});j.editorCommands=new l.EditorCommands(j);j.serializer.onPreProcess.add(function(w,u){return j.onPreProcess.dispatch(j,
u,w)});j.serializer.onPostProcess.add(function(w,u){return j.onPostProcess.dispatch(j,u,w)});j.onPreInit.dispatch(j);if(!i.gecko_spellcheck)j.getBody().spellcheck=0;i.readonly||j._addEvents();j.controlManager.onPostRender.dispatch(j,j.controlManager);j.onPostRender.dispatch(j);if(i.directionality)j.getBody().dir=i.directionality;if(i.nowrap)j.getBody().style.whiteSpace="nowrap";if(i.custom_elements){function t(w,u){c(s(i.custom_elements),function(y){var z;if(y.indexOf("~")===0){y=y.substring(1);z=
"span"}else z="div";u.content=u.content.replace(new RegExp("<("+y+")([^>]*)>","g"),"<"+z+' mce_name="$1"$2>');u.content=u.content.replace(new RegExp("</("+y+")>","g"),"</"+z+">")})}j.onBeforeSetContent.add(t);j.onPostProcess.add(function(w,u){u.set&&t(w,u)})}i.handle_node_change_callback&&j.onNodeChange.add(function(w,u,y){j.execCallback("handle_node_change_callback",j.id,y,-1,-1,true,j.selection.isCollapsed())});i.save_callback&&j.onSaveContent.add(function(w,u){if(w=j.execCallback("save_callback",
j.id,u.content,j.getBody()))u.content=w});i.onchange_callback&&j.onChange.add(function(w,u){j.execCallback("onchange_callback",j,u)});i.convert_newlines_to_brs&&j.onBeforeSetContent.add(function(w,u){if(u.initial)u.content=u.content.replace(/\r?\n/g,"<br />")});i.fix_nesting&&b&&j.onBeforeSetContent.add(function(w,u){u.content=j._fixNesting(u.content)});i.preformatted&&j.onPostProcess.add(function(w,u){u.content=u.content.replace(/^\s*<pre.*?>/,"");u.content=u.content.replace(/<\/pre>\s*$/,"");if(u.set)u.content=
'<pre class="mceItemHidden">'+u.content+"</pre>"});if(i.verify_css_classes)j.serializer.attribValueFilter=function(w,u){var y;if(w=="class"){if(!j.classesRE){w=j.dom.getClasses();if(w.length>0){y="";c(w,function(z){y+=(y?"|":"")+z["class"]});j.classesRE=new RegExp("("+y+")","gi")}}return!j.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(u)||j.classesRE.test(u)?u:""}return u};i.convert_fonts_to_spans&&j._convertFonts();i.inline_styles&&j._convertInlineElements();if(i.cleanup_callback){j.onBeforeSetContent.add(function(w,
u){u.content=j.execCallback("cleanup_callback","insert_to_editor",u.content,u)});j.onPreProcess.add(function(w,u){u.set&&j.execCallback("cleanup_callback","insert_to_editor_dom",u.node,u);u.get&&j.execCallback("cleanup_callback","get_from_editor_dom",u.node,u)});j.onPostProcess.add(function(w,u){if(u.set)u.content=j.execCallback("cleanup_callback","insert_to_editor",u.content,u);if(u.get)u.content=j.execCallback("cleanup_callback","get_from_editor",u.content,u)})}i.save_callback&&j.onGetContent.add(function(w,
u){if(u.save)u.content=j.execCallback("save_callback",j.id,u.content,j.getBody())});i.handle_event_callback&&j.onEvent.add(function(w,u,y){j.execCallback("handle_event_callback",u,w,y)===false&&m.cancel(u)});j.onSetContent.add(function(){j.addVisual(j.getBody())});i.padd_empty_editor&&j.onPostProcess.add(function(w,u){u.content=u.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")});if(a){function v(w){c(w.dom.select("a"),function(u){var y=u.parentNode;w.dom.isBlock(y)&&
y.lastChild===u&&w.dom.add(y,"br",{mce_bogus:1})})}j.onExecCommand.add(function(w,u){u==="CreateLink"&&v(w)});j.onSetContent.add(j.selection.onSetContent.add(v));if(!i.readonly)try{f.designMode="Off";f.designMode="On"}catch(x){}}setTimeout(function(){if(!j.removed){j.load({initial:true,format:i.cleanup_on_startup?"html":"raw"});j.startContent=j.getContent({format:"raw"});j.undoManager.add({initial:true});j.initialized=true;j.onInit.dispatch(j);j.execCallback("setupcontent_callback",j.id,j.getBody(),
j.getDoc());j.execCallback("init_instance_callback",j);j.focus(true);j.nodeChanged({initial:1});i.content_css&&l.each(s(i.content_css),function(w){j.dom.loadCSS(j.documentBaseURI.toAbsolute(w))});i.auto_focus&&setTimeout(function(){var w=o.get(i.auto_focus);w.selection.select(w.getBody(),1);w.selection.collapse(1);w.getWin().focus()},100)}},1);f=null},focus:function(j){var i=this,f=i.settings.content_editable;if(!j)if(!f&&(!b||i.selection.getNode().ownerDocument!=i.getDoc()))i.getWin().focus();if(o.activeEditor!=
i){if((j=o.activeEditor)!=null)j.onDeactivate.dispatch(j,i);i.onActivate.dispatch(i,j)}o._setActive(i)},execCallback:function(j){var i=this,f=i.settings[j],q;if(f){if(i.callbackLookup&&(q=i.callbackLookup[j])){f=q.func;q=q.scope}if(e(f,"string")){q=(q=f.replace(/\.\w+$/,""))?l.resolve(q):0;f=l.resolve(f);i.callbackLookup=i.callbackLookup||{};i.callbackLookup[j]={func:f,scope:q}}return f.apply(q||i,Array.prototype.slice.call(arguments,1))}},translate:function(j){var i=this.settings.language||"en",
f=o.i18n;if(!j)return"";return f[i+"."+j]||j.replace(/{\#([^}]+)\}/g,function(q,r){return f[i+"."+r]||"{#"+r+"}"})},getLang:function(j,i){return o.i18n[(this.settings.language||"en")+"."+j]||(e(i)?i:"{#"+j+"}")},getParam:function(j,i,f){var q=l.trim;j=e(this.settings[j])?this.settings[j]:i;var r;if(f==="hash"){r={};if(e(j,"string"))c(j.indexOf("=")>0?j.split(/[;,](?![^=;,]*(?:[;,]|$))/):j.split(","),function(t){t=t.split("=");if(t.length>1)r[q(t[0])]=q(t[1]);else r[q(t[0])]=q(t)});else r=j;return r}return j},
nodeChanged:function(j){var i=this,f=i.selection,q=f.getNode()||i.getBody();if(i.initialized)i.onNodeChange.dispatch(i,j?j.controlManager||i.controlManager:i.controlManager,b&&q.ownerDocument!=i.getDoc()?i.getBody():q,f.isCollapsed(),j)},addButton:function(j,i){var f=this;f.buttons=f.buttons||{};f.buttons[j]=i},addCommand:function(j,i,f){this.execCommands[j]={func:i,scope:f||this}},addQueryStateHandler:function(j,i,f){this.queryStateCommands[j]={func:i,scope:f||this}},addQueryValueHandler:function(j,
i,f){this.queryValueCommands[j]={func:i,scope:f||this}},addShortcut:function(j,i,f,q){var r=this,t;if(!r.settings.custom_shortcuts)return false;r.shortcuts=r.shortcuts||{};if(e(f,"string")){t=f;f=function(){r.execCommand(t,false,null)}}if(e(f,"object")){t=f;f=function(){r.execCommand(t[0],t[1],t[2])}}c(s(j),function(v){var x={func:f,scope:q||this,desc:i,alt:false,ctrl:false,shift:false};c(s(v,"+"),function(w){switch(w){case "alt":case "ctrl":case "shift":x[w]=true;break;default:x.charCode=w.charCodeAt(0);
x.keyCode=w.toUpperCase().charCodeAt(0)}});r.shortcuts[(x.ctrl?"ctrl":"")+","+(x.alt?"alt":"")+","+(x.shift?"shift":"")+","+x.keyCode]=x});return true},execCommand:function(j,i,f,q){var r=this,t=0,v;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(j)&&(!q||!q.skip_focus))r.focus();v={};r.onBeforeExecCommand.dispatch(r,j,i,f,v);if(v.terminate)return false;if(r.execCallback("execcommand_callback",r.id,r.selection.getNode(),j,i,f)){r.onExecCommand.dispatch(r,j,i,
f,q);return true}if(v=r.execCommands[j]){v=v.func.call(v.scope,i,f);if(v!==true){r.onExecCommand.dispatch(r,j,i,f,q);return v}}c(r.plugins,function(x){if(x.execCommand&&x.execCommand(j,i,f)){r.onExecCommand.dispatch(r,j,i,f,q);t=1;return false}});if(t)return true;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(j,i,f)){r.onExecCommand.dispatch(r,j,i,f,q);return true}if(l.GlobalCommands.execCommand(r,j,i,f)){r.onExecCommand.dispatch(r,j,i,f,q);return true}if(r.editorCommands.execCommand(j,i,f)){r.onExecCommand.dispatch(r,
j,i,f,q);return true}r.getDoc().execCommand(j,i,f);r.onExecCommand.dispatch(r,j,i,f,q)},queryCommandState:function(j){var i=this,f;if(!i._isHidden()){if(f=i.queryStateCommands[j]){f=f.func.call(f.scope);if(f!==true)return f}f=i.editorCommands.queryCommandState(j);if(f!==-1)return f;try{return this.getDoc().queryCommandState(j)}catch(q){}}},queryCommandValue:function(j){var i=this,f;if(!i._isHidden()){if(f=i.queryValueCommands[j]){f=f.func.call(f.scope);if(f!==true)return f}f=i.editorCommands.queryCommandValue(j);
if(e(f))return f;try{return this.getDoc().queryCommandValue(j)}catch(q){}}},show:function(){var j=this;h.show(j.getContainer());h.hide(j.id);j.load()},hide:function(){var j=this,i=j.getDoc();b&&i&&i.execCommand("SelectAll");j.save();h.hide(j.getContainer());h.setStyle(j.id,"display",j.orgDisplay)},isHidden:function(){return!h.isHidden(this.id)},setProgressState:function(j,i,f){this.onSetProgressState.dispatch(this,j,i,f);return j},load:function(j){var i=this,f=i.getElement(),q;if(f){j=j||{};j.load=
true;q=i.setContent(e(f.value)?f.value:f.innerHTML,j);j.element=f;j.no_events||i.onLoadContent.dispatch(i,j);j.element=null;return q}},save:function(j){var i=this,f=i.getElement(),q;if(f&&i.initialized){j=j||{};j.save=true;if(!j.no_events){i.undoManager.typing=0;i.undoManager.add()}j.element=f;q=j.content=i.getContent(j);j.no_events||i.onSaveContent.dispatch(i,j);q=j.content;if(/TEXTAREA|INPUT/i.test(f.nodeName))f.value=q;else{f.innerHTML=q;if(f=h.getParent(i.id,"form"))c(f.elements,function(r){if(r.name==
i.id){r.value=q;return false}})}j.element=f=null;return q}},setContent:function(j,i){var f=this;i=i||{};i.format=i.format||"html";i.set=true;i.content=j;i.no_events||f.onBeforeSetContent.dispatch(f,i);if(!l.isIE&&(j.length===0||/^\s+$/.test(j))){i.content=f.dom.setHTML(f.getBody(),'<br mce_bogus="1" />');i.format="raw"}i.content=f.dom.setHTML(f.getBody(),l.trim(i.content));if(i.format!="raw"&&f.settings.cleanup){i.getInner=true;i.content=f.dom.setHTML(f.getBody(),f.serializer.serialize(f.getBody(),
i))}i.no_events||f.onSetContent.dispatch(f,i);return i.content},getContent:function(j){var i=this,f;j=j||{};j.format=j.format||"html";j.get=true;j.no_events||i.onBeforeGetContent.dispatch(i,j);if(j.format!="raw"&&i.settings.cleanup){j.getInner=true;f=i.serializer.serialize(i.getBody(),j)}else f=i.getBody().innerHTML;f=f.replace(/^\s*|\s*$/g,"");j.content=f;j.no_events||i.onGetContent.dispatch(i,j);return j.content},isDirty:function(){var j=this;return l.trim(j.startContent)!=l.trim(j.getContent({format:"raw",
no_events:1}))&&!j.isNotDirty},getContainer:function(){var j=this;if(!j.container)j.container=h.get(j.editorContainer||j.id+"_parent");return j.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return h.get(this.settings.content_element||this.id)},getWin:function(){var j=this,i;if(!j.contentWindow)if(i=h.get(j.id+"_ifr"))j.contentWindow=i.contentWindow;return j.contentWindow},getDoc:function(){var j=this,i;if(!j.contentDocument)if(i=j.getWin())j.contentDocument=
i.document;return j.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(j,i,f){var q=this,r=q.settings;if(r.urlconverter_callback)return q.execCallback("urlconverter_callback",j,f,true,i);if(!r.convert_urls||f&&f.nodeName=="LINK"||j.indexOf("file:")===0)return j;if(r.relative_urls)return q.documentBaseURI.toRelative(j);return j=q.documentBaseURI.toAbsolute(j,r.remove_script_host)},addVisual:function(j){var i=this,f=i.settings;j=j||i.getBody();if(!e(i.hasVisual))i.hasVisual=
f.visual;c(i.dom.select("table,a",j),function(q){var r;switch(q.nodeName){case "TABLE":r=i.dom.getAttrib(q,"border");if(!r||r=="0")i.hasVisual?i.dom.addClass(q,f.visual_table_class):i.dom.removeClass(q,f.visual_table_class);return;case "A":if(r=i.dom.getAttrib(q,"name"))i.hasVisual?i.dom.addClass(q,"mceItemAnchor"):i.dom.removeClass(q,"mceItemAnchor");return}});i.onVisualAid.dispatch(i,j,i.hasVisual)},remove:function(){var j=this,i=j.getContainer();j.removed=1;j.hide();j.execCallback("remove_instance_callback",
j);j.onRemove.dispatch(j);j.onExecCommand.listeners=[];o.remove(j);h.remove(i)},destroy:function(j){var i=this;if(!i.destroyed){if(!j){l.removeUnload(i.destroy);tinyMCE.onBeforeUnload.remove(i._beforeUnload);i.theme&&i.theme.destroy&&i.theme.destroy();i.controlManager.destroy();i.selection.destroy();i.dom.destroy();if(!i.settings.content_editable){m.clear(i.getWin());m.clear(i.getDoc())}m.clear(i.getBody());m.clear(i.formElement)}if(i.formElement){i.formElement.submit=i.formElement._mceOldSubmit;
i.formElement._mceOldSubmit=null}i.contentAreaContainer=i.formElement=i.container=i.settings.content_element=i.bodyElement=i.contentDocument=i.contentWindow=null;if(i.selection)i.selection=i.selection.win=i.selection.dom=i.selection.dom.doc=null;i.destroyed=1}},_addEvents:function(){function j(w,u){if(!i.removed)if(i.onEvent.dispatch(i,w,u)!==false)i[r[w.fakeType||w.type]].dispatch(i,w,u)}var i=this,f,q=i.settings,r={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",
keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};c(r,function(w,u){switch(u){case "contextmenu":l.isOpera?i.dom.bind(i.getBody(),"mousedown",function(y){if(y.ctrlKey){y.fakeType="contextmenu";j(y)}}):i.dom.bind(i.getBody(),u,j);break;case "paste":i.dom.bind(i.getBody(),u,function(y){j(y)});break;case "submit":case "reset":i.dom.bind(i.getElement().form||h.getParent(i.id,"form"),u,j);break;default:i.dom.bind(q.content_editable?
i.getBody():i.getDoc(),u,j)}});i.dom.bind(q.content_editable?i.getBody():a?i.getDoc():i.getWin(),"focus",function(){i.focus(true)});l.isGecko&&i.dom.bind(i.getDoc(),"DOMNodeInserted",function(w){var u;w=w.target;if(w.nodeType===1&&w.nodeName==="IMG"&&(u=w.getAttribute("mce_src")))w.src=i.documentBaseURI.toAbsolute(u)});if(a){function t(){var w=this,u=w.getDoc(),y=w.settings;if(a&&!y.readonly){if(w._isHidden())try{if(!y.content_editable)u.designMode="On"}catch(z){}try{u.execCommand("styleWithCSS",
0,false)}catch(A){if(!w._isHidden())try{u.execCommand("useCSS",0,true)}catch(B){}}if(!y.table_inline_editing)try{u.execCommand("enableInlineTableEditing",false,false)}catch(C){}if(!y.object_resizing)try{u.execCommand("enableObjectResizing",false,false)}catch(D){}}}i.onBeforeExecCommand.add(t);i.onMouseDown.add(t)}i.onMouseUp.add(i.nodeChanged);i.onClick.add(i.nodeChanged);i.onKeyUp.add(function(w,u){w=u.keyCode;if(w>=33&&w<=36||w>=37&&w<=40||w==13||w==45||w==46||w==8||l.isMac&&(w==91||w==93)||u.ctrlKey)i.nodeChanged()});
i.onReset.add(function(){i.setContent(i.startContent,{format:"raw"})});if(q.custom_shortcuts){if(q.custom_undo_redo_keyboard_shortcuts){i.addShortcut("ctrl+z",i.getLang("undo_desc"),"Undo");i.addShortcut("ctrl+y",i.getLang("redo_desc"),"Redo")}if(a){i.addShortcut("ctrl+b",i.getLang("bold_desc"),"Bold");i.addShortcut("ctrl+i",i.getLang("italic_desc"),"Italic");i.addShortcut("ctrl+u",i.getLang("underline_desc"),"Underline")}for(f=1;f<=6;f++)i.addShortcut("ctrl+"+f,"",["FormatBlock",false,"<h"+f+">"]);
i.addShortcut("ctrl+7","",["FormatBlock",false,"<p>"]);i.addShortcut("ctrl+8","",["FormatBlock",false,"<div>"]);i.addShortcut("ctrl+9","",["FormatBlock",false,"<address>"]);function v(w){var u=null;if(!w.altKey&&!w.ctrlKey&&!w.metaKey)return u;c(i.shortcuts,function(y){if(!(l.isMac&&y.ctrl!=w.metaKey))if(!(!l.isMac&&y.ctrl!=w.ctrlKey))if(y.alt==w.altKey)if(y.shift==w.shiftKey)if(w.keyCode==y.keyCode||w.charCode&&w.charCode==y.charCode){u=y;return false}});return u}i.onKeyUp.add(function(w,u){if(v(u))return m.cancel(u)});
i.onKeyPress.add(function(w,u){if(v(u))return m.cancel(u)});i.onKeyDown.add(function(w,u){if(w=v(u)){w.func.call(w.scope);return m.cancel(u)}})}if(l.isIE){i.dom.bind(i.getDoc(),"controlselect",function(w){var u=i.resizeInfo;w=w.target;if(w.nodeName==="IMG"){u&&i.dom.unbind(u.node,u.ev,u.cb);if(i.dom.hasClass(w,"mceItemNoResize")){ev="resizestart";u=i.dom.bind(w,"resizestart",m.cancel,m)}else{ev="resizeend";u=i.dom.bind(w,ev,function(y){var z;y=y.target;if(z=i.dom.getStyle(y,"width")){i.dom.setAttrib(y,
"width",z.replace(/[^0-9%]+/g,""));i.dom.setStyle(y,"width","")}if(z=i.dom.getStyle(y,"height")){i.dom.setAttrib(y,"height",z.replace(/[^0-9%]+/g,""));i.dom.setStyle(y,"height","")}})}u=i.resizeInfo={node:w,ev:ev,cb:u}}});i.onKeyDown.add(function(w,u){switch(u.keyCode){case 8:if(i.selection.getRng().item){i.selection.getRng().item(0).removeNode();return m.cancel(u)}}})}l.isOpera&&i.onClick.add(function(w,u){m.prevent(u)});if(q.custom_undo_redo){function x(){i.undoManager.typing=0;i.undoManager.add()}
l.isIE?i.dom.bind(i.getWin(),"blur",function(){var w;if(i.selection){w=i.selection.getNode();!i.removed&&w.ownerDocument&&w.ownerDocument!=i.getDoc()&&x()}}):i.dom.bind(i.getDoc(),"blur",function(){i.selection&&!i.removed&&x()});i.onMouseDown.add(x);i.onKeyUp.add(function(w,u){if(u.keyCode>=33&&u.keyCode<=36||u.keyCode>=37&&u.keyCode<=40||u.keyCode==13||u.keyCode==45||u.ctrlKey){i.undoManager.typing=0;i.undoManager.add()}});i.onKeyDown.add(function(w,u){if(u.keyCode>=33&&u.keyCode<=36||u.keyCode>=
37&&u.keyCode<=40||u.keyCode==13||u.keyCode==45){if(i.undoManager.typing){i.undoManager.add();i.undoManager.typing=0}}else if(!i.undoManager.typing){i.undoManager.add();i.undoManager.typing=1}})}},_convertInlineElements:function(){function j(x,w){if(f.inline_styles)if(w.get)c(i.dom.select("table,u,strike",w.node),function(u){switch(u.nodeName){case "TABLE":if(r=q.getAttrib(u,"height")){q.setStyle(u,"height",r);q.setAttrib(u,"height","")}break;case "U":case "STRIKE":u.style.textDecoration=u.nodeName==
"U"?"underline":"line-through";q.setAttrib(u,"mce_style","");q.setAttrib(u,"mce_name","span");break}});else w.set&&c(i.dom.select("table,span",w.node).reverse(),function(u){if(u.nodeName=="TABLE"){if(r=q.getStyle(u,"height"))q.setAttrib(u,"height",r.replace(/[^0-9%]+/g,""))}else if(v=u.style.textDecoration=="underline"?"u":u.style.textDecoration=="line-through"?"strike":""){u.style.textDecoration="";q.setAttrib(u,"mce_style","");t=q.create(v,{style:q.getAttrib(u,"style")});q.replace(t,u,1)}})}var i=
this,f=i.settings,q=i.dom,r,t,v;i.onPreProcess.add(j);f.cleanup_on_startup||i.onSetContent.add(function(x,w){w.initial&&j(i,{node:i.getBody(),set:1})})},_convertFonts:function(){function j(v){var x,w,u;if(f.inline_styles){w=i.dom.select("font",v);for(u=w.length-1;u>=0;u--){v=w[u];x=q.create("span",{style:q.getAttrib(v,"style"),"class":q.getAttrib(v,"class")});q.setStyles(x,{fontFamily:q.getAttrib(v,"face"),color:q.getAttrib(v,"color"),backgroundColor:v.style.backgroundColor});if(v.size)r?q.setStyle(x,
"fontSize",r[parseInt(v.size)-1]):q.setAttrib(x,"class",t[parseInt(v.size)-1]);q.setAttrib(x,"mce_style","");q.replace(x,v,1)}}}var i=this,f=i.settings,q=i.dom,r,t;if(f.inline_styles){if(r=f.font_size_style_values)r=s(r);if(t=f.font_size_classes)t=s(t);i.onPreProcess.add(function(v,x){x.get&&j(x.node)});i.onSetContent.add(function(v,x){x.initial&&j(x.node)})}},_isHidden:function(){var j;if(!a)return 0;j=this.selection.getSel();return!j||!j.rangeCount||j.rangeCount==0},_fixNesting:function(j){var i=
[],f;j=j.replace(/<(\/)?([^\s>]+)[^>]*?>/g,function(q,r,t){if(r==="/"){if(!i.length)return"";if(t!==i[i.length-1].tag){for(f=i.length-1;f>=0;f--)if(i[f].tag===t){i[f].close=1;break}return""}else{i.pop();if(i.length&&i[i.length-1].close){q=q+"</"+i[i.length-1].tag+">";i.pop()}}}else{if(/^(br|hr|input|meta|img|link|param)$/i.test(t))return q;if(/\/>$/.test(q))return q;i.push({tag:t})}return q});for(f=i.length-1;f>=0;f--)j+="</"+i[f].tag+">";return j}})})(tinymce);
(function(l){var h=l.each,m=l.isIE,k=l.isGecko,p=l.isOpera,c=l.isWebKit;l.create("tinymce.EditorCommands",{EditorCommands:function(a){this.editor=a},execCommand:function(a,b,d){var e=this;switch(a){case "mceResetDesignMode":case "mceBeginUndoLevel":return true;case "unlink":e.UnLink();return true;case "JustifyLeft":case "JustifyCenter":case "JustifyRight":case "JustifyFull":e.mceJustify(a,a.substring(7).toLowerCase());return true;default:if(a=this[a]){a.call(this,b,d);return true}}return false},Indent:function(){var a=
this.editor,b=a.dom,d=a.selection,e,g;e=a.settings.indentation;g=/[a-z%]+$/i.exec(e);e=parseInt(e);if(a.settings.inline_styles&&!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList())h(d.getSelectedBlocks(),function(n){b.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+e+g)});else{a.getDoc().execCommand("Indent",false,null);m&&b.getParent(d.getNode(),function(n){if(n.nodeName=="BLOCKQUOTE")n.dir=n.style.cssText=""})}},Outdent:function(){var a=this.editor,b=a.dom,d=a.selection,
e,g,n;g=a.settings.indentation;n=/[a-z%]+$/i.exec(g);g=parseInt(g);a.settings.inline_styles&&!this.queryStateInsertUnorderedList()&&!this.queryStateInsertOrderedList()?h(d.getSelectedBlocks(),function(o){e=Math.max(0,parseInt(o.style.paddingLeft||0)-g);b.setStyle(o,"paddingLeft",e?e+n:"")}):a.getDoc().execCommand("Outdent",false,null)},mceSetContent:function(a,b){this.editor.setContent(b)},mceToggleVisualAid:function(){var a=this.editor;a.hasVisual=!a.hasVisual;a.addVisual()},mceReplaceContent:function(a,
b){a=this.editor.selection;a.setContent(b.replace(/\{\$selection\}/g,a.getContent({format:"text"})))},mceInsertLink:function(a,b){function d(g){h(b,function(n,o){e.dom.setAttrib(g,o,n)})}var e=this.editor;a=e.dom.getParent(e.selection.getNode(),"a");if(l.is(b,"string"))b={href:b};if(a)b.href?d(a):e.dom.remove(a,1);else{e.execCommand("CreateLink",false,"javascript:mctmp(0);");h(e.dom.select("a[href=javascript:mctmp(0);]"),function(g){d(g)})}},UnLink:function(){var a=this.editor,b=a.selection;b.isCollapsed()&&
b.select(b.getNode());a.getDoc().execCommand("unlink",false,null);b.collapse(0)},FontName:function(a,b){a=this;var d=a.editor,e=d.selection;if(b)d.settings.convert_fonts_to_spans?a._applyInlineStyle("span",{style:{fontFamily:b}}):d.getDoc().execCommand("FontName",false,b);else e.isCollapsed()&&e.select(e.getNode())},FontSize:function(a,b){a=this.editor;var d=a.settings,e;if(d.convert_fonts_to_spans&&b>=1&&b<=7){e=l.explode(d.font_size_style_values);b=(d=l.explode(d.font_size_classes))?d[b-1]||b:e[b-
1]||b}b>=1&&b<=7?a.getDoc().execCommand("FontSize",false,b):this._applyInlineStyle("span",{style:{fontSize:b}})},queryCommandValue:function(a){var b=this["queryValue"+a];if(b)return b.call(this,a);return false},queryCommandState:function(a){var b;switch(a){case "JustifyLeft":case "JustifyCenter":case "JustifyRight":case "JustifyFull":return this.queryStateJustify(a,a.substring(7).toLowerCase());default:if(b=this["queryState"+a])return b.call(this,a)}return-1},_queryState:function(a){try{return this.editor.getDoc().queryCommandState(a)}catch(b){}},
_queryVal:function(a){try{return this.editor.getDoc().queryCommandValue(a)}catch(b){}},queryValueFontSize:function(){var a=this.editor,b=0,d;if(d=a.dom.getParent(a.selection.getNode(),"span"))b=d.style.fontSize;if(!b&&(p||c)){if(d=a.dom.getParent(a.selection.getNode(),"font"))b=d.size;return b}return b||this._queryVal("FontSize")},queryValueFontName:function(){var a=this.editor,b=0,d;if(d=a.dom.getParent(a.selection.getNode(),"font"))b=d.face;if(d=a.dom.getParent(a.selection.getNode(),"span"))b=d.style.fontFamily.replace(/, /g,
",").replace(/[\'\"]/g,"").toLowerCase();b||(b=this._queryVal("FontName"));return b},mceJustify:function(a,b){var d=this.editor,e=d.selection,g=e.getNode(),n=g.nodeName,o,s=d.dom,j;if(d.settings.inline_styles&&this.queryStateJustify(a,b))j=1;o=s.getParent(g,d.dom.isBlock);if(n=="IMG"){if(b!="full"){if(j){if(b=="center")s.setStyle(o||g.parentNode,"textAlign","");s.setStyle(g,"float","")}else if(b=="center"){if(o&&/^(TD|TH)$/.test(o.nodeName))o=0;if(!o||o.childNodes.length>1){a=s.create("p");a.appendChild(g.cloneNode(false));
o?s.insertAfter(a,o):s.insertAfter(a,g);s.remove(g);g=a.firstChild;o=a}s.setStyle(o,"textAlign",b);s.setStyle(g,"float","")}else{s.setStyle(g,"float",b);s.setStyle(o||g.parentNode,"textAlign","")}this.mceRepaint()}}else if(d.settings.inline_styles&&d.settings.forced_root_block){if(j)b="";h(e.getSelectedBlocks(s.getParent(e.getStart(),s.isBlock),s.getParent(e.getEnd(),s.isBlock)),function(i){s.setAttrib(i,"align","");s.setStyle(i,"textAlign",b=="full"?"justify":b)})}else{j||d.getDoc().execCommand(a,
false,null);if(d.settings.inline_styles)j?s.getParent(d.selection.getNode(),function(i){i.style&&i.style.textAlign&&s.setStyle(i,"textAlign","")}):h(s.select("*"),function(i){var f=i.align;if(f){if(f=="full")f="justify";s.setStyle(i,"textAlign",f);s.setAttrib(i,"align","")}})}},mceSetCSSClass:function(a,b){this.mceSetStyleInfo(0,{command:"setattrib",name:"class",value:b})},getSelectedElement:function(){var a=this.editor,b=a.dom,d=a.selection,e=d.getRng(),g,n,o,s,j;if(d.isCollapsed()||e.item)return d.getNode();
d=a.settings.merge_styles_invalid_parents;if(l.is(d,"string"))d=new RegExp(d,"i");if(m){g=e.duplicate();g.collapse(true);a=g.parentElement();n=e.duplicate();n.collapse(false);o=n.parentElement();if(a!=o){g.move("character",1);a=g.parentElement()}if(a==o){g=e.duplicate();g.moveToElementText(a);if(g.compareEndPoints("StartToStart",e)==0&&g.compareEndPoints("EndToEnd",e)==0)return d&&d.test(a.nodeName)?null:a}}else{function i(f){return b.getParent(f,"*")}a=e.startContainer;o=e.endContainer;s=e.startOffset;
j=e.endOffset;if(!e.collapsed)if(a==o)if(s-j<2)if(a.hasChildNodes()){g=a.childNodes[s];return d&&d.test(g.nodeName)?null:g}if(a.nodeType!=3||o.nodeType!=3)return null;if(s==0)if((g=i(a))&&g.firstChild!=a)g=null;if(s==a.nodeValue.length)if((e=a.nextSibling)&&e.nodeType==1)g=a.nextSibling;if(j==0)if((e=o.previousSibling)&&e.nodeType==1)n=e;if(j==o.nodeValue.length)if((n=i(o))&&n.lastChild!=o)n=null;if(g==n)return d&&g&&d.test(g.nodeName)?null:g}return null},mceSetStyleInfo:function(a,b){function d(f){if(f.nodeType==
1)switch(b.command){case "setattrib":return n.setAttrib(f,b.name,b.value);case "setstyle":return n.setStyle(f,b.name,b.value);case "removeformat":return n.setAttrib(f,"class","")}}var e=this,g=e.editor;a=g.getDoc();var n=g.dom,o,s=g.selection,j=b.wrapper||"span";o=s.getBookmark();var i;i=g.settings.merge_styles_invalid_parents;if(l.is(i,"string"))i=new RegExp(i,"i");if((e=e.getSelectedElement())&&!g.settings.force_span_wrappers)d(e,1);else{a.execCommand("FontName",false,"__");h(n.select("span,font"),
function(f){var q;if(n.getAttrib(f,"face")=="__"||f.style.fontFamily==="__"){q=n.create(j,{mce_new:"1"});d(q);h(f.childNodes,function(r){q.appendChild(r.cloneNode(true))});n.replace(q,f)}})}h(n.select(j).reverse(),function(f){var q=f.parentNode;if(!n.getAttrib(f,"mce_new"))(q=n.getParent(f,"*[mce_new]"))&&n.remove(f,1)});h(n.select(j).reverse(),function(f){var q=f.parentNode;if(q&&n.getAttrib(f,"mce_new"))if(!(g.settings.force_span_wrappers&&q.nodeName!="SPAN")){if(q.nodeName==j.toUpperCase()&&q.childNodes.length==
1)return n.remove(q,1);if(f.nodeType==1&&(!i||!i.test(q.nodeName))&&q.childNodes.length==1){d(q);n.setAttrib(f,"class","")}}});h(n.select(j).reverse(),function(f){if(n.getAttrib(f,"mce_new")||n.getAttribs(f).length<=1&&f.className===""){if(!n.getAttrib(f,"class")&&!n.getAttrib(f,"style"))return n.remove(f,1);n.setAttrib(f,"mce_new","")}});s.moveToBookmark(o)},queryStateJustify:function(a,b){var d=this.editor,e=d.selection.getNode(),g=d.dom;if(e&&e.nodeName=="IMG"){if(g.getStyle(e,"float")==b)return 1;
return e.parentNode.style.textAlign==b}e=g.getParent(d.selection.getStart(),function(n){return n.nodeType==1&&n.style.textAlign});if(b=="full")b="justify";if(d.settings.inline_styles)return e&&e.style.textAlign==b;return this._queryState(a)},ForeColor:function(a,b){a=this.editor;a.settings.convert_fonts_to_spans?this._applyInlineStyle("span",{style:{color:b}}):a.getDoc().execCommand("ForeColor",false,b)},HiliteColor:function(a,b){function d(g){if(k)try{e.execCommand("styleWithCSS",0,g)}catch(n){e.execCommand("useCSS",
0,!g)}}a=this.editor;var e=a.getDoc();if(a.settings.convert_fonts_to_spans)this._applyInlineStyle("span",{style:{backgroundColor:b}});else if(k||p){d(true);e.execCommand("hilitecolor",false,b);d(false)}else e.execCommand("BackColor",false,b)},ScalePage:function(a,b){var d=document.getElementById(b);a=parseInt(6.5*a);disableEdShadow(b);setTimeout("smoothScale("+a+",'"+b+"',"+xWidth(d)+");",10)},SelectZoom:function(a,b){a=this.editor;a.getDoc();this.ScalePage(b,a.id+"_ifr")},FormatBlock:function(a,
b){function d(s){return/^(P|DIV|H[1-6]|ADDRESS|BLOCKQUOTE|PRE)$/.test(s.nodeName)}a=this.editor;var e=a.selection,g=a.dom,n,o;if(n=g.getParent(e.getNode(),function(s){return d(s)}))if(m&&d(n.parentNode)||n.nodeName=="DIV"){o=a.dom.create(b);h(g.getAttribs(n),function(s){g.setAttrib(o,s.nodeName,g.getAttrib(n,s.nodeName))});b=e.getBookmark();g.replace(o,n,1);e.moveToBookmark(b);a.nodeChanged();return}b=a.settings.forced_root_block?b||"<p>":b;if(b.indexOf("<")==-1)b="<"+b+">";if(l.isGecko)b=b.replace(/<(div|blockquote|code|dt|dd|dl|samp)>/gi,
"$1");a.getDoc().execCommand("FormatBlock",false,b)},mceCleanup:function(){var a=this.editor,b=a.selection,d=b.getBookmark();a.setContent(a.getContent());b.moveToBookmark(d)},mceRemoveNode:function(a,b){a=this.editor;var d=a.selection,e=b||d.getNode();if(e!=a.getBody()){b=d.getBookmark();a.dom.remove(e,1);d.moveToBookmark(b);a.nodeChanged()}},mceSelectNodeDepth:function(a,b){var d=this.editor,e=d.selection,g=0;d.dom.getParent(e.getNode(),function(n){if(n.nodeType==1&&g++==b){e.select(n);d.nodeChanged();
return false}},d.getBody())},mceSelectNode:function(a,b){this.editor.selection.select(b)},mceInsertContent:function(a,b){this.editor.selection.setContent(b)},mceInsertRawHTML:function(a,b){a=this.editor;a.selection.setContent("tiny_mce_marker");a.setContent(a.getContent().replace(/tiny_mce_marker/g,b))},mceRepaint:function(){var a,b,d=this.editor;if(l.isGecko)try{a=d.selection;b=a.getBookmark(true);a.getSel()&&a.getSel().selectAllChildren(d.getBody());a.collapse(true);a.moveToBookmark(b)}catch(e){}},
queryStateUnderline:function(){var a=this.editor.selection.getNode();if(a&&a.nodeName=="A")return false;return this._queryState("Underline")},queryStateOutdent:function(){var a=this.editor,b;if(a.settings.inline_styles){if((b=a.dom.getParent(a.selection.getStart(),a.dom.isBlock))&&parseInt(b.style.paddingLeft)>0)return true;if((b=a.dom.getParent(a.selection.getEnd(),a.dom.isBlock))&&parseInt(b.style.paddingLeft)>0)return true}return this.queryStateInsertUnorderedList()||this.queryStateInsertOrderedList()||
!a.settings.inline_styles&&!!a.dom.getParent(a.selection.getNode(),"BLOCKQUOTE")},queryStateInsertUnorderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"UL")},queryStateInsertOrderedList:function(){return this.editor.dom.getParent(this.editor.selection.getNode(),"OL")},queryStatemceBlockQuote:function(){return!!this.editor.dom.getParent(this.editor.selection.getStart(),function(a){return a.nodeName==="BLOCKQUOTE"})},_applyInlineStyle:function(a,b,d){function e(){h(s.select(a).reverse(),
function(q){var r=0;h(s.getAttribs(q),function(t){t.nodeName.substring(0,1)!="_"&&s.getAttrib(q,t.nodeName)!=""&&r++});r==0&&s.remove(q,1)})}function g(){var q;h(s.select("span,font"),function(r){if(r.style.fontFamily=="mceinline"||r.face=="mceinline"){q||(q=o.selection.getBookmark());b._mce_new="1";s.replace(s.create(a,b),r,1)}});h(s.select(a+"[_mce_new]"),function(r){function t(v){if(v.nodeType==1){h(b.style,function(x,w){s.setStyle(v,w,"")});b["class"]&&v.className&&d&&h(d.check_classes,function(x){s.hasClass(v,
x)&&s.removeClass(v,x)})}}h(s.select(a,r),t);r.parentNode&&r.parentNode.nodeType==1&&r.parentNode.childNodes.length==1&&t(r.parentNode);s.getParent(r.parentNode,function(v){if(v.nodeType==1){b.style&&h(b.style,function(x,w){var u;if(!i[w]&&(u=s.getStyle(v,w))){u===x&&s.setStyle(r,w,"");i[w]=1}});b["class"]&&v.className&&d&&h(d.check_classes,function(x){s.hasClass(v,x)&&s.removeClass(r,x)})}return false});r.removeAttribute("_mce_new")});e();o.selection.moveToBookmark(q);return!!q}var n=this,o=n.editor,
s=o.dom,j,i={},f;a=a.toUpperCase();d&&d.check_classes&&b["class"]&&d.check_classes.push(b["class"]);o.focus();o.getDoc().execCommand("FontName",false,"mceinline");g();if(j=n._applyInlineStyle.keyhandler){o.onKeyUp.remove(j);o.onKeyPress.remove(j);o.onKeyDown.remove(j);o.onSetContent.remove(n._applyInlineStyle.chandler)}if(o.selection.isCollapsed()){if(!m){h(s.getParents(o.selection.getNode(),"span"),function(q){h(b.style,function(r,t){var v;if(v=s.getStyle(q,t)){if(v==r){s.setStyle(q,t,"");f=2;return false}f=
1;return false}});if(f)return false});if(f==2){j=o.selection.getBookmark();e();o.selection.moveToBookmark(j);window.setTimeout(function(){o.nodeChanged()},1);return}}n._pendingStyles=l.extend(n._pendingStyles||{},b.style);n._applyInlineStyle.chandler=o.onSetContent.add(function(){delete n._pendingStyles});n._applyInlineStyle.keyhandler=j=function(q){if(n._pendingStyles){b.style=n._pendingStyles;delete n._pendingStyles}if(g()){o.onKeyDown.remove(n._applyInlineStyle.keyhandler);o.onKeyPress.remove(n._applyInlineStyle.keyhandler)}q.type==
"keyup"&&o.onKeyUp.remove(n._applyInlineStyle.keyhandler)};o.onKeyDown.add(j);o.onKeyPress.add(j);o.onKeyUp.add(j)}else n._pendingStyles=0}})})(tinymce);
(function(l){l.create("tinymce.UndoManager",{index:0,data:null,typing:0,UndoManager:function(h){var m=this,k=l.util.Dispatcher;m.editor=h;m.data=[];m.onAdd=new k(this);m.onUndo=new k(this);m.onRedo=new k(this)},add:function(h){var m=this,k,p=m.editor,c,a=p.settings;h=h||{};h.content=h.content||p.getContent({format:"raw",no_events:1});h.content=h.content.replace(/^\s*|\s*$/g,"");k=m.data[m.index>0&&(m.index==0||m.index==m.data.length)?m.index-1:m.index];if(!h.initial&&k&&h.content==k.content)return null;
if(a.custom_undo_redo_levels)if(m.data.length>a.custom_undo_redo_levels){for(k=0;k<m.data.length-1;k++)m.data[k]=m.data[k+1];m.data.length--;m.index=m.data.length}if(a.custom_undo_redo_restore_selection&&!h.initial)h.bookmark=c=h.bookmark||p.selection.getBookmark();m.index<m.data.length&&m.index++;if(m.data.length===0&&!h.initial)return null;m.data.length=m.index+1;m.data[m.index++]=h;if(h.initial)m.index=0;if(m.data.length==2&&m.data[0].initial)m.data[0].bookmark=c;m.onAdd.dispatch(m,h);p.isNotDirty=
0;return h},undo:function(){var h=this,m=h.editor,k=k;if(h.typing){h.add();h.typing=0}if(h.index>0){if(h.index==h.data.length&&h.index>1){k=h.index;h.typing=0;if(!h.add())h.index=k;--h.index}k=h.data[--h.index];m.setContent(k.content,{format:"raw"});m.selection.moveToBookmark(k.bookmark);h.onUndo.dispatch(h,k)}return k},redo:function(){var h=this,m=h.editor,k=null;if(h.index<h.data.length-1){k=h.data[++h.index];m.setContent(k.content,{format:"raw"});m.selection.moveToBookmark(k.bookmark);h.onRedo.dispatch(h,
k)}return k},clear:function(){var h=this;h.data=[];h.index=0;h.typing=0;h.add({initial:true})},hasUndo:function(){return this.index!=0||this.typing},hasRedo:function(){return this.index<this.data.length-1}})})(tinymce);
(function(l){function h(d,e){var g=e.ownerDocument.createRange();g.setStart(d.endContainer,d.endOffset);g.setEndAfter(e);return g.cloneContents().textContent.length==0}function m(d){d=d.innerHTML;d=d.replace(/<(img|hr|table|input|select|textarea)[ \>]/gi,"-");d=d.replace(/<[^>]+>/g,"");return d.replace(/[ \t\r\n]+/g,"")==""}var k,p,c,a,b;k=l.dom.Event;p=l.isIE;c=l.isGecko;a=l.isOpera;b=l.each;l.create("tinymce.ForceBlocks",{ForceBlocks:function(d){function e(s,j){if(a)j.content=j.content.replace(g.reOpera,
"</"+o+">");j.content=j.content.replace(g.rePadd,"<"+o+"$1$2$3$4$5$6>\u00a0</"+o+">");if(!p&&!a&&j.set){j.content=j.content.replace(g.reNbsp2BR1,"<"+o+"$1$2><br /></"+o+">");j.content=j.content.replace(g.reNbsp2BR2,"<"+o+"$1$2><br /></"+o+">")}else j.content=j.content.replace(g.reBR2Nbsp,"<"+o+"$1$2>\u00a0</"+o+">")}var g=this,n=d.settings,o;g.editor=d;g.dom=d.dom;o=(n.forced_root_block||"p").toLowerCase();n.element=o.toUpperCase();d.onPreInit.add(g.setup,g);g.reOpera=new RegExp("(\\u00a0|&#160;|&nbsp;)</"+
o+">","gi");g.rePadd=new RegExp("<p( )([^>]+)><\\/p>|<p( )([^>]+)\\/>|<p( )([^>]+)>\\s+<\\/p>|<p><\\/p>|<p\\/>|<p>\\s+<\\/p>".replace(/p/g,o),"gi");g.reNbsp2BR1=new RegExp("<p( )([^>]+)>[\\s\\u00a0]+<\\/p>|<p>[\\s\\u00a0]+<\\/p>".replace(/p/g,o),"gi");g.reNbsp2BR2=new RegExp("<%p()([^>]+)>(&nbsp;|&#160;)<\\/%p>|<%p>(&nbsp;|&#160;)<\\/%p>".replace(/%p/g,o),"gi");g.reBR2Nbsp=new RegExp("<p( )([^>]+)>\\s*<br \\/>\\s*<\\/p>|<p>\\s*<br \\/>\\s*<\\/p>".replace(/p/g,o),"gi");d.onBeforeSetContent.add(e);
d.onPostProcess.add(e);if(n.forced_root_block){d.onInit.add(g.forceRoots,g);d.onSetContent.add(g.forceRoots,g);d.onBeforeGetContent.add(g.forceRoots,g)}},setup:function(){function d(o,s){var j=g.dom.create(s);b(o.attributes,function(i){i.specified&&i.nodeValue&&j.setAttribute(i.nodeName.toLowerCase(),i.nodeValue)});b(o.childNodes,function(i){j.appendChild(i.cloneNode(true))});o.parentNode.replaceChild(j,o);return j}var e=this,g=e.editor,n=g.settings;if(n.forced_root_block){g.onKeyUp.add(e.forceRoots,
e);g.onPreProcess.add(e.forceRoots,e)}if(n.force_br_newlines)p&&g.onKeyPress.add(function(o,s){var j=o.selection;if(s.keyCode==13&&j.getNode().nodeName!="LI"){j.setContent('<br id="__" /> ',{format:"raw"});o=o.dom.get("__");o.removeAttribute("id");j.select(o);j.collapse();return k.cancel(s)}});else{if(!p&&n.force_p_newlines){g.onKeyPress.add(function(o,s){if(s.keyCode==13&&!s.shiftKey)e.insertPara(s)||k.cancel(s)});c&&g.onKeyDown.add(function(o,s){if((s.keyCode==8||s.keyCode==46)&&!s.shiftKey)e.backspaceDelete(s,
s.keyCode==8)})}g.onPreProcess.add(function(o,s){b(o.dom.select("p,h1,h2,h3,h4,h5,h6,div",s.node),function(j){m(j)&&b(o.dom.select("span,em,strong,b,i",s.node),function(i){if(!i.hasChildNodes()){i.appendChild(o.getDoc().createTextNode("\u00a0"));return false}})})});if(p)if(n.element!="P"){g.onKeyPress.add(function(o){e.lastElm=o.selection.getNode().nodeName});g.onKeyUp.add(function(o,s){var j=o.selection,i=j.getNode();if(o.getBody().childNodes.length===1&&i.nodeName=="P"){i=d(i,n.element);j.select(i);
j.collapse();o.nodeChanged()}else if(s.keyCode==13&&!s.shiftKey&&e.lastElm!="P")if(s=o.dom.getParent(i,"p")){d(s,n.element);o.nodeChanged()}})}}},find:function(d,e,g){for(var n=this.editor.getDoc().createTreeWalker(d,4,null,false),o=-1;d=n.nextNode();){o++;if(e==0&&d==g)return o;if(e==1&&o==g)return d}return-1},forceRoots:function(d){var e=this;d=e.editor;var g=d.getBody(),n=d.getDoc(),o=d.selection,s=o.getSel(),j=o.getRng(),i=-2,f,q,r,t,v,x=g.childNodes,w,u,y;for(w=x.length-1;w>=0;w--){v=x[w];if(v.nodeType===
3||!e.dom.isBlock(v)&&v.nodeType!==8&&!/^(script|mce:script|style|mce:style)$/i.test(v.nodeName))if(t)t.hasChildNodes()?t.insertBefore(v,t.firstChild):t.appendChild(v);else{if(v.nodeType!=3||/[^\s]/g.test(v.nodeValue)){if(i==-2&&j)if(p){t=n.body.createTextRange();t.moveToElementText(g);t.collapse(1);i=t.move("character",-16777215)*-1;t=j.duplicate();t.collapse(1);f=t.move("character",-16777215)*-1;t=j.duplicate();t.collapse(0);t=t.move("character",-16777215)*-1-f;i=f-i;f=t}else if(j.startContainer.nodeType==
1&&(u=j.startContainer.childNodes[j.startOffset])&&u.nodeType==1){y=u.getAttribute("id");u.setAttribute("id","__mce")}else if(d.dom.getParent(j.startContainer,function(A){return A===g})){q=j.startOffset;r=j.endOffset;i=e.find(g,0,j.startContainer);f=e.find(g,0,j.endContainer)}t=d.dom.create(d.settings.forced_root_block);v.parentNode.replaceChild(t,v);t.appendChild(v)}}else t=null}if(i!=-2)if(p)try{j=s.createRange();j.moveToElementText(g);j.collapse(1);j.moveStart("character",i);j.moveEnd("character",
f);j.select()}catch(z){}else{t=g.getElementsByTagName(d.settings.element)[0];j=n.createRange();i!=-1?j.setStart(e.find(g,1,i),q):j.setStart(t,0);f!=-1?j.setEnd(e.find(g,1,f),r):j.setEnd(t,0);if(s){s.removeAllRanges();s.addRange(j)}}else if(!p&&(u=d.dom.get("__mce"))){y?u.setAttribute("id",y):u.removeAttribute("id");j=n.createRange();j.setStartBefore(u);j.setEndBefore(u);o.setRng(j)}},getParentBlock:function(d){var e=this.dom;return e.getParent(d,e.isBlock)},insertPara:function(){function d(H,G){var I=
[],E;H.innerHTML="";if(j.keep_styles){E=G;do if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(E.nodeName)){G=E.cloneNode(false);o.setAttrib(G,"id","");I.push(G)}while(E=E.parentNode)}if(I.length>0){E=I.length-1;for(G=H;E>=0;E--)G=G.appendChild(I[E]);I[0].innerHTML=a?"&nbsp;":"<br />";return I[0]}else H.innerHTML=a?"&nbsp;":"<br />"}function e(H){return s.createTreeWalker(H,NodeFilter.SHOW_TEXT,null,false).nextNode()||H}var g=this,n=g.editor,o=n.dom,s=n.getDoc(),j=n.settings,i=n.selection.getSel(),f=
i.getRangeAt(0),q=s.body,r,t,v,x,w,u,y,z,A,B,C,D=o.getViewPort(n.getWin()),F;r=s.createRange();r.setStart(i.anchorNode,i.anchorOffset);r.collapse(true);t=s.createRange();t.setStart(i.focusNode,i.focusOffset);t.collapse(true);x=(v=r.compareBoundaryPoints(r.START_TO_END,t)<0)?i.anchorNode:i.focusNode;w=v?i.anchorOffset:i.focusOffset;u=v?i.focusNode:i.anchorNode;v=v?i.focusOffset:i.anchorOffset;if(x===u&&/^(TD|TH)$/.test(x.nodeName)){x.firstChild.nodeName=="BR"&&o.remove(x.firstChild);if(x.childNodes.length==
0)n.dom.add(x,j.element,null,"<br />");else{f=x.innerHTML;x.innerHTML="";n.dom.add(x,j.element,null,f)}z=n.dom.add(x,j.element,null,"<br />");f=s.createRange();f.selectNodeContents(z);f.collapse(1);n.selection.setRng(f);return false}if(x==q&&u==q&&q.firstChild&&n.dom.isBlock(q.firstChild)){x=u=x.firstChild;w=v=0;r=s.createRange();r.setStart(x,0);t=s.createRange();t.setStart(u,0)}x=x.nodeName=="HTML"?s.body:x;x=x.nodeName=="BODY"?x.firstChild:x;u=u.nodeName=="HTML"?s.body:u;u=u.nodeName=="BODY"?u.firstChild:
u;y=g.getParentBlock(x);z=g.getParentBlock(u);A=y?y.nodeName:j.element;if(g.dom.getParent(y,"ol,ul,pre"))return true;if(y&&(y.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(o.getStyle(y,"position",1)))){A=j.element;y=null}if(z&&(z.nodeName=="CAPTION"||/absolute|relative|fixed/gi.test(o.getStyle(y,"position",1)))){A=j.element;z=null}if(/(TD|TABLE|TH|CAPTION)/.test(A)||y&&A=="DIV"&&/left|right/gi.test(o.getStyle(y,"float",1))){A=j.element;y=z=null}B=y&&y.nodeName==A?y.cloneNode(0):n.dom.create(A);
z=z&&z.nodeName==A?z.cloneNode(0):n.dom.create(A);z.removeAttribute("id");if(/^(H[1-6])$/.test(A)&&h(f,y))z=n.dom.create(j.element);f=y=x;do{if(f==q||f.nodeType==9||g.dom.isBlock(f)||/(TD|TABLE|TH|CAPTION)/.test(f.nodeName))break;y=f}while(f=f.previousSibling?f.previousSibling:f.parentNode);f=C=u;do{if(f==q||f.nodeType==9||g.dom.isBlock(f)||/(TD|TABLE|TH|CAPTION)/.test(f.nodeName))break;C=f}while(f=f.nextSibling?f.nextSibling:f.parentNode);y.nodeName==A?r.setStart(y,0):r.setStartBefore(y);r.setEnd(x,
w);B.appendChild(r.cloneContents()||s.createTextNode(""));try{t.setEndAfter(C)}catch(J){}t.setStart(u,v);z.appendChild(t.cloneContents()||s.createTextNode(""));f=s.createRange();if(!y.previousSibling&&y.parentNode.nodeName==A)f.setStartBefore(y.parentNode);else r.startContainer.nodeName==A&&r.startOffset==0?f.setStartBefore(r.startContainer):f.setStart(r.startContainer,r.startOffset);!C.nextSibling&&C.parentNode.nodeName==A?f.setEndAfter(C.parentNode):f.setEnd(t.endContainer,t.endOffset);f.deleteContents();
a&&n.getWin().scrollTo(0,D.y);if(B.firstChild&&B.firstChild.nodeName==A)B.innerHTML=B.firstChild.innerHTML;if(z.firstChild&&z.firstChild.nodeName==A)z.innerHTML=z.firstChild.innerHTML;if(m(B))B.innerHTML="<br />";if(m(z))F=d(z,u);if(a&&parseFloat(opera.version())<9.5){f.insertNode(B);f.insertNode(z)}else{f.insertNode(z);f.insertNode(B)}z.normalize();B.normalize();f=s.createRange();f.selectNodeContents(c?e(F||z):F||z);f.collapse(1);i.removeAllRanges();i.addRange(f);g=n.dom.getPos(z).y;i=z.clientHeight;
if(g<D.y||g+i>D.y+D.h)n.getWin().scrollTo(0,g<D.y?g:g-D.h+25);return false},backspaceDelete:function(d,e){function g(r){var t;if((r=r.target)&&r.parentNode&&r.nodeName=="BR"&&(j=n.getParentBlock(r))){t=r.previousSibling;k.remove(s,"DOMNodeInserted",g);if(!(t&&t.nodeType==3&&/\s+$/.test(t.nodeValue)))if(r.previousSibling||r.nextSibling)o.dom.remove(r)}}var n=this,o=n.editor,s=o.getBody(),j,i=o.selection,f=i.getRng(),q=f.startContainer;if(q&&o.dom.isBlock(q)&&!/^(TD|TH)$/.test(q.nodeName)&&e)if(q.childNodes.length==
0||q.childNodes.length==1&&q.firstChild.nodeName=="BR"){for(j=q;(j=j.previousSibling)&&!o.dom.isBlock(j););if(j){if(q!=s.firstChild){for(e=o.dom.doc.createTreeWalker(j,NodeFilter.SHOW_TEXT,null,false);f=e.nextNode();)j=f;f=o.getDoc().createRange();f.setStart(j,j.nodeValue?j.nodeValue.length:0);f.setEnd(j,j.nodeValue?j.nodeValue.length:0);i.setRng(f);o.dom.remove(q)}return k.cancel(d)}}k._add(s,"DOMNodeInserted",g);window.setTimeout(function(){k._remove(s,"DOMNodeInserted",g)},1)}})})(tinymce);
(function(l){var h=l.dom.Event,m=l.each,k=l.extend;l.create("tinymce.ControlManager",{ControlManager:function(p,c){var a=this;c=c||{};a.editor=p;a.controls={};a.onAdd=new l.util.Dispatcher(a);a.onPostRender=new l.util.Dispatcher(a);a.prefix=c.prefix||p.id+"_";a._cls={};a.onPostRender.add(function(){m(a.controls,function(b){b.postRender()})})},get:function(p){return this.controls[this.prefix+p]||this.controls[p]},setActive:function(p,c){var a=null;if(a=this.get(p))a.setActive(c);return a},setDisabled:function(p,
c){var a=null;if(a=this.get(p))a.setDisabled(c);return a},add:function(p){var c=this;if(p){c.controls[p.id]=p;c.onAdd.dispatch(p,c)}return p},createControl:function(p){var c,a=this,b=a.editor;m(b.plugins,function(d){if(d.createControl)if(c=d.createControl(p,a))return false});switch(p){case "|":case "separator":return a.createSeparator()}if(!c&&b.buttons&&(c=b.buttons[p]))return a.createButton(p,c);return a.add(c)},createDropMenu:function(p,c,a){var b=this,d=b.editor,e,g,n;c=k({"class":"mceDropDown",
constrain:d.settings.constrain_menus},c);c["class"]=c["class"]+" "+d.getParam("skin")+"Skin";if(n=d.getParam("skin_variant"))c["class"]+=" "+d.getParam("skin")+"Skin"+n.substring(0,1).toUpperCase()+n.substring(1);p=b.prefix+p;e=b.controls[p]=new (a||b._cls.dropmenu||l.ui.DropMenu)(p,c);e.onAddItem.add(function(o,s){var j=s.settings;j.title=d.getLang(j.title,j.title);if(!j.onclick)j.onclick=function(){d.execCommand(j.cmd,j.ui||false,j.value)}});d.onRemove.add(function(){e.destroy()});if(l.isIE){e.onShowMenu.add(function(){d.focus();
g=d.selection.getBookmark(1)});e.onHideMenu.add(function(){if(g){d.selection.moveToBookmark(g);g=0}})}return b.add(e)},createListBox:function(p,c,a){var b=this,d=b.editor;if(b.get(p))return null;c.title=d.translate(c.title);c.scope=c.scope||d;if(!c.onselect)c.onselect=function(e){d.execCommand(c.cmd,c.ui||false,e||c.value)};c=k({title:c.title,"class":"mce_"+p,scope:c.scope,control_manager:b},c);p=b.prefix+p;if(d.settings.use_native_selects)a=new l.ui.NativeListBox(p,c);else{a=a||b._cls.listbox||l.ui.ListBox;
a=new a(p,c)}b.controls[p]=a;l.isWebKit&&a.onPostRender.add(function(e,g){h.add(g,"mousedown",function(){d.bookmark=d.selection.getBookmark(1)});h.add(g,"focus",function(){d.selection.moveToBookmark(d.bookmark);d.bookmark=null})});a.hideMenu&&d.onMouseDown.add(a.hideMenu,a);return b.add(a)},createButton:function(p,c,a){var b=this,d=b.editor;if(b.get(p))return null;c.title=d.translate(c.title);c.label=d.translate(c.label);c.scope=c.scope||d;if(!c.onclick&&!c.menu_button)c.onclick=function(){d.execCommand(c.cmd,
c.ui||false,c.value)};c=k({title:c.title,"class":"mce_"+p,unavailable_prefix:d.getLang("unavailable",""),scope:c.scope,control_manager:b},c);p=b.prefix+p;if(c.menu_button){a=a||b._cls.menubutton||l.ui.MenuButton;p=new a(p,c);d.onMouseDown.add(p.hideMenu,p)}else{a=b._cls.button||l.ui.Button;p=new a(p,c)}return b.add(p)},createMenuButton:function(p,c,a){c=c||{};c.menu_button=1;return this.createButton(p,c,a)},createSplitButton:function(p,c,a){var b=this,d=b.editor;if(b.get(p))return null;c.title=d.translate(c.title);
c.scope=c.scope||d;if(!c.onclick)c.onclick=function(e){d.execCommand(c.cmd,c.ui||false,e||c.value)};if(!c.onselect)c.onselect=function(e){d.execCommand(c.cmd,c.ui||false,e||c.value)};c=k({title:c.title,"class":"mce_"+p,scope:c.scope,control_manager:b},c);p=b.prefix+p;p=b.add(new (a||b._cls.splitbutton||l.ui.SplitButton)(p,c));d.onMouseDown.add(p.hideMenu,p);return p},createColorSplitButton:function(p,c,a){var b=this,d=b.editor,e,g;if(b.get(p))return null;c.title=d.translate(c.title);c.scope=c.scope||
d;if(!c.onclick)c.onclick=function(n){if(l.isIE)g=d.selection.getBookmark(1);d.execCommand(c.cmd,c.ui||false,n||c.value)};if(!c.onselect)c.onselect=function(n){d.execCommand(c.cmd,c.ui||false,n||c.value)};c=k({title:c.title,"class":"mce_"+p,menu_class:d.getParam("skin")+"Skin",scope:c.scope,more_colors_title:d.getLang("more_colors")},c);p=b.prefix+p;e=new (a||b._cls.colorsplitbutton||l.ui.ColorSplitButton)(p,c);d.onMouseDown.add(e.hideMenu,e);d.onRemove.add(function(){e.destroy()});if(l.isIE){e.onShowMenu.add(function(){d.focus();
g=d.selection.getBookmark(1)});e.onHideMenu.add(function(){if(g){d.selection.moveToBookmark(g);g=0}})}return b.add(e)},createToolbar:function(p,c,a){var b=this;p=b.prefix+p;c=new (a||b._cls.toolbar||l.ui.Toolbar)(p,c);if(b.get(p))return null;return b.add(c)},createSeparator:function(p){return new (p||this._cls.separator||l.ui.Separator)},setControlType:function(p,c){return this._cls[p.toLowerCase()]=c},destroy:function(){m(this.controls,function(p){p.destroy()});this.controls=null}})})(tinymce);
(function(l){var h=l.util.Dispatcher,m=l.each,k=l.isIE,p=l.isOpera;l.create("tinymce.WindowManager",{WindowManager:function(c){var a=this;a.editor=c;a.onOpen=new h(a);a.onClose=new h(a);a.params={};a.features={}},open:function(c,a){var b=this,d="",e=b.editor.settings.dialog_type=="modal",g,n,o;o=l.DOM.getViewPort();c=c||{};a=a||{};n=p?o.w:screen.width;o=p?o.h:screen.height;c.name=c.name||"mc_"+(new Date).getTime();c.width=parseInt(c.width||320);c.height=parseInt(c.height||240);c.resizable=true;c.left=
c.left||parseInt(n/2)-c.width/2;c.top=c.top||parseInt(o/2)-c.height/2;a.inline=false;a.mce_width=c.width;a.mce_height=c.height;a.mce_auto_focus=c.auto_focus;if(e)if(k){c.center=true;c.help=false;c.dialogWidth=c.width+"px";c.dialogHeight=c.height+"px";c.scroll=c.scrollbars||false}m(c,function(j,i){if(l.is(j,"boolean"))j=j?"yes":"no";/^(name|url)$/.test(i)||(d+=k&&e?(d?";":"")+i+":"+j:(d?",":"")+i+"="+j)});b.features=c;b.params=a;b.onOpen.dispatch(b,c,a);a=c.url||c.file;a=l._addVer(a);try{if(k&&e){g=
1;window.showModalDialog(a,window,d)}else g=window.open(a,c.name,d)}catch(s){}g||alert(b.editor.getLang("popup_blocked"))},close:function(c){c.close();this.onClose.dispatch(this)},createInstance:function(c,a,b,d,e,g){return new (l.resolve(c))(a,b,d,e,g)},confirm:function(c,a,b,d){d=d||window;a.call(b||this,d.confirm(this._decode(this.editor.getLang(c,c))))},alert:function(c,a,b,d){var e=this;d=d||window;d.alert(e._decode(e.editor.getLang(c,c)));if(a)a.call(b||e)},_decode:function(c){return l.DOM.decode(c).replace(/\\n/g,
"\n")}})})(tinymce);
(function(l){l.CommandManager=function(){function h(c,a,b,d){if(typeof a=="string")a=[a];l.each(a,function(e){c[e.toLowerCase()]={func:b,scope:d}})}var m={},k={},p={};l.extend(this,{add:function(c,a,b){h(m,c,a,b)},addQueryStateHandler:function(c,a,b){h(k,c,a,b)},addQueryValueHandler:function(c,a,b){h(p,c,a,b)},execCommand:function(c,a,b,d,e){if(a=m[a.toLowerCase()])if(a.func.call(c||a.scope,b,d,e)!==false)return true},queryCommandValue:function(){if(cmd=p[cmd.toLowerCase()])return cmd.func.call(scope||cmd.scope,
ui,value,args)},queryCommandState:function(){if(cmd=k[cmd.toLowerCase()])return cmd.func.call(scope||cmd.scope,ui,value,args)}})};l.GlobalCommands=new l.CommandManager})(tinymce);
(function(l){function h(m,k,p,c){function a(g,n){do{if(g.parentNode==n)return g;g=g.parentNode}while(g)}function b(g){c(g);l.walk(g,c,"childNodes")}var d,e;d=m.findCommonAncestor(k,p);m=a(k,d)||k;d=a(p,d)||p;for(k=k;k&&k!=m;k=k.parentNode)for(e=k.nextSibling;e;e=e.nextSibling)b(e);if(m!=d)for(k=m.nextSibling;k&&k!=d;k=k.nextSibling)b(k);else b(m);for(k=p;k&&k!=d;k=k.parentNode)for(e=k.previousSibling;e;e=e.previousSibling)b(e)}l.GlobalCommands.add("RemoveFormat",function(){function m(q){var r;a.getParent(q,
function(t){if(a.is(t,c.getParam("removeformat_selector")))r=t;return a.isBlock(t)},c.getBody());return r}function k(q){a.is(q,c.getParam("removeformat_selector"))&&e.push(q)}function p(q){k(q);l.walk(q,k,"childNodes")}var c=this,a=c.dom,b=c.selection,d=b.getRng(1),e=[],g,n,o,s,j,i,f;g=b.getBookmark();o=d.startContainer;j=d.endContainer;s=d.startOffset;i=d.endOffset;o=o.nodeType==1?o.childNodes[Math.min(s,o.childNodes.length-1)]:o;j=j.nodeType==1?j.childNodes[Math.min(s==i?i:i-1,j.childNodes.length-
1)]:j;if(o==j){d=m(o);if(o.nodeType==3){if(d&&d.nodeType==1){f=o.splitText(s);f.splitText(i-s);a.split(d,f);b.moveToBookmark(g)}return}p(a.split(d,o)||o)}else{d=m(o);n=m(j);if(d)if(o.nodeType==3){if(s==o.nodeValue.length)o.nodeValue+="\ufeff";o=o.splitText(s)}n&&j.nodeType==3&&j.splitText(i);d&&d==n&&a.replace(a.create("span",{id:"__end"},j.cloneNode(true)),j);d=d?a.split(d,o):o;if(f=a.get("__end")){j=f;n=m(j)}n=n?a.split(n,j):j;h(a,d,n,k);if(o.nodeValue=="\ufeff")o.nodeValue="";p(j);p(o)}l.each(e,
function(q){a.remove(q,1)});a.remove("__end",1);b.moveToBookmark(g)})})(tinymce);
(function(l){l.GlobalCommands.add("mceBlockQuote",function(){function h(o){return p.getParent(o,function(s){return s.nodeName==="BLOCKQUOTE"})}var m=this,k=m.selection,p=m.dom,c,a,b,d,e,g,n;c=p.getParent(k.getStart(),p.isBlock);a=p.getParent(k.getEnd(),p.isBlock);if(e=h(c)){if(c!=a||c.childNodes.length>1||c.childNodes.length==1&&c.firstChild.nodeName!="BR")d=k.getBookmark();if(h(a))for(g=e.cloneNode(false);b=a.nextSibling;)g.appendChild(b.parentNode.removeChild(b));g&&p.insertAfter(g,e);n=k.getSelectedBlocks(c,
a);for(a=n.length-1;a>=0;a--)p.insertAfter(n[a],e);/^\s*$/.test(e.innerHTML)&&p.remove(e,1);g&&/^\s*$/.test(g.innerHTML)&&p.remove(g,1);if(d)m.selection.moveToBookmark(d);else if(l.isIE){k.select(c);k.collapse(0);if(p.getParent(k.getStart(),p.isBlock)!=c){m=k.getRng();m.move("character",-1);m.select()}}else{m=m.getDoc().createRange();m.setStart(c,0);m.setEnd(c,0);k.setRng(m)}}else if(l.isIE&&!c&&!a){m.getDoc().execCommand("Indent");b=h(k.getNode());b.style.margin=b.dir=""}else if(c&&a){if(c!=a||c.childNodes.length>
1||c.childNodes.length==1&&c.firstChild.nodeName!="BR")d=k.getBookmark();l.each(k.getSelectedBlocks(h(k.getStart()),h(k.getEnd())),function(o){if(o.nodeName=="BLOCKQUOTE"&&!e)e=o;else{if(!e){e=p.create("blockquote");o.parentNode.insertBefore(e,o)}if(o.nodeName=="BLOCKQUOTE"&&e){for(b=o.firstChild;b;){e.appendChild(b.cloneNode(true));b=b.nextSibling}p.remove(o)}else e.appendChild(p.remove(o))}});if(d)k.moveToBookmark(d);else if(l.isIE){k.select(c);k.collapse(1)}else{m=m.getDoc().createRange();m.setStart(c,
0);m.setEnd(c,0);k.setRng(m)}}})})(tinymce);(function(l){l.each(["Cut","Copy","Paste"],function(h){l.GlobalCommands.add(h,function(){var m=this,k=m.getDoc();try{k.execCommand(h,false,null);if(!k.queryCommandEnabled(h))throw"Error";}catch(p){l.isGecko?m.windowManager.confirm(m.getLang("clipboard_msg"),function(c){c&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):m.windowManager.alert(m.getLang("clipboard_no_support"))}})})})(tinymce);
(function(l){l.GlobalCommands.add("InsertHorizontalRule",function(){if(l.isOpera)return this.getDoc().execCommand("InsertHorizontalRule",false,"");this.selection.setContent("<hr />")})})(tinymce);
(function(){var l=tinymce.GlobalCommands;l.add(["mceEndUndoLevel","mceAddUndoLevel"],function(){this.undoManager.add()});l.add("Undo",function(){var h=this;if(h.settings.custom_undo_redo){h.undoManager.undo();h.nodeChanged();return true}return false});l.add("Redo",function(){var h=this;if(h.settings.custom_undo_redo){h.undoManager.redo();h.nodeChanged();return true}return false})})();
