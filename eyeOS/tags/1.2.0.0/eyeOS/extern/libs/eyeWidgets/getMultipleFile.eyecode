<?php 
/*
                                  ____   _____ 
                                 / __ \ / ____|
                  ___ _   _  ___| |  | | (___  
                 / _ \ | | |/ _ \ |  | |\___ \ 
                |  __/ |_| |  __/ |__| |____) |
                 \___|\__, |\___|\____/|_____/ 
                       __/ |                   
                      |___/              1.2

                     Web Operating System
                           eyeOS.org

             eyeOS Engineering Team - eyeOS.org/whoarewe

     eyeOS is released under the GNU General Public License Version 3 (GPL3)
            provided with this release in license.txt
             or via web at gnu.org/licenses/gpl.txt

        Copyright 2005-2007 eyeOS Team (team@eyeos.org)         
*/
 

function get_dynamic_content($params) {
	global $myPid;
	$checknum=$params[0];		
	$myPid2 = $params[3];
	$myCallback = htmlentities($params[1],ENT_QUOTES,'UTF-8');
	$myFiles = htmlentities($params[2],ENT_QUOTES,'UTF-8');
	if(!is_numeric($checknum)) {
		exit;
	}
	echo '<html>
	<head>
		<script>
			currentRow=0;	
			function addFile(){								
				//Upading the old file input
				var oldCell = document.getElementById("rm"+currentRow);
				oldCell.innerHTML="<img id=\'rmimg"+currentRow+"\' src=\'index.php?extern=apps/eyeX/themes/default/icons/16x16/delete.png\'>";
				var oldCellImg = document.getElementById("rmimg"+currentRow);
				oldCellImg.row = currentRow;
				oldCellImg.onclick = removeFile;
				
				//Getting the table				
				currentRow++;				
				var table = document.getElementById("tableFiles");				
				var row = table.insertRow(0);					
				//creating the rows							
				row.setAttribute(\'id\',"tr"+currentRow);				
				row.insertCell(0).innerHTML="<input type=\'file\' id=\'file\'+currentRow\' name=\''.$myFiles.'["+currentRow+"]\' style=\'font-family:Verdana;font-size:11px;\'/>";
				row.insertCell(1).innerHTML=" <div id=\'rm"+currentRow+"\' onClick=\'addFile()\' style=\'cursor: pointer;\'><img src=\'index.php?extern=apps/eyeX/themes/default/icons/16x16/new.png\' style=\'margin-bottom: -4px;\'> <span style=\'font-size: 10px;\'>'.i18n("translate",array("Another file")).'</span></div>";
			}	
			function removeFile(e){
				var targ
				if(!e){
					 var e = window.event
				}
				if(e.target){
					 targ = e.target
				}else if(e.srcElement){
					 targ = e.srcElement	
				}
				if (targ.nodeType == 3){
					targ = targ.parentNode
				}			
				var num = targ.row;
				tr = document.getElementById("tr"+num);	   
				tr.parentNode.removeChild(tr);
			}
		</script>
	</head>
<body>
	<form enctype="multipart/form-data" action="index.php?checknum='.$checknum.'&msg='.$myCallback.'" method="POST">
		<table border="0" id="tableFiles" cellspacing="0">
			<tr id="tr0">
				<td><input type="file" id="file0" name="'.$myFiles.'[0]" style="font-family:Verdana;font-size:11px;" /></td><td> <div id="rm0" onClick="addFile()" style="cursor: pointer;"><img src="index.php?extern=apps/eyeX/themes/default/icons/16x16/new.png" style="margin-bottom: -4px;"> <span style=\'font-size: 10px;\'>'.i18n("translate",array("Another file")).'</span></div>							
			</tr>
		</table>
		<input type="submit" value="'.i18n("translate",array("Upload")).'" style="font-family:Verdana;font-size:11px;" />			       
	</form>
</body>
</html>';
	exit;
}

?>