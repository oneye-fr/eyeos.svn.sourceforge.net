function createImageButton(c,d,b){var a=document.createElement("img");a.src=Slimey.imagesDir+c+".png";a.className="slimeyTool";a.title=d;a.slimeyTool=b;a.style.marginLeft="4px";a.style.marginBottom="4px";a.style.verticalAlign="middle";a.style.cursor="pointer";a.onmouseover=function(){if(this.slimeyTool.enabled&&this.slimeyTool.toggled!=this){this.src=Slimey.imagesDir+c+"h.png"}};a.onmouseout=function(){if(this.slimeyTool.enabled){if(this.slimeyTool.toggled==this){this.src=Slimey.imagesDir+c+"d.png"}else{this.src=Slimey.imagesDir+c+".png"}}};a.onmousedown=function(){if(this.slimeyTool.enabled){this.src=Slimey.imagesDir+c+"d.png"}};a.onmouseup=function(){if(this.slimeyTool.enabled){this.src=Slimey.imagesDir+c+"h.png"}};a.onclick=function(){if(this.slimeyTool.enabled){this.slimeyTool.execute()}};return a}var SlimeyTool=function(a,b,c){this.slimey=c;this.name=a;this.element=b;this.enabled=true};SlimeyTool.prototype.getName=function(){return this.name};SlimeyTool.prototype.getElement=function(){return this.element};SlimeyTool.prototype.execute=function(){alert(lang("generic tool"))};SlimeyTool.prototype.notifySelectionChange=function(){};var SlimeyInsertTool=function(b){var a=createImageButton("insert",lang("insert an element"),this);SlimeyTool.call(this,"insert",a,b)};SlimeyInsertTool.prototype=new SlimeyTool();SlimeyInsertTool.prototype.execute=function(){var a=prompt(lang("what element do you wish to insert?"));if(a){var b=new SlimeyInsertAction(this.slimey,a);this.slimey.editor.performAction(b)}};var SlimeyInsertTextTool=function(b){var a=createImageButton("insertText",lang("insert text"),this);SlimeyTool.call(this,"insertText",a,b)};SlimeyInsertTextTool.prototype=new SlimeyTool();SlimeyInsertTextTool.prototype.execute=function(){var a=new SlimeyInsertAction(this.slimey,"div");this.slimey.editor.performAction(a)};var SlimeyInsertImageTool=function(b){var a=createImageButton("insertImage",lang("insert image"),this);SlimeyTool.call(this,"insertImage",a,b)};SlimeyInsertImageTool.prototype=new SlimeyTool();SlimeyInsertImageTool.prototype.execute=function(){chooseImage(this.imageChosen,this,this.element)};SlimeyInsertImageTool.prototype.imageChosen=function(a){if(a){var b=new SlimeyInsertAction(this.slimey,"img");b.getElement().src=a;this.slimey.editor.performAction(b)}};var SlimeyInsertOrderedListTool=function(b){var a=createImageButton("insertOList",lang("insert ordered list"),this);SlimeyTool.call(this,"insertOList",a,b)};SlimeyInsertOrderedListTool.prototype=new SlimeyTool();SlimeyInsertOrderedListTool.prototype.execute=function(){var a=new SlimeyInsertAction(this.slimey,"ol");this.slimey.editor.performAction(a)};var SlimeyInsertUnorderedListTool=function(b){var a=createImageButton("insertUList",lang("insert unordered list"),this);SlimeyTool.call(this,"insertUList",a,b)};SlimeyInsertUnorderedListTool.prototype=new SlimeyTool();SlimeyInsertUnorderedListTool.prototype.execute=function(){var a=new SlimeyInsertAction(this.slimey,"ul");this.slimey.editor.performAction(a)};var SlimeyEditContentTool=function(b){var a=document.createElement("textarea");a.slimeyTool=this;a.style.height="25px";a.style.width="100%";a.style.backgroundColor="lightYellow";a.style.marginBottom="4px";a.title=lang("edit the element's content");a.onkeyup=function(){this.slimeyTool.execute()};SlimeyTool.call(this,"editContent",a,b);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.element.disabled=true};SlimeyEditContentTool.prototype=new SlimeyTool();SlimeyEditContentTool.prototype.execute=function(){var c=this.element.value;var a=this.slimey.editor.getSelected();if(a.tagName=="UL"||a.tagName=="OL"){c="<li>"+c+"</li>";c=c.replace(/\n/g,"</li><li>")}else{if(a.tagName=="DIV"){c=c.replace(/\n/g,"<br>")}}var b=new SlimeyEditContentAction(this.slimey,c);this.slimey.editor.performAction(b)};SlimeyEditContentTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a){var b=a.innerHTML;if(a.tagName=="UL"||a.tagName=="OL"){b=b.replace(/<\/li><li>/gi,"\n");b=b.replace(/<li>|<\/li>/gi,"")}else{if(a.tagName=="DIV"){b=b.replace(/<br>/gi,"\n")}}if(b!=this.element.value){this.element.value=b}if(a.editable){this.element.disabled=false}else{this.element.disabled=true}}else{this.element.value="";this.element.disabled=true}};var SlimeyFontColorTool=function(b){var a=createImageButton("color",lang("change font color"),this);SlimeyTool.call(this,"color",a,b);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyFontColorTool.prototype=new SlimeyTool();SlimeyFontColorTool.prototype.execute=function(){chooseColor(this.colorChosen,this,this.element)};SlimeyFontColorTool.prototype.colorChosen=function(a){if(a){var b=new SlimeyEditStyleAction(this.slimey,"color",a);this.slimey.editor.performAction(b)}};SlimeyFontColorTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.editable){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};var SlimeyFontSizeTool=function(c){var a=document.createElement("select");a.style.height="20px";a.style.width="80px";a.style.marginLeft="4px";a.title="Change font family";var b=document.createElement("option");b.value=b.style.fontSize="";b.appendChild(document.createTextNode("-- Size --"));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="80%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="100%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="120%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="140%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="160%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="200%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="300%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="400%";b.appendChild(document.createTextNode(b.value));a.appendChild(b);a.slimeyTool=this;a.onchange=function(){this.slimeyTool.execute()};SlimeyTool.call(this,"fontsize",a,c);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.element.disabled=true};SlimeyFontSizeTool.prototype=new SlimeyTool();SlimeyFontSizeTool.prototype.execute=function(){var a=new SlimeyEditStyleAction(this.slimey,"fontSize",this.element.value);this.slimey.editor.performAction(a)};SlimeyFontSizeTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.style.fontSize&&a.editable){this.element.value=a.style.fontSize;this.element.disabled=false}else{if(a&&a.editable){this.element.value="";this.element.disabled=false}else{this.element.disabled=true}}};SlimeyFontSizeTool.prototype.notifyActionPerformed=SlimeyFontSizeTool.prototype.notifySelectionChange;var SlimeyFontFamilyTool=function(d){var a=document.createElement("select");a.style.height="20px";a.style.width="140px";a.style.marginLeft="4px";a.title=lang("change font size");var c=document.createElement("option");c.value=c.style.fontFamily="";c.appendChild(document.createTextNode("-- "+lang("font family")+" --"));a.appendChild(c);var b=document.createElement("optgroup");b.setAttribute("label",lang("generic fonts"));a.appendChild(b);c=document.createElement("option");c.value=c.style.fontFamily="serif";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="sans-serif";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="cursive";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="fantasy";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="monospace";c.appendChild(document.createTextNode(c.value));a.appendChild(c);b=document.createElement("optgroup");b.setAttribute("label",lang("specific fonts"));a.appendChild(b);c=document.createElement("option");c.value=c.style.fontFamily="Arial";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="Book Antigua";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="Comic Sans";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="Courier New";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="Tahoma";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="Times New Roman";c.appendChild(document.createTextNode(c.value));a.appendChild(c);c=document.createElement("option");c.value=c.style.fontFamily="Verdana";c.appendChild(document.createTextNode(c.value));a.appendChild(c);a.slimeyTool=this;a.onchange=function(){this.slimeyTool.execute()};SlimeyTool.call(this,"fontfamily",a,d);this.element.disabled=true;this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this)};SlimeyFontFamilyTool.prototype=new SlimeyTool();SlimeyFontFamilyTool.prototype.execute=function(){var a=new SlimeyEditStyleAction(this.slimey,"fontFamily",this.element.value);this.slimey.editor.performAction(a)};SlimeyFontFamilyTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.style.fontFamily&&a.editable){this.element.value=a.style.fontFamily;this.element.disabled=false}else{if(a&&a.editable){this.element.value="";this.element.disabled=false}else{this.element.disabled=true}}};SlimeyFontFamilyTool.prototype.notifyActionPerformed=SlimeyFontFamilyTool.prototype.notifySelectionChange;var SlimeyDeleteTool=function(b){var a=createImageButton("delete",lang("delete element"),this);SlimeyTool.call(this,"delete",a,b);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;a.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyDeleteTool.prototype=new SlimeyTool();SlimeyDeleteTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a){var b=new SlimeyDeleteAction(this.slimey);this.slimey.editor.performAction(b)}};SlimeyDeleteTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};var SlimeyUndoTool=function(b){var a=createImageButton("undo","Undo",this);SlimeyTool.call(this,"undo",a,b);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyUndoTool.prototype=new SlimeyTool();SlimeyUndoTool.prototype.execute=function(){this.slimey.editor.undo()};SlimeyUndoTool.prototype.notifyActionPerformed=function(){if(this.slimey.editor.undoStack.isEmpty()){this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}else{this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}};var SlimeyRedoTool=function(b){var a=createImageButton("redo",lang("redo"),this);SlimeyTool.call(this,"redo",a,b);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyRedoTool.prototype=new SlimeyTool();SlimeyRedoTool.prototype.execute=function(){this.slimey.editor.redo()};SlimeyRedoTool.prototype.notifyActionPerformed=function(){if(this.slimey.editor.redoStack.isEmpty()){this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}else{this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}};var SlimeyStyleToggleTool=function(f,d,g,e,c,a){var b=createImageButton(d,g,this);this.property=e;this.value1=c;this.value2=a;SlimeyTool.call(this,d,b,f);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyStyleToggleTool.prototype=new SlimeyTool();SlimeyStyleToggleTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a){var b;if(a.style[this.property]==this.value1){b=new SlimeyEditStyleAction(this.slimey,this.property,this.value2);this.toggled=false;this.element.src=Slimey.imagesDir+this.name+".png"}else{b=new SlimeyEditStyleAction(this.slimey,this.property,this.value1);this.toggled=this.element;this.element.src=Slimey.imagesDir+this.name+"d.png"}this.slimey.editor.performAction(b)}};SlimeyStyleToggleTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.editable){this.enabled=true;if(a.style[this.property]==this.value1){this.toggled=this.element;this.element.src=Slimey.imagesDir+this.name+"d.png"}else{this.toggled=false;this.element.src=Slimey.imagesDir+this.name+".png"}this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};SlimeyStyleToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange;var SlimeyStyleGroupToggleTool=function(f,b,e,a){window.options=a;var d=document.createElement("span");for(var c=0;c<a.length;c++){a[c].img=createImageButton(a[c].name,a[c].title,this);a[c].img.option=a[c];a[c].img.onclick=function(){if(this.slimeyTool.enabled){this.slimeyTool.toggled=this;this.slimeyTool.execute()}};d.appendChild(a[c].img)}this.options=a;this.property=e;SlimeyTool.call(this,b,d,f);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enable(false)};SlimeyStyleGroupToggleTool.prototype=new SlimeyTool();SlimeyStyleGroupToggleTool.prototype.enable=function(a){this.enabled=a;for(var b=0;b<this.options.length;b++){if(a){this.options[b].img.src=Slimey.imagesDir+this.options[b].name+".png";this.options[b].img.style.cursor="pointer"}else{this.options[b].img.src=Slimey.imagesDir+this.options[b].name+"x.png";this.options[b].img.style.cursor="default"}}if(a&&this.toggled){this.toggled.src=Slimey.imagesDir+this.toggled.option.name+"d.png";this.toggled.style.cursor="pointer"}};SlimeyStyleGroupToggleTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a&&this.toggled){var c=this.toggled;if(a.style[this.property]!=c.option.value){var b=new SlimeyEditStyleAction(this.slimey,this.property,c.option.value);this.enable(true);this.slimey.editor.performAction(b);this.toggled=c}}};SlimeyStyleGroupToggleTool.prototype.notifySelectionChange=function(){var b=this.slimey.editor.getSelected();if(b){var c=b.style[this.property];for(var a=0;a<this.options.length;a++){if(this.options[a].value==c){this.toggled=this.options[a].img}}}this.enable(b&&b.editable)};SlimeyStyleGroupToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange;var SlimeySendToBackTool=function(b){var a=createImageButton("sendToBack",lang("send element to the back"),this);SlimeyTool.call(this,"sendToBack",a,b);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeySendToBackTool.prototype=new SlimeyTool();SlimeySendToBackTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a){var b=new SlimeySendToBackAction(this.slimey);this.slimey.editor.performAction(b)}};SlimeySendToBackTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};var SlimeyBringToFrontTool=function(b){var a=createImageButton("bringToFront",lang("bring element to the front"),this);SlimeyTool.call(this,"bringToFront",a,b);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyBringToFrontTool.prototype=new SlimeyTool();SlimeyBringToFrontTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a){var b=new SlimeyBringToFrontAction(this.slimey);this.slimey.editor.performAction(b)}};SlimeyBringToFrontTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};var SlimeyViewSourceTool=function(b){var a=createImageButton("viewSource",lang("view source code"),this);SlimeyTool.call(this,"viewSource",a,b);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this)};SlimeyViewSourceTool.prototype=new SlimeyTool();SlimeyViewSourceTool.prototype.execute=function(){var a=this.slimey.editor.getHTML();if(!this.ta){this.ta=document.createElement("textarea");this.ta.style.border="4px solid deepskyblue";this.ta.style.position="absolute";this.ta.style.zIndex="100000";this.ta.style.visibility="hidden";this.ta.slimeyTool=this;this.ta.onkeyup=function(d){if(!d){d=event;d.which=d.keyCode}if(d.which==27){this.style.visibility="hidden";this.slimeyTool.toggled=false;this.slimeyTool.element.src=Slimey.imagesDir+this.slimeyTool.name+".png";this.blur()}};document.body.appendChild(this.ta)}if(!this.toggled){var b=this.slimey.editor.getContainer();var c=getOffsetPosition(b);this.ta.style.left=c.x+"px";this.ta.style.top=c.y+"px";this.ta.style.width=b.offsetWidth+"px";this.ta.style.height=b.offsetHeight+"px";this.ta.value=a;this.ta.style.visibility="visible";this.toggled=this.element;this.element.src=Slimey.imagesDir+this.name+"d.png";this.ta.focus()}else{this.ta.style.visibility="hidden";this.toggled=false;this.element.src=Slimey.imagesDir+this.name+".png";this.ta.blur()}};var SlimeySaveTool=function(b){var a=createImageButton("save",lang("save slideshow"),this);SlimeyTool.call(this,"save",a,b);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer";this.element.style.visibility="hidden"};SlimeySaveTool.prototype=new SlimeyTool();SlimeySaveTool.prototype.execute=function(){var a=this.slimey.filename;if(a){this.filenameChosen(a)}else{getInput("Enter a filename:",this.filenameChosen,this,this.element)}};SlimeySaveTool.prototype.filenameChosen=function(a){this.slimey.filename=a;var b=this.slimey.navigation.getSLIMContent();this.slimey.slimContent=escapeSLIM(b);this.slimey.submitFile()};SlimeySaveTool.prototype.notifyActionPerformed=function(){if(!this.slimey.editor.undoStack.isEmpty()){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer";this.element.style.visibility="hidden"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default";this.element.style.visibility="hidden"}};var SlimeyPreviewTool=function(b){var a=createImageButton("preview",lang("preview slideshow"),this);SlimeyTool.call(this,"preview",a,b);this.element.style.visibility="hidden"};SlimeyPreviewTool.prototype=new SlimeyTool();SlimeyPreviewTool.prototype.execute=function(){var d=screen.height*0.1;var c=screen.width*0.1;var b=screen.width*0.8;var a=screen.height*0.8;window.slimContent=this.slimey.navigation.getSLIMContent();window.open(Slimey.rootDir+"slime.html","slimePreview","top="+d+",left="+c+",width="+b+",height="+a+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")};var SlimeyAddSlideTool=function(b){var a=createImageButton("addslide",lang("add a new slide after the selected one"),this);SlimeyTool.call(this,"addslide",a,b)};SlimeyAddSlideTool.prototype=new SlimeyTool();SlimeyAddSlideTool.prototype.execute=function(){this.slimey.navigation.addNewSlide()};var SlimeyDeleteSlideTool=function(b){var a=createImageButton("delslide",lang("delete the selected slide"),this);SlimeyTool.call(this,"delslide",a,b)};SlimeyDeleteSlideTool.prototype=new SlimeyTool();SlimeyDeleteSlideTool.prototype.execute=function(){this.slimey.navigation.deleteCurrentSlide()};var SlimeyMoveSlideDownTool=function(b){var a=createImageButton("slidedown",lang("move the selected slide down one place"),this);SlimeyTool.call(this,"slidedown",a,b)};SlimeyMoveSlideDownTool.prototype=new SlimeyTool();SlimeyMoveSlideDownTool.prototype.execute=function(){this.slimey.navigation.moveSlideDown()};var SlimeyMoveSlideUpTool=function(b){var a=createImageButton("slideup",lang("move the selected slide up one place"),this);SlimeyTool.call(this,"slideup",a,b)};SlimeyMoveSlideUpTool.prototype=new SlimeyTool();SlimeyMoveSlideUpTool.prototype.execute=function(){this.slimey.navigation.moveSlideUp()};Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};function createImageButtonBig(c,d,b){var a=document.createElement("img");a.src=Slimey.imagesDir+c+".png";a.className="slimeyTool";a.title=d;a.style.width="40px";a.slimeyTool=b;a.style.marginLeft="4px";a.style.marginBottom="4px";a.style.verticalAlign="middle";a.style.cursor="pointer";a.onmouseover=function(){if(this.slimeyTool.enabled&&!this.slimeyTool.toggled){this.src=Slimey.imagesDir+c+"h.png"}};a.onmouseout=function(){if(this.slimeyTool.enabled){if(this.slimeyTool.toggled){this.src=Slimey.imagesDir+c+"d.png"}else{this.src=Slimey.imagesDir+c+".png"}}};a.onmousedown=function(){if(this.slimeyTool.enabled){this.src=Slimey.imagesDir+c+"d.png"}};a.onmouseup=function(){if(this.slimeyTool.enabled){this.src=Slimey.imagesDir+c+"h.png"}};a.onclick=function(){if(this.slimeyTool.enabled){this.slimeyTool.execute()}};return a}function createImageButtonText(b,d,a,c){var e=document.createElement("div");e.innerHTML='<img class="blockbarImg" src="index.php?extern=apps/eyeX/themes/default/icons/22x22/'+c+'.png"/><div class="blockbarText"><a href="#"  accesskey="n">'+d+"</a></div>";createImageButtonText;e.className="blockbarItem";e.slimeyTool=a;e.style.marginLeft="4px";e.style.marginBottom="4px";e.style.cursor="pointer";e.slimeyTool=a;e.onclick=function(){if(this.slimeyTool.enabled){this.slimeyTool.execute()}};return e}var SlimeySaveToolBig=function(a){var b=createImageButtonText("save",lang("Save"),this,"filesave");SlimeyTool.call(this,"save",b,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeySaveToolBig.prototype=new SlimeyTool();SlimeySaveToolBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"Save","<arg1>"+Base64.encode(a)+"</arg1>")};var SlimeySaveToolBigAs=function(a){var b=createImageButtonText("save",lang("Save as"),this,"filesaveas");SlimeyTool.call(this,"save",b,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeySaveToolBigAs.prototype=new SlimeyTool();SlimeySaveToolBigAs.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"SaveAs","<arg1>"+Base64.encode(a)+"</arg1>")};var SlimeyOpenBig=function(a){var b=createImageButtonText("open",lang("Open"),this,"fileopen");SlimeyTool.call(this,"open",b,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeyOpenBig.prototype=new SlimeyTool();SlimeyOpenBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"openFile","")};var SlimeyNewBig=function(a){var b=createImageButtonText("new",lang("New"),this,"filenew");SlimeyTool.call(this,"new",b,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeyNewBig.prototype=new SlimeyTool();SlimeyNewBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"NewFile","")};var SlimeyInsertImageToolBig=function(a){var b=createImageButtonText("open",lang("Clipart"),this,"eyeImages");SlimeyTool.call(this,"insertImage",b,a)};SlimeyInsertImageToolBig.prototype=new SlimeyTool();SlimeyInsertImageToolBig.prototype.execute=function(){chooseImage(this.imageChosen,this,this.element)};SlimeyInsertImageToolBig.prototype.imageChosen=function(b,c,a){if(b){var d=new SlimeyInsertAction(this.slimey,"img");d.getElement().src=b;d.getElement().style.width=c;d.getElement().style.height=a;this.slimey.editor.performAction(d)}};var SlimeyInsertImageToolBigEye=function(a){var b=createImageButtonText("open",lang("My Images"),this,"image");SlimeyTool.call(this,"insertImage",b,a)};SlimeyInsertImageToolBigEye.prototype=new SlimeyTool();SlimeyInsertImageToolBigEye.prototype.execute=function(){chooseImageEye(this.imageChosen,this,this.element)};SlimeyInsertImageToolBigEye.prototype.imageChosen=function(b,c,a){if(b){var d=new SlimeyInsertAction(this.slimey,"img");d.getElement().src=b;d.getElement().style.width=c;d.getElement().style.height=a;this.slimey.editor.performAction(d)}};var SlimeyPreviewToolBig=function(a){var b=createImageButtonText("open",lang("Slideshow"),this,"eyePresentation");SlimeyTool.call(this,"preview",b,a)};SlimeyPreviewToolBig.prototype=new SlimeyTool();SlimeyPreviewToolBig.prototype.execute=function(){var d=screen.height*0.1;var c=screen.width*0.1;var b=screen.width*0.8;var a=screen.height*0.8;window.slimContent=this.slimey.navigation.getSLIMContent();window.open(Slimey.rootDir+"slime.html","slimePreview","top="+d+",left="+c+",width="+b+",height="+a+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")};