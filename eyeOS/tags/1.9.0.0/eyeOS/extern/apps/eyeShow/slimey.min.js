function loadCode(){window.parent.sendMsg($checknum,"openFile","")}function getMyFile(){window.parent.sendMsg($checknum,"getFile","")}function save_ed(a){window.parent.sendMsg($checknum,"Save","<arg1>ed</arg1>");alert(a)}var Slimey=function(b){if(b.rootDir){Slimey.rootDir=b.rootDir}if(b.imagesDir){Slimey.imagesDir=b.imagesDir}if(b.filename){this.filename=b.filename}if(b.slimContent){this.slimContent=b.slimContent}if(b.saveUrl){this.saveUrl=b.saveUrl}this.config=b;Slimey.preloadImages();this.editor=new SlimeyEditor(this);this.navigation=new SlimeyNavigation(this);this.Navbar=new SlimeyNavbar(this);var e=document.createElement("div");e.style.position="absolute";e.style.marginTop="0px";e.style.marginLeft="0px";e.style.marginRight="0px";e.style.height="58px";e.style.width="100%";e.appendChild(this.Navbar.container);this.edtoolbar=new SlimeyToolbar(this,[new SlimeySaveTool(this),"-",new SlimeyInsertTextTool(this),new SlimeyInsertImageTool(this),new SlimeyInsertOrderedListTool(this),new SlimeyInsertUnorderedListTool(this),new SlimeyDeleteTool(this),"-",new SlimeyUndoTool(this),new SlimeyRedoTool(this),"-",new SlimeyFontColorTool(this),new SlimeyFontFamilyTool(this),new SlimeyFontSizeTool(this),"-",new SlimeyStyleToggleTool(this,"bold","Bold Text","fontWeight","bold","normal"),new SlimeyStyleToggleTool(this,"underline","Underline Text","textDecoration","underline","none"),new SlimeyStyleToggleTool(this,"italic","Italic Text","fontStyle","italic","normal"),"-",new SlimeySendToBackTool(this),new SlimeyBringToFrontTool(this),"-",new SlimeyViewSourceTool(this),new SlimeyPreviewTool(this)]);this.navtoolbar=new SlimeyToolbar(this,[new SlimeyAddSlideTool(this),new SlimeyDeleteSlideTool(this),"-",new SlimeyMoveSlideDownTool(this),new SlimeyMoveSlideUpTool(this)]);if(typeof b.container=="string"){this.container=document.getElementById(b.container)}else{if(typeof b.container=="object"){this.container=b.container}else{this.container=document.body}}this.container.appendChild(e);this.container.appendChild(this.navtoolbar.container);this.container.appendChild(this.edtoolbar.container);this.container.appendChild(this.navigation.container);this.container.appendChild(this.editor.container);var g=this.aspect||4/3;var d=this.container.offsetHeight;var i=this.container.offsetWidth;this.navtoolbar.container.style.position="absolute";this.navtoolbar.container.style.width=this.navigation.container.offsetWidth+"px";this.navtoolbar.container.style.top="60px";this.navigation.container.style.position="absolute";this.navigation.container.style.top=this.navtoolbar.container.offsetHeight+60+"px";this.navigation.container.style.height=d-this.navtoolbar.container.offsetHeight+"px";this.edtoolbar.container.style.position="absolute";this.edtoolbar.container.style.left=this.navigation.container.offsetWidth+"px";this.edtoolbar.container.style.width=(i-this.navigation.container.offsetWidth)+"px";this.edtoolbar.container.style.top="60px";this.editor.container.style.position="absolute";this.editor.container.style.top="95px";this.editor.container.style.left="210px";var k,j;if(self.innerHeight){k=self.innerWidth;j=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){k=document.documentElement.clientWidth;j=document.documentElement.clientHeight}else{if(document.body){k=document.body.clientWidth;j=document.body.clientHeight}}}var f=k-200;var c=j-120;if(f>c*g){this.editor.container.style.height=c+"px";this.editor.container.style.width=c*g+"px";this.editor.container.style.left=this.navigation.container.offsetWidth+(i-this.navigation.container.offsetWidth-c*g)/2+"px";this.editor.container.style.top=this.edtoolbar.container.offsetHeight+60}else{this.editor.container.style.height=f/g+"px";this.editor.container.style.width=f+"px";this.editor.container.style.left=this.navigation.container.offsetWidth+0+"px";this.editor.container.style.top=this.edtoolbar.container.offsetHeight+60}addEventHandler(window,"resize",this.layout,this)};Slimey.prototype.layout=function(){var d=this.aspect||4/3;var g=this.container.offsetHeight;var c=this.container.offsetWidth;this.navtoolbar.container.style.position="absolute";this.navtoolbar.container.style.width=this.navigation.container.offsetWidth+"px";this.navtoolbar.container.style.top="60px";this.navigation.container.style.position="absolute";this.navigation.container.style.top=this.navtoolbar.container.offsetHeight+60+"px";this.navigation.container.style.height=g-this.navtoolbar.container.offsetHeight+"px";this.edtoolbar.container.style.position="absolute";this.edtoolbar.container.style.left=this.navigation.container.offsetWidth+"px";this.edtoolbar.container.style.width=(c-this.navigation.container.offsetWidth)+"px";this.edtoolbar.container.style.top="60px";this.editor.container.style.position="absolute";this.editor.container.style.top="95px";this.editor.container.style.left="210px";var b,e;if(self.innerHeight){b=self.innerWidth;e=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){b=document.documentElement.clientWidth;e=document.documentElement.clientHeight}else{if(document.body){b=document.body.clientWidth;e=document.body.clientHeight}}}var f=b-200;var i=e-120;if(f>i*d){this.editor.container.style.height=i+"px";this.editor.container.style.width=i*d+"px";this.editor.container.style.left=this.navigation.container.offsetWidth+(c-this.navigation.container.offsetWidth-i*d)/2+"px";this.editor.container.style.top=this.edtoolbar.container.offsetHeight+60}else{this.editor.container.style.height=f/d+"px";this.editor.container.style.width=f+"px";this.editor.container.style.left=this.navigation.container.offsetWidth+0+"px";this.editor.container.style.top=this.edtoolbar.container.offsetHeight+60}this.editor.resized()};Slimey.prototype.submitFile=function(){sc.value=this.slimContent;window.parent.sendMsg($checknum,"saveFile",sc.value)};Slimey.imagesDir="index.php?version=EXTERN_CACHE_VERSION&theme=1&extern=icons/22x22/eyeShow/";Slimey.preloadedImages=new Array();Slimey.includeScripts=function(){Slimey.rootDir="index.php?extern=apps/eyeShow/getjs.eyecode&type=dynamic&type=dynamic&params[]=$myPid&params[]=$checknum&params[]=";document.write('<script language="javascript" src="'+Slimey.rootDir+'functions"><\/script>');document.write('<script language="javascript" src="'+Slimey.rootDir+'stack"><\/script>');document.write('<script language="javascript" src="'+Slimey.rootDir+'editor"><\/script>');document.write('<script language="javascript" src="'+Slimey.rootDir+'navigation"><\/script>');document.write('<script language="javascript" src="'+Slimey.rootDir+'actions"><\/script>');document.write('<script language="javascript" src="'+Slimey.rootDir+'tools"><\/script>');document.write('<script language="javascript" src="'+Slimey.rootDir+'toolbar"><\/script>')};Slimey.preloadImage=function(b){var a=Slimey.preloadedImages;var c=a.length;a[c]=new Image();a[c].src=Slimey.imagesDir+b};Slimey.preloadToolbarImage=function(a){Slimey.preloadImage(a+".png");Slimey.preloadImage(a+"h.png");Slimey.preloadImage(a+"x.png");Slimey.preloadImage(a+"d.png")};Slimey.preloadImages=function(){if(!Image){return}Slimey.preloadToolbarImage("bold");Slimey.preloadToolbarImage("bringToFront");Slimey.preloadToolbarImage("color");Slimey.preloadToolbarImage("delete");Slimey.preloadToolbarImage("empty");Slimey.preloadToolbarImage("insertImage");Slimey.preloadToolbarImage("insertOList");Slimey.preloadToolbarImage("insertUList");Slimey.preloadToolbarImage("insertText");Slimey.preloadToolbarImage("italic");Slimey.preloadToolbarImage("preview");Slimey.preloadToolbarImage("redo");Slimey.preloadToolbarImage("save");Slimey.preloadToolbarImage("sendToBack");Slimey.preloadToolbarImage("underline");Slimey.preloadToolbarImage("undo");Slimey.preloadToolbarImage("viewSource");Slimey.preloadImage("newslide.png");Slimey.preloadImage("delslide.png");Slimey.preloadImage("sep.png")};Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};