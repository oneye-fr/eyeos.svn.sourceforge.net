var eyeCatch={Holes:new Array(),Enemies:new Array(),Infos:new Array(),AddHole:function(a,d,i,c,e,b,g){var f=document.createElement("div");f.className=d;f.id=a+"_hole"+eyeCatch.Holes[a].length;f.style.left=c+"px";f.style.top=e+"px";f.style.width=b+"px";f.style.height=g+"px";document.getElementById(a+"_holes").appendChild(f);var h=new Array();h.id=a+"_hole"+eyeCatch.Holes[a].length;h.message=i;eyeCatch.Holes[a].push(h)},AddEnemy:function(a,f,k,c,g,b,j,i,h){var e=document.createElement("div");e.className=f;e.id=a+"_enemy"+eyeCatch.Enemies[a].length;e.style.left=c+"px";e.style.top=g+"px";e.style.width=b+"px";e.style.height=j+"px";document.getElementById(a+"_field").appendChild(e);var d=new Array();d.id=a+"_enemy"+eyeCatch.Enemies[a].length;d.message=k;d.movex=i;d.movey=h;eyeCatch.Enemies[a].push(d)},CreateField:function(id,father,messageBox,className,speed,left,top,width,height){eyeCatch.Holes[id]=new Array();eyeCatch.Enemies[id]=new Array();eyeCatch.Infos[id]=new Array();eyeCatch.Infos[id]["messageBox"]=messageBox;eyeCatch.Infos[id]["round"]=0;eyeCatch.Infos[id]["speed"]=new Array();eyeCatch.Infos[id]["speed"]["current"]=0;eyeCatch.Infos[id]["speed"]["increase"]=eval(speed);eyeCatch.Infos[id]["starttime"]=0;var fieldDiv=document.createElement("div");fieldDiv.className=className;fieldDiv.id=id+"_field";fieldDiv.style.left=left+"px";fieldDiv.style.top=top+"px";fieldDiv.style.width=width+"px";fieldDiv.style.height=height+"px";document.getElementById(father).appendChild(fieldDiv);var holesDiv=document.createElement("div");holesDiv.id=id+"_holes";document.getElementById(id+"_field").appendChild(holesDiv)},CreatePlayer:function(g,d,f,e,c,a){eyeCatch.Infos[g]["left"]=f;eyeCatch.Infos[g]["top"]=e;eyeCatch.Infos[g]["width"]=c;eyeCatch.Infos[g]["height"]=a;var b=document.createElement("div");b.className=d;b.id=g+"_player";b.style.left=f+"px";b.style.top=e+"px";b.style.width=c+"px";b.style.height=a+"px";document.getElementById(g+"_field").appendChild(b);xEnableDrag(g+"_player",function(){eyeCatch.Start(g)},function(j,i,h){eyeCatch.OnDrag(g,i,h)})},HasPoint:function(h,c,b,e,a){var g=xLeft(h);var f=xTop(h);var i=xWidth(h);var d=xHeight(h);if(c>=g&&c<=g+i&&b>=f&&b<=f+d){return true}else{if(c>=g&&c<=g+i&&b+a>=f&&b+a<=f+d){return true}else{if(c+e>=g&&c+e<=g+i&&b>=f&&b<=f+d){return true}else{if(c+e>=g&&c+e<=g+i&&b+a>=f&&b+a<=f+d){return true}}}}return false},MoveEnemies:function(d,c){if(eyeCatch.Infos[d]["round"]||c){for(var a=eyeCatch.Enemies[d].length-1;a>-1;a--){eyeCatch.MoveEnemy(d,a)}if(eyeCatch.Infos[d]["speed"]["increase"][eyeCatch.Infos[d]["round"]]){speed=Number(eyeCatch.Infos[d]["speed"]["increase"][eyeCatch.Infos[d]["round"]][0]);eyeCatch.Infos[d]["speed"]["current"]=speed}else{speed=eyeCatch.Infos[d]["speed"]["current"]}eyeCatch.Infos[d]["round"]++;var b=document.getElementById(d+"_player");if(b){for(var a=eyeCatch.Enemies[d].length-1;a>-1;a--){if(eyeCatch.HasPoint(eyeCatch.Enemies[d][a]["id"],eyeCatch.Infos[d]["left"],eyeCatch.Infos[d]["top"],eyeCatch.Infos[d]["width"],eyeCatch.Infos[d]["height"])){xDisableDrag(b);b.parentNode.removeChild(b);document.getElementById(eyeCatch.Infos[d]["messageBox"]).innerHTML=eyeCatch.Enemies[d][a]["message"].replace(/%s/g,((new Date).getTime()-eyeCatch.Infos[d]["starttime"])/1000)}}}setTimeout(function(){eyeCatch.MoveEnemies(d,0)},speed)}},MoveEnemy:function(g,b){var c=document.getElementById(eyeCatch.Enemies[g][b]["id"]);if(c){var f=xLeft(c);var e=xTop(c);var d=xWidth(c);var a=xHeight(c);if(f>=xWidth(g+"_field")-d||f<=0){eyeCatch.Enemies[g][b]["movex"]*=-1}if(e>=xHeight(g+"_field")-a||e<=0){eyeCatch.Enemies[g][b]["movey"]*=-1}c.style.left=(eyeCatch.Enemies[g][b]["movex"]+f)+"px";c.style.top=(eyeCatch.Enemies[g][b]["movey"]+e)+"px"}},OnDrag:function(g,f,e){var b=document.getElementById(g+"_player");if(b){eyeCatch.Infos[g]["left"]+=f;eyeCatch.Infos[g]["top"]+=e;if(eyeCatch.Infos[g]["left"]<0){eyeCatch.Infos[g]["left"]=0}var c=xWidth(g+"_field")-eyeCatch.Infos[g]["width"];if(eyeCatch.Infos[g]["left"]>c){eyeCatch.Infos[g]["left"]=c}if(eyeCatch.Infos[g]["top"]<0){eyeCatch.Infos[g]["top"]=0}var a=xHeight(g+"_field")-eyeCatch.Infos[g]["height"];if(eyeCatch.Infos[g]["top"]>a){eyeCatch.Infos[g]["top"]=a}b.style.left=eyeCatch.Infos[g]["left"]+"px";b.style.top=eyeCatch.Infos[g]["top"]+"px";for(var d=eyeCatch.Holes[g].length-1;d>-1;d--){if(eyeCatch.HasPoint(eyeCatch.Holes[g][d]["id"],eyeCatch.Infos[g]["left"],eyeCatch.Infos[g]["top"],eyeCatch.Infos[g]["width"],eyeCatch.Infos[g]["height"])){xDisableDrag(b);b.parentNode.removeChild(b);document.getElementById(eyeCatch.Infos[g]["messageBox"]).innerHTML=eyeCatch.Holes[g][d]["message"].replace(/%s/g,((new Date).getTime()-eyeCatch.Infos[g]["starttime"])/1000)}}}},Remove:function(b){eyeCatch.Holes[b]=new Array();eyeCatch.Enemies[b]=new Array();eyeCatch.Infos[b]=new Array();var a=document.getElementById(b+"_field");if(a){a.parentNode.removeChild(a)}},Start:function(a){if(!eyeCatch.Infos[a]["round"]){eyeCatch.Infos[a]["starttime"]=(new Date()).getTime();eyeCatch.MoveEnemies(a,1)}}};