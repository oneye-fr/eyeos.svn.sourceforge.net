var eyeCatch={Holes:[],Enemies:[],Infos:[],AddHole:function(a,b,c,d,g,f,e){var h=document.createElement("div");h.className=b;h.id=a+"_hole"+eyeCatch.Holes[a].length;h.style.left=d+"px";h.style.top=g+"px";h.style.width=f+"px";h.style.height=e+"px";document.getElementById(a+"_holes").appendChild(h);b=[];b.id=a+"_hole"+eyeCatch.Holes[a].length;b.message=c;eyeCatch.Holes[a].push(b)},AddEnemy:function(a,b,c,d,g,f,e,h,j){var i=document.createElement("div");i.className=b;i.id=a+"_enemy"+eyeCatch.Enemies[a].length;
i.style.left=d+"px";i.style.top=g+"px";i.style.width=f+"px";i.style.height=e+"px";document.getElementById(a+"_field").appendChild(i);b=[];b.id=a+"_enemy"+eyeCatch.Enemies[a].length;b.message=c;b.movex=h;b.movey=j;eyeCatch.Enemies[a].push(b)},CreateField:function(a,b,c,d,g,f,e,h,j){eyeCatch.Holes[a]=[];eyeCatch.Enemies[a]=[];eyeCatch.Infos[a]=[];eyeCatch.Infos[a].messageBox=c;eyeCatch.Infos[a].round=0;eyeCatch.Infos[a].speed=[];eyeCatch.Infos[a].speed.current=0;eyeCatch.Infos[a].speed.increase=eval(g);
eyeCatch.Infos[a].starttime=0;c=document.createElement("div");c.className=d;c.id=a+"_field";c.style.left=f+"px";c.style.top=e+"px";c.style.width=h+"px";c.style.height=j+"px";document.getElementById(b).appendChild(c);b=document.createElement("div");b.id=a+"_holes";document.getElementById(a+"_field").appendChild(b)},CreatePlayer:function(a,b,c,d,g,f){eyeCatch.Infos[a].left=c;eyeCatch.Infos[a].top=d;eyeCatch.Infos[a].width=g;eyeCatch.Infos[a].height=f;var e=document.createElement("div");e.className=
b;e.id=a+"_player";e.style.left=c+"px";e.style.top=d+"px";e.style.width=g+"px";e.style.height=f+"px";document.getElementById(a+"_field").appendChild(e);xEnableDrag(a+"_player",function(){eyeCatch.Start(a)},function(h,j,i){eyeCatch.OnDrag(a,j,i)})},HasPoint:function(a,b,c,d,g){var f=xLeft(a),e=xTop(a),h=xWidth(a);a=xHeight(a);if(b>=f&&b<=f+h&&c>=e&&c<=e+a)return true;else if(b>=f&&b<=f+h&&c+g>=e&&c+g<=e+a)return true;else if(b+d>=f&&b+d<=f+h&&c>=e&&c<=e+a)return true;else if(b+d>=f&&b+d<=f+h&&c+g>=
e&&c+g<=e+a)return true;return false},MoveEnemies:function(a,b){if(eyeCatch.Infos[a].round||b){for(b=eyeCatch.Enemies[a].length-1;b>-1;b--)eyeCatch.MoveEnemy(a,b);if(eyeCatch.Infos[a].speed.increase[eyeCatch.Infos[a].round]){speed=Number(eyeCatch.Infos[a].speed.increase[eyeCatch.Infos[a].round][0]);eyeCatch.Infos[a].speed.current=speed}else speed=eyeCatch.Infos[a].speed.current;eyeCatch.Infos[a].round++;var c=document.getElementById(a+"_player");if(c)for(b=eyeCatch.Enemies[a].length-1;b>-1;b--)if(eyeCatch.HasPoint(eyeCatch.Enemies[a][b].id,
eyeCatch.Infos[a].left,eyeCatch.Infos[a].top,eyeCatch.Infos[a].width,eyeCatch.Infos[a].height)){xDisableDrag(c);c.parentNode.removeChild(c);document.getElementById(eyeCatch.Infos[a].messageBox).innerHTML=eyeCatch.Enemies[a][b].message.replace(/%s/g,((new Date).getTime()-eyeCatch.Infos[a].starttime)/1E3)}setTimeout(function(){eyeCatch.MoveEnemies(a,0)},speed)}},MoveEnemy:function(a,b){var c=document.getElementById(eyeCatch.Enemies[a][b].id);if(c){var d=xLeft(c),g=xTop(c),f=xWidth(c),e=xHeight(c);if(d>=
xWidth(a+"_field")-f||d<=0)eyeCatch.Enemies[a][b].movex*=-1;if(g>=xHeight(a+"_field")-e||g<=0)eyeCatch.Enemies[a][b].movey*=-1;c.style.left=eyeCatch.Enemies[a][b].movex+d+"px";c.style.top=eyeCatch.Enemies[a][b].movey+g+"px"}},OnDrag:function(a,b,c){var d=document.getElementById(a+"_player");if(d){eyeCatch.Infos[a].left+=b;eyeCatch.Infos[a].top+=c;if(eyeCatch.Infos[a].left<0)eyeCatch.Infos[a].left=0;b=xWidth(a+"_field")-eyeCatch.Infos[a].width;if(eyeCatch.Infos[a].left>b)eyeCatch.Infos[a].left=b;if(eyeCatch.Infos[a].top<
0)eyeCatch.Infos[a].top=0;b=xHeight(a+"_field")-eyeCatch.Infos[a].height;if(eyeCatch.Infos[a].top>b)eyeCatch.Infos[a].top=b;d.style.left=eyeCatch.Infos[a].left+"px";d.style.top=eyeCatch.Infos[a].top+"px";for(b=eyeCatch.Holes[a].length-1;b>-1;b--)if(eyeCatch.HasPoint(eyeCatch.Holes[a][b].id,eyeCatch.Infos[a].left,eyeCatch.Infos[a].top,eyeCatch.Infos[a].width,eyeCatch.Infos[a].height)){xDisableDrag(d);d.parentNode.removeChild(d);document.getElementById(eyeCatch.Infos[a].messageBox).innerHTML=eyeCatch.Holes[a][b].message.replace(/%s/g,
((new Date).getTime()-eyeCatch.Infos[a].starttime)/1E3)}}},Remove:function(a){eyeCatch.Holes[a]=[];eyeCatch.Enemies[a]=[];eyeCatch.Infos[a]=[];(a=document.getElementById(a+"_field"))&&a.parentNode.removeChild(a)},Start:function(a){if(!eyeCatch.Infos[a].round){eyeCatch.Infos[a].starttime=(new Date).getTime();eyeCatch.MoveEnemies(a,1)}}};
