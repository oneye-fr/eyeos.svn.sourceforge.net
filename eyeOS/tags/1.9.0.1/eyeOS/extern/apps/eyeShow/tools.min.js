function createImageButton(a,c,b){var d=document.createElement("img");d.src=Slimey.imagesDir+a+".png";d.className="slimeyTool";d.title=c;d.slimeyTool=b;d.style.marginLeft="4px";d.style.marginBottom="4px";d.style.verticalAlign="middle";d.style.cursor="pointer";d.onmouseover=function(){if(this.slimeyTool.enabled&&this.slimeyTool.toggled!=this)this.src=Slimey.imagesDir+a+"h.png"};d.onmouseout=function(){if(this.slimeyTool.enabled)this.src=this.slimeyTool.toggled==this?Slimey.imagesDir+a+"d.png":Slimey.imagesDir+
a+".png"};d.onmousedown=function(){if(this.slimeyTool.enabled)this.src=Slimey.imagesDir+a+"d.png"};d.onmouseup=function(){if(this.slimeyTool.enabled)this.src=Slimey.imagesDir+a+"h.png"};d.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()};return d}var SlimeyTool=function(a,c,b){this.slimey=b;this.name=a;this.element=c;this.enabled=true};SlimeyTool.prototype.getName=function(){return this.name};SlimeyTool.prototype.getElement=function(){return this.element};
SlimeyTool.prototype.execute=function(){alert(lang("generic tool"))};SlimeyTool.prototype.notifySelectionChange=function(){};var SlimeyInsertTool=function(a){var c=createImageButton("insert",lang("insert an element"),this);SlimeyTool.call(this,"insert",c,a)};SlimeyInsertTool.prototype=new SlimeyTool;SlimeyInsertTool.prototype.execute=function(){var a=prompt(lang("what element do you wish to insert?"));a&&this.slimey.editor.performAction(new SlimeyInsertAction(this.slimey,a))};
var SlimeyInsertTextTool=function(a){var c=createImageButton("insertText",lang("insert text"),this);SlimeyTool.call(this,"insertText",c,a)};SlimeyInsertTextTool.prototype=new SlimeyTool;SlimeyInsertTextTool.prototype.execute=function(){this.slimey.editor.performAction(new SlimeyInsertAction(this.slimey,"div"))};var SlimeyInsertImageTool=function(a){var c=createImageButton("insertImage",lang("insert image"),this);SlimeyTool.call(this,"insertImage",c,a)};SlimeyInsertImageTool.prototype=new SlimeyTool;
SlimeyInsertImageTool.prototype.execute=function(){chooseImage(this.imageChosen,this,this.element)};SlimeyInsertImageTool.prototype.imageChosen=function(a){if(a){var c=new SlimeyInsertAction(this.slimey,"img");c.getElement().src=a;this.slimey.editor.performAction(c)}};var SlimeyInsertOrderedListTool=function(a){var c=createImageButton("insertOList",lang("insert ordered list"),this);SlimeyTool.call(this,"insertOList",c,a)};SlimeyInsertOrderedListTool.prototype=new SlimeyTool;
SlimeyInsertOrderedListTool.prototype.execute=function(){this.slimey.editor.performAction(new SlimeyInsertAction(this.slimey,"ol"))};var SlimeyInsertUnorderedListTool=function(a){var c=createImageButton("insertUList",lang("insert unordered list"),this);SlimeyTool.call(this,"insertUList",c,a)};SlimeyInsertUnorderedListTool.prototype=new SlimeyTool;SlimeyInsertUnorderedListTool.prototype.execute=function(){this.slimey.editor.performAction(new SlimeyInsertAction(this.slimey,"ul"))};
var SlimeyEditContentTool=function(a){var c=document.createElement("textarea");c.slimeyTool=this;c.style.height="25px";c.style.width="100%";c.style.backgroundColor="lightYellow";c.style.marginBottom="4px";c.title=lang("edit the element's content");c.onkeyup=function(){this.slimeyTool.execute()};SlimeyTool.call(this,"editContent",c,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.element.disabled=true};SlimeyEditContentTool.prototype=new SlimeyTool;
SlimeyEditContentTool.prototype.execute=function(){var a=this.element.value,c=this.slimey.editor.getSelected();if(c.tagName=="UL"||c.tagName=="OL"){a="<li>"+a+"</li>";a=a.replace(/\n/g,"</li><li>")}else if(c.tagName=="DIV")a=a.replace(/\n/g,"<br>");this.slimey.editor.performAction(new SlimeyEditContentAction(this.slimey,a))};
SlimeyEditContentTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a){var c=a.innerHTML;if(a.tagName=="UL"||a.tagName=="OL"){c=c.replace(/<\/li><li>/gi,"\n");c=c.replace(/<li>|<\/li>/gi,"")}else if(a.tagName=="DIV")c=c.replace(/<br>/gi,"\n");if(c!=this.element.value)this.element.value=c;this.element.disabled=a.editable?false:true}else{this.element.value="";this.element.disabled=true}};
var SlimeyFontColorTool=function(a){var c=createImageButton("color",lang("change font color"),this);SlimeyTool.call(this,"color",c,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyFontColorTool.prototype=new SlimeyTool;SlimeyFontColorTool.prototype.execute=function(){chooseColor(this.colorChosen,this,this.element)};
SlimeyFontColorTool.prototype.colorChosen=function(a){a&&this.slimey.editor.performAction(new SlimeyEditStyleAction(this.slimey,"color",a))};SlimeyFontColorTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.editable){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};
var SlimeyFontSizeTool=function(a){var c=document.createElement("select");c.style.height="20px";c.style.width="80px";c.style.marginLeft="4px";c.title=lang("change font size");var b=document.createElement("option");b.value=b.style.fontSize="";b.appendChild(document.createTextNode("-- "+lang("Size")+" --"));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="80%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize=
"100%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="120%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="140%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="160%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");
b.value=b.style.fontSize="200%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="300%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontSize="400%";b.appendChild(document.createTextNode(b.value));c.appendChild(b);c.slimeyTool=this;c.onchange=function(){this.slimeyTool.execute()};SlimeyTool.call(this,"fontsize",c,a);this.slimey.editor.addEventListener("selectionChange",
this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.element.disabled=true};SlimeyFontSizeTool.prototype=new SlimeyTool;SlimeyFontSizeTool.prototype.execute=function(){this.slimey.editor.performAction(new SlimeyEditStyleAction(this.slimey,"fontSize",this.element.value))};
SlimeyFontSizeTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.style.fontSize&&a.editable){this.element.value=a.style.fontSize;this.element.disabled=false}else if(a&&a.editable){this.element.value="";this.element.disabled=false}else this.element.disabled=true};SlimeyFontSizeTool.prototype.notifyActionPerformed=SlimeyFontSizeTool.prototype.notifySelectionChange;
var SlimeyFontFamilyTool=function(a){var c=document.createElement("select");c.style.height="20px";c.style.width="140px";c.style.marginLeft="4px";c.title=lang("change font family");var b=document.createElement("option");b.value=b.style.fontFamily="";b.appendChild(document.createTextNode("-- "+lang("font family")+" --"));c.appendChild(b);b=document.createElement("optgroup");b.setAttribute("label",lang("generic fonts"));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="serif";
b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="sans-serif";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="cursive";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="fantasy";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");
b.value=b.style.fontFamily="monospace";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("optgroup");b.setAttribute("label",lang("specific fonts"));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="Arial";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="Book Antigua";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");
b.value=b.style.fontFamily="Comic Sans";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="Courier New";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="Tahoma";b.appendChild(document.createTextNode(b.value));c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="Times New Roman";b.appendChild(document.createTextNode(b.value));
c.appendChild(b);b=document.createElement("option");b.value=b.style.fontFamily="Verdana";b.appendChild(document.createTextNode(b.value));c.appendChild(b);c.slimeyTool=this;c.onchange=function(){this.slimeyTool.execute()};SlimeyTool.call(this,"fontfamily",c,a);this.element.disabled=true;this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this)};SlimeyFontFamilyTool.prototype=new SlimeyTool;
SlimeyFontFamilyTool.prototype.execute=function(){this.slimey.editor.performAction(new SlimeyEditStyleAction(this.slimey,"fontFamily",this.element.value))};SlimeyFontFamilyTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.style.fontFamily&&a.editable){this.element.value=a.style.fontFamily;this.element.disabled=false}else if(a&&a.editable){this.element.value="";this.element.disabled=false}else this.element.disabled=true};
SlimeyFontFamilyTool.prototype.notifyActionPerformed=SlimeyFontFamilyTool.prototype.notifySelectionChange;var SlimeyDeleteTool=function(a){var c=createImageButton("delete",lang("delete element"),this);SlimeyTool.call(this,"delete",c,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;c.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyDeleteTool.prototype=new SlimeyTool;
SlimeyDeleteTool.prototype.execute=function(){this.slimey.editor.getSelected()&&this.slimey.editor.performAction(new SlimeyDeleteAction(this.slimey))};SlimeyDeleteTool.prototype.notifySelectionChange=function(){if(this.slimey.editor.getSelected()){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};
var SlimeyUndoTool=function(a){var c=createImageButton("undo",lang("undo"),this);SlimeyTool.call(this,"undo",c,a);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyUndoTool.prototype=new SlimeyTool;SlimeyUndoTool.prototype.execute=function(){this.slimey.editor.undo()};
SlimeyUndoTool.prototype.notifyActionPerformed=function(){if(this.slimey.editor.undoStack.isEmpty()){this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}else{this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}};
var SlimeyRedoTool=function(a){var c=createImageButton("redo",lang("redo"),this);SlimeyTool.call(this,"redo",c,a);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyRedoTool.prototype=new SlimeyTool;SlimeyRedoTool.prototype.execute=function(){this.slimey.editor.redo()};
SlimeyRedoTool.prototype.notifyActionPerformed=function(){if(this.slimey.editor.redoStack.isEmpty()){this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}else{this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}};
var SlimeyStyleToggleTool=function(a,c,b,d,f,e){b=createImageButton(c,b,this);this.property=d;this.value1=f;this.value2=e;SlimeyTool.call(this,c,b,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyStyleToggleTool.prototype=new SlimeyTool;
SlimeyStyleToggleTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a){if(a.style[this.property]==this.value1){a=new SlimeyEditStyleAction(this.slimey,this.property,this.value2);this.toggled=false;this.element.src=Slimey.imagesDir+this.name+".png"}else{a=new SlimeyEditStyleAction(this.slimey,this.property,this.value1);this.toggled=this.element;this.element.src=Slimey.imagesDir+this.name+"d.png"}this.slimey.editor.performAction(a)}};
SlimeyStyleToggleTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a&&a.editable){this.enabled=true;if(a.style[this.property]==this.value1){this.toggled=this.element;this.element.src=Slimey.imagesDir+this.name+"d.png"}else{this.toggled=false;this.element.src=Slimey.imagesDir+this.name+".png"}this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};
SlimeyStyleToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange;
var SlimeyStyleGroupToggleTool=function(a,c,b,d){window.options=d;for(var f=document.createElement("span"),e=0;e<d.length;e++){d[e].img=createImageButton(d[e].name,d[e].title,this);d[e].img.option=d[e];d[e].img.onclick=function(){if(this.slimeyTool.enabled){this.slimeyTool.toggled=this;this.slimeyTool.execute()}};f.appendChild(d[e].img)}this.options=d;this.property=b;SlimeyTool.call(this,c,f,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.slimey.editor.addEventListener("actionPerformed",
this.notifyActionPerformed,this);this.enable(false)};SlimeyStyleGroupToggleTool.prototype=new SlimeyTool;
SlimeyStyleGroupToggleTool.prototype.enable=function(a){this.enabled=a;for(var c=0;c<this.options.length;c++)if(a){this.options[c].img.src=Slimey.imagesDir+this.options[c].name+".png";this.options[c].img.style.cursor="pointer"}else{this.options[c].img.src=Slimey.imagesDir+this.options[c].name+"x.png";this.options[c].img.style.cursor="default"}if(a&&this.toggled){this.toggled.src=Slimey.imagesDir+this.toggled.option.name+"d.png";this.toggled.style.cursor="pointer"}};
SlimeyStyleGroupToggleTool.prototype.execute=function(){var a=this.slimey.editor.getSelected();if(a&&this.toggled){var c=this.toggled;if(a.style[this.property]!=c.option.value){a=new SlimeyEditStyleAction(this.slimey,this.property,c.option.value);this.enable(true);this.slimey.editor.performAction(a);this.toggled=c}}};
SlimeyStyleGroupToggleTool.prototype.notifySelectionChange=function(){var a=this.slimey.editor.getSelected();if(a)for(var c=a.style[this.property],b=0;b<this.options.length;b++)if(this.options[b].value==c)this.toggled=this.options[b].img;this.enable(a&&a.editable)};SlimeyStyleGroupToggleTool.prototype.notifyActionPerformed=SlimeyStyleToggleTool.prototype.notifySelectionChange;
var SlimeySendToBackTool=function(a){var c=createImageButton("sendToBack",lang("send element to the back"),this);SlimeyTool.call(this,"sendToBack",c,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeySendToBackTool.prototype=new SlimeyTool;SlimeySendToBackTool.prototype.execute=function(){this.slimey.editor.getSelected()&&this.slimey.editor.performAction(new SlimeySendToBackAction(this.slimey))};
SlimeySendToBackTool.prototype.notifySelectionChange=function(){if(this.slimey.editor.getSelected()){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};
var SlimeyBringToFrontTool=function(a){var c=createImageButton("bringToFront",lang("bring element to the front"),this);SlimeyTool.call(this,"bringToFront",c,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this);this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"};SlimeyBringToFrontTool.prototype=new SlimeyTool;SlimeyBringToFrontTool.prototype.execute=function(){this.slimey.editor.getSelected()&&this.slimey.editor.performAction(new SlimeyBringToFrontAction(this.slimey))};
SlimeyBringToFrontTool.prototype.notifySelectionChange=function(){if(this.slimey.editor.getSelected()){this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}else{this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}};
var SlimeyViewSourceTool=function(a){var c=createImageButton("viewSource",lang("view source code"),this);SlimeyTool.call(this,"viewSource",c,a);this.slimey.editor.addEventListener("selectionChange",this.notifySelectionChange,this)};SlimeyViewSourceTool.prototype=new SlimeyTool;
SlimeyViewSourceTool.prototype.execute=function(){var a=this.slimey.editor.getHTML();if(!this.ta){this.ta=document.createElement("textarea");this.ta.style.border="4px solid deepskyblue";this.ta.style.position="absolute";this.ta.style.zIndex="100000";this.ta.style.visibility="hidden";this.ta.slimeyTool=this;this.ta.onkeyup=function(d){if(!d){d=event;d.which=d.keyCode}if(d.which==27){this.style.visibility="hidden";this.slimeyTool.toggled=false;this.slimeyTool.element.src=Slimey.imagesDir+this.slimeyTool.name+
".png";this.blur()}};document.body.appendChild(this.ta)}if(this.toggled){this.ta.style.visibility="hidden";this.toggled=false;this.element.src=Slimey.imagesDir+this.name+".png";this.ta.blur()}else{var c=this.slimey.editor.getContainer(),b=getOffsetPosition(c);this.ta.style.left=b.x+"px";this.ta.style.top=b.y+"px";this.ta.style.width=c.offsetWidth+"px";this.ta.style.height=c.offsetHeight+"px";this.ta.value=a;this.ta.style.visibility="visible";this.toggled=this.element;this.element.src=Slimey.imagesDir+
this.name+"d.png";this.ta.focus()}};var SlimeySaveTool=function(a){var c=createImageButton("save",lang("save slideshow"),this);SlimeyTool.call(this,"save",c,a);this.slimey.editor.addEventListener("actionPerformed",this.notifyActionPerformed,this);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer";this.element.style.visibility="hidden"};SlimeySaveTool.prototype=new SlimeyTool;
SlimeySaveTool.prototype.execute=function(){var a=this.slimey.filename;a?this.filenameChosen(a):getInput("Enter a filename:",this.filenameChosen,this,this.element)};SlimeySaveTool.prototype.filenameChosen=function(a){this.slimey.filename=a;a=this.slimey.navigation.getSLIMContent();this.slimey.slimContent=escapeSLIM(a);this.slimey.submitFile()};
SlimeySaveTool.prototype.notifyActionPerformed=function(){if(this.slimey.editor.undoStack.isEmpty()){this.enabled=false;this.element.src=Slimey.imagesDir+this.name+"x.png";this.element.style.cursor="default"}else{this.enabled=true;this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"}this.element.style.visibility="hidden"};
var SlimeyPreviewTool=function(a){var c=createImageButton("preview",lang("preview slideshow"),this);SlimeyTool.call(this,"preview",c,a);this.element.style.visibility="hidden"};SlimeyPreviewTool.prototype=new SlimeyTool;
SlimeyPreviewTool.prototype.execute=function(){var a=screen.height*0.1,c=screen.width*0.1,b=screen.width*0.8,d=screen.height*0.8;window.slimContent=this.slimey.navigation.getSLIMContent();window.open(Slimey.rootDir+"slime.html","slimePreview","top="+a+",left="+c+",width="+b+",height="+d+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")};
var SlimeyAddSlideTool=function(a){var c=createImageButton("addslide",lang("add a new slide after the selected one"),this);SlimeyTool.call(this,"addslide",c,a)};SlimeyAddSlideTool.prototype=new SlimeyTool;SlimeyAddSlideTool.prototype.execute=function(){this.slimey.navigation.addNewSlide()};var SlimeyDeleteSlideTool=function(a){var c=createImageButton("delslide",lang("delete the selected slide"),this);SlimeyTool.call(this,"delslide",c,a)};SlimeyDeleteSlideTool.prototype=new SlimeyTool;
SlimeyDeleteSlideTool.prototype.execute=function(){this.slimey.navigation.deleteCurrentSlide()};var SlimeyMoveSlideDownTool=function(a){var c=createImageButton("slidedown",lang("move the selected slide down one place"),this);SlimeyTool.call(this,"slidedown",c,a)};SlimeyMoveSlideDownTool.prototype=new SlimeyTool;SlimeyMoveSlideDownTool.prototype.execute=function(){this.slimey.navigation.moveSlideDown()};
var SlimeyMoveSlideUpTool=function(a){var c=createImageButton("slideup",lang("move the selected slide up one place"),this);SlimeyTool.call(this,"slideup",c,a)};SlimeyMoveSlideUpTool.prototype=new SlimeyTool;SlimeyMoveSlideUpTool.prototype.execute=function(){this.slimey.navigation.moveSlideUp()};
Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var c="",b,d,f,e,h,g,i=0;for(a=Base64._utf8_encode(a);i<a.length;){b=a.charCodeAt(i++);d=a.charCodeAt(i++);f=a.charCodeAt(i++);e=b>>2;b=(b&3)<<4|d>>4;h=(d&15)<<2|f>>6;g=f&63;if(isNaN(d))h=g=64;else if(isNaN(f))g=64;c=c+this._keyStr.charAt(e)+this._keyStr.charAt(b)+this._keyStr.charAt(h)+this._keyStr.charAt(g)}return c},decode:function(a){var c="",b,d,f,e,h,g=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,
"");g<a.length;){b=this._keyStr.indexOf(a.charAt(g++));d=this._keyStr.indexOf(a.charAt(g++));e=this._keyStr.indexOf(a.charAt(g++));h=this._keyStr.indexOf(a.charAt(g++));b=b<<2|d>>4;d=(d&15)<<4|e>>2;f=(e&3)<<6|h;c+=String.fromCharCode(b);if(e!=64)c+=String.fromCharCode(d);if(h!=64)c+=String.fromCharCode(f)}return c=Base64._utf8_decode(c)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var c="",b=0;b<a.length;b++){var d=a.charCodeAt(b);if(d<128)c+=String.fromCharCode(d);else{if(d>127&&d<2048)c+=
String.fromCharCode(d>>6|192);else{c+=String.fromCharCode(d>>12|224);c+=String.fromCharCode(d>>6&63|128)}c+=String.fromCharCode(d&63|128)}}return c},_utf8_decode:function(a){for(var c="",b=0,d=c1=c2=0;b<a.length;){d=a.charCodeAt(b);if(d<128){c+=String.fromCharCode(d);b++}else if(d>191&&d<224){c2=a.charCodeAt(b+1);c+=String.fromCharCode((d&31)<<6|c2&63);b+=2}else{c2=a.charCodeAt(b+1);c3=a.charCodeAt(b+2);c+=String.fromCharCode((d&15)<<12|(c2&63)<<6|c3&63);b+=3}}return c}};
function createImageButtonBig(a,c,b){var d=document.createElement("img");d.src=Slimey.imagesDir+a+".png";d.className="slimeyTool";d.title=c;d.style.width="40px";d.slimeyTool=b;d.style.marginLeft="4px";d.style.marginBottom="4px";d.style.verticalAlign="middle";d.style.cursor="pointer";d.onmouseover=function(){if(this.slimeyTool.enabled&&!this.slimeyTool.toggled)this.src=Slimey.imagesDir+a+"h.png"};d.onmouseout=function(){if(this.slimeyTool.enabled)this.src=this.slimeyTool.toggled?Slimey.imagesDir+a+
"d.png":Slimey.imagesDir+a+".png"};d.onmousedown=function(){if(this.slimeyTool.enabled)this.src=Slimey.imagesDir+a+"d.png"};d.onmouseup=function(){if(this.slimeyTool.enabled)this.src=Slimey.imagesDir+a+"h.png"};d.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()};return d}
function createImageButtonText(a,c,b,d){a=document.createElement("div");a.innerHTML='<img class="blockbarImg" src="index.php?extern=apps/eyeX/themes/default/icons/22x22/'+d+'.png"/><div class="blockbarText"><a href="#"  accesskey="n">'+c+"</a></div>";a.className="blockbarItem";a.slimeyTool=b;a.style.marginLeft="4px";a.style.marginBottom="4px";a.style.cursor="pointer";a.slimeyTool=b;a.onclick=function(){this.slimeyTool.enabled&&this.slimeyTool.execute()};return a}
var SlimeySaveToolBig=function(a){var c=createImageButtonText("save",lang("Save"),this,"filesave");SlimeyTool.call(this,"save",c,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeySaveToolBig.prototype=new SlimeyTool;SlimeySaveToolBig.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"Save","<arg1>"+Base64.encode(a)+"</arg1>")};
var SlimeySaveToolBigAs=function(a){var c=createImageButtonText("save",lang("Save as"),this,"filesaveas");SlimeyTool.call(this,"save",c,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeySaveToolBigAs.prototype=new SlimeyTool;SlimeySaveToolBigAs.prototype.execute=function(){var a=this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"SaveAs","<arg1>"+Base64.encode(a)+"</arg1>")};
var SlimeyOpenBig=function(a){var c=createImageButtonText("open",lang("Open"),this,"fileopen");SlimeyTool.call(this,"open",c,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeyOpenBig.prototype=new SlimeyTool;SlimeyOpenBig.prototype.execute=function(){this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"openFile","")};
var SlimeyNewBig=function(a){var c=createImageButtonText("new",lang("New"),this,"filenew");SlimeyTool.call(this,"new",c,a);this.element.src=Slimey.imagesDir+this.name+".png";this.element.style.cursor="pointer"};SlimeyNewBig.prototype=new SlimeyTool;SlimeyNewBig.prototype.execute=function(){this.slimey.navigation.getSLIMContent();window.parent.sendMsg($checknum,"NewFile","")};
var SlimeyInsertImageToolBig=function(a){var c=createImageButtonText("open",lang("Clipart"),this,"eyeImages");SlimeyTool.call(this,"insertImage",c,a)};SlimeyInsertImageToolBig.prototype=new SlimeyTool;SlimeyInsertImageToolBig.prototype.execute=function(){chooseImage(this.imageChosen,this,this.element)};
SlimeyInsertImageToolBig.prototype.imageChosen=function(a,c,b){if(a){var d=new SlimeyInsertAction(this.slimey,"img");d.getElement().src=a;d.getElement().style.width=c;d.getElement().style.height=b;this.slimey.editor.performAction(d)}};var SlimeyInsertImageToolBigEye=function(a){var c=createImageButtonText("open",lang("My Images"),this,"image");SlimeyTool.call(this,"insertImage",c,a)};SlimeyInsertImageToolBigEye.prototype=new SlimeyTool;
SlimeyInsertImageToolBigEye.prototype.execute=function(){chooseImageEye(this.imageChosen,this,this.element)};SlimeyInsertImageToolBigEye.prototype.imageChosen=function(a,c,b){if(a){var d=new SlimeyInsertAction(this.slimey,"img");d.getElement().src=a;d.getElement().style.width=c;d.getElement().style.height=b;this.slimey.editor.performAction(d)}};var SlimeyPreviewToolBig=function(a){var c=createImageButtonText("open",lang("Slideshow"),this,"eyePresentation");SlimeyTool.call(this,"preview",c,a)};
SlimeyPreviewToolBig.prototype=new SlimeyTool;SlimeyPreviewToolBig.prototype.execute=function(){var a=screen.height*0.1,c=screen.width*0.1,b=screen.width*0.8,d=screen.height*0.8;window.slimContent=this.slimey.navigation.getSLIMContent();window.open(Slimey.rootDir+"slime.html","slimePreview","top="+a+",left="+c+",width="+b+",height="+d+",status=no,menubar=no,location=no,toolbar=no,scrollbars=no,directories=no,resizable=yes")};
