(function(){tinymce.create("tinymce.plugins.WordCount",{block:0,id:null,countre:null,cleanre:null,init:function(c){var b=this,e=0;b.countre=c.getParam("wordcount_countregex",/\S\s+/g);b.cleanre=c.getParam("wordcount_cleanregex",/[0-9.(),;:!?%#$\ufffd'"_+=\\/-]*/g);b.id=c.id+"-word-count";c.onPostRender.add(function(a){var d;if(d=a.getParam("wordcount_target_id"))tinymce.DOM.add(d,"span",{},'<span id="'+b.id+'">0</span>');else(d=tinymce.DOM.get(a.id+"_path_row"))&&tinymce.DOM.add(d.parentNode,"div",
{style:"float: right"},a.getLang("wordcount.words","Words: ")+'<span id="'+b.id+'">0</span>')});c.onInit.add(function(a){a.selection.onSetContent.add(function(){b._count(a)});b._count(a)});c.onSetContent.add(function(a){b._count(a)});c.onKeyUp.add(function(a,d){if(d.keyCode!=e){if(13==d.keyCode||8==e||46==e)b._count(a);e=d.keyCode}})},_count:function(c){var b=this,e=0;if(!b.block){b.block=1;setTimeout(function(){var a=c.getContent({format:"raw"});if(a){a=a.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi,
" ");a=a.replace(b.cleanre,"");a.replace(b.countre,function(){e++})}tinymce.DOM.setHTML(b.id,e.toString());setTimeout(function(){b.block=0},2E3)},1)}},getInfo:function(){return{longname:"Word Count plugin",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/wordcount",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("wordcount",tinymce.plugins.WordCount)})();
