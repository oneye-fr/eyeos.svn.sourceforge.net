(function(){tinymce.create("tinymce.plugins.VisualChars",{init:function(a){var b=this;b.editor=a;a.addCommand("mceVisualChars",b._toggleVisualChars,b);a.addButton("visualchars",{title:"visualchars.desc",cmd:"mceVisualChars"});a.onBeforeGetContent.add(function(){if(b.state){b.state=true;b._toggleVisualChars()}})},getInfo:function(){return{longname:"Visual characters",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/visualchars",
version:tinymce.majorVersion+"."+tinymce.minorVersion}},_toggleVisualChars:function(){var a=this,b=a.editor,c,f=b.getDoc(),d=b.getBody();a.state=!a.state;b.controlManager.setActive("visualchars",a.state);if(a.state){c=[];tinymce.walk(d,function(e){e.nodeType==3&&e.nodeValue&&e.nodeValue.indexOf("\u00a0")!=-1&&c.push(e)},"childNodes");for(a=0;a<c.length;a++){d=c[a].nodeValue;d=d.replace(/(\u00a0+)/g,'<span class="mceItemHidden mceVisualNbsp">$1</span>');d=d.replace(/\u00a0/g,"\u00b7");b.dom.setOuterHTML(c[a],
d,f)}}else{c=tinymce.grep(b.dom.select("span",d),function(e){return b.dom.hasClass(e,"mceVisualNbsp")});for(a=0;a<c.length;a++)b.dom.setOuterHTML(c[a],c[a].innerHTML.replace(/(&middot;|\u00b7)/g,"&nbsp;"),f)}}});tinymce.PluginManager.add("visualchars",tinymce.plugins.VisualChars)})();
