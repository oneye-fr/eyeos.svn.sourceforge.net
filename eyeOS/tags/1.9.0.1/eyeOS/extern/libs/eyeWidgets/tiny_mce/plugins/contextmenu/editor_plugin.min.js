(function(){var f=tinymce.dom.Event,g=tinymce.DOM;tinymce.create("tinymce.plugins.ContextMenu",{init:function(b){function c(){if(a._menu){a._menu.removeAll();a._menu.destroy();f.remove(b.getDoc(),"click",c)}}var a=this;a.editor=b;a.onContextMenu=new tinymce.util.Dispatcher(this);b.onContextMenu.add(function(d,e){if(!e.ctrlKey){a._getMenu(d).showMenu(e.clientX,e.clientY);f.add(d.getDoc(),"click",c);f.cancel(e)}});b.onMouseDown.add(c);b.onKeyDown.add(c)},getInfo:function(){return{longname:"Contextmenu",
author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/contextmenu",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_getMenu:function(b){var c=this,a=c._menu,d=b.selection,e=d.isCollapsed();d=d.getNode()||b.getBody();if(a){a.removeAll();a.destroy()}a=g.getPos(b.getContentAreaContainer());g.getPos(b.getContainer());a=b.controlManager.createDropMenu("contextmenu",{offset_x:a.x+b.getParam("contextmenu_offset_x",0),offset_y:a.y+
b.getParam("contextmenu_offset_y",0),constrain:1});c._menu=a;a.add({title:"advanced.cut_desc",icon:"cut",cmd:"Cut"}).setDisabled(e);a.add({title:"advanced.copy_desc",icon:"copy",cmd:"Copy"}).setDisabled(e);a.add({title:"advanced.paste_desc",icon:"paste",cmd:"Paste"});if(d.nodeName=="A"&&!b.dom.getAttrib(d,"name")||!e){a.addSeparator();a.add({title:"advanced.link_desc",icon:"link",cmd:b.plugins.advlink?"mceAdvLink":"mceLink",ui:true});a.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"})}a.addSeparator();
a.add({title:"advanced.image_desc",icon:"image",cmd:b.plugins.advimage?"mceAdvImage":"mceImage",ui:true});a.addSeparator();b=a.addMenu({title:"contextmenu.align"});b.add({title:"contextmenu.left",icon:"justifyleft",cmd:"JustifyLeft"});b.add({title:"contextmenu.center",icon:"justifycenter",cmd:"JustifyCenter"});b.add({title:"contextmenu.right",icon:"justifyright",cmd:"JustifyRight"});b.add({title:"contextmenu.full",icon:"justifyfull",cmd:"JustifyFull"});c.onContextMenu.dispatch(c,a,d,e);return a}});
tinymce.PluginManager.add("contextmenu",tinymce.plugins.ContextMenu)})();
