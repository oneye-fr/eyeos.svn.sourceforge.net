tinyMCEPopup.requireLangPack();
function init(){tinyMCEPopup.resizeToInnerSize();document.getElementById("backgroundimagebrowsercontainer").innerHTML=getBrowserHTML("backgroundimagebrowser","backgroundimage","image","table");document.getElementById("bgcolor_pickcontainer").innerHTML=getColorPickerHTML("bgcolor_pick","bgcolor");var a=tinyMCEPopup.editor,b=a.dom,c=b.getParent(a.selection.getNode(),"tr");a=document.forms[0];var e=b.parseStyle(b.getAttrib(c,"style")),d=c.parentNode.nodeName.toLowerCase(),f=b.getAttrib(c,"align"),g=
b.getAttrib(c,"valign"),h=trimSize(getStyle(c,"height","height")),i=b.getAttrib(c,"class"),j=convertRGBToHex(getStyle(c,"bgcolor","backgroundColor")),k=getStyle(c,"background","backgroundImage").replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1"),l=b.getAttrib(c,"id"),m=b.getAttrib(c,"lang");c=b.getAttrib(c,"dir");addClassesToList("class","table_row_styles");TinyMCE_EditableSelects.init();a.bgcolor.value=j;a.backgroundimage.value=k;a.height.value=h;a.id.value=l;a.lang.value=m;a.style.value=b.serializeStyle(e);
selectByValue(a,"align",f);selectByValue(a,"valign",g);selectByValue(a,"class",i,true,true);selectByValue(a,"rowtype",d);selectByValue(a,"dir",c);if(isVisible("backgroundimagebrowser"))document.getElementById("backgroundimage").style.width="180px";updateColor("bgcolor_pick","bgcolor")}
function updateAction(){var a=tinyMCEPopup.editor,b=a.dom,c,e=getSelectValue(document.forms[0],"action");tinyMCEPopup.restoreSelection();c=b.getParent(a.selection.getNode(),"tr");b=b.getParent(a.selection.getNode(),"table");a.execCommand("mceBeginUndoLevel");switch(e){case "row":updateRow(c);break;case "all":c=b.getElementsByTagName("tr");for(b=0;b<c.length;b++)updateRow(c[b],true);break;case "odd":case "even":c=b.getElementsByTagName("tr");for(b=0;b<c.length;b++)if(b%2==0&&e=="odd"||b%2!=0&&e=="even")updateRow(c[b],
true,true);break}a.addVisual();a.nodeChanged();a.execCommand("mceEndUndoLevel");tinyMCEPopup.close()}
function updateRow(a,b,c){var e=tinyMCEPopup.editor,d=document.forms[0],f=e.dom,g=a.parentNode.nodeName.toLowerCase(),h=getSelectValue(d,"rowtype"),i=e.getDoc();b||a.setAttribute("id",d.id.value);a.setAttribute("align",getSelectValue(d,"align"));a.setAttribute("vAlign",getSelectValue(d,"valign"));a.setAttribute("lang",d.lang.value);a.setAttribute("dir",getSelectValue(d,"dir"));a.setAttribute("style",f.serializeStyle(f.parseStyle(d.style.value)));f.setAttrib(a,"class",getSelectValue(d,"class"));a.setAttribute("background",
"");a.setAttribute("bgColor","");a.setAttribute("height","");a.style.height=getCSSSize(d.height.value);a.style.backgroundColor=d.bgcolor.value;a.style.backgroundImage=d.backgroundimage.value!=""?"url('"+d.backgroundimage.value+"')":"";if(g!=h&&!c){b=a.cloneNode(1);c=f.getParent(a,"table");d=null;for(g=0;g<c.childNodes.length;g++)if(c.childNodes[g].nodeName.toLowerCase()==h)d=c.childNodes[g];if(d==null){d=i.createElement(h);if(h=="thead")c.firstChild.nodeName=="CAPTION"?e.dom.insertAfter(d,c.firstChild):
c.insertBefore(d,c.firstChild);else c.appendChild(d)}d.appendChild(b);a.parentNode.removeChild(a);a=b}f.setAttrib(a,"style",f.serializeStyle(f.parseStyle(a.style.cssText)))}function changedBackgroundImage(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value);c["background-image"]="url('"+a.backgroundimage.value+"')";a.style.value=b.serializeStyle(c)}
function changedStyle(){var a=document.forms[0],b=tinyMCEPopup.editor.dom.parseStyle(a.style.value);a.backgroundimage.value=b["background-image"]?b["background-image"].replace(new RegExp("url\\('?([^']*)'?\\)","gi"),"$1"):"";if(b.height)a.height.value=trimSize(b.height);if(b["background-color"]){a.bgcolor.value=b["background-color"];updateColor("bgcolor_pick","bgcolor")}}
function changedSize(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value),e=a.height.value;c.height=e!=""?getCSSSize(e):"";a.style.value=b.serializeStyle(c)}function changedColor(){var a=document.forms[0],b=tinyMCEPopup.editor.dom,c=b.parseStyle(a.style.value);c["background-color"]=a.bgcolor.value;a.style.value=b.serializeStyle(c)}tinyMCEPopup.onInit.add(init);
