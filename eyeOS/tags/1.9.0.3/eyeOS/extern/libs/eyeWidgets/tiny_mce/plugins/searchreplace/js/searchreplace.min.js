tinyMCEPopup.requireLangPack();
var SearchReplaceDialog={init:function(){var a=document.forms[0],b=tinyMCEPopup.getWindowArg("mode");this.switchMode(b);a[b+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string");a[b+"_panel_searchstring"].focus()},switchMode:function(a){var b,d=this.lastMode;if(d!=a){b=document.forms[0];if(d){b[a+"_panel_searchstring"].value=b[d+"_panel_searchstring"].value;b[a+"_panel_backwardsu"].checked=b[d+"_panel_backwardsu"].checked;b[a+"_panel_backwardsd"].checked=b[d+"_panel_backwardsd"].checked;
b[a+"_panel_casesensitivebox"].checked=b[d+"_panel_casesensitivebox"].checked}mcTabs.displayTab(a+"_tab",a+"_panel");document.getElementById("replaceBtn").style.display=a=="replace"?"inline":"none";document.getElementById("replaceAllBtn").style.display=a=="replace"?"inline":"none";this.lastMode=a}},searchNext:function(a){function b(){e=h.getRng().cloneRange();c.getDoc().execCommand("SelectAll",false,null);h.setRng(e)}function d(){tinymce.isIE?c.selection.getRng().duplicate().pasteHTML(rs):c.getDoc().execCommand("InsertHTML",
false,rs)}var c=tinyMCEPopup.editor,h=c.selection,e=h.getRng(),i,j=this.lastMode,f,g,k=0,m=c.getWin(),l=0;i=document.forms[0];f=i[j+"_panel_searchstring"].value;g=i[j+"_panel_backwardsu"].checked;ca=i[j+"_panel_casesensitivebox"].checked;rs=i.replace_panel_replacestring.value;if(f!=""){if(ca)k|=4;switch(a){case "all":c.execCommand("SelectAll");c.selection.collapse(true);if(tinymce.isIE){for(;e.findText(f,g?-1:1,k);){e.scrollIntoView();e.select();d();l=1}tinyMCEPopup.storeSelection()}else for(;m.find(f,
ca,g,false,false,false,false);){d();l=1}l?tinyMCEPopup.alert(c.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(c.getLang("searchreplace_dlg.notfound"));return;case "current":c.selection.isCollapsed()||d();break}h.collapse(g);e=h.getRng();if(f)if(tinymce.isIE){if(e.findText(f,g?-1:1,k)){e.scrollIntoView();e.select()}else tinyMCEPopup.alert(c.getLang("searchreplace_dlg.notfound"));tinyMCEPopup.storeSelection()}else m.find(f,ca,g,false,false,false,false)?b():tinyMCEPopup.alert(c.getLang("searchreplace_dlg.notfound"))}}};
tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);
