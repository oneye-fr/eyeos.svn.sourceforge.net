var SlimeyAction=function(a,b){this.name=a;this.slimey=b};SlimeyAction.prototype.getName=function(){return this.name};SlimeyAction.prototype.perform=function(){};SlimeyAction.prototype.undo=function(){};
var SlimeyInsertAction=function(a,b){SlimeyAction.call(this,"insert",a);a=this.slimey.editor.getContainer().ownerDocument.createElement(b);a.slimey=this.slimey;a.className="slimeyElement";a.style.position="absolute";a.style.left="40%";a.style.top="30%";a.style.lineHeight="1.";a.style.cursor="move";a.style.fontFamily="sans-serif";a.style.fontSize="160%";a.style.margin="0px";a.style.padding="0px";a.style.border="0px";a.style.zIndex=1E4;if(a.tagName=="DIV"){a.style.left="5%";a.style.top="15%";a.style.width=
"90%";a.style.height="10%";a.innerHTML=lang("some text");a.style.textAlign="center";a.resizable=true;a.editable=true}else if(a.tagName=="IMG"){a.style.width="20%";a.style.height="20%";a.resizable=true;a.title=lang("drag the bottom right corner to resize")}else{a.innerHTML=a.tagName=="UL"?"<li>"+lang("some text")+"</li>":a.tagName=="OL"?"<li>"+lang("some text")+"</li>":lang("some text");a.editable=true;a.title=lang("double click to edit content")}setEventHandler(a,"mousedown",slimeyDrag);setEventHandler(a,
"click",slimeyClick);setEventHandler(a,"dblclick",slimeyEdit);setEventHandler(a,"mouseover",slimeyHighlight);setEventHandler(a,"mouseout",slimeyLowshadow);this.element=a};SlimeyInsertAction.prototype=new SlimeyAction;SlimeyInsertAction.prototype.getElement=function(){return this.element};SlimeyInsertAction.prototype.perform=function(){this.slimey.editor.getContainer().appendChild(this.element)};
SlimeyInsertAction.prototype.undo=function(){this.slimey.editor.getContainer().removeChild(this.element);this.slimey.editor.getSelected()==this.element&&this.slimey.editor.deselect()};var SlimeyEditContentAction=function(a,b,c){SlimeyAction.call(this,"editContent",a);this.element=c?c:this.slimey.editor.getSelected();this.content=b};SlimeyEditContentAction.prototype=new SlimeyAction;
SlimeyEditContentAction.prototype.perform=function(){this.previousContent=this.element.innerHTML;this.element.innerHTML=this.content};SlimeyEditContentAction.prototype.undo=function(){this.element.innerHTML=this.previousContent};var SlimeyEditStyleAction=function(a,b,c){SlimeyAction.call(this,"editStyle",a);this.element=this.slimey.editor.getSelected();this.property=b;this.value=c};SlimeyEditStyleAction.prototype=new SlimeyAction;
SlimeyEditStyleAction.prototype.perform=function(){this.previousValue=this.element.style[this.property];this.element.style[this.property]=this.value};SlimeyEditStyleAction.prototype.undo=function(){this.element.style[this.property]=this.previousValue};var SlimeyDeleteAction=function(a){SlimeyAction.call(this,"delete",a);this.element=this.slimey.editor.getSelected()};SlimeyDeleteAction.prototype=new SlimeyAction;
SlimeyDeleteAction.prototype.perform=function(){this.slimey.editor.getContainer().removeChild(this.element);this.slimey.editor.deselect()};SlimeyDeleteAction.prototype.undo=function(){this.slimey.editor.getContainer().appendChild(this.element)};var SlimeyMoveAction=function(a,b,c,d,e){SlimeyAction.call(this,"move",a);a=this.slimey.editor.getSelected();this.newx=b;this.newy=c;this.oldx=d?d:a.style.left;this.oldy=e?e:a.style.top;this.element=a};SlimeyMoveAction.prototype=new SlimeyAction;
SlimeyMoveAction.prototype.perform=function(){this.element.style.left=this.newx;this.element.style.top=this.newy};SlimeyMoveAction.prototype.undo=function(){this.element.style.left=this.oldx;this.element.style.top=this.oldy};var SlimeyResizeAction=function(a,b,c,d,e){SlimeyAction.call(this,"resize",a);a=this.slimey.editor.getSelected();this.neww=b;this.newh=c;this.oldw=d?d:a.style.width;this.oldh=e?e:a.style.height;this.element=a};SlimeyResizeAction.prototype=new SlimeyAction;
SlimeyResizeAction.prototype.perform=function(){this.element.style.width=this.neww;this.element.style.height=this.newh};SlimeyResizeAction.prototype.undo=function(){this.element.style.width=this.oldw;this.element.style.height=this.oldh};var SlimeySendToBackAction=function(a){SlimeyAction.call(this,"sendToBack",a);this.element=this.slimey.editor.getSelected()};SlimeySendToBackAction.prototype=new SlimeyAction;
SlimeySendToBackAction.prototype.perform=function(){for(var a=1E8,b=this.slimey.editor.getContainer().firstChild;b;b=b.nextSibling)if(b.nodeType==1){thisZ=parseInt(b.style.zIndex);if(thisZ<a)a=thisZ}this.oldZ=this.element.style.zIndex;this.element.style.zIndex=a-1};SlimeySendToBackAction.prototype.undo=function(){this.element.style.zIndex=this.oldZ};var SlimeyBringToFrontAction=function(a){SlimeyAction.call(this,"bringToFront",a);this.element=this.slimey.editor.getSelected()};
SlimeyBringToFrontAction.prototype=new SlimeyAction;SlimeyBringToFrontAction.prototype.perform=function(){for(var a=0,b=this.slimey.editor.getContainer().firstChild;b;b=b.nextSibling)if(b.nodeType==1){thisZ=parseInt(b.style.zIndex);if(thisZ>a)a=thisZ}this.oldZ=this.element.style.zIndex;this.element.style.zIndex=a+1};SlimeyBringToFrontAction.prototype.undo=function(){this.element.style.zIndex=this.oldZ};var SlimeyChangeSlideAction=function(a,b){SlimeyAction.call(this,"changeSlide",a);this.num=b};
SlimeyChangeSlideAction.prototype=new SlimeyAction;SlimeyChangeSlideAction.prototype.perform=function(){this.previousSlide=this.slimey.navigation.currentSlide;this.slimey.navigation.getSlide(this.num)};SlimeyChangeSlideAction.prototype.undo=function(){this.slimey.navigation.getSlide(this.previousSlide)};var SlimeyInsertSlideAction=function(a,b){SlimeyAction.call(this,"insertSlide",a);this.num=b};SlimeyInsertSlideAction.prototype=new SlimeyAction;SlimeyInsertSlideAction.prototype.perform=function(){this.slimey.navigation.insertNewSlide(this.num)};
SlimeyInsertSlideAction.prototype.undo=function(){this.slimey.navigation.deleteSlide(this.num)};var SlimeyDeleteSlideAction=function(a,b){SlimeyAction.call(this,"deleteSlide",a);this.num=b};SlimeyDeleteSlideAction.prototype=new SlimeyAction;SlimeyDeleteSlideAction.prototype.perform=function(){this.html=this.slimey.editor.getHTML();this.dom=document.createElement("div");this.slimey.editor.getDOM(this.dom);this.slimey.navigation.deleteSlide(this.num)};
SlimeyDeleteSlideAction.prototype.undo=function(){this.slimey.navigation.insertNewSlide(this.num,this.html,this.dom)};var SlimeyMoveSlideAction=function(a,b,c){SlimeyAction.call(this,"moveSlide",a);this.from=b;this.to=c};SlimeyMoveSlideAction.prototype=new SlimeyAction;SlimeyMoveSlideAction.prototype.perform=function(){this.slimey.navigation.moveSlide(this.from,this.to)};SlimeyMoveSlideAction.prototype.undo=function(){this.slimey.navigation.moveSlide(this.to,this.from)};
