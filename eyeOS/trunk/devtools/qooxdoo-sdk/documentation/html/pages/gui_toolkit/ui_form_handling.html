
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Form Handling &mdash; qooxdoo v1.2 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="qooxdoo v1.2 documentation" href="../../index.html" />
    <link rel="up" title="GUI Toolkit" href="../gui_toolkit.html" />
    <link rel="next" title="Menu Handling" href="ui_menu_handling.html" />
    <link rel="prev" title="Custom Widgets" href="ui_develop.html" /> 
  </head>
  <body>

		<div class="header">
			<div class="headcenter">
		    <a href="/"><img id="logo" src="http://resources.qooxdoo.org/images/logo.gif" alt="qooxdoo logo"/></a>
		
		    <h1 style="display: none;">qooxdoo</h1>
		    <h2 class="subline">the new era of web development</h2>
		  </div>
			<div class="navigation">
				<a href="http://qooxdoo.org">Home</a>
				<a href="http://qooxdoo.org/about">About</a>
				<a href="http://news.qooxdoo.org/">News</a>
				<a href="http://qooxdoo.org/demo">Demo</a>
				<a class="current" href="http://qooxdoo.org/documentation">Documentation</a>
				<a href="http://qooxdoo.org/community">Community</a>
				<a href="http://qooxdoo.org/download">Download</a>
				<a href="http://bugzilla.qooxdoo.org/">Bugs</a>
			</div>
			<div class="subheader">&nbsp;</div>
		</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ui_menu_handling.html" title="Menu Handling"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ui_develop.html" title="Custom Widgets"
             accesskey="P">previous</a> |</li>
				<li> &raquo; <a href="http://qooxdoo.org">Home</a> &raquo;</li>
        <li><a href="../../index.html">qooxdoo v1.2 documentation</a> &raquo;</li>
          <li><a href="../gui_toolkit.html" accesskey="U">GUI Toolkit</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="form-handling">
<span id="pages-gui-toolkit-ui-form-handling-form-handling"></span><h1>Form Handling<a class="headerlink" href="#form-handling" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="docutils literal"><span class="pre">qx.ui.form</span></tt> package contains several classes to for constructing forms. Some widgets &#8211; like <tt class="docutils literal"><span class="pre">Button</span></tt>, <tt class="docutils literal"><span class="pre">List</span></tt> or <tt class="docutils literal"><span class="pre">TextField</span></tt> &#8211; may look familiar if you have worked with HTML before, but this package also contains more complex widgets that you may know from your operating system and/or native desktop applications (e.g. <tt class="docutils literal"><span class="pre">Spinner</span></tt>, <tt class="docutils literal"><span class="pre">Slider</span></tt> or <tt class="docutils literal"><span class="pre">DateField</span></tt>).</p>
<div class="section" id="pages-gui-toolkit-ui-form-handling-idea-1">
<span id="idea"></span><h2>Idea<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-idea-1" title="Permalink to this headline">¶</a></h2>
<p>The idea of the form API is to make handling of form widgets as simple as possible, but also as generic as possible within the entire framework. There has been a thorough <a class="reference external" href="http://bugzilla.qooxdoo.org/show_bug.cgi?id=2099">discussion</a> on what&#8217;s the best solution and how to design a solid API. This is what we ended up with.</p>
</div>
<div class="section" id="demos">
<span id="pages-gui-toolkit-ui-form-handling-demos"></span><h2>Demos<a class="headerlink" href="#demos" title="Permalink to this headline">¶</a></h2>
<p>If you like to see some of the form management of qooxdoo in action, take a look at the following samples in the demo browser:</p>
<div class="section" id="widgets">
<span id="pages-gui-toolkit-ui-form-handling-widgets1"></span><h3>Widgets<a class="headerlink" href="#widgets" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#showcase~Form.html">All form widgets</a></li>
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~FormInvalids.html">All form widgets with invalid states</a></li>
</ul>
</div>
<div class="section" id="validation-and-resetting">
<span id="pages-gui-toolkit-ui-form-handling-validation-and-resetting"></span><h3>Validation and Resetting<a class="headerlink" href="#validation-and-resetting" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~FormValidator.html">Synchronous and asynchronous form validation</a></li>
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~MultiPageForm.html">Validation on different pages</a></li>
</ul>
</div>
<div class="section" id="rendering">
<span id="pages-gui-toolkit-ui-form-handling-rendering"></span><h3>Rendering<a class="headerlink" href="#rendering" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~FormRenderer.html">Single column form</a></li>
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~FormRendererDouble.html">Double column form</a></li>
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~FormRendererPlaceholder.html">Single column form using placeholders</a></li>
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#ui~FormRendererCustom.html">Custom form layout</a></li>
</ul>
</div>
<div class="section" id="data-binding">
<span id="pages-gui-toolkit-ui-form-handling-data-binding"></span><h3>Data Binding<a class="headerlink" href="#data-binding" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#data~Form.html">Manual form binding</a></li>
<li><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/demobrowser/#data~FormController.html">Form Controller</a></li>
</ul>
</div>
</div>
<div class="section" id="interfaces">
<span id="pages-gui-toolkit-ui-form-handling-interfaces-2"></span><h2>Interfaces<a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h2>
<p>The whole form API is defined by a couple of interfaces. These interfaces contain the most important methods and events for the form widgets. The following listing shows the interfaces, what&#8217;s their purpose and how you can benefit from them.</p>
<div class="section" id="form">
<span id="pages-gui-toolkit-ui-form-handling-form"></span><h3>Form<a class="headerlink" href="#form" title="Permalink to this headline">¶</a></h3>
<p>The interface called <tt class="docutils literal"><span class="pre">qx.ui.form.IForm</span></tt> defines a set of methods and events for every visible form widget. It contains the listed events and methods.</p>
<p><img alt="iform.png" src="../../_images/iform.png" /></p>
<p>As you can see, the interface defines accessors for four different properties.</p>
<ul class="simple">
<li>The enabled property is usually inherited from the widget class and is for switching of form element.</li>
<li>The required property is just a boolean flag signaling that the form widget is required. This can be used by some kind of form manager or form widget to display the status of the widget.</li>
<li>The valid property is a boolean flag containing <tt class="docutils literal"><span class="pre">true</span></tt> if the content of the widget is valid, but the form widgets does not have any kind of code to set this property. It needs to be set from outside. If it is set to <tt class="docutils literal"><span class="pre">false</span></tt>, the appearance will change automatically and signals the invalid state properly.</li>
<li>The invalidMessage property should contain a message, which will be shown in an invalid tooltip if the valid flag is set to <tt class="docutils literal"><span class="pre">false</span></tt>. If no message is given, no tooltip will appear.</li>
</ul>
</div>
<div class="section" id="executable">
<span id="pages-gui-toolkit-ui-form-handling-executable"></span><h3>Executable<a class="headerlink" href="#executable" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">qx.ui.form.IExecutable</span></tt> interface defines the essential parts for all executable widgets. The best example for a executable widget is a button. It defines the following events and methods.</p>
<p><img alt="iexecutable.png" src="../../_images/iexecutable.png" /></p>
<p>As you can see, the interface defines accessors for only one property.</p>
<ul class="simple">
<li>The command property can take a <tt class="docutils literal"><span class="pre">qx.event.Command</span></tt>. The execute method executes the given command.</li>
</ul>
</div>
<div class="section" id="range">
<span id="pages-gui-toolkit-ui-form-handling-range"></span><h3>Range<a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">qx.ui.form.IRange</span></tt> interface defines the essential parts for all widgets dealing with ranges. It defines the following methods.</p>
<p><img alt="irange.png" src="../../_images/irange.png" /></p>
<p>As you can see, the interface defines accessors for four properties.</p>
<ul class="simple">
<li>The minimum of the range is defined by the Minimum property.</li>
<li>The maximum of the range is defined by the Maximum property.</li>
<li>Each range does have a single step value which is defined by the SingleStep property.</li>
<li>As the single step, there is a page step in every range which is defined by the PageStep property.</li>
</ul>
</div>
<div class="section" id="number-string-color-date-boolean">
<span id="pages-gui-toolkit-ui-form-handling-number-string-color-date-boolean"></span><h3>Number / String / Color / Date / Boolean<a class="headerlink" href="#number-string-color-date-boolean" title="Permalink to this headline">¶</a></h3>
<p>Each of the listed interfaces define the same methods and events. The only difference in the interfaces is - like the name says - the type of the data processed by the implementing widget. With that solution, we have the same API for every form widget but can still determinate which type of value the widget expects by checking for the different interfaces.</p>
<div class="section" id="pages-gui-toolkit-ui-form-handling-interfaces-1">
<span id="id1"></span><h4>Interfaces<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-interfaces-1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>Number : <tt class="docutils literal"><span class="pre">qx.ui.form.INumberForm</span></tt></li>
<li>String : <tt class="docutils literal"><span class="pre">qx.ui.form.IStringForm</span></tt></li>
<li>Color : <tt class="docutils literal"><span class="pre">qx.ui.form.IColorForm</span></tt></li>
<li>Date : <tt class="docutils literal"><span class="pre">qx.ui.form.IDateForm</span></tt></li>
<li>Boolean : <tt class="docutils literal"><span class="pre">qx.ui.form.IBooleanForm</span></tt></li>
</ul>
<p>The color interface takes a string which has to be formated like <a class="reference external" href="http://demo.qooxdoo.org/1.2.x/apiviewer/#qx.util.ColorUtil">usual colors</a> in qooxdoo.</p>
<p><img alt="iformvalue.png" src="../../_images/iformvalue.png" /></p>
<p>As you can see, the interface can be implemented with only one property.</p>
<ul class="simple">
<li>The value property takes the value of the widget. This is for example a boolean in a checkbox widget or a string in a textfield widget.</li>
</ul>
</div>
</div>
<div class="section" id="model-modelselection">
<span id="pages-gui-toolkit-ui-form-handling-model-modelselection"></span><h3>Model / ModelSelection<a class="headerlink" href="#model-modelselection" title="Permalink to this headline">¶</a></h3>
<p>Most of the form items handling a selection had a value property in the old API. We replaced that value property due to the usage of the value property for the user input values with a model property. The method for accessing the model data are defined in an interface called <tt class="docutils literal"><span class="pre">qx.ui.form.IModel</span></tt>.</p>
<p><img alt="Diagram of IModel" src="../../_images/imodel.png" /></p>
<p>The model property can be used to store additional data which is represented by the widget. The data does not need to be a string like in the old value property. You can store references to objects, numbers, strings and so on.
Accessing the model is very easy. Every widget containing a widget implementing the <tt class="docutils literal"><span class="pre">qx.ui.form.IModel</span></tt> interface has its own interface to access the current selected model.</p>
<p><img alt="Diagram of IModelSelection" src="../../_images/imodelselection.png" /></p>
<p>As you can see in the diagram, you can get the current selected model and also set the selection using the models.</p>
</div>
</div>
<div class="section" id="pages-gui-toolkit-ui-form-handling-widgets2">
<span id="id2"></span><h2>Widgets<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-widgets2" title="Permalink to this headline">¶</a></h2>
<p>The following listing shows the form widgets and their corresponding interfaces. To see more details about a widget, take a look at the <a class="reference internal" href="../widget/widget_ref.html"><em>widgets</em></a> documentation.</p>
<html>
<style type="text/css">
table {border: 1px solid black; border-collapse:collapse; background-color: white}
td {border: 1px solid black; padding:5px}
</style>

<table>
<tbody>
  <tr>
    <td>&nbsp;</td>
    <td><strong>IForm</strong></td>
    <td><strong>IExecutable</strong></td>
    <td><strong>IRange</strong></td>
    <td><strong>INumber<br>Form</strong></td>
    <td><strong>IString<br>Form</strong></td>
    <td><strong>IColor<br>Form</strong></td>
    <td><strong>IDate<br>Form</strong></td>
    <td><strong>IBoolean<br>Form</strong></td>
    <td><strong>IModel</strong></td>
    <td><strong>IModel<br>Selection</strong></td>
  </tr>

  <tr>
    <td>Label</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Text Input</strong></td>
  </tr>

  <tr>
    <td>TextField</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>TextArea</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>PasswordField</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Supported Text Input</strong></td>
  </tr>

  <tr>
    <td>ComboBox</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>DateField</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Number Input</strong></td>
  </tr>

  <tr>
    <td>Slider</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>Spinner</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Boolean Input</strong></td>
  </tr>

  <tr>
    <td>CheckBox</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>RadioButton</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Color Input</strong></td>
  </tr>

  <tr>
    <td>ColorPopup</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>ColorSelector</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Date Input</strong></td>
  </tr>

  <tr>
    <td>DateChooser</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Selections</strong></td>
  </tr>

  <tr>
    <td>SelectBox</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
  </tr>

  <tr>
    <td>List</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
  </tr>

  <tr>
    <td>ListItem</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>tree.Tree</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
  </tr>

  <tr>
    <td>tree.TreeFolder</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>tree.TreeFile</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Grouping</strong></td>
  </tr>

  <tr>
    <td>GroupBox</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>CheckGroupBox</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>RadioGroupBox</td>
    <td>X</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>RadioGroup</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
  </tr>

  <tr>
    <td>RadioButtonGroup</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
  </tr>

  <tr>
    <td colspan="11"><strong>Buttons</strong></td>
  </tr>

  <tr>
    <td>Button</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>MenuButton</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>RepeatButton</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>SplitButton</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>ToggleButton</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>tabView.Button</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>menu.CheckBox</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>menu.RedioButton</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

  <tr>
    <td>menu.Button</td>
    <td>&nbsp;</td>
    <td>X</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>

</tbody>
</table>
</html></div>
<div class="section" id="sample-usage">
<span id="pages-gui-toolkit-ui-form-handling-sample-usage-1"></span><h2>Sample Usage<a class="headerlink" href="#sample-usage" title="Permalink to this headline">¶</a></h2>
<p>The first example is a simple one, showing how to use two widgets implementing the <tt class="docutils literal"><span class="pre">IStringForm</span></tt> interface:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create and add a textfield</span>
<span class="kd">var</span> <span class="nx">textfield</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">textfield</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>

<span class="c1">// create and add a label</span>
<span class="kd">var</span> <span class="nx">label</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">basic</span><span class="p">.</span><span class="nx">Label</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">label</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">40</span><span class="p">});</span>

<span class="c1">// set the text of both widgets</span>
<span class="nx">textfield</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;Text&quot;</span><span class="p">);</span>
<span class="nx">label</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;Text&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The second example shows how to react on a change in a widget implementing the <tt class="docutils literal"><span class="pre">INumberForm</span></tt> interface. The value of the slider will be shown as a label:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create and add a slider</span>
<span class="kd">var</span> <span class="nx">slider</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Slider</span><span class="p">();</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">setWidth</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">slider</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>

<span class="c1">// create and add a label</span>
<span class="kd">var</span> <span class="nx">label</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">basic</span><span class="p">.</span><span class="nx">Label</span><span class="p">();</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">label</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">220</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>

<span class="c1">// add the listener</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;changeValue&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// convert the number to a string</span>
  <span class="nx">label</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">getData</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
<span class="p">},</span> <span class="k">this</span><span class="p">);</span>
</pre></div>
</div>
<p>The last example shows how to use the <tt class="docutils literal"><span class="pre">IForm</span></tt> interface and how to mark a widget as invalid:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create and add a slider</span>
<span class="kd">var</span> <span class="nx">slider</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Slider</span><span class="p">();</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">setWidth</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">slider</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>
<span class="c1">// set the invalid message</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">setInvalidMessage</span><span class="p">(</span><span class="s2">&quot;Please use a number above 50.&quot;</span><span class="p">);</span>

<span class="c1">// add the validation</span>
<span class="nx">slider</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;changeValue&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">getData</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">slider</span><span class="p">.</span><span class="nx">setValid</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">slider</span><span class="p">.</span><span class="nx">setValid</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="k">this</span><span class="p">);</span>
</pre></div>
</div>
<p>All examples work in the playground application.</p>
</div>
<div class="section" id="migrating-to-the-new-api">
<span id="pages-gui-toolkit-ui-form-handling-migrating-to-the-new-api"></span><h2>Migrating to the new API<a class="headerlink" href="#migrating-to-the-new-api" title="Permalink to this headline">¶</a></h2>
<p>There are some important topics you have to take care if you want to migrate from the former Form API to the new one.</p>
<div class="section" id="iformelement">
<span id="pages-gui-toolkit-ui-form-handling-iformelement"></span><h3>IFormElement<a class="headerlink" href="#iformelement" title="Permalink to this headline">¶</a></h3>
<p>The previous form interface called <tt class="docutils literal"><span class="pre">qx.ui.form.IFormElement</span></tt> is deprecated now. therefore, also the name and the value property for storing string information for serialization is gone. If you are using those constructs, you can instead use regular user data:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">widget</span><span class="p">.</span><span class="nx">setName</span><span class="p">(</span><span class="s2">&quot;field1&quot;</span><span class="p">);</span>  <span class="c1">// old</span>
<span class="nx">widget</span><span class="p">.</span><span class="nx">setUserData</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;field1&quot;</span><span class="p">);</span>  <span class="c1">// new</span>
</pre></div>
</div>
<p>This works identical to the old code. The HTML name property will not be set after the call in both cases.</p>
</div>
<div class="section" id="checkbox-and-radiobutton">
<span id="pages-gui-toolkit-ui-form-handling-checkbox-and-radiobutton"></span><h3>CheckBox and RadioButton<a class="headerlink" href="#checkbox-and-radiobutton" title="Permalink to this headline">¶</a></h3>
<p>Widgets like CheckBox or RadioButton had a <tt class="docutils literal"><span class="pre">checked</span></tt> property for their state. This  property is deprecated and is now called <tt class="docutils literal"><span class="pre">value</span></tt>.</p>
</div>
<div class="section" id="changevalue-on-list-and-selectbox">
<span id="pages-gui-toolkit-ui-form-handling-changevalue-on-list-and-selectbox"></span><h3>changeValue on List and SelectBox<a class="headerlink" href="#changevalue-on-list-and-selectbox" title="Permalink to this headline">¶</a></h3>
<p>It was quite common to use the <tt class="docutils literal"><span class="pre">changeValue</span></tt> event of a <tt class="docutils literal"><span class="pre">SelectBox</span></tt> or <tt class="docutils literal"><span class="pre">List</span></tt> to handle a change of the selection. Due to the removal of <tt class="docutils literal"><span class="pre">value</span></tt>, the <tt class="docutils literal"><span class="pre">changeValue</span></tt> event has also been removed. Please use the <tt class="docutils literal"><span class="pre">changeSelection</span></tt> event instead.</p>
</div>
<div class="section" id="label">
<span id="pages-gui-toolkit-ui-form-handling-label"></span><h3>Label<a class="headerlink" href="#label" title="Permalink to this headline">¶</a></h3>
<p>The former <tt class="docutils literal"><span class="pre">content</span></tt> property of the Label class has been renamed to make it consistent with the rest of the framework. So the new name is like in every other widget: <tt class="docutils literal"><span class="pre">value</span></tt>.</p>
</div>
</div>
<div class="section" id="validation">
<span id="pages-gui-toolkit-ui-form-handling-validation"></span><h2>Validation<a class="headerlink" href="#validation" title="Permalink to this headline">¶</a></h2>
<p>Form validation is essential in most of the common use cases of forms. Thats why qooxdoo supports the application developer with a validation component named <tt class="docutils literal"><span class="pre">qx.ui.form.validation.Manager</span></tt>. This manager is responsible for managing the form items, which need to be validated.
We tried to keep the API as minimal as possible but in the same way, as flexible as possible. The following class diagram shows the user API of the component.</p>
<p><img alt="The validation package" src="../../_images/validationmanager.png" /></p>
<p>The events, properties and methods can be divided into three groups:</p>
<ul class="simple">
<li><strong>Validation</strong><ul>
<li>getValid()</li>
<li>isValid()</li>
<li>validate()</li>
<li>validator  -  property</li>
<li>complete  -  event</li>
<li>changeValid  -  event</li>
</ul>
</li>
<li><strong>Form Item Management</strong><ul>
<li>add(formItem, validator)</li>
<li>reset()</li>
</ul>
</li>
<li><strong>Invalid Messages</strong><ul>
<li>getInvalidMessages()</li>
<li>invalidMessage  -  property</li>
</ul>
</li>
</ul>
<p>The first part with which the application developer gets in contact is the add method. It takes form items and a validator. But what are form items?</p>
<div class="section" id="requirements">
<span id="pages-gui-toolkit-ui-form-handling-requirements"></span><h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>Form items need two things. First of all, it is necessary that the given form item can handle an invalid state and has an invalid message. This is guaranteed by the <a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-form"><em>IForm</em></a> interface already introduced. But thats not all, the manager needs to access the value of the form item. Therefore, the form item need to specify a value property. This value property is defined in the <a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-number-string-color-date-boolean"><em>data specific form interfaces</em></a> also introduced above. So all widgets implementing the <tt class="docutils literal"><span class="pre">IForm</span></tt> interface and one of the value defining interfaces can be used by the validation. For a list which widget implement which interface, take a look at the <a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-widgets1"><em>widgets section</em></a> in this document.</p>
<p>Now that we know what the manager can validate, its time to learn how to validate. In general, there are two different approaches in validation. The first approach is a client side validation, which is in common cases synchronous. On the other hand, a server side validation is asynchronous in most cases. We will cover both possibilities in the following sections.</p>
</div>
<div class="section" id="synchronous">
<span id="pages-gui-toolkit-ui-form-handling-synchronous"></span><h3>Synchronous<a class="headerlink" href="#synchronous" title="Permalink to this headline">¶</a></h3>
<p>The following subsections cover some common scenarios of synchronous validation. See this code snippet as basis for all the examples shown in the subsections.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">manager</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">Manager</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">textField</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">checkBox</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">CheckBox</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="required-form-fields">
<span id="pages-gui-toolkit-ui-form-handling-required-form-fields"></span><h4>Required Form Fields<a class="headerlink" href="#required-form-fields" title="Permalink to this headline">¶</a></h4>
<p>One of the most obvious validation is a validation for a non empty field. This can be seen in common forms as required fields which are easy to define in qooxdoo. Just define the specific widget as required and add it without a validator to the validation manager.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">textField</span><span class="p">.</span><span class="nx">setRequired</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="nx">manager</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">textField</span><span class="p">);</span>
</pre></div>
</div>
<p>The validation manager will take all the necessary steps to mark the field as invalid as soon as the validate method will be invoked, if the text field is empty.</p>
</div>
<div class="section" id="default-validator">
<span id="pages-gui-toolkit-ui-form-handling-default-validator"></span><h4>Default Validator<a class="headerlink" href="#default-validator" title="Permalink to this headline">¶</a></h4>
<p>Another common use case of validation is to check for specific input types like email adresses, urls or similar. For those common checks, qooxdoo offers a set of predefined validators in <tt class="docutils literal"><span class="pre">qx.util.Validate</span></tt>. The example here shows the usage of a predefined email validator.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">manager</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">textField</span><span class="p">,</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">Validate</span><span class="p">.</span><span class="nx">email</span><span class="p">());</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-validator">
<span id="pages-gui-toolkit-ui-form-handling-custom-validator"></span><h4>Custom Validator<a class="headerlink" href="#custom-validator" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, the predefined validators are not enough and you need to create a application specific validator. That&#8217;s also no problem because the synchronous validator is just a JavaScript function. In this function, you can either return a boolean, which signals the validation result or you can throw a <tt class="docutils literal"><span class="pre">qx.core.ValidationError</span></tt> containing the message to display as invalid message. The validation manager can handle both kinds of validators.
The example here checks if the value of the text field has at least a length of 3.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">manager</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">textField</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<div class="section" id="validation-in-the-context-of-the-form">
<span id="pages-gui-toolkit-ui-form-handling-validation-in-the-context-of-the-form"></span><h4>Validation in the context of the form<a class="headerlink" href="#validation-in-the-context-of-the-form" title="Permalink to this headline">¶</a></h4>
<p>All shown validation rules validate each form item in its own context. But it might be necessary to have more than one form item on the validation. For such scenarios, the manager itself can have a validator too. The example here shows how to ensure, that the text field is not empty, if the checkbox is checked.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">manager</span><span class="p">.</span><span class="nx">setValidator</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">items</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">checkBox</span><span class="p">.</span><span class="nx">getValue</span><span class="p">())</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">textField</span><span class="p">.</span><span class="nx">getValue</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">value</span> <span class="o">||</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">textField</span><span class="p">.</span><span class="nx">setValid</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">textField</span><span class="p">.</span><span class="nx">setValid</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
  <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="asynchronous">
<span id="pages-gui-toolkit-ui-form-handling-asynchronous"></span><h3>Asynchronous<a class="headerlink" href="#asynchronous" title="Permalink to this headline">¶</a></h3>
<p>Imagine the scenario you want to check if a username is already take during a registration process or you want to check a credit card number. Such kind of validation can only be done by a server and not in the client. But you don&#8217;t want the user to wait for the server to process your request and send the answer back. So you need some kind of asynchronous validation.</p>
<p>For all asynchronous validation cases, we need a wrapper for the validator, the <tt class="docutils literal"><span class="pre">qx.ui.form.validation.AsyncValidator</span></tt>. But that does not mean much work for you as application developer. Just take a look at the following example to see the AsyncValidator in action.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">manager</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">textField</span><span class="p">,</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">validation</span><span class="p">.</span><span class="nx">AsyncValidator</span><span class="p">(</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">validator</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// here comes the async call</span>
    <span class="nb">window</span><span class="p">.</span><span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="c1">// callback for the async validation</span>
      <span class="nx">validator</span><span class="p">.</span><span class="nx">setValid</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1000</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">));</span>
</pre></div>
</div>
<p>The only difference to the synchronous case is the wrapping of your validator function, at least for the code you have to write as developer. Take a look at the following sequence diagram to get an insight on how the asynchronous validation is handled.</p>
<p><img alt="Asynchronous form validation" src="../../_images/sd-asyncvalidate-540x308.png" /></p>
<p>The asynchronous validation can not only be used for form items. Also the manager itself can handle instances of the AsyncValidator as validator.</p>
</div>
</div>
<div class="section" id="serialization">
<span id="pages-gui-toolkit-ui-form-handling-serialization"></span><h2>Serialization<a class="headerlink" href="#serialization" title="Permalink to this headline">¶</a></h2>
<p>Entering data into a form is one part of the process. But that entered data needs to be send to the server most of the time. So serialization is a big topic when it comes to forms. We decided not to integrate the serialization in one form manager responsible for validation and serialization.</p>
<div class="section" id="pages-gui-toolkit-ui-form-handling-idea-2">
<span id="id3"></span><h3>Idea<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-idea-2" title="Permalink to this headline">¶</a></h3>
<p>The main idea of that was to ensure, that it works good together with features like a form widget and the corresponding data binding components. So we decided to split the problem into two different parts. The first part is storing the data held in the view components into a model. The second part takes that model and serializes the data in the model.
Sounds like <a class="reference internal" href="../data_binding/data_binding.html"><em>data binding</em></a>? It is data binding!</p>
<p><img alt="Serialization in qooxdoo" src="../../_images/serialization.png" /></p>
<p>But you don&#8217;t have to connect all these widgets yourself. We do offer a object controller which can take care of most of the work. But where do you get the model? Writing a specific qooxdoo class for every form sounds like a bit overkill. But qooxdoo has a solution for that, too. The creation of classes and model instances is already part of the data binding and can also be used here. Sounds weired? Take a look at the following common scenarios to see how it works.</p>
</div>
<div class="section" id="common-scenarios">
<span id="pages-gui-toolkit-ui-form-handling-common-scenarios"></span><h3>Common Scenarios<a class="headerlink" href="#common-scenarios" title="Permalink to this headline">¶</a></h3>
<p>The most common scenario is to serialize an amount of form items without any special additions. Just take the values of the whole form and serialize it.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the ui</span>
<span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">password</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">PasswordField</span><span class="p">();</span>

<span class="c1">// create the model</span>
<span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">marshal</span><span class="p">.</span><span class="nx">Json</span><span class="p">.</span><span class="nx">createModel</span><span class="p">({</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;b&quot;</span><span class="p">});</span>

<span class="c1">// create the controller and connect the form items</span>
<span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nb">Object</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">addTarget</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="nx">controller</span><span class="p">.</span><span class="nx">addTarget</span><span class="p">(</span><span class="nx">password</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>

<span class="c1">// serialize</span>
<span class="nx">qx</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">Serializer</span><span class="p">.</span><span class="nx">toUriParameter</span><span class="p">(</span><span class="nx">model</span><span class="p">);</span>
</pre></div>
</div>
<p>The result will be <tt class="docutils literal"><span class="pre">name=a&amp;password=b</span></tt> because the initial values of the model are <tt class="docutils literal"><span class="pre">a</span></tt> and <tt class="docutils literal"><span class="pre">b</span></tt>.</p>
<p>That way, the serialization in completely cut of from the form itself. So hidden form fields are as easy as it could be. Just add another property to the model.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">marshal</span><span class="p">.</span><span class="nx">Json</span><span class="p">.</span><span class="nx">createModel</span><span class="p">(</span>
  <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="nx">password</span><span class="o">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="nx">c</span><span class="o">:</span> <span class="s2">&quot;i am hidden&quot;</span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Keep in mind that you create a model with that and you can access every property you created using the default getter and setter.</p>
<p>I guess some of you are asking yourself: &#8220;What if i want to convert the values for serialization. My server needs some different values...&#8221;. That brings in the topic of conversion. But as we have seen before, the mapping from the view to the model is handled by the data binding which already includes conversion. Take a look at the <a class="reference internal" href="../data_binding/single_value_binding.html#pages-data-binding-single-value-binding-options-conversion-and-validation"><em>data binding documentation</em></a> for more information on the conversion.</p>
<div class="section" id="need-something-special">
<span id="pages-gui-toolkit-ui-form-handling-need-something-special"></span><h4>Need something special?<a class="headerlink" href="#need-something-special" title="Permalink to this headline">¶</a></h4>
<p>In some cases, you might want to have something really special like serializing one value only if another value has a special value or something else. In that case, you can write your own serializer which can handle the serialization the way you need to.</p>
</div>
</div>
</div>
<div class="section" id="resetting">
<span id="pages-gui-toolkit-ui-form-handling-resetting"></span><h2>Resetting<a class="headerlink" href="#resetting" title="Permalink to this headline">¶</a></h2>
<p>A third useful feature of a form besides validation and serialization is resetting the whole form with one call. Sounds not too complicated that a separate class is needed. But we decided to do it anyway for some reasons.</p>
<ul class="simple">
<li>The validation manager is not the right place for reseting becaus it handles only the validation.</li>
<li>The form widget, responsible for layouting forms, is a good place, but we don&#8217;t want to force developers to use the form if they just want the reset feature.</li>
</ul>
<p>So we decided to create a standalone implementation for resetting called <tt class="docutils literal"><span class="pre">qx.ui.form.Resetter</span></tt>.</p>
<p><img alt="Resetter Class" src="../../_images/resetter.png" /></p>
<p>Like the task of resetting itself, the API is not too complicated. We do have one method for adding items, and another one for reseting all added items.</p>
<div class="section" id="how-it-works">
<span id="pages-gui-toolkit-ui-form-handling-how-it-works"></span><h3>How It Works<a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h3>
<p>Technically, its not really a challenge thanks to the new form API. You can add all items, having either a value property defined by one of the <a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-number-string-color-date-boolean"><em>data specific form interfaces</em></a> or implementing the <a class="reference internal" href="ui_selection.html"><em>selection API</em></a> of qooxdoo. On every add. the resetter grabs the current value and stores it. On a reset all stored values are set back.</p>
</div>
<div class="section" id="pages-gui-toolkit-ui-form-handling-sample-usage-2">
<span id="id4"></span><h3>Sample Usage<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-sample-usage-2" title="Permalink to this headline">¶</a></h3>
<p>The following sample shows how to use the resetter with three input fields, a textfield, a checkbox and a list.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create a textfield</span>
<span class="kd">var</span> <span class="nx">textField</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">(</span><span class="s2">&quot;acb&quot;</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">textField</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>

<span class="c1">// create a checkbox</span>
<span class="kd">var</span> <span class="nx">checkBox</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">CheckBox</span><span class="p">(</span><span class="s2">&quot;box&quot;</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">checkBox</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">40</span><span class="p">});</span>

<span class="c1">// create a list</span>
<span class="kd">var</span> <span class="nx">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">List</span><span class="p">();</span>
<span class="nx">list</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">ListItem</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">));</span>
<span class="nx">list</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">ListItem</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">));</span>
<span class="nx">list</span><span class="p">.</span><span class="nx">setSelection</span><span class="p">([</span><span class="nx">list</span><span class="p">.</span><span class="nx">getSelectables</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">list</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">70</span><span class="p">});</span>

<span class="c1">// create the resetter</span>
<span class="kd">var</span> <span class="nx">resetter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Resetter</span><span class="p">();</span>
<span class="c1">// add the form items</span>
<span class="nx">resetter</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">textField</span><span class="p">);</span>
<span class="nx">resetter</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">checkBox</span><span class="p">);</span>
<span class="nx">resetter</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">list</span><span class="p">);</span>

<span class="c1">// add a reset button</span>
<span class="kd">var</span> <span class="nx">resetButton</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Button</span><span class="p">(</span><span class="s2">&quot;Reset&quot;</span><span class="p">);</span>
<span class="nx">resetButton</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">resetter</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
<span class="p">});</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">resetButton</span><span class="p">,</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">120</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="form-object">
<span id="pages-gui-toolkit-ui-form-handling-form-object"></span><h2>Form Object<a class="headerlink" href="#form-object" title="Permalink to this headline">¶</a></h2>
<p>We have already covered most parts of form handling. But one thing we spared out completely until now is layouting the form items. Thats where the <tt class="docutils literal"><span class="pre">qx.ui.form.Form</span></tt> comes in play.</p>
<div class="section" id="what-is-it">
<span id="pages-gui-toolkit-ui-form-handling-what-is-it"></span><h3>What is it?<a class="headerlink" href="#what-is-it" title="Permalink to this headline">¶</a></h3>
<p>The qooxdoo form is a object, which includes three main parts.</p>
<ul class="simple">
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-validation"><em>Validation</em></a> using the <tt class="docutils literal"><span class="pre">qx.ui.form.validation.Manager</span></tt> class</li>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-resetting"><em>Resetting</em></a> using the <tt class="docutils literal"><span class="pre">qx.ui.form.Resetter</span></tt> class</li>
<li>Handling the layout of the form</li>
</ul>
<p>As we have already talked about the first two items, I&#8217;ll cover the last item in a more detailed way.</p>
<p>The layout of a form is in most cases application specific. It depends on the space available in the application and much other factors. Thats why qooxdoo has this flexible form layouting tool, which includes a set of default possibilities to layout a form. On of the main requirements of the solution was the extensibility so everyone could have the layout as his application requires.
To get that, we applied a pattern used widely across the qooxdoo framework, which takes all UI related code to renderer classes. These renderer are as lightweight as possible to make it easy for developers to write their own custom renderer, as you can see in this UML diagram:
<img alt="qx.ui.form.Form" src="../../_images/iform.png" /></p>
</div>
<div class="section" id="renderer">
<span id="pages-gui-toolkit-ui-form-handling-renderer"></span><h3>Renderer<a class="headerlink" href="#renderer" title="Permalink to this headline">¶</a></h3>
<p>As the diagram shows, qooxdoo provides an interface for FormRenderer, the <tt class="docutils literal"><span class="pre">IFormRenderer</span></tt> interface. It defines two methods, one for adding a group of form items and one for adding buttons.</p>
<ul class="simple">
<li>addItems(items : qx.ui.form.IForm[], names : String[], title : String) : void</li>
<li>addButton(button : qx.ui.form.Button) : void</li>
</ul>
<p>Sure you have recognized the difference to the API of the form itself. You add the widgets one by one to the form but the renderer gets always a group of widgets at once. This gives the renderer additional information which it may need to render the form based on the number of groups rather then on the number of widgets.</p>
<p>You may ask yourself why we didn&#8217;t use the layouts, we usually use in such scenarios if we ant to render widgets on the screen. It may be necessary, that a rendere contains even more than one widget. Imagine a wizard or a form shared among different tabs. Thats all not possible using layouts instead of renderer widgets.</p>
<p>The following sections show the renderer included in qooxdoo, which you can use out of the box.</p>
<div class="section" id="default-single-column">
<span id="pages-gui-toolkit-ui-form-handling-default-single-column"></span><h4>Default (Single Column)<a class="headerlink" href="#default-single-column" title="Permalink to this headline">¶</a></h4>
<p>If you don&#8217;t care about renderer and you don&#8217;t specify a rendere, the default renderer is used and thats a single column renderer.</p>
<p><img alt="Default renderer" src="../../_images/singlerenderer.png" /></p>
<p>As you can see in the picture, the rendere adds an asterisk to every required field, adds a colon at the end of every label and defines the vertical layout.</p>
</div>
<div class="section" id="double-column">
<span id="pages-gui-toolkit-ui-form-handling-double-column"></span><h4>Double Column<a class="headerlink" href="#double-column" title="Permalink to this headline">¶</a></h4>
<p>The double column renderer has the same features like the already introduced single column renderer but renders the in two columns, as you can see in the following picture.</p>
<p><img alt="Double Renderer" src="../../_images/doublerenderer.png" /></p>
</div>
<div class="section" id="single-column-with-placeholer">
<span id="pages-gui-toolkit-ui-form-handling-single-column-with-placeholer"></span><h4>Single Column with Placeholer<a class="headerlink" href="#single-column-with-placeholer" title="Permalink to this headline">¶</a></h4>
<p>This renderer is more a demo showing how easy it can be to implement your own renderer. It has a limitation that i can only render input fields which do have the placeholder property. But the result is pretty nice:</p>
<p><img alt="Placeholder Renderer" src="../../_images/placeholderrenderer.png" /></p>
</div>
</div>
<div class="section" id="pages-gui-toolkit-ui-form-handling-sample-usage-3">
<span id="id5"></span><h3>Sample Usage<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-sample-usage-3" title="Permalink to this headline">¶</a></h3>
<p>After we have seen how it should work, here come some examples how it works. In this example, we want to create a form for an address management tool. So we divide our input fields into two groups. The first group contains of two textfields, one for the first name and one for the last name. The second group contains some contact data like email, phone number and company. At last, we want to add two buttons to the form, one for saving the data if it is valid and another for reseting the form. So here we go...</p>
<p>First, we need a form object.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the form</span>
<span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Form</span><span class="p">();</span>
</pre></div>
</div>
<p>After that, we can create the first two input fields. As these two fields are required, we should mark them as required.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the first two input fields</span>
<span class="kd">var</span> <span class="nx">firstname</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">();</span>
<span class="nx">firstname</span><span class="p">.</span><span class="nx">setRequired</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">lastname</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">();</span>
<span class="nx">lastname</span><span class="p">.</span><span class="nx">setRequired</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
</pre></div>
</div>
<p>As you can see, the input fields are textfields as described in the text above. Next we can add those input fields to the form.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// add the first group</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">addGroupHeader</span><span class="p">(</span><span class="s2">&quot;Name&quot;</span><span class="p">);</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">firstname</span><span class="p">,</span> <span class="s2">&quot;Firstname&quot;</span><span class="p">);</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">lastname</span><span class="p">,</span> <span class="s2">&quot;Lastname&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>First, we added a group header to have a headline above the two input fields. After that, we added them with a name but without a validator. The required flag we set earlier is enough. We need to add another group of input fields for the contact data.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// add the second group</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">addGroupHeader</span><span class="p">(</span><span class="s2">&quot;Contact&quot;</span><span class="p">);</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">(),</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">util</span><span class="p">.</span><span class="nx">Validate</span><span class="p">.</span><span class="nx">email</span><span class="p">());</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">(),</span> <span class="s2">&quot;Phone&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>After adding the second group header, you see the textfield for the email, which uses a predefined email validator from the framework. The phone numer does not get any validator at all. The last missing thing are the buttons. First add the save button.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// add a save button</span>
<span class="kd">var</span> <span class="nx">savebutton</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Button</span><span class="p">(</span><span class="s2">&quot;Save&quot;</span><span class="p">);</span>
<span class="nx">savebutton</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">validate</span><span class="p">())</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;You can save now...&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="nx">savebutton</span><span class="p">);</span>
</pre></div>
</div>
<p>The save button gets an execute listener which first validates the form and if the form is valid, alerts the user. The reset button is analogical.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// add a reset button</span>
<span class="kd">var</span> <span class="nx">resetbutton</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Button</span><span class="p">(</span><span class="s2">&quot;Reset&quot;</span><span class="p">);</span>
<span class="nx">resetbutton</span><span class="p">.</span><span class="nx">addListener</span><span class="p">(</span><span class="s2">&quot;execute&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">form</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
<span class="p">});</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">addButton</span><span class="p">(</span><span class="nx">resetbutton</span><span class="p">);</span>
</pre></div>
</div>
<p>Now the form is complete and we can use the default rendere to render the form and add it to the document.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the view and add it</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">createView</span><span class="p">(),</span> <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">});</span>
</pre></div>
</div>
<p>Running this code will create a form as described above and will look like this.</p>
<p><img alt="Result of the code example" src="../../_images/codesampleform.png" /></p>
<p>If you want to get another look &amp; feel, you can specify a different renderer in the createView method.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the view and add it</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span>
  <span class="nx">form</span><span class="p">.</span><span class="nx">createView</span><span class="p">(</span><span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">renderer</span><span class="p">.</span><span class="nx">SinglePlaceholder</span><span class="p">),</span>
  <span class="p">{</span><span class="nx">left</span><span class="o">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">10</span><span class="p">}</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Just give it a try in the <a class="reference external" href="http://demo.qooxdoo.org/1.2.x/playground/#%7B%22code%22%3A%20%22%252F%252F%2520create%2520the%2520form%250Avar%2520form%2520%253D%2520new%2520qx.ui.form.Form()%253B%250A%250A%252F%252F%2520create%2520the%2520first%2520two%2520input%2520fields%250Avar%2520firstname%2520%253D%2520new%2520qx.ui.form.TextField()%253B%250Afirstname.setRequired(true)%253B%250Avar%2520lastname%2520%253D%2520new%2520qx.ui.form.TextField()%253B%250Alastname.setRequired(true)%253B%250A%250A%252F%252F%2520add%2520the%2520first%2520group%250Aform.addGroupHeader(%2522Name%2522)%253B%250Aform.add(firstname%252C%2520%2522Firstname%2522)%253B%250Aform.add(lastname%252C%2520%2522Lastname%2522)%253B%250A%250A%252F%252F%2520add%2520the%2520second%2520group%250Aform.addGroupHeader(%2522Contact%2522)%253B%250Aform.add(new%2520qx.ui.form.TextField()%252C%2520%2522Email%2522%252C%2520qx.util.Validate.email())%253B%250Aform.add(new%2520qx.ui.form.TextField()%252C%2520%2522Phone%2522)%253B%250A%250A%252F%252F%2520add%2520a%2520save%2520button%250Avar%2520savebutton%2520%253D%2520new%2520qx.ui.form.Button(%2522Save%2522)%253B%250Asavebutton.addListener(%2522execute%2522%252C%2520function()%2520%257B%250A%2520%2520if%2520(form.validate())%2520%257B%250A%2520%2520%2520%2520alert(%2522You%2520can%2520save%2520now...%2522)%253B%250A%2520%2520%257D%250A%257D)%253B%250Aform.addButton(savebutton)%253B%250A%250A%252F%252F%2520add%2520a%2520reset%2520button%250Avar%2520resetbutton%2520%253D%2520new%2520qx.ui.form.Button(%2522Reset%2522)%253B%250Aresetbutton.addListener(%2522execute%2522%252C%2520function()%2520%257B%250A%2520%2520form.reset()%253B%250A%257D)%253B%250Aform.addButton(resetbutton)%253B%250A%250A%252F%252F%2520create%2520the%2520view%2520and%2520add%2520it%250Athis.getRoot().add(form.createView()%252C%2520%257Bleft%253A%252010%252C%2520top%253A%252010%257D)%253B%22%7D">playground</a>.</p>
</div>
</div>
<div class="section" id="pages-gui-toolkit-ui-form-handling-form-controller">
<span id="id6"></span><h2>Form Controller<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-form-controller" title="Permalink to this headline">¶</a></h2>
<p>Data binding for a form certainly is a handy feature. Using a model to access data in the form brings form handling to another level of abstraction. That&#8217;s exactly what the form controller offers.</p>
<p>The form controller is fully covered in the <a class="reference internal" href="../data_binding/controller.html#pages-data-binding-controller-form-controller"><em>data binding documentation</em></a>.</p>
<div class="section" id="pages-gui-toolkit-ui-form-handling-sample-usage-4">
<span id="id7"></span><h3>Sample Usage<a class="headerlink" href="#pages-gui-toolkit-ui-form-handling-sample-usage-4" title="Permalink to this headline">¶</a></h3>
<p>The following example shows how to use the controller with a simple form, which contains three
text fields: one for salutation, one for first name and one for last name.</p>
<p>First, we create the form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the form</span>
<span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">Form</span><span class="p">();</span>
</pre></div>
</div>
<p>In a second step we add the three text fields. Important here is, that if no name is given - as in the first two cases - each label will also be used as a name. For that all spaces in the label are being removed.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// add the first TextField (&quot;Salutation&quot; will be the property name)</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">(),</span> <span class="s2">&quot;Salutation&quot;</span><span class="p">);</span>
<span class="c1">// add the second TextField (&quot;FirstName&quot; will be the property name)</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">(),</span> <span class="s2">&quot;First Name&quot;</span><span class="p">);</span>
<span class="c1">// add the third TextField (&quot;last&quot; will be the property name)</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">ui</span><span class="p">.</span><span class="nx">form</span><span class="p">.</span><span class="nx">TextField</span><span class="p">(),</span> <span class="s2">&quot;Last Name&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;last&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>After we add the text fields, we can add the view to the application root.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// add the form to the root</span>
<span class="k">this</span><span class="p">.</span><span class="nx">getRoot</span><span class="p">().</span><span class="nx">add</span><span class="p">(</span><span class="nx">form</span><span class="p">.</span><span class="nx">createView</span><span class="p">());</span>
</pre></div>
</div>
<p>Now that the form has been created, we can take care of the data binding controller. We simply supply the form instance as an argument to the constructor. But we don&#8217;t have a model yet, so we just pass <tt class="docutils literal"><span class="pre">null</span></tt> for the model.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the controller with the form</span>
<span class="kd">var</span> <span class="nx">controller</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">qx</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">controller</span><span class="p">.</span><span class="nx">Form</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">form</span><span class="p">);</span>
</pre></div>
</div>
<p>The final step for data binding is creating the actual model.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// create the model</span>
<span class="kd">var</span> <span class="nx">model</span> <span class="o">=</span> <span class="nx">controller</span><span class="p">.</span><span class="nx">createModel</span><span class="p">();</span>
</pre></div>
</div>
<p>Take a look at the following sequence diagram to see how it internally works.
<img alt="Creation of the model" src="../../_images/sd-createmodel-473x400.png" /></p>
<p>Now we have managed to setup a form and a model connected by bidirectional bindings. So we can simply use the model to set values in the form.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="c1">// set some values in the form</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">setSalutation</span><span class="p">(</span><span class="s2">&quot;Mr.&quot;</span><span class="p">);</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">setFirstName</span><span class="p">(</span><span class="s2">&quot;Martin&quot;</span><span class="p">);</span>
<span class="nx">model</span><span class="p">.</span><span class="nx">setLast</span><span class="p">(</span><span class="s2">&quot;Wittemann&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>As you can see here, the properties (and therefore setters) are defined according to the names we gave the text fields when adding them.</p>
<p><a class="reference external" href="http://demo.qooxdoo.org/1.2.x/playground/#%7B%22code%22%3A%20%22%252F%252F%2520create%2520the%2520form%250Avar%2520form%2520%253D%2520new%2520qx.ui.form.Form()%253B%250A%250A%252F%252F%2520add%2520the%2520first%2520TextField%2520(Salutation%2520will%2520be%2520the%2520property%2520name)%250Aform.add(new%2520qx.ui.form.TextField()%252C%2520%2522Salutation%2522)%253B%250A%252F%252F%2520add%2520the%2520second%2520TextField%2520(FirstName%2520will%2520be%2520the%2520property%2520name)%250Aform.add(new%2520qx.ui.form.TextField()%252C%2520%2522First%2520Name%2522)%253B%250A%252F%252F%2520add%2520the%2520third%2520TextField%2520(last%2520will%2520be%2520the%2520property%2520name)%250Aform.add(new%2520qx.ui.form.TextField()%252C%2520%2522Last%2520Name%2522%252C%2520null%252C%2520%2522last%2522)%253B%250A%250A%252F%252F%2520add%2520the%2520form%2520to%2520the%2520root%250Athis.getRoot().add(form.createView())%253B%250A%250A%252F%252F%2520create%2520the%2520controller%2520with%2520the%2520form%250Avar%2520controller%2520%253D%2520new%2520qx.data.controller.Form(null%252C%2520form)%253B%250A%252F%252F%2520create%2520the%2520model%250Avar%2520model%2520%253D%2520controller.createModel()%253B%250A%250A%252F%252F%2520set%2520some%2520values%2520in%2520the%2520form%250Amodel.setSalutation(%2522Mr.%2522)%253B%250Amodel.setFirstName(%2522Martin%2522)%253B%250Amodel.setLast(%2522Wittemann%2522)%253B%250A%22%7D">See the code in action</a> in the playground.</p>
</div>
</div>
<div class="section" id="still-to-come">
<span id="pages-gui-toolkit-ui-form-handling-still-to-come"></span><h2>Still to come...<a class="headerlink" href="#still-to-come" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference external" href="http://bugzilla.qooxdoo.org/show_bug.cgi?id=2685">A way to create a form out of a JSON definition</a></li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Form Handling</a><ul>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-idea-1">Idea</a></li>
<li><a class="reference internal" href="#demos">Demos</a><ul>
<li><a class="reference internal" href="#widgets">Widgets</a></li>
<li><a class="reference internal" href="#validation-and-resetting">Validation and Resetting</a></li>
<li><a class="reference internal" href="#rendering">Rendering</a></li>
<li><a class="reference internal" href="#data-binding">Data Binding</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interfaces">Interfaces</a><ul>
<li><a class="reference internal" href="#form">Form</a></li>
<li><a class="reference internal" href="#executable">Executable</a></li>
<li><a class="reference internal" href="#range">Range</a></li>
<li><a class="reference internal" href="#number-string-color-date-boolean">Number / String / Color / Date / Boolean</a><ul>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-interfaces-1">Interfaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#model-modelselection">Model / ModelSelection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-widgets2">Widgets</a></li>
<li><a class="reference internal" href="#sample-usage">Sample Usage</a></li>
<li><a class="reference internal" href="#migrating-to-the-new-api">Migrating to the new API</a><ul>
<li><a class="reference internal" href="#iformelement">IFormElement</a></li>
<li><a class="reference internal" href="#checkbox-and-radiobutton">CheckBox and RadioButton</a></li>
<li><a class="reference internal" href="#changevalue-on-list-and-selectbox">changeValue on List and SelectBox</a></li>
<li><a class="reference internal" href="#label">Label</a></li>
</ul>
</li>
<li><a class="reference internal" href="#validation">Validation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#synchronous">Synchronous</a><ul>
<li><a class="reference internal" href="#required-form-fields">Required Form Fields</a></li>
<li><a class="reference internal" href="#default-validator">Default Validator</a></li>
<li><a class="reference internal" href="#custom-validator">Custom Validator</a></li>
<li><a class="reference internal" href="#validation-in-the-context-of-the-form">Validation in the context of the form</a></li>
</ul>
</li>
<li><a class="reference internal" href="#asynchronous">Asynchronous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#serialization">Serialization</a><ul>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-idea-2">Idea</a></li>
<li><a class="reference internal" href="#common-scenarios">Common Scenarios</a><ul>
<li><a class="reference internal" href="#need-something-special">Need something special?</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#resetting">Resetting</a><ul>
<li><a class="reference internal" href="#how-it-works">How It Works</a></li>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-sample-usage-2">Sample Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#form-object">Form Object</a><ul>
<li><a class="reference internal" href="#what-is-it">What is it?</a></li>
<li><a class="reference internal" href="#renderer">Renderer</a><ul>
<li><a class="reference internal" href="#default-single-column">Default (Single Column)</a></li>
<li><a class="reference internal" href="#double-column">Double Column</a></li>
<li><a class="reference internal" href="#single-column-with-placeholer">Single Column with Placeholer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-sample-usage-3">Sample Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-form-controller">Form Controller</a><ul>
<li><a class="reference internal" href="#pages-gui-toolkit-ui-form-handling-sample-usage-4">Sample Usage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#still-to-come">Still to come...</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="ui_develop.html"
                                  title="previous chapter">Custom Widgets</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="ui_menu_handling.html"
                                  title="next chapter">Menu Handling</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../../_sources/pages/gui_toolkit/ui_form_handling.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2010, qooxdoo developers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0b2.
    </div>
  </body>
</html>